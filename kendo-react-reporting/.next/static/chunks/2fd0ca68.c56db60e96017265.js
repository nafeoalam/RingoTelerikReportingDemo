(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[165],{619:function(e,t,i){var n,s,a,r=i(9755);n=function(){var e,t,i,n,s,a,o,l,d,h,u,c,p,f,m,g,v,_,b,k,w,y,x,C,T,S,I,D,F,E,A,z,P,H,N,R,O,M,B,L,V,U,W,j,G,q,K,$,Y,Q,X,J,Z,ee,et,ei,en,es,ea,er,eo,el,ed,eh,eu,ec,ep,ef,em,eg,ev,e_,eb,ek,ew,ey,ex,eC,eT,eS,eI,eD,eF,eE,eA,ez,eP,eH,eN,eR,eO,eM,eB,eL,eV,eU,eW,ej,eG,eq,eK,e$,eY,eQ,eX,eJ,eZ,e0,e1,e2,e3,e9,e6,e5,e8,e4,e7,te,tt,ti,tn,ts,ta,tr,to,tl,td,th,tu,tc,tp,tf,tm,tg,tv,t_,tb,tk,tw,ty,tx,tC,tT,tS,tI,tD,tF,tE,tA,tz,tP,tH,tN,tR,tO,tM,tB,tL,tV,tU,tW,tj,tG,tq,tK,t$,tY,tQ,tX,tJ,tZ,t0,t1,t2,t3,t9,t6,t5,t8,t4,t7,ie,it,ii,is,ia,ir,io,il,id,ih,iu,ic,ip,im,ig,iv,i_,ib,ik,iw,iy,ix,iC,iT,iS,iI,iD,iF,iE,iA,iz,iP,iH,iN,iR,iO,iM,iB,iL,iV,iU,iW,ij,iG,iq,iK,i$,iY,iQ,iX,iJ,iZ,i0,i1,i2,i3,i9,i6,i5,i8,i4,i7,ne,nt,ni,nn,ns,na,nr,no,nl,nd,nh,nu,nc,np,nf,nm,ng,nv,n_,nb,nk,nw,ny,nx,nC,nT,nS,nI,nD,nF,nE,nA,nz,nP,nH,nN,nR,nO,nM,nB,nL,nV,nU,nW,nj,nG,nq,nK,n$,nY,nQ,nX,nJ,nZ,n0,n1,n2,n3,n9,n6,n5,n8,n4,n7,se,st,si,sn,ss,sa,sr,so,sl,sd,sh,su,sc,sp,sf,sm,sg,sv,s_,sb,sk,sw,sy,sx,sC,sT,sS,sI,sD,sF,sE,sA,sz,sP,sH,sN,sR,sO,sM,sB,sL,sV,sU,sW,sj,sG,sq,sK,s$,sY,sQ,sX,sJ,sZ,s0,s1,s2,s3,s9,s6,s5,s8,s4,s7,ae,at,ai,an,as,aa,ar,ao,al,ad,ah,au,ac,ap,af,am,ag,av,a_,ab,ak,aw,ay,ax,aC,aT,aS,aI,aD,aF,aE,aA,az,aP,aH,aN,aR,aO,aM,aB,aL,aV,aU,aW,aj,aG,aq,aK,a$,aY,aQ,aX,aJ,aZ,a0,a1,a2,a3,a9,a6,a5,a8,a4,a7,re,rt,ri,rn,rs,ra,rr,ro,rl,rd,rh,ru,rc,rp,rf,rm,rg,rv,r_,rb,rk,rw,ry,rx,rC,rT,rS,rI,rD,rF,rE,rA,rz,rP,rH,rN,rR,rO,rM,rB,rL,rV,rU,rW,rj,rG,rq,rK,r$,rY,rQ,rX,rJ,rZ,r0,r1,r2,r3,r9,r6,r5,r8,r4,r7,oe,ot,oi,on,os,oa,or,oo,ol,od,oh,ou,oc,op,of,om,og,ov,o_,ob,ok,ow,oy,ox,oC,oT,oS,oI,oD,oF,oE,oA,oz,oP,oH,oN,oR,oO,oM,oB,oL,oV,oU,oW,oj,oG,oq,oK,o$,oY,oQ,oX,oJ,oZ,o0,o1,o2,o3,o9,o6,o5,o8,o4,o7,le,lt,li,ln,ls,la,lr,lo,ll,ld,lh,lu,lc,lp,lf,lm,lg,lv,l_,lb,lk,lw,ly,lx,lC,lT,lS,lI,lD,lF,lE,lA,lz,lP,lH,lN,lR,lO,lM,lB,lL,lV,lU,lW,lj,lG,lq,lK,l$,lY,lQ,lX,lJ,lZ,l0,l1,l2,l3,l9,l6,l5,l8,l4,l7,de,dt,di,dn,ds,da,dr,dl,dd,dh,du,dc,dp,df,dm,dg,dv,d_,db,dk,dw,dy,dx,dC,dT,dS,dI,dD,dF,dE,dA,dz,dP,dH,dN,dR,dO,dM,dB,dL,dV,dU,dW,dj,dG,dq,dK,d$,dY,dQ,dX,dJ,dZ,d0,d1,d2,d3,d9,d6,d5,d8,d4,d7,he,ht,hi,hn,hs,ha,hr,ho,hl,hd,hh,hu,hc,hp,hf,hm,hg,hv,h_,hb,hk,hw,hy,hx,hC,hT,hS,hI,hD,hF,hE,hA,hz,hP,hH,hN,hR,hO,hM,hB,hL,hV,hU,hW,hj,hG,hq,hK,h$,hY,hQ,hX,hJ,hZ,h0,h1,h2,h3,h9,h6,h5,h8,h4,h7,ue,ut,ui,un,us,ua,ur,uo,ul,ud,uh,uu,uc,up,uf,um,ug,uv,u_,ub,uk,uw,uy,ux,uC,uT,uS,uI,uD,uF,uE,uA,uz,uP,uH,uN,uR,uO,uM,uB,uL,uV,uU,uW,uj,uG,uq={name:"@progress/kendo-ui",productName:"Kendo UI",productCodes:["KENDOUICOMPLETE","KENDOUI","KENDOUI","KENDOUICOMPLETE"],publishDate:0,version:"2022.3.2112".replace(/^\s+|\s+$/g,""),licensingDocsUrl:"https://docs.telerik.com/kendo-ui/intro/installation/using-license-code"};(function(e,t,i){var n,s=t.kendo=t.kendo||{cultures:{}},a=e.extend,o=e.each,l=Array.isArray,d=e.noop,h=Math,u=t.JSON||{},c={},p=/%/,f=/\{(\d+)(:[^\}]+)?\}/g,m=/(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+)?/i,g=/^(\+|-?)\d+(\.?)\d*$/,v="function",_="string",b="number",k="object",w="null",y="boolean",x="undefined",C="aria-labelledby",T="aria-label",S={},I={},D=[].slice,F=["themeColor","fillMode","shape","size","rounded","positionMode"],E=function(){var e,t,n,s,a,o,l=arguments,d=arguments[0]||{},h=1,u=arguments.length,c=!1;for("boolean"==typeof d&&(c=d,d=arguments[h]||{},h++),"object"!=typeof d&&"function"!=typeof d&&(d={}),h===u&&(d=this,h--);h<u;h++)if(null!=(a=l[h]))for(s in a)"filters"!=s&&"concat"!=s&&":"!=s&&(e=d[s],d!==(n=a[s])&&(c&&n&&(r.isPlainObject(n)||(t=Array.isArray(n)))?(t?(t=!1,o=e&&Array.isArray(e)?e:[]):o=e&&r.isPlainObject(e)?e:{},d[s]=E(c,o,n)):n!==i&&(d[s]=n)));return d};function A(){}s.version="2022.3.2112".replace(/^\s+|\s+$/g,""),A.extend=function(e){var t,i,n=function(){},s=this,r=e&&e.init?e.init:function(){s.apply(this,arguments)};for(t in n.prototype=s.prototype,i=r.fn=r.prototype=new n,e)null!=e[t]&&e[t].constructor===Object?i[t]=a(!0,{},n.prototype[t],e[t]):i[t]=e[t];return i.constructor=r,r.extend=s.extend,r},A.prototype._initOptions=function(e){this.options=G({},this.options,e)};var z=s.isFunction=function(e){return"function"==typeof e},P=function(){this._defaultPrevented=!0},H=function(){return!0===this._defaultPrevented},N=A.extend({init:function(){this._events={}},bind:function(e,t,n){var s,a,r,o,l=this,d=typeof e===_?[e]:e,h=typeof t===v;if(t===i){for(s in e)l.bind(s,e[s]);return l}for(s=0,a=d.length;s<a;s++)e=d[s],(o=h?t:t[e])&&(n&&(r=o,(o=function(){l.unbind(e,o),r.apply(l,arguments)}).original=r),(l._events[e]=l._events[e]||[]).push(o));return l},one:function(e,t){return this.bind(e,t,!0)},first:function(e,t){var i,n,s,a=typeof e===_?[e]:e,r=typeof t===v;for(i=0,n=a.length;i<n;i++)e=a[i],(s=r?t:t[e])&&(this._events[e]=this._events[e]||[]).unshift(s);return this},trigger:function(e,t){var i,n,s=this._events[e];if(s){for((t=t||{}).sender=this,t._defaultPrevented=!1,t.preventDefault=P,t.isDefaultPrevented=H,i=0,n=(s=s.slice()).length;i<n;i++)s[i].call(this,t);return!0===t._defaultPrevented}return!1},unbind:function(e,t){var n,s=this._events[e];if(e===i)this._events={};else if(s){if(t)for(n=s.length-1;n>=0;n--)s[n]!==t&&s[n].original!==t||s.splice(n,1);else this._events[e]=[]}return this}}),R=/^\w+/,O=/\$\{([^}]*)\}/g,M=/\\\}/g,B=/__CURLY__/g,L=/\\#/g,V=/__SHARP__/g,U=["","0","00","000","0000"];function W(e,t,i){return(i=(t=t||2)-(e+="").length)?U[t].substring(0,i)+e:e}function j(e,t){var i=s._outerWidth,n=s._outerHeight,a=e.parent(".k-animation-container"),r=a[0].style;a.is(":hidden")&&a.css({display:"",position:""}),p.test(r.width)||p.test(r.height)||a.css({width:t?i(e)+1:i(e),height:n(e),boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"})}function G(e){var i=arguments,n=1,a=arguments.length;for(n=1;n<a;n++)(function e(i,n){var a,r,o,l,d,h=s.data.ObservableArray,u=s.data.LazyObservableArray,c=s.data.DataSource,p=s.data.HierarchicalDataSource;for(a in n)!(l=(o=typeof(r=n[a]))===k&&null!==r?r.constructor:null)||l===Array||l===h||l===u||l===c||l===p||l===RegExp||s.isFunction(t.ArrayBuffer)&&l===ArrayBuffer||r instanceof HTMLElement?o!==x&&(i[a]=r):r instanceof Date?i[a]=new Date(r.getTime()):z(r.clone)?i[a]=r.clone():(d=i[a],i[a]=typeof d===k&&d||{},e(i[a],r));return i})(e,i[n]);return e}function q(e,t,n){for(var s in t)if(t.hasOwnProperty(s)&&t[s].test(e))return s;return n!==i?n:e}function K(e){return e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()})}function $(t,i){var n,a={};return document.defaultView&&document.defaultView.getComputedStyle?(n=document.defaultView.getComputedStyle(t,""),i&&e.each(i,function(e,t){a[t]=n.getPropertyValue(t)})):(n=t.currentStyle,i&&e.each(i,function(e,t){a[t]=n[K(t)]})),s.size(a)||(a=n),a}n={paramName:"data",useWithBlock:!0,render:function(e,t){var i,n,s="";for(i=0,n=t.length;i<n;i++)s+=e(t[i]);return s},compile:function(e,t){var i,n,r,o=a({},this,t),l=o.paramName,d=l.match(R)[0],h=o.useWithBlock,u="var $kendoOutput, $kendoHtmlEncode = kendo.htmlEncode;";if(z(e))return e;for(u+=(h?"with("+l+"){":"")+"$kendoOutput=",n=e.replace(M,"__CURLY__").replace(O,"#=$kendoHtmlEncode($1)#").replace(B,"}").replace(L,"__SHARP__").split("#"),r=0;r<n.length;r++)u+=function(e,t){if(t)return"'"+e.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'";var i=e.charAt(0),n=e.substring(1);return"="===i?"+("+n+")+":":"===i?"+$kendoHtmlEncode("+n+")+":";"+e+";$kendoOutput+="}(n[r],r%2==0);u+=h?";}":";",u=(u+="return $kendoOutput;").replace(V,"#");try{return(i=Function(d,u))._slotCount=Math.floor(n.length/2),i}catch(t){throw Error(s.format("Invalid template:'{0}' Generated code:'{1}'",e,u))}}},function(){var e,t,i,n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},a={}.toString;function r(e){return n.lastIndex=0,n.test(e)?'"'+e.replace(n,function(e){var t=s[e];return typeof t===_?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}typeof Date.prototype.toJSON!==v&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?W(this.getUTCFullYear(),4)+"-"+W(this.getUTCMonth()+1)+"-"+W(this.getUTCDate())+"T"+W(this.getUTCHours())+":"+W(this.getUTCMinutes())+":"+W(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),typeof u.stringify!==v&&(u.stringify=function(n,s,o){var l;if(e="",t="",typeof o===b)for(l=0;l<o;l+=1)t+=" ";else typeof o===_&&(t=o);if(i=s,s&&typeof s!==v&&(typeof s!==k||typeof s.length!==b))throw Error("JSON.stringify");return function n(s,o){var l,d,h,u,c,p,f=e,m=o[s];if(m&&typeof m===k&&typeof m.toJSON===v&&(m=m.toJSON(s)),typeof i===v&&(m=i.call(o,s,m)),(p=typeof m)===_)return r(m);if(p===b)return isFinite(m)?String(m):w;if(p===y||p===w)return String(m);if(p===k){if(!m)return w;if(e+=t,c=[],"[object Array]"===a.apply(m)){for(u=m.length,l=0;l<u;l++)c[l]=n(l,m)||w;return h=0===c.length?"[]":e?"[\n"+e+c.join(",\n"+e)+"\n"+f+"]":"["+c.join(",")+"]",e=f,h}if(i&&typeof i===k)for(u=i.length,l=0;l<u;l++)typeof i[l]===_&&(h=n(d=i[l],m))&&c.push(r(d)+(e?": ":":")+h);else for(d in m)Object.hasOwnProperty.call(m,d)&&(h=n(d,m))&&c.push(r(d)+(e?": ":":")+h);return h=0===c.length?"{}":e?"{\n"+e+c.join(",\n"+e)+"\n"+f+"}":"{"+c.join(",")+"}",e=f,h}}("",{"":n})})}(),function(){var t=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|"[^"]*"|'[^']*'/g,n=/^(n|c|p|e)(\d*)$/i,a=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,r=/\,/g,o="en-US",l={}.toString;function d(e){if(e){if(e.numberFormat)return e;if(typeof e===_){var t=s.cultures;return t[e]||t[e.split("-")[0]]||null}}return null}function u(e){return e&&(e=d(e)),e||s.cultures.current}s.cultures["en-US"]={name:o,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSize:[3],percent:{pattern:["-n %","n %"],decimals:2,",":",",".":".",groupSize:[3],symbol:"%"},currency:{name:"US Dollar",abbr:"USD",pattern:["($n)","$n"],decimals:2,",":",",".":".",groupSize:[3],symbol:"$"}},calendars:{standard:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December"],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},AM:["AM","am","AM"],PM:["PM","pm","PM"],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",s:"yyyy'-'MM'-'ddTHH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},"/":"/",":":":",firstDay:0,twoDigitYearMax:2029}}},s.culture=function(e){var t,n=s.cultures;if(e===i)return n.current;(t=d(e)||n[o]).calendar=t.calendars.standard,n.current=t},s.findCulture=d,s.getCulture=u,s.culture(o);var c=function(e,t,n,s){var a,r,o,l,d,h,u=e.indexOf(s["."]),c=s.groupSize.slice(),p=c.shift();if(n=-1!==u?u:n+1,(r=(a=e.substring(t,n)).length)>=p){for(o=r,l=[];o>-1;)if((d=a.substring(o-p,o))&&l.push(d),o-=p,0===(p=(h=c.shift())!==i?h:p)){o>0&&l.push(a.substring(0,o));break}a=l.reverse().join(s[","]),e=e.substring(0,t)+a+e.substring(n)}return e},p=function(e,t,i){return t=t||0,e=Math.round(+((e=e.toString().split("e"))[0]+"e"+(e[1]?+e[1]+t:t))),i&&(e=-e),(e=+((e=e.toString().split("e"))[0]+"e"+(e[1]?+e[1]-t:-t))).toFixed(Math.min(t,20))},m=function(e,s,o){if(s){if("[object Date]"===l.call(e)){var d,f,m,g;return d=s,m=(f=u(o).calendars.standard).days,g=f.months,(d=f.patterns[d]||d).replace(t,function(t){var n,s,a;return"d"===t?s=e.getDate():"dd"===t?s=W(e.getDate()):"ddd"===t?s=m.namesAbbr[e.getDay()]:"dddd"===t?s=m.names[e.getDay()]:"M"===t?s=e.getMonth()+1:"MM"===t?s=W(e.getMonth()+1):"MMM"===t?s=g.namesAbbr[e.getMonth()]:"MMMM"===t?s=g.names[e.getMonth()]:"yy"===t?s=W(e.getFullYear()%100):"yyyy"===t?s=W(e.getFullYear(),4):"h"===t?s=e.getHours()%12||12:"hh"===t?s=W(e.getHours()%12||12):"H"===t?s=e.getHours():"HH"===t?s=W(e.getHours()):"m"===t?s=e.getMinutes():"mm"===t?s=W(e.getMinutes()):"s"===t?s=e.getSeconds():"ss"===t?s=W(e.getSeconds()):"f"===t?s=h.floor(e.getMilliseconds()/100):"ff"===t?((s=e.getMilliseconds())>99&&(s=h.floor(s/10)),s=W(s)):"fff"===t?s=W(e.getMilliseconds(),3):"tt"===t?s=12>e.getHours()?f.AM[0]:f.PM[0]:"zzz"===t?(a=(n=e.getTimezoneOffset())<0,s=h.abs(n/60).toString().split(".")[0],n=h.abs(n)-60*s,s=(a?"+":"-")+W(s)+":"+W(n)):"zz"!==t&&"z"!==t||(a=(s=e.getTimezoneOffset()/60)<0,s=h.abs(s).toString().split(".")[0],s=(a?"+":"-")+("zz"===t?W(s):s)),s!==i?s:t.slice(1,t.length-1)})}if(typeof e===b)return function(e,t,s){var o,l,d,h,f,m,g,v,_,b,k,w,y,x,C,T,S,I,D,F,E=(s=u(s)).numberFormat,A=E["."],z=E.decimals,P=E.pattern[0],H=[],N=e<0,R="",O="",M=-1;if(e===i)return"";if(!isFinite(e))return e;if(!t)return s.name.length?e.toLocaleString():e.toString();if(f=n.exec(t)){if(d="p"===(t=f[1].toLowerCase()),((l="c"===t)||d)&&(A=(E=l?E.currency:E.percent)["."],z=E.decimals,o=E.symbol,P=E.pattern[N?0:1]),(h=f[2])&&(z=+h),"e"===t)return(h?e.toExponential(z):e.toExponential()).replace(".",E["."]);if(d&&(e*=100),N=(e=p(e,z))<0,m=(e=e.split("."))[0],g=e[1],N&&(m=m.substring(1)),O=c(m,0,m.length,E),g&&(O+=A+g),"n"===t&&!N)return O;for(e="",_=0,b=P.length;_<b;_++)e+="n"===(k=P.charAt(_))?O:"$"===k||"%"===k?o:k;return e}if((t.indexOf("'")>-1||t.indexOf('"')>-1||t.indexOf("\\")>-1)&&(t=t.replace(a,function(e){var t=e.charAt(0).replace("\\",""),i=e.slice(1).replace(t,"");return H.push(i),"??"})),t=t.split(";"),N&&t[1])t=t[1],y=!0;else if(0===e&&t[2]){if(-1==(t=t[2]).indexOf("#")&&-1==t.indexOf("0"))return t}else t=t[0];if((d=-1!=t.indexOf("%"))&&(e*=100),(l=-1!=(D=t.indexOf("$")))&&"\\"===t[D-1]&&(t=t.split("\\").join(""),l=!1),(l||d)&&(A=(E=l?E.currency:E.percent)["."],z=E.decimals,o=E.symbol),(w=t.indexOf(",")>-1)&&(t=t.replace(r,"")),x=t.indexOf("."),b=t.length,-1!=x){if(g=(g=(g=e.toString().split("e"))[1]?p(e,Math.abs(g[1])):g[0]).split(".")[1]||"",S=(T=t.lastIndexOf("0")-x)>-1,I=(C=t.lastIndexOf("#")-x)>-1,_=g.length,S||I||(b=(t=t.substring(0,x)+t.substring(x+1)).length,x=-1,_=0),S&&T>C)_=T;else if(C>T){if(I&&_>C){for(var B=p(e,C,N);"0"===B.charAt(B.length-1)&&C>0&&C>T;)B=p(e,--C,N);_=C}else S&&_<T&&(_=T)}}if(e=p(e,_,N),C=t.indexOf("#"),T=t.indexOf("0"),M=-1==C&&-1!=T?T:-1!=C&&-1==T?C:C>T?T:C,C=t.lastIndexOf("#"),T=t.lastIndexOf("0"),F=-1==C&&-1!=T?T:-1!=C&&-1==T||C>T?C:T,M==b&&(F=M),-1!=M){for(m=(O=e.toString().split("."))[0],g=O[1]||"",v=m.length,g.length,N&&-1*e>=0&&(N=!1),e=t.substring(0,M),N&&!y&&(e+="-"),_=M;_<b;_++){if(k=t.charAt(_),-1==x){if(F-_<v){e+=m;break}}else if(-1!=T&&T<_&&(R=""),x-_<=v&&x-_>-1&&(e+=m,_=x),x===_){e+=(g?A:"")+g,_+=F-x+1;continue}"0"===k?(e+=k,R=k):"#"===k&&(e+=R)}if(w&&(e=c(e,M+(N&&!y?1:0),Math.max(F,v+M),E)),F>=M&&(e+=t.substring(F+1)),l||d){for(O="",_=0,b=e.length;_<b;_++)O+="$"===(k=e.charAt(_))||"%"===k?o:k;e=O}if(b=H.length)for(_=0;_<b;_++)e=e.replace("??",H[_])}return e}(e,s,o)}return e!==i?e:""};s.format=function(e){var t=arguments;return e.replace(f,function(e,i,n){return m(t[parseInt(i,10)+1],n?n.substring(1):"")})},s._extractFormat=function(e){return"{0:"===e.slice(0,3)&&(e=e.slice(3,e.length-1)),e},s._activeElement=function(){try{return document.activeElement}catch(e){return document.documentElement.activeElement}},s._round=p,s._outerWidth=function(t,i){return e(t).outerWidth(i||!1)||0},s._outerHeight=function(t,i){return e(t).outerHeight(i||!1)||0},s.toString=m}(),function(){var t=/\u00A0/g,n=/\s/g,a=/[eE][\-+]?[0-9]+/,r=/[+|\-]\d{1,2}/,o=/[+|\-]\d{1,2}:?\d{2}/,d=/^\/Date\((.*?)\)\/$/,u=/[+-]\d*/,c=[[],["G","g","F"],["D","d","y","m","T","t"]],p=[["yyyy-MM-ddTHH:mm:ss.fffffffzzz","yyyy-MM-ddTHH:mm:ss.fffffff","yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:ss.fff","ddd MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mmzzz","yyyy-MM-ddTHH:mmzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-dd HH:mm:ss","yyyy/MM/dd HH:mm:ss"],["yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm","yyyy/MM/dd HH:mm"],["yyyy/MM/dd","yyyy-MM-dd","HH:mm:ss","HH:mm"]],f={2:/^\d{1,2}/,3:/^\d{1,3}/,4:/^\d{4}/},m={}.toString;function g(e,t,i){return!(e>=t&&e<=i)}function v(e){return e.charAt(0)}function _(e){var t,i={};for(t in e)i[t]=function(e){for(var t=0,i=e.length,n=[];t<i;t++)n[t]=(e[t]+"").toLowerCase();return n}(e[t]);return i}function k(t,n,a,b){if("[object Date]"===m.call(t))return t;var k,w,y,x=0,C=null;if(t&&0===t.indexOf("/D")&&(C=d.exec(t)))return C=C[1],w=u.exec(C.substring(1)),C=new Date(parseInt(C,10)),w&&(w=("-"===(y=w[0]).substr(0,1)?-1:1)*(60*parseInt((y=y.substring(1)).substr(0,2),10)+parseInt(y.substring(2),10)),C=s.timezone.apply(C,0),C=s.timezone.convert(C,0,-1*w)),C;for(a=s.getCulture(a),n||(n=function(e){var t,i,n,s=h.max(c.length,p.length),a=(e.calendar||e.calendars.standard).patterns,r=[];for(n=0;n<s;n++){for(t=c[n],i=0;i<t.length;i++)r.push(a[t[i]]);r=r.concat(p[n])}return r}(a)),k=(n=l(n)?n:[n]).length;x<k&&!(C=function(t,n,a,l){if(!t)return null;var d,h,u,c,p,m,b,k,w,y,x,C,T,S,I,D=function(e){for(var t=0;n[L]===e;)t++,L++;return t>0&&(L-=1),t},F=function(e){var i=f[e]||RegExp("^\\d{1,"+e+"}"),n=t.substr(V,e).match(i);return n?(n=n[0],V+=n.length,parseInt(n,10)):null},E=function(e,i){for(var n,s,a,r=0,o=e.length,l=0,d=0;r<o;r++)s=(n=e[r]).length,a=t.substr(V,s),i&&(a=a.toLowerCase()),a==n&&s>l&&(l=s,d=r);return l?(V+=l,d+1):null},A=function(){var e=!1;return t.charAt(V)===n[L]&&(V++,e=!0),e},z=a.calendars.standard,P=null,H=null,N=null,R=null,O=null,M=null,B=null,L=0,V=0,U=!1,W=new Date,j=z.twoDigitYearMax||2029,G=W.getFullYear();for(n||(n="d"),(b=z.patterns[n])&&(n=b),m=(n=n.split("")).length;L<m;L++)if(c=n[L],U)"'"===c?U=!1:A();else if("d"===c){if(p=D("d"),z._lowerDays||(z._lowerDays=_(z.days)),null!==N&&p>2)continue;if(null===(N=p<3?F(2):E(z._lowerDays[3==p?"namesAbbr":"names"],!0))||g(N,1,31))return null}else if("M"===c){if(p=D("M"),z._lowerMonths||(z._lowerMonths=_(z.months)),null===(H=p<3?F(2):E(z._lowerMonths[3==p?"namesAbbr":"names"],!0))||g(H,1,12))return null;H-=1}else if("y"===c){if(null===(P=F(p=D("y"))))return null;2==p&&("string"==typeof j&&(j=G+parseInt(j,10)),(P=G-G%100+P)>j&&(P-=100))}else if("h"===c){if(D("h"),12==(R=F(2))&&(R=0),null===R||g(R,0,11))return null}else if("H"===c){if(D("H"),null===(R=F(2))||g(R,0,23))return null}else if("m"===c){if(D("m"),null===(O=F(2))||g(O,0,59))return null}else if("s"===c){if(D("s"),null===(M=F(2))||g(M,0,59))return null}else if("f"===c){if(p=D("f"),I=t.substr(V,p).match(f[3]),null!==(B=F(p))&&(B=parseFloat("0."+I[0],10),B=1e3*s._round(B,3)),null===B||g(B,0,999))return null}else if("t"===c){if(p=D("t"),x=z.AM,C=z.PM,1===p&&(d=x,x=e.map(d,v),h=C,C=e.map(h,v)),!(k=E(C))&&!E(x))return null}else if("z"===c){if(w=!0,p=D("z"),"Z"===t.substr(V,1)){A();continue}if(!(y=t.substr(V,6).match(p>2?o:r))||(T=(y=y[0].split(":"))[0],(S=y[1])||!(T.length>3)||(V=T.length-2,S=T.substring(V),T=T.substring(0,V)),g(T=parseInt(T,10),-12,13))||p>2&&(isNaN(S=parseInt(S=y[0][0]+S,10))||g(S,-59,59)))return null}else if("'"===c)U=!0,A();else if(!A())return null;return l&&!/^\s*$/.test(t.substr(V))?null:(null===P&&null===H&&null===N&&(null!==R||null!==O||M)?(P=G,H=W.getMonth(),N=W.getDate()):(null===P&&(P=G),null===N&&(N=1)),k&&R<12&&(R+=12),w?(T&&(R+=-T),S&&(O+=-S),t=new Date(Date.UTC(P,H,N,R,O,M,B))):(u=t=new Date(P,H,N,R,O,M,B),R||23!==u.getHours()||u.setHours(u.getHours()+2)),P<100&&t.setFullYear(P),t.getDate()!==N&&w===i?null:t)}(t,n[x],a,b));x++);return C}s.parseDate=function(e,t,i){return k(e,t,i,!1)},s.parseExactDate=function(e,t,i){return k(e,t,i,!0)},s.parseInt=function(e,t){var i=s.parseFloat(e,t);return i&&(i|=0),i},s.parseFloat=function(e,i,r){if(!e&&0!==e)return null;if(typeof e===b)return e;e=e.toString();var o,l,d=(i=s.getCulture(i)).numberFormat,h=d.percent,u=d.currency,c=u.symbol,p=h.symbol,f=e.indexOf("-");return a.test(e)?(isNaN(e=parseFloat(e.replace(d["."],".")))&&(e=null),e):f>0?null:(f=f>-1,e.indexOf(c)>-1||r&&r.toLowerCase().indexOf("c")>-1?(o=(d=u).pattern[0].replace("$",c).split("n"),e.indexOf(o[0])>-1&&e.indexOf(o[1])>-1&&(e=e.replace(o[0],"").replace(o[1],""),f=!0)):e.indexOf(p)>-1&&(l=!0,d=h,c=p),isNaN(e=parseFloat(e=e.replace("-","").replace(c,"").replace(t," ").split(d[","].replace(t," ")).join("").replace(n,"").replace(d["."],".")))?e=null:f&&(e*=-1),e&&l&&(e/=100),e)}}(),function(){c._scrollbar=i,c.scrollbar=function(e){if(isNaN(c._scrollbar)||e){var t,i=document.createElement("div");return i.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",i.innerHTML="&nbsp;",document.body.appendChild(i),c._scrollbar=t=i.offsetWidth-i.scrollWidth,document.body.removeChild(i),t}return c._scrollbar},c.isRtl=function(t){return e(t).closest(".k-rtl").length>0};var n,s,a,r,l=document.createElement("table");try{l.innerHTML="<tr><td></td></tr>",c.tbodyInnerHtml=!0}catch(e){c.tbodyInnerHtml=!1}c.touch="ontouchstart"in t;var d=document.documentElement.style,h=c.transitions=!1,u=c.transforms=!1,p="HTMLElement"in t?HTMLElement.prototype:[];c.hasHW3D="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix||"MozPerspective"in d||"msPerspective"in d,c.cssFlexbox="flexWrap"in d||"WebkitFlexWrap"in d||"msFlexWrap"in d,o(["Moz","webkit","O","ms"],function(){var e=this.toString(),t=typeof l.style[e+"Transition"]===_;if(t||typeof l.style[e+"Transform"]===_){var i=e.toLowerCase();return u={css:"ms"!=i?"-"+i+"-":"",prefix:e,event:"o"===i||"webkit"===i?i:""},t&&((h=u).event=h.event?h.event+"TransitionEnd":"transitionend"),!1}}),l=null,c.transforms=u,c.transitions=h,c.devicePixelRatio=t.devicePixelRatio===i?1:t.devicePixelRatio;try{c.screenWidth=t.outerWidth||t.screen?t.screen.availWidth:t.innerWidth,c.screenHeight=t.outerHeight||t.screen?t.screen.availHeight:t.innerHeight}catch(e){c.screenWidth=t.screen.availWidth,c.screenHeight=t.screen.availHeight}c.detectOS=function(e){var i,n=!1,s=[],a=!/mobile safari/i.test(e),r={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.?(\d+(\.\d+)?)?/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},o={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},l={tablet:/playbook|ipad|fire/i},d={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i};for(var h in r)if(r.hasOwnProperty(h)&&(s=e.match(r[h]))){if("windows"==h&&"plugins"in navigator)return!1;(n={}).device=h,n.tablet=q(h,l,!1),n.browser=q(e,d,"default"),n.name=q(h,o),n[n.name]=!0,n.majorVersion=s[2],n.minorVersion=(s[3]||"0").replace("_","."),i=n.minorVersion.replace(".","").substr(0,2),n.flatVersion=n.majorVersion+i+Array(3-(i.length<3?i.length:2)).join("0"),n.cordova=typeof t.PhoneGap!==x||typeof t.cordova!==x,n.appMode=t.navigator.standalone||/file|local|wmapp/.test(t.location.protocol)||n.cordova,n.android&&(c.devicePixelRatio<1.5&&n.flatVersion<400||a)&&(c.screenWidth>800||c.screenHeight>800)&&(n.tablet=h);break}return n};var f=c.mobileOS=c.detectOS(navigator.userAgent);c.wpDevicePixelRatio=f.wp?screen.width/320:0,c.hasNativeScrolling=!1,(f.ios||f.android&&f.majorVersion>2||f.wp)&&(c.hasNativeScrolling=f),c.delayedClick=function(){if(c.touch){if(f.ios)return!0;if(f.android)return!c.browser.chrome||!(c.browser.version<32)&&!(e("meta[name=viewport]").attr("content")||"").match(/user-scalable=no/i)}return!1},c.mouseAndTouchPresent=c.touch&&!(c.mobileOS.ios||c.mobileOS.android),c.detectBrowser=function(e){var t=!1,i=[],n={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome|crios)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(var s in n)if(n.hasOwnProperty(s)&&(i=e.match(n[s]))){(t={})[s]=!0,t[i[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,t.version=parseInt(document.documentMode||i[2],10),t.chrome&&e.match(/(edg)[ \/]([\w.]+)/i)&&(t.chromiumEdge=!0);break}return t},c.browser=c.detectBrowser(navigator.userAgent),!f&&c.touch&&c.browser.safari&&(f=c.mobileOS={ios:!0,tablet:"tablet",device:"ipad"}),c.detectClipboardAccess=function(){var e={copy:!!document.queryCommandSupported&&document.queryCommandSupported("copy"),cut:!!document.queryCommandSupported&&document.queryCommandSupported("cut"),paste:!!document.queryCommandSupported&&document.queryCommandSupported("paste")};return c.browser.chrome&&(e.paste=!1,c.browser.version>=43&&(e.copy=!0,e.cut=!0)),e},c.clipboard=c.detectClipboardAccess(),c.zoomLevel=function(){try{var e=c.browser,i=0,n=document.documentElement;return e.msie&&11==e.version&&n.scrollHeight>n.clientHeight&&!c.touch&&(i=c.scrollbar()),c.touch?n.clientWidth/t.innerWidth:e.msie&&e.version>=10?((top||t).document.documentElement.offsetWidth+i)/(top||t).innerWidth:1}catch(e){return 1}},n=c.browser,s="",a=e(document.documentElement),r=parseInt(n.version,10),n.msie?s="ie":n.mozilla?s="ff":n.safari?s="safari":n.webkit?s="webkit":n.opera?s="opera":n.edge&&(s="edge"),s&&(s="k-"+s+" k-"+s+r),c.mobileOS&&(s+=" k-mobile"),c.cssFlexbox||(s+=" k-no-flexbox"),a.addClass(s),c.eventCapture=document.documentElement.addEventListener;var m=document.createElement("input");c.placeholder="placeholder"in m,c.propertyChangeEvent="onpropertychange"in m,c.input=function(){for(var e,t=["number","date","time","month","week","datetime","datetime-local"],i=t.length,n="test",s={},a=0;a<i;a++)e=t[a],m.setAttribute("type",e),m.value=n,s[e.replace("-","")]="text"!==m.type&&m.value!==n;return s}(),m.style.cssText="float:left;",c.cssFloat=!!m.style.cssFloat,m=null,c.stableSort=function(){for(var e=[{index:0,field:"b"}],t=1;t<513;t++)e.push({index:t,field:"a"});return e.sort(function(e,t){return e.field>t.field?1:e.field<t.field?-1:0}),1===e[0].index}(),c.matchesSelector=p.webkitMatchesSelector||p.mozMatchesSelector||p.msMatchesSelector||p.oMatchesSelector||p.matchesSelector||p.matches||function(t){for(var i=document.querySelectorAll?(this.parentNode||document).querySelectorAll(t)||[]:e(t),n=i.length;n--;)if(i[n]==this)return!0;return!1},c.matchMedia="matchMedia"in t,c.pushState=t.history&&t.history.pushState,c.hashChange="onhashchange"in t,c.customElements="registerElement"in t.document;var g=c.browser.chrome,v=c.browser.crios,b=c.browser.mozilla,k=c.browser.safari;c.msPointers=!g&&t.MSPointerEvent,c.pointers=!g&&!v&&!b&&!k&&t.PointerEvent,c.kineticScrollNeeded=f&&(c.touch||c.msPointers||c.pointers)}();var Y={};function Q(t,i,n,s,r){for(var o,l=0,h=t.length;l<h;l++)(o=e(t[l])).queue(function(){var e,t,l,h;Y.promise(o,(e=i,t=n,l=s,h=r,typeof e===_&&(z(t)&&(h=t,t=400,l=!1),z(l)&&(h=l,l=!1),typeof t===y&&(l=t,t=400),e={effects:e,duration:t,reverse:l,complete:h}),a({effects:{},duration:400,reverse:!1,init:d,teardown:d,hide:!1},e,{completeCallback:e.complete,complete:d})))});return t}e.extend(Y,{enabled:!0,Element:function(t){this.element=e(t)},promise:function(e,t){e.is(":visible")||e.css({display:e.data("olddisplay")||"block"}).css("display"),t.hide&&e.data("olddisplay",e.css("display")).hide(),t.init&&t.init(),t.completeCallback&&t.completeCallback(e),e.dequeue()},disable:function(){this.enabled=!1,this.promise=this.promiseShim},enable:function(){this.enabled=!0,this.promise=this.animatedPromise}}),Y.promiseShim=Y.promise,"kendoAnimate"in e.fn||a(e.fn,{kendoStop:function(e,t){return this.stop(e,t)},kendoAnimate:function(e,t,i,n){return Q(this,e,t,i,n)},kendoAddClass:function(e,t){return s.toggleClass(this,e,t,!0)},kendoRemoveClass:function(e,t){return s.toggleClass(this,e,t,!1)},kendoToggleClass:function(e,t,i){return s.toggleClass(this,e,t,i)}});var X=/&/g,J=/</g,Z=/"/g,ee=/'/g,et=/>/g,ei=function(e){return e.target};c.touch&&(ei=function(e){var t="originalEvent"in e?e.originalEvent.changedTouches:"changedTouches"in e?e.changedTouches:null;return t?document.elementFromPoint(t[0].clientX,t[0].clientY):e.target},o(["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap"],function(t,i){e.fn[i]=function(e){return this.on(i,e)}})),c.touch?c.mobileOS?(c.mousedown="touchstart",c.mouseup="touchend",c.mousemove="touchmove",c.mousecancel="touchcancel",c.click="touchend",c.resize="orientationchange"):(c.mousedown="mousedown touchstart",c.mouseup="mouseup touchend",c.mousemove="mousemove touchmove",c.mousecancel="mouseleave touchcancel",c.click="click",c.resize="resize"):c.pointers?(c.mousemove="pointermove",c.mousedown="pointerdown",c.mouseup="pointerup",c.mousecancel="pointercancel",c.click="pointerup",c.resize="orientationchange resize"):c.msPointers?(c.mousemove="MSPointerMove",c.mousedown="MSPointerDown",c.mouseup="MSPointerUp",c.mousecancel="MSPointerCancel",c.click="MSPointerUp",c.resize="orientationchange resize"):(c.mousemove="mousemove",c.mousedown="mousedown",c.mouseup="mouseup",c.mousecancel="mouseleave",c.click="click",c.resize="resize");var en=/^([a-z]+:)?\/\//i;a(s,{widgets:[],_widgetRegisteredCallbacks:[],ui:s.ui||{},fx:s.fx||function(e){return new s.effects.Element(e)},effects:s.effects||Y,mobile:s.mobile||{},data:s.data||{},dataviz:s.dataviz||{},drawing:s.drawing||{},spreadsheet:{messages:{}},keys:{INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110},support:s.support||c,animate:s.animate||Q,ns:"",attr:function(e){return"data-"+s.ns+e},getShadows:function(e){var t=e.css(s.support.transitions.css+"box-shadow")||e.css("box-shadow"),i=t&&t.match(m)||[0,0,0,0,0],n=h.max(+i[3],+(i[4]||0));return{left:-i[1]+n,right:+i[1]+n,bottom:+i[2]+n}},wrap:function(i,n){var a,r=s._outerWidth,o=s._outerHeight,l=i.parent(),d=r(t);if(l.removeClass("k-animation-container-sm"),l.hasClass("k-animation-container"))j(i,n);else{var h=i[0].style.width,u=i[0].style.height,c=p.test(h),f=p.test(u),m=i.hasClass("k-tooltip")||i.is(".k-menu-horizontal.k-context-menu");a=c||f,!c&&(!n||n&&h||m)&&(h=n?r(i)+1:r(i)),(!f&&(!n||n&&u)||i.is(".k-menu-horizontal.k-context-menu"))&&(u=o(i)),i.wrap(e("<div/>").addClass("k-animation-container").attr("role","region").css({width:h,height:u})),l=i.parent(),a&&i.css({width:"100%",height:"100%",boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"})}return d<r(l)&&(l.addClass("k-animation-container-sm"),j(i,n)),l},deepExtend:G,getComputedStyles:$,isScrollable:function(e){if("false"===e.dataset[s.ns+"scrollable"])return!1;if(e&&e.className&&"string"==typeof e.className&&e.className.indexOf("k-auto-scrollable")>-1)return!0;var t=$(e,["overflow"]).overflow;return t.indexOf("auto")>-1||t.indexOf("scroll")>-1},scrollLeft:function t(n,s){var a,r,o=c.browser.webkit,l=c.browser.mozilla,d=c.browser.version;if(n instanceof e&&s!==i)n.each(function(e,i){t(i,s)});else if(a=n instanceof e?n[0]:n){if(r=c.isRtl(n),s===i)return r&&o&&(d<85||c.browser.safari)?a.scrollWidth-a.clientWidth-a.scrollLeft:Math.abs(a.scrollLeft);r&&o&&(d<85||c.browser.safari)?a.scrollLeft=a.scrollWidth-a.clientWidth-s:a.scrollLeft=r&&(l||o)&&s>0?-s:s}},size:function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&"toJSON"!=t&&i++;return i},toCamelCase:K,toHyphens:function(e){return e.replace(/([a-z][A-Z])/g,function(e){return e.charAt(0)+"-"+e.charAt(1).toLowerCase()})},getOffset:s.getOffset||function(e,i,n){i||(i="offset");var s=e[i](),a={top:s.top,right:s.right,bottom:s.bottom,left:s.left};if(c.browser.msie&&(c.pointers||c.msPointers)&&!n){var r=c.isRtl(e)?1:-1;a.top-=t.pageYOffset-document.documentElement.scrollTop,a.left-=t.pageXOffset+r*document.documentElement.scrollLeft}return a},parseEffects:s.parseEffects||function(e){var t={};return o("string"==typeof e?e.split(" "):e,function(e){t[e]=this}),t},toggleClass:s.toggleClass||function(e,t,i,n){return t&&o(t=t.split(" "),function(t,i){e.toggleClass(i,n)}),e},directions:s.directions||{left:{reverse:"right"},right:{reverse:"left"},down:{reverse:"up"},up:{reverse:"down"},top:{reverse:"bottom"},bottom:{reverse:"top"},in:{reverse:"out"},out:{reverse:"in"}},Observable:N,Class:A,Template:n,template:n.compile.bind(n),render:n.render.bind(n),stringify:u.stringify.bind(u),eventTarget:ei,htmlEncode:function(e){return(""+e).replace(X,"&amp;").replace(J,"&lt;").replace(et,"&gt;").replace(Z,"&quot;").replace(ee,"&#39;")},unescape:function(e){var i;try{i=t.decodeURIComponent(e)}catch(t){i=e.replace(/%u([\dA-F]{4})|%([\dA-F]{2})/gi,function(e,t,i){return String.fromCharCode(parseInt("0x"+(t||i),16))})}return i},isLocalUrl:function(e){return e&&!en.test(e)},expr:function(e,t,i){return typeof t==_&&(i=t,t=!1),i=i||"d",(e=e||"")&&"["!==e.charAt(0)&&(e="."+e),e=t?(e=function(e,t){var i,n,s,a,r=t||"d",o=1;for(n=0,s=e.length;n<s;n++)""!==(a=e[n])&&(0!==(i=a.indexOf("["))&&(-1==i?a="."+a:(o++,a="."+a.substring(0,i)+" || {})"+a.substring(i))),o++,r+=a+(n<s-1?" || {})":")"));return Array(o).join("(")+r}((e=(e=e.replace(/"([^.]*)\.([^"]*)"/g,'"$1_$DOT$_$2"')).replace(/'([^.]*)\.([^']*)'/g,"'$1_$DOT$_$2'")).split("."),i)).replace(/_\$DOT\$_/g,"."):i+e},getter:function(e,t){var i=e+t;return S[i]=S[i]||Function("d","return "+s.expr(e,t))},setter:function(e){return I[e]=I[e]||Function("d,value",s.expr(e)+"=value")},accessor:function(e){return{get:s.getter(e),set:s.setter(e)}},guid:function(){var e,t,i="",n="abcdef";for(i+=n[Math.floor(Math.random()*Math.floor(n.length))],e=1;e<32;e++)t=16*h.random()|0,8!=e&&12!=e&&16!=e&&20!=e||(i+="-"),i+=(12==e?4:16==e?3&t|8:t).toString(16);return i},roleSelector:function(e){return e.replace(/(\S+)/g,"["+s.attr("role")+"=$1],").slice(0,-1)},directiveSelector:function(e){var t=e.split(" ");if(t)for(var i=0;i<t.length;i++)"view"!=t[i]&&(t[i]=t[i].replace(/(\w*)(view|bar|strip|over)$/,"$1-$2"));return t.join(" ").replace(/(\S+)/g,"kendo-mobile-$1,").slice(0,-1)},triggeredByInput:function(e){return/^(label|input|textarea|select)$/i.test(e.target.tagName)},onWidgetRegistered:function(e){for(var t=0,i=s.widgets.length;t<i;t++)e(s.widgets[t]);s._widgetRegisteredCallbacks.push(e)},logToConsole:function(e,i){var n=t.console;!s.suppressLog&&void 0!==n&&n.log&&n[i||"log"](e)}});var es=N.extend({init:function(e,t){eH.validatePackage(uq),this.element=s.jQuery(e).handler(this),this.angular("init",t),N.fn.init.call(this);var i,n=t?t.dataSource:null;t&&(i=(this.componentTypes||{})[(t||{}).componentType]),n&&(t=a({},t,{dataSource:{}})),t=this.options=a(!0,{},this.options,this.defaults,i||{},t),n&&(t.dataSource=n),this.element.attr(s.attr("role"))||this.element.attr(s.attr("role"),(t.name||"").toLowerCase()),this.element.data("kendo"+t.prefix+t.name,this),this.bind(this.events,t)},events:[],options:{prefix:""},_hasBindingTarget:function(){return!!this.element[0].kendoBindingTarget},_tabindex:function(e){e=e||this.wrapper;var t=this.element,i="tabindex",n=e.attr(i)||t.attr(i);t.removeAttr(i),e.attr(i,isNaN(n)?0:n)},setOptions:function(t){this._clearCssClasses(t),this._setEvents(t),e.extend(this.options,t),this._applyCssClasses()},_setEvents:function(e){for(var t,i=0,n=this.events.length;i<n;i++)t=this.events[i],this.options[t]&&e[t]&&(this.unbind(t,this.options[t]),this._events&&this._events[t]&&delete this._events[t]);this.bind(this.events,e)},resize:function(e){var t=this.getSize(),i=this._size;(e||(t.width>0||t.height>0)&&(!i||t.width!==i.width||t.height!==i.height))&&(this._size=t,this._resize(t,e),this.trigger("resize",t))},getSize:function(){return s.dimensions(this.element)},size:function(e){if(!e)return this.getSize();this.setSize(e)},setSize:e.noop,_resize:e.noop,destroy:function(){this.element.removeData("kendo"+this.options.prefix+this.options.name),this.element.removeData("handler"),this.unbind()},_destroy:function(){this.destroy()},angular:function(){},_muteAngularRebind:function(e){this._muteRebind=!0,e.call(this),this._muteRebind=!1},_applyCssClasses:function(e){var t,i,n,a,r=this.__proto__.options,o=this.options,l=e||this.wrapper||this.element,d=[];if(s.cssProperties.propertyDictionary[r.name]){for(t=0;t<F.length;t++)i=F[t],a=this.options._altname||r.name,r.hasOwnProperty(i)&&("themeColor"===i?(n=s.cssProperties.getValidClass({widget:a,propName:"fillMode",value:o.fillMode}))&&n.length&&d.push(s.cssProperties.getValidClass({widget:a,propName:i,value:o[i],fill:o.fillMode})):d.push(s.cssProperties.getValidClass({widget:a,propName:i,value:o[i]})));l.addClass(d.join(" "))}},_ariaLabel:function(t){var i,n=this.element,a=n.attr("id"),r=e('label[for="'+a+'"]'),o=n.attr(T),l=n.attr(C);t[0]!==n[0]&&(o?t.attr(T,o):l?t.attr(C,l):r.length&&(i=r.attr("id")||this._generateLabelId(r,a||s.guid()),t.attr(C,i)))},_clearCssClasses:function(e,t){var i,n,a,r=this.__proto__.options,o=this.options,l=t||this.wrapper||this.element;if(s.cssProperties.propertyDictionary[r.name])for(i=0;i<F.length;i++)n=F[i],a=this.options._altname||r.name,r.hasOwnProperty(n)&&e.hasOwnProperty(n)&&("themeColor"===n?l.removeClass(s.cssProperties.getValidClass({widget:a,propName:n,value:o[n],fill:o.fillMode})):("fillMode"===n&&l.removeClass(s.cssProperties.getValidClass({widget:a,propName:"themeColor",value:o.themeColor,fill:o.fillMode})),l.removeClass(s.cssProperties.getValidClass({widget:a,propName:n,value:o[n]}))))},_generateLabelId:function(e,t){var i=t+"_label";return e.attr("id",i),i}}),ea=es.extend({dataItems:function(){return this.dataSource.flatView()},_angularItems:function(t){var i=this;i.angular(t,function(){return{elements:i.items(),data:e.map(i.dataItems(),function(e){return{dataItem:e}})}})}});s.dimensions=function(e,t){var i=e[0];return t&&e.css(t),{width:i.offsetWidth,height:i.offsetHeight}},s.notify=d;var er=/template$/i,eo=/^\s*(?:\{(?:.|\r\n|\n)*\}|\[(?:.|\r\n|\n)*\])\s*$/,el=/^\{(\d+)(:[^\}]+)?\}|^\[[A-Za-z_]+\]$/,ed=/([A-Z])/g;function eh(e,t){var n;return 0===t.indexOf("data")&&(t=(t=t.substring(4)).charAt(0).toLowerCase()+t.substring(1)),t=t.replace(ed,"-$1"),null===(n=e.getAttribute("data-"+s.ns+t))?n=i:"null"===n?n=null:"true"===n?n=!0:"false"===n?n=!1:g.test(n)&&"mask"!=t&&"format"!=t?n=parseFloat(n):eo.test(n)&&!el.test(n)&&(n=Function("return ("+n+")")()),n}function eu(t,n,a){var r,o,l={},d=t.getAttribute("data-"+s.ns+"role");for(r in n)(o=eh(t,r))!==i&&(er.test(r)&&"drawer"!=d&&("string"==typeof o?e("#"+o).length?o=s.template(e("#"+o).html()):a&&(o=s.template(a[o])):o=t.getAttribute(r)),l[r]=o);return l}function ec(t,i){return e.contains(t,i)?-1:1}function ep(){var t=e(this);return e.inArray(t.attr("data-"+s.ns+"role"),["slider","rangeslider","breadcrumb"])>-1||t.is(":visible")}s.initWidget=function(n,a,r){var o,l,d,h,u,c,p,f,m,g;if(r?r.roles&&(r=r.roles):r=s.ui.roles,c=(n=n.nodeType?n:n[0]).getAttribute("data-"+s.ns+"role")){d=(m=-1===c.indexOf("."))?r[c]:s.getter(c)(t);var v=e(n).data(),b=d?"kendo"+d.fn.options.prefix+d.fn.options.name:"";for(var k in g=m?RegExp("^kendo.*"+c+"$","i"):RegExp("^"+b+"$","i"),v)if(k.match(g)){if(k!==b)return v[k];o=v[k]}if(d){for(f=eh(n,"dataSource"),a=e.extend({},eu(n,e.extend({},d.fn.options,d.fn.defaults)),a),f&&(a.dataSource=typeof f===_?s.getter(f)(t):f),h=0,u=d.fn.events.length;h<u;h++)(p=eh(n,l=d.fn.events[h]))!==i&&(a[l]=s.getter(p)(t));return o?e.isEmptyObject(a)||o.setOptions(a):o=new d(n,a),o}}},s.rolesFromNamespaces=function(e){var t,i,n=[];for(e[0]||(e=[s.ui,s.dataviz.ui]),t=0,i=e.length;t<i;t++)n[t]=e[t].roles;return a.apply(null,[{}].concat(n.reverse()))},s.init=function(t){var i=s.rolesFromNamespaces(D.call(arguments,1));e(t).find("[data-"+s.ns+"role]").addBack().each(function(){s.initWidget(this,{},i)})},s.destroy=function(t){e(t).find("[data-"+s.ns+"role]").addBack().each(function(){var t=e(this).data();for(var i in t)0===i.indexOf("kendo")&&typeof t[i].destroy===v&&t[i].destroy()})},s.resize=function(t,i){var n=e(t).find("[data-"+s.ns+"role]").addBack().filter(ep);if(n.length){var a=e.makeArray(n);a.sort(ec),e.each(a,function(){var t=s.widgetInstance(e(this));t&&t.resize(i)})}},s.parseOptions=eu,a(s.ui,{Widget:es,DataBoundWidget:ea,roles:{},progress:function(t,i,n){var a,r,o,l,d,h=t.find(".k-loading-mask"),u=s.support,c=u.browser;d=(n=e.extend({},{width:"100%",height:"100%",top:t.scrollTop(),opacity:!1},n)).opacity?"k-loading-mask k-opaque":"k-loading-mask",i?h.length||(r=(a=u.isRtl(t))?"right":"left",l=s.scrollLeft(t),o=c.webkit&&a?t[0].scrollWidth-t.width()-2*l:0,h=e(s.format("<div class='{0}'><span role='alert' aria-live='polite' class='k-loading-text'>{1}</span><div class='k-loading-image'></div><div class='k-loading-color'></div></div>",d,s.ui.progress.messages.loading)).width(n.width).height(n.height).css("top",n.top).css(r,Math.abs(l)+o).prependTo(t)):h&&h.remove()},plugin:function(t,n,a){var r,o=t.fn.options.name;a=a||"",(n=n||s.ui)[o]=t,n.roles[o.toLowerCase()]=t,r="getKendo"+a+o;var l={name:o="kendo"+a+o,widget:t,prefix:a||""};s.widgets.push(l);for(var d=0,h=s._widgetRegisteredCallbacks.length;d<h;d++)s._widgetRegisteredCallbacks[d](l);e.fn[o]=function(n){var a,r=this;return typeof n===_?(a=D.call(arguments,1),this.each(function(){var t,l,d=e.data(this,o);if(!d)throw Error(s.format("Cannot call method '{0}' of {1} before it is initialized",n,o));if(typeof(t=d[n])!==v)throw Error(s.format("Cannot find method '{0}' of {1}",n,o));if((l=t.apply(d,a))!==i)return r=l,!1})):this.each(function(){return new t(this,n)}),r},e.fn[o].widget=t,e.fn[r]=function(){return this.data(o)}}}),s.ui.progress.messages={loading:"Loading..."};var ef={bind:function(){return this},nullObject:!0,options:{}},em=es.extend({init:function(e,t){es.fn.init.call(this,e,t),this.element.autoApplyNS(),this.wrapper=this.element,this.element.addClass("km-widget")},destroy:function(){es.fn.destroy.call(this),this.element.kendoDestroy()},options:{prefix:"Mobile"},events:[],view:function(){var e=this.element.closest(s.roleSelector("view splitview modalview drawer"));return s.widgetInstance(e,s.mobile.ui)||ef},viewHasNativeScrolling:function(){var e=this.view();return e&&e.options.useNativeScrolling},container:function(){var e=this.element.closest(s.roleSelector("view layout modalview drawer splitview"));return s.widgetInstance(e.eq(0),s.mobile.ui)||ef}});a(s.mobile,{init:function(e){s.init(e,s.mobile.ui,s.ui,s.dataviz.ui)},appLevelNativeScrolling:function(){return s.mobile.application&&s.mobile.application.options&&s.mobile.application.options.useNativeScrolling},roles:{},ui:{Widget:em,DataBoundWidget:ea.extend(em.prototype),roles:{},plugin:function(e){s.ui.plugin(e,s.mobile.ui,"Mobile")}}}),G(s.dataviz,{init:function(e){s.init(e,s.dataviz.ui)},ui:{roles:{},themes:{},views:[],plugin:function(e){s.ui.plugin(e,s.dataviz.ui)}},roles:{}}),s.touchScroller=function(t,i){return i||(i={}),i.useNative=!0,e(t).map(function(t,n){return n=e(n),!(!c.kineticScrollNeeded||!s.mobile.ui.Scroller||n.data("kendoMobileScroller"))&&(n.kendoMobileScroller(i),n.data("kendoMobileScroller"))})[0]},s.preventDefault=function(e){e.preventDefault()},s.widgetInstance=function(e,i){var n,a,r=e.data(s.ns+"role"),o=[],l=e.data("kendoView");if(r){if("content"===r&&(r="scroller"),"editortoolbar"===r){var d=e.data("kendoEditorToolbar");if(d)return d}if("view"===r&&l)return l;if(i){if(i[0])for(n=0,a=i.length;n<a;n++)o.push(i[n].roles[r]);else o.push(i.roles[r])}else o=[s.ui.roles[r],s.dataviz.ui.roles[r],s.mobile.ui.roles[r]];for(r.indexOf(".")>=0&&(o=[s.getter(r)(t)]),n=0,a=o.length;n<a;n++){var h=o[n];if(h){var u=e.data("kendo"+h.fn.options.prefix+h.fn.options.name);if(u)return u}}}},s.onResize=function(i){var n=i;return c.mobileOS.android&&(n=function(){setTimeout(i,600)}),e(t).on(c.resize,n),n},s.unbindResize=function(i){e(t).off(c.resize,i)},s.attrValue=function(e,t){return e.data(s.ns+t)},s.days={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},e.extend(e.expr.pseudos,{kendoFocusable:function(t){var i,n,s=e.attr(t,"tabindex");return i=!isNaN(s)&&s>-1,n=t.nodeName.toLowerCase(),(/input|select|textarea|button|object/.test(n)?!t.disabled:"a"===n&&t.href||i)&&e.expr.pseudos.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}});var eg=["mousedown","mousemove","mouseenter","mouseleave","mouseover","mouseout","mouseup","click"],ev={setupMouseMute:function(){var t=0,i=eg.length,n=document.documentElement;if(!ev.mouseTrap&&c.eventCapture){ev.mouseTrap=!0,ev.bustClick=!1,ev.captureMouse=!1;for(var s=function(t){ev.captureMouse&&("click"===t.type?ev.bustClick&&!e(t.target).is("label, input, [data-rel=external]")&&(t.preventDefault(),t.stopPropagation()):t.stopPropagation())};t<i;t++)n.addEventListener(eg[t],s,!0)}},muteMouse:function(e){ev.captureMouse=!0,e.data.bustClick&&(ev.bustClick=!0),clearTimeout(ev.mouseTrapTimeoutID)},unMuteMouse:function(){clearTimeout(ev.mouseTrapTimeoutID),ev.mouseTrapTimeoutID=setTimeout(function(){ev.captureMouse=!1,ev.bustClick=!1},400)}},e_={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"};c.touch&&(c.mobileOS.ios||c.mobileOS.android)?e_={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"}:c.pointers?e_={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"}:c.msPointers&&(e_={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"}),!c.msPointers||"onmspointerenter"in t||e.each({MSPointerEnter:"MSPointerOver",MSPointerLeave:"MSPointerOut"},function(t,i){e.event.special[t]={delegateType:i,bindType:i,handle:function(t){var n,s=t.relatedTarget,a=t.handleObj;return s&&(s===this||e.contains(this,s))||(t.type=a.origType,n=a.handler.apply(this,arguments),t.type=i),n}}});var eb=function(e){return e_[e]||e},ek=/([^ ]+)/g;s.applyEventMap=function(e,t){return e=e.replace(ek,eb),t&&(e=e.replace(ek,"$1."+t)),e},s.keyDownHandler=function(e,t){var i=t._events.kendoKeydown;if(!i)return!0;i=i.slice(),e.sender=t,e.preventKendoKeydown=!1;for(var n=0,s=i.length;n<s;n++)i[n].call(t,e);return!e.preventKendoKeydown};var ew=e.fn.on;function ey(e,t){return new ey.fn.init(e,t)}E(!0,ey,e),ey.fn=ey.prototype=new e,ey.fn.constructor=ey,ey.fn.init=function(t,i){return i&&i instanceof e&&!(i instanceof ey)&&(i=ey(i)),e.fn.init.call(this,t,i,ex)},ey.fn.init.prototype=ey.fn;var ex=ey(document);a(ey.fn,{handler:function(e){return this.data("handler",e),this},autoApplyNS:function(e){return this.data("kendoNS",e||s.guid()),this},on:function(){var e=this.data("kendoNS");if(1==arguments.length)return ew.call(this,arguments[0]);var t=this,i=D.call(arguments);typeof i[i.length-1]===x&&i.pop();var n=i[i.length-1],a=s.applyEventMap(i[0],e);if(c.mouseAndTouchPresent&&a.search(/mouse|click/)>-1&&this[0]!==document.documentElement){ev.setupMouseMute();var r=2===i.length?null:i[1],o=a.indexOf("click")>-1&&a.indexOf("touchend")>-1;ew.call(this,{touchstart:ev.muteMouse,touchend:ev.unMuteMouse},r,{bustClick:o})}if(-1!==arguments[0].indexOf("keydown")&&i[1]&&i[1].options){i[0]=a;var l=i[1],d=i[i.length-1];return i[i.length-1]=function(e){if(s.keyDownHandler(e,l))return d.apply(this,[e])},ew.apply(this,i),this}return typeof n===_&&(n=(t=this.data("handler"))[n],i[i.length-1]=function(e){n.call(t,e)}),i[0]=a,ew.apply(this,i),this},kendoDestroy:function(e){return(e=e||this.data("kendoNS"))&&this.off("."+e),this}}),s.jQuery=ey,s.eventMap=e_,s.timezone=function(){var e={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},t={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6};function i(i,n){var s,a,r,o=n[3],l=n[4],d=n[5],h=n[8];return h||(n[8]=h={}),h[i]?h[i]:(isNaN(l)?0===l.indexOf("last")?(s=new Date(Date.UTC(i,e[o]+1,1,d[0]-24,d[1],d[2],0)),a=t[l.substr(4,3)],r=s.getUTCDay(),s.setUTCDate(s.getUTCDate()+a-r-(a>r?7:0))):l.indexOf(">=")>=0?(s=new Date(Date.UTC(i,e[o],l.substr(5),d[0],d[1],d[2],0)),a=t[l.substr(0,3)],r=s.getUTCDay(),s.setUTCDate(s.getUTCDate()+a-r+(a<r?7:0))):l.indexOf("<=")>=0&&(s=new Date(Date.UTC(i,e[o],l.substr(5),d[0],d[1],d[2],0)),a=t[l.substr(0,3)],r=s.getUTCDay(),s.setUTCDate(s.getUTCDate()+a-r-(a>r?7:0))):s=new Date(Date.UTC(i,e[o],l,d[0],d[1],d[2],0)),h[i]=s)}function n(e,t,n,s){typeof e!=b&&(e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));var a=function(e,t,i){var n=t[i];if("string"==typeof n&&(n=t[n]),!n)throw Error('Timezone "'+i+'" is either incorrect, or kendo.timezones.min.js is not included.');for(var s=n.length-1;s>=0;s--){var a=n[s][3];if(a&&e>a)break}var r=n[s+1];if(!r)throw Error('Timezone "'+i+'" not found on '+e+".");return r}(e,t,s);return{zone:a,rule:function(e,t,n){if(!(t=t[n])){var s=n.split(":"),a=0;return s.length>1&&(a=60*s[0]+Number(s[1])),[-1e6,"max","-","Jan",1,[0,0,0],a,"-"]}var o=new Date(e).getUTCFullYear();(t=r.grep(t,function(e){var t=e[0],i=e[1];return t<=o&&(i>=o||t==o&&"only"==i||"max"==i)})).push(e),t.sort(function(e,t){return"number"!=typeof e&&(e=Number(i(o,e))),"number"!=typeof t&&(t=Number(i(o,t))),e-t});var l=t[r.inArray(e,t)-1]||t[t.length-1];return isNaN(l)?l:null}(e,n,a[1])}}return{zones:{},rules:{},offset:function(e,t){if("Etc/UTC"==t||"Etc/GMT"==t)return 0;var i=n(e,this.zones,this.rules,t),a=i.zone,r=i.rule;return s.parseFloat(r?a[0]-r[6]:a[0])},convert:function(e,t,i){var n,s=i;typeof t==_&&(t=this.offset(e,t)),typeof i==_&&(i=this.offset(e,i));var a=e.getTimezoneOffset(),r=(e=new Date(e.getTime()+6e4*(t-i))).getTimezoneOffset();return typeof s==_&&(s=this.offset(e,s)),n=r-a+(i-s),new Date(e.getTime()+6e4*n)},apply:function(e,t){return this.convert(e,e.getTimezoneOffset(),t)},remove:function(e,t){return this.convert(e,t,e.getTimezoneOffset())},abbr:function(e,t){var i=n(e,this.zones,this.rules,t),s=i.zone,a=i.rule,r=s[2];return r.indexOf("/")>=0?r.split("/")[a&&+a[6]?1:0]:r.indexOf("%s")>=0?r.replace("%s",a&&"-"!=a[7]?a[7]:""):r},toLocalDate:function(e){return this.apply(new Date(e),"Etc/UTC")}}}(),s.date=function(){function e(e,t){return 0===t&&23===e.getHours()&&(e.setHours(e.getHours()+2),!0)}function t(t,i,n){var s=t.getHours();n=n||1,i=(i-t.getDay()+7*n)%7,t.setDate(t.getDate()+i),e(t,s)}function n(e,i,n){return t(e=new Date(e),i,n),e}function a(e){return new Date(e.getFullYear(),e.getMonth(),1)}function r(e,t){var i=new Date(e.getFullYear(),0,1,-6);return 1+Math.floor(Math.floor(((1!==t?d(n(e,t,-1),4):d(e,4-(e.getDay()||7))).getTime()-i.getTime())/864e5)/7)}function o(t){return e(t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),0),t}function l(e){return c(e).getTime()-o(c(e))}function d(t,i){var n=t.getHours();return h(t=new Date(t),864e5*i),e(t,n),t}function h(e,t,i){var n,s=e.getTimezoneOffset();e.setTime(e.getTime()+t),i||(n=e.getTimezoneOffset()-s,e.setTime(e.getTime()+6e4*n))}function u(){return o(new Date)}function c(e){var t=new Date(1980,1,1,0,0,0);return e&&t.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),t}function p(e,t){var i=new Date(e);return new Date(i.setFullYear(i.getFullYear()+t))}return{adjustDST:e,dayOfWeek:n,setDayOfWeek:t,getDate:o,isInDateRange:function(e,t,i){var n,s=t.getTime(),a=i.getTime();return s>=a&&(a+=864e5),(n=e.getTime())>=s&&n<=a},isInTimeRange:function(e,t,i){var n,s=l(t),a=l(i);return!e||s==a||(t>=i&&(i+=864e5),s>(n=l(e))&&(n+=864e5),a<s&&(a+=864e5),n>=s&&n<=a)},isToday:function(e){return o(e).getTime()==u().getTime()},nextDay:function(e){return d(e,1)},previousDay:function(e){return d(e,-1)},toUtcTime:function(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())},MS_PER_DAY:864e5,MS_PER_HOUR:36e5,MS_PER_MINUTE:6e4,setTime:h,setHours:function(t,i){return e(t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),i.getHours()),t},addDays:d,today:u,toInvariantTime:c,firstDayOfMonth:a,lastDayOfMonth:function(e){var t=new Date(e.getFullYear(),e.getMonth()+1,0),i=a(e),n=Math.abs(t.getTimezoneOffset()-i.getTimezoneOffset());return n&&t.setHours(i.getHours()+n/60),t},weekInYear:function(e,t){t===i&&(t=s.culture().calendar.firstDay);var n=d(e,-7),a=d(e,7),o=r(e,t);return 0===o?r(n,t)+1:53===o&&r(a,t)>1?1:o},getMilliseconds:l,firstDayOfYear:function(e){return new Date(e.getFullYear(),0,1)},lastDayOfYear:function(e){return new Date(e.getFullYear(),11,31)},nextYear:function(e){return p(e,1)},previousYear:function(e){return p(e,-1)}}}(),s.stripWhitespace=function(e){if(document.createNodeIterator)for(var t=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,function(t){return t.parentNode==e?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},!1);t.nextNode();)t.referenceNode&&!t.referenceNode.textContent.trim()&&t.referenceNode.parentNode.removeChild(t.referenceNode);else for(var i=0;i<e.childNodes.length;i++){var n=e.childNodes[i];3!=n.nodeType||/\S/.test(n.nodeValue)||(e.removeChild(n),i--),1==n.nodeType&&s.stripWhitespace(n)}};var eC=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)};s.animationFrame=function(e){eC.call(t,e)};var eT=[];s.queueAnimation=function(e){eT[eT.length]=e,1===eT.length&&s.runNextAnimation()},s.runNextAnimation=function(){s.animationFrame(function(){eT[0]&&(eT.shift()(),eT[0]&&s.runNextAnimation())})},s.parseQueryStringParams=function(e){for(var t={},i=(e.split("?")[1]||"").split(/&|=/),n=i.length,s=0;s<n;s+=2)""!==i[s]&&(t[decodeURIComponent(i[s])]=decodeURIComponent(i[s+1]));return t},s.elementUnderCursor=function(e){if(void 0!==e.x.client)return document.elementFromPoint(e.x.client,e.y.client)},s.wheelDeltaY=function(e){var t,n=e.originalEvent,s=n.wheelDeltaY;return n.wheelDelta?(s===i||s)&&(t=n.wheelDelta):n.detail&&n.axis===n.VERTICAL_AXIS&&(t=-(10*n.detail)),t},s.throttle=function(e,t){var i,n=0;if(!t||t<=0)return e;var s=function(){var s=this,a=+new Date-n,r=arguments;function o(){e.apply(s,r),n=+new Date}if(!n)return o();i&&clearTimeout(i),a>t?o():i=setTimeout(o,t-a)};return s.cancel=function(){clearTimeout(i)},s},s.caret=function(t,n,s){var a,r=n!==i;if(s===i&&(s=n),t[0]&&(t=t[0]),!r||!t.disabled){try{if(t.selectionStart!==i){if(r){t.focus();var o=c.mobileOS;o.wp||o.android?setTimeout(function(){t.setSelectionRange(n,s)},0):t.setSelectionRange(n,s)}else n=[t.selectionStart,t.selectionEnd]}else if(document.selection){if(e(t).is(":visible")&&t.focus(),a=t.createTextRange(),r)a.collapse(!0),a.moveStart("character",n),a.moveEnd("character",s-n),a.select();else{var l,d,h=a.duplicate();a.moveToBookmark(document.selection.createRange().getBookmark()),h.setEndPoint("EndToStart",a),d=(l=h.text.length)+a.text.length,n=[l,d]}}}catch(e){n=[]}return n}},s.compileMobileDirective=function(e,i){var n=t.angular;return e.attr("data-"+s.ns+"role",e[0].tagName.toLowerCase().replace("kendo-mobile-","").replace("-","")),n.element(e).injector().invoke(["$compile",function(t){t(e)(i),/^\$(digest|apply)$/.test(i.$$phase)||i.$digest()}]),s.widgetInstance(e,s.mobile.ui)},s.antiForgeryTokens=function(){var t={},n=e("meta[name=csrf-token],meta[name=_csrf]").attr("content"),s=e("meta[name=csrf-param],meta[name=_csrf_header]").attr("content");return e("input[name^='__RequestVerificationToken']").each(function(){t[this.name]=this.value}),s!==i&&n!==i&&(t[s]=n),t},s.cycleForm=function(e){var t=e.find("input, .k-widget, .k-dropdownlist, .k-combobox").first(),i=e.find("button, .k-button").last();function n(e){var t=s.widgetInstance(e);t&&t.focus?t.focus():e.trigger("focus")}i.on("keydown",function(e){e.keyCode!=s.keys.TAB||e.shiftKey||(e.preventDefault(),n(t))}),t.on("keydown",function(e){e.keyCode==s.keys.TAB&&e.shiftKey&&(e.preventDefault(),n(i))})},s.focusElement=function(i){var n=[],a=i.parentsUntil("body").filter(function(e,t){return"visible"!==s.getComputedStyles(t,["overflow"]).overflow}).add(t);a.each(function(t,i){n[t]=e(i).scrollTop()});try{i[0].setActive()}catch(e){i[0].focus()}a.each(function(t,i){e(i).scrollTop(n[t])})},s.focusNextElement=function(){if(document.activeElement){var t=e(":kendoFocusable"),i=t.index(document.activeElement);i>-1&&(t[i+1]||t[0]).focus()}},s.trim=function(e){return e?e.toString().trim():""},s.getWidgetFocusableElement=function(t){var i=t.closest(":kendoFocusable"),n=s.widgetInstance(t);return i.length?i:n?"Editor"===n.options.name?e(n.body):n.wrapper.find(":kendoFocusable").first():t},s.addAttribute=function(e,t,i){var n=e.attr(t)||"";0>n.indexOf(i)&&e.attr(t,(n+" "+i).trim())},s.removeAttribute=function(e,t,i){var n=e.attr(t)||"";e.attr(t,n.replace(i,"").trim())},s.toggleAttribute=function(e,t,i){0>(e.attr(t)||"").indexOf(i)?s.addAttribute(e,t,i):s.removeAttribute(e,t,i)},s.matchesMedia=function(e){var i=s._bootstrapToMedia(e)||e;return c.matchMedia&&t.matchMedia(i).matches},s._bootstrapToMedia=function(e){return({xs:"(max-width: 576px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)"})[e]},s.fileGroupMap={audio:[".aif",".iff",".m3u",".m4a",".mid",".mp3",".mpa",".wav",".wma",".ogg",".wav",".wma",".wpl"],video:[".3g2",".3gp",".avi",".asf",".flv",".m4u",".rm",".h264",".m4v",".mkv",".mov",".mp4",".mpg",".rm",".swf",".vob",".wmv"],image:[".ai",".dds",".heic",".jpe","jfif",".jif",".jp2",".jps",".eps",".bmp",".gif",".jpeg",".jpg",".png",".ps",".psd",".svg",".svgz",".tif",".tiff"],txt:[".doc",".docx",".log",".pages",".tex",".wpd",".wps",".odt",".rtf",".text",".txt",".wks"],presentation:[".key",".odp",".pps",".ppt",".pptx"],data:[".xlr",".xls",".xlsx"],programming:[".tmp",".bak",".msi",".cab",".cpl",".cur",".dll",".dmp",".drv",".icns",".ico",".link",".sys",".cfg",".ini",".asp",".aspx",".cer",".csr",".css",".dcr",".htm",".html",".js",".php",".rss",".xhtml"],pdf:[".pdf"],config:[".apk",".app",".bat",".cgi",".com",".exe",".gadget",".jar",".wsf"],zip:[".7z",".cbr",".gz",".sitx",".arj",".deb",".pkg",".rar",".rpm",".tar.gz",".z",".zip",".zipx"],"disc-image":[".dmg",".iso",".toast",".vcd",".bin",".cue",".mdf"]},s.getFileGroup=function(e,t){var n=s.fileGroupMap,a=Object.keys(n),r="file";if(e===i||!e.length)return r;for(var o=0;o<a.length;o+=1)if(n[a[o]].indexOf(e.toLowerCase())>-1)return t?"file-"+a[o]:a[o];return r},s.getFileSizeMessage=function(e){if(0===e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)),10);return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]},s.selectorFromClasses=function(e){return"."+e.split(" ").join(".")};var eS=["base","primary","secondary","tertiary","inherit","info","success","warning","error","dark","light","inverse"],eI=["solid","outline","flat"],eD=["rectangle","square"],eF=[["small","sm"],["medium","md"],["large","lg"]],eE=[["small","sm"],["medium","md"],["large","lg"]],eA=["fixed","static","sticky","absolute"],ez=["both","horizontal","vertical"],eP=["auto","hidden","visible","scroll","clip"];s.cssProperties=function(){var e={};function t(t,i,n){e[t]||(e[t]={}),e[t][i]=n||i}function i(e,i){for(var n=0;n<i.length;n++)l(i[n])?t(e,i[n][0],i[n][1]):t(e,i[n])}return i("themeColor",eS),i("fillMode",eI),i("shape",eD),i("size",eF),i("positionMode",eA),i("rounded",eE),i("resize",ez),i("overflow",eP),{positionModeValues:eA,roundedValues:eE,sizeValues:eF,shapeValues:eD,fillModeValues:eI,themeColorValues:eS,defaultValues:e,propertyDictionary:{},registerValues:function(e,t){var i,n,a,r,o,d,h=s.cssProperties.propertyDictionary;for(i=0;i<t.length;i++)for(a=t[i].prop,o=t[i].values,h[e][a]||(h[e][a]={}),r=h[e][a],n=0;n<o.length;n++)d=o[n],l(o[n])?r[d[0]]=d[1]:r[d]=d},getValidClass:function(e){var t,i,n=e.widget,a=e.propName,r=e.value,o=e.fill,l=s.cssProperties,d=l.defaultValues[a],h=l.propertyDictionary[n];return h&&(i=(t=h[a])&&t[r]||d[r])?("themeColor"===a?h.prefix+o+"-":"positionMode"===a?"k-pos-":"rounded"===a?"k-rounded-":"resize"===a?"k-resize-":"overflow"===a?"k-overflow-":h.prefix)+i:""},registerPrefix:function(e,t){var i=s.cssProperties.propertyDictionary;i[e]||(i[e]={}),i[e].prefix=t}}}(),s.registerCssClass=function(e,t,i){s.propertyToCssClassMap[e]||(s.propertyToCssClassMap[e]={}),s.propertyToCssClassMap[e][t]=i||t},s.registerCssClasses=function(e,t){for(var i=0;i<t.length;i++)l(t[i])?s.registerCssClass(e,t[i][0],t[i][1]):s.registerCssClass(e,t[i])},s.getValidCssClass=function(e,t,i){var n=s.propertyToCssClassMap[t][i];if(n)return e+n},s.propertyToCssClassMap={},s.registerCssClasses("themeColor",eS),s.registerCssClasses("fill",eI),s.registerCssClasses("shape",eD),s.registerCssClasses("size",eF),s.registerCssClasses("positionMode",eA),s.whenAll=function(t){var i,n=1==arguments.length&&Array.isArray(t)?t:Array.prototype.slice.call(arguments),a=n.length,r=a,o=e.Deferred(),l=0,d=0,h=Array(a),u=Array(a),c=Array(a);function p(e,t,i){return function(){i!=n&&d++,o.notifyWith(t[e]=this,i[e]=Array.prototype.slice.call(arguments)),--r||o[(d?"reject":"resolve")+"With"](t,i)}}for(;l<a;l++)(i=n[l])&&s.isFunction(i.promise)?i.promise().done(p(l,c,n)).fail(p(l,h,u)):(o.notifyWith(this,i),--r);return r||o.resolveWith(c,n),o.promise()},function(){function i(t,i,n,a){var r=e("<form>").attr({action:n,method:"POST",target:a}),o=s.antiForgeryTokens();o.fileName=i;var l=t.split(";base64,");for(var d in o.contentType=l[0].replace("data:",""),o.base64=l[1],o)o.hasOwnProperty(d)&&e("<input>").attr({value:o[d],name:d,type:"hidden"}).appendTo(r);r.appendTo("body").submit().remove()}var n=document.createElement("a"),a="download"in n&&!s.support.browser.edge;function r(e,t){var i=e;if("string"==typeof e){for(var n=e.split(";base64,"),s=n[0],a=atob(n[1]),r=new Uint8Array(a.length),o=0;o<a.length;o++)r[o]=a.charCodeAt(o);i=new Blob([r.buffer],{type:s})}navigator.msSaveBlob(i,t)}function o(e,i){t.Blob&&e instanceof Blob&&(e=URL.createObjectURL(e)),n.download=i,n.href=e;var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(s),setTimeout(function(){URL.revokeObjectURL(e)})}s.saveAs=function(e){var t=i;e.forceProxy||(a?t=o:navigator.msSaveBlob&&(t=r)),t(e.dataURI,e.fileName,e.proxyURL,e.proxyTarget)}}(),s.proxyModelSetters=function(e){var t={};return Object.keys(e||{}).forEach(function(i){Object.defineProperty(t,i,{get:function(){return e[i]},set:function(t){e[i]=t,e.dirty=!0}})}),t},s.getSeriesColors=function(){var t=e('<div class="k-var--series-a"></div><div class="k-var--series-b"></div><div class="k-var--series-c"></div><div class="k-var--series-d"></div><div class="k-var--series-e"></div><div class="k-var--series-f"></div>'),i=[];return t.appendTo(e("body")),t.each(function(t,n){i.push(e(n).css("background-color"))}),t.remove(),i},s.isElement=function(e){return e instanceof Element||e instanceof HTMLDocument},s.defaults=s.defaults||{},s.setDefaults=function(e,t){var n=e.split("."),a=s.defaults;e=n.pop(),n.forEach(function(e){a[e]===i&&(a[e]={}),a=a[e]}),t.constructor===Object?a[e]=G({},a[e],t):a[e]=t},s.class2type={},r.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){s.class2type["[object "+t+"]"]=t.toLowerCase()}),s.type=function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?s.class2type[Object.prototype.toString.call(e)]||"object":typeof e};var eH={validatePackage:function(){},setScriptKey:function(){}};t.KendoLicensing={setScriptKey:eH.setScriptKey}})(r,window),function(e,t){var i=window.kendo,n=e.extend,s="\r\n\r\n",a=i.isFunction,r={eq:"eq",neq:"ne",gt:"gt",gte:"ge",lt:"lt",lte:"le",contains:"substringof",doesnotcontain:"substringof",endswith:"endswith",startswith:"startswith",isnull:"eq",isnotnull:"ne",isnullorempty:"eq",isnotnullorempty:"ne",isempty:"eq",isnotempty:"ne"},o=n({},r,{contains:"contains"}),l={pageSize:e.noop,page:e.noop,filter:function(e,t,n){t&&(t=function e(t,n){var s,a,l,d,h,u,c,p,f=[],m=t.logic||"and",g=t.filters;for(s=0,a=g.length;s<a;s++)l=(t=g[s]).field,c=t.value,u=t.operator,t.filters?t=e(t,n):(p=t.ignoreCase,l=l.replace(/\./g,"/"),t=r[u],n&&(t=o[u]),"isnullorempty"===u?t=i.format("{0} {1} null or {0} {1} ''",l,t):"isnotnullorempty"===u?t=i.format("{0} {1} null and {0} {1} ''",l,t):"isnull"===u||"isnotnull"===u?t=i.format("{0} {1} null",l,t):"isempty"===u||"isnotempty"===u?t=i.format("{0} {1} ''",l,t):t&&void 0!==c&&("string"===(d=i.type(c))?(h="'{1}'",c=c.replace(/'/g,"''"),!0===p&&(l="tolower("+l+")")):"date"===d?n?(h="{1:yyyy-MM-ddTHH:mm:ss+00:00}",c=i.timezone.apply(c,"Etc/UTC")):h="datetime'{1:yyyy-MM-ddTHH:mm:ss}'":h="{1}",t.length>3?"substringof"!==t?h="{0}({2},"+h+")":(h="{0}("+h+",{2})","doesnotcontain"===u&&(n?(h="{0}({2},'{1}') eq -1",t="indexof"):h+=" eq false")):h="{2} {0} "+h,t=i.format(h,t,c,l))),f.push(t);return t=f.join(" "+m+" "),f.length>1&&(t="("+t+")"),t}(t,n))&&(e.$filter=t)},sort:function(t,i){var n=e.map(i,function(e){var t=e.field.replace(/\./g,"/");return"desc"===e.dir&&(t+=" desc"),t}).join(",");n&&(t.$orderby=n)},skip:function(e,t){t&&(e.$skip=t)},take:function(e,t){t&&(e.$top=t)}},d={read:{dataType:"jsonp"}};function h(e){for(var t in e)0===t.indexOf("@odata")&&delete e[t]}function u(){return Math.floor(65536*(1+Math.random())).toString(16).substr(1)}function c(e){return e+u()+"-"+u()+"-"+u()}function p(e,t){var i="\r\n--"+e;return t&&(i+="--"),i}function f(e,t,n,r,o,l,d){return"--"+t+"\r\nContent-Type: multipart/mixed; boundary="+n+"\r\n"+function(e,t,n,r,o,l){for(var d,h,u="",c=0;c<e.length;c++)u+=(d=n,p(t,!1)+"\r\nContent-Type: application/http\r\nContent-Transfer-Encoding: binary\r\nContent-ID: "+d+(s+function(e,t,n,s){var r=e.options[s].url,o=i.format("{0} ",n);return a(r)?o+r(t):o+r}(o,e[c],o.options[r].type,r))+" HTTP/1.1"),l||(u+=(h=e[c],"\r\nContent-Type: application/json;odata=minimalmetadata\r\nPrefer: return=representation"+(s+i.stringify(h)))),u+="\r\n",n++;return u}(e,n,r,l,o,d)+p(n,!0)+"\r\n"}n(!0,i.data,{schemas:{odata:{type:"json",data:function(e){return e.d.results||[e.d]},total:"d.__count"}},transports:{odata:{read:{cache:!0,dataType:"jsonp",jsonp:"$callback"},update:{cache:!0,dataType:"json",contentType:"application/json",type:"PUT"},create:{cache:!0,dataType:"json",contentType:"application/json",type:"POST"},destroy:{cache:!0,dataType:"json",type:"DELETE"},parameterMap:function(e,t,n){var s,a,r,o;if(e=e||{},t=t||"read",o=(o=(this.options||d)[t])?o.dataType:"json","read"===t)for(r in s={$inlinecount:"allpages"},"json"!=o&&(s.$format="json"),e)l[r]?l[r](s,e[r],n):s[r]=e[r];else{if("json"!==o)throw Error("Only json dataType can be used for "+t+" operation.");if("destroy"!==t){for(r in e)"number"==typeof(a=e[r])&&(e[r]=a+"");s=i.stringify(e)}}return s}}}}),n(!0,i.data,{schemas:{"odata-v4":{type:"json",data:function(t){if(Array.isArray(t)){for(var i=0;i<t.length;i++)h(t[i]);return t}return h(t=e.extend({},t)),t.value?t.value:[t]},total:function(e){return e["@odata.count"]}}},transports:{"odata-v4":{batch:{type:"POST"},read:{cache:!0,dataType:"json"},update:{cache:!0,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"PUT"},create:{cache:!0,dataType:"json",contentType:"application/json;IEEE754Compatible=true",type:"POST"},destroy:{cache:!0,dataType:"json",type:"DELETE"},parameterMap:function(e,t){var n=i.data.transports.odata.parameterMap(e,t,!0);return"read"==t&&(n.$count=!0,delete n.$inlinecount),n&&n.$filter&&(n.$filter=n.$filter.replace(/('[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}')/gi,function(e){return e.substring(1,e.length-1)})),n},submit:function(t){var s,r,o,l,d,h,u,m=(s=t.data,r=n({},this.options.batch),o=c("sf_batch_"),l="",d=0,h=this.options.batch.url,u=c("sf_changeset_"),r.type=this.options.batch.type,r.url=a(h)?h():h,r.headers=n(r.headers||{},{"Content-Type":"multipart/mixed; boundary="+o}),s.updated.length&&(l+=f(s.updated,o,u,d,this,"update",!1),d+=s.updated.length,u=c("sf_changeset_")),s.destroyed.length&&(l+=f(s.destroyed,o,u,d,this,"destroy",!0),d+=s.destroyed.length,u=c("sf_changeset_")),s.created.length&&(l+=f(s.created,o,u,d,this,"create",!1)),l+=p(o,!0),r.data=l,r),g=t.data;(g.updated.length||g.destroyed.length||g.created.length)&&e.ajax(n(!0,{},{success:function(e){var n,s=function(e){var t,n,s,a,r,o=e.match(/--changesetresponse_[a-z0-9-]+$/gm),l=0,d=[];d.push({models:[],passed:!0});for(var h=0;h<o.length;h++)(a=o[h]).lastIndexOf("--",a.length-1)?h<o.length-1&&d.push({models:[],passed:!0}):(l=l?e.indexOf(a,l+a.length):e.indexOf(a),n=(t=e.substring(l,e.indexOf("--",l+1))).match(/^HTTP\/1\.\d (\d{3}) (.*)$/gm).pop(),(s=i.parseFloat(n.match(/\d{3}/g).pop()))>=200&&s<=299?(r=t.match(/\{.*\}/gm))&&d[d.length-1].models.push(JSON.parse(r[0])):d[d.length-1].passed=!1);return d}(e),a=0;g.updated.length&&((n=s[a]).passed&&t.success(n.models.length?n.models:[],"update"),a++),g.destroyed.length&&((n=s[a]).passed&&t.success([],"destroy"),a++),g.created.length&&(n=s[a]).passed&&t.success(n.models,"create")},error:function(e,i,n){t.error(e,i,n)}},m))}}}})}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=Array.isArray,s=e.isPlainObject,a=e.map,r=e.each,o=e.extend,l=i.getter,d=i.Class.extend({init:function(e){var t=this,l=e.total,d=e.model,h=e.parse,u=e.errors,c=e.serialize,p=e.data;if(d){if(s(d)){var f=e.modelBase||i.data.Model;d.fields&&r(d.fields,function(e,n){s(n)&&n.field?i.isFunction(n.field)||(n=o(n,{field:t.getter(n.field)})):n={field:t.getter(n)},d.fields[e]=n});var m=d.id;if(m){var g={};g[t.xpathToMember(m,!0)]={field:t.getter(m)},d.fields=o(g,d.fields),d.id=t.xpathToMember(m)}d=f.define(d)}t.model=d}if(l&&("string"==typeof l?(l=t.getter(l),t.total=function(e){return parseInt(l(e),10)}):"function"==typeof l&&(t.total=l)),u&&("string"==typeof u?(u=t.getter(u),t.errors=function(e){return u(e)||null}):"function"==typeof u&&(t.errors=u)),p&&("string"==typeof p?(p=t.xpathToMember(p),t.data=function(e){var i,s=t.evaluate(e,p);return s=n(s)?s:[s],t.model&&d.fields?(i=new t.model,a(s,function(e){if(e){var t,n={};for(t in d.fields)n[t]=i._parse(t,d.fields[t].field(e));return n}})):s}):"function"==typeof p&&(t.data=p)),"function"==typeof h){var v=t.parse;t.parse=function(e){var i=h.call(t,e);return v.call(t,i)}}"function"==typeof c&&(t.serialize=c)},total:function(e){return this.data(e).length},errors:function(e){return e?e.errors:null},serialize:function(e){return e},parseDOM:function(e){var t,i,s,a,r,o,l,d={},h=e.attributes,u=h.length;for(l=0;l<u;l++)d["@"+(o=h[l]).nodeName]=o.nodeValue;for(i=e.firstChild;i;i=i.nextSibling)3===(s=i.nodeType)||4===s?d["#text"]=i.nodeValue:1===s&&(t=this.parseDOM(i),n(r=d[a=i.nodeName])?r.push(t):r=void 0!==r?[r,t]:t,d[a]=r);return d},evaluate:function(e,t){for(var i,s,a,r,o,l=t.split(".");i=l.shift();)if(n(e=e[i])){for(s=[],t=l.join("."),o=0,a=e.length;o<a;o++)r=n(r=this.evaluate(e[o],t))?r:[r],s.push.apply(s,r);return s}return e},parse:function(t){var i,n,s={};return i=t.documentElement||e.parseXML(t).documentElement,n=this.parseDOM(i),s[i.nodeName]=n,s},xpathToMember:function(e,t){return e?(e=e.replace(/^\//,"").replace(/\//g,".")).indexOf("@")>=0?e.replace(/\.?(@.*)/,t?"$1":'["$1"]'):e.indexOf("text()")>=0?e.replace(/(\.?text\(\))/,t?"#text":'["#text"]'):e:""},getter:function(e){return l(this.xpathToMember(e),!0)}});e.extend(!0,i.data,{XmlDataReader:d,readers:{xml:d}})}(window.kendo.jQuery),function(e,t){var i,n=e.extend,s=e.isPlainObject,a=e.isEmptyObject,r=Array.isArray,o=e.grep,l=e.ajax,d=e.each,h=e.noop,u=window.kendo,c=u.isFunction,p=u.Observable,f=u.Class,m="string",g="function",v="create",_="read",b="update",k="destroy",w="change",y="sync",x="error",C="requestStart",T="progress",S="requestEnd",I="itemsLoaded",D="itemLoad",F=[v,_,b,k],E=function(e){return e},A=u.getter,z=u.stringify,P=Math,H=[].push,N=[].join,R=[].pop,O=[].splice,M=[].shift,B=[].slice,L=[].unshift,V={}.toString,U=u.support.stableSort,W=/^\/Date\((.*?)\)\/$/,j=[],G=p.extend({init:function(e,t){this.type=t||Y,p.fn.init.call(this),this.length=e.length,this.wrapAll(e,this),this._loadPromises=[],this._loadedNodes=[]},at:function(e){return this[e]},toJSON:function(e){var t,i,n=this.length,s=Array(n);for(t=0;t<n;t++)(i=this[t])instanceof Y&&(i=i.toJSON(e)),s[t]=i;return s},parent:h,wrapAll:function(e,t){var i,n,s=this,a=function(){return s};for(t=t||[],i=0,n=e.length;i<n;i++)t[i]=s.wrap(e[i],a);return t},wrap:function(e,t){var i=this;return null!==e&&"[object Object]"===V.call(e)&&(e instanceof i.type||e instanceof J||(e=e instanceof Y?e.toJSON():e,e=new i.type(e)),e.parent=t,e.bind(w,function(t){var n=e.hasOwnProperty("hasSubgroups");i.trigger(w,{field:t.field,node:t.node,index:t.index,items:t.items||[this],action:t.node||n?t.action||"itemloaded":"itemchange"})}),e.bind(D,function(e){i._loadPromises.push(e.promise),i._loading=!0,e.promise.done(function(){i._loadedNodes.push(e.node);var t=i._loadPromises.indexOf(e.promise);i._loadPromises.splice(t,1),i._loadPromises.length||(i._loading=!1,i.trigger(I,{collection:i,nodes:i._loadedNodes}),i._loadedNodes=[])})})),e},loading:function(){return this._loading},push:function(){var e,t=this.length,i=this.wrapAll(arguments);return e=H.apply(this,i),this.omitChangeEvent||this.trigger(w,{action:"add",index:t,items:i}),e},slice:B,sort:[].sort,join:N,pop:function(){var e=this.length,t=R.apply(this);return e&&this.trigger(w,{action:"remove",index:e-1,items:[t]}),t},splice:function(e,t,i){var n,s,a,r=this.wrapAll(B.call(arguments,2));if((n=O.apply(this,[e,t].concat(r))).length)for(this.omitChangeEvent||this.trigger(w,{action:"remove",index:e,items:n}),s=0,a=n.length;s<a;s++)n[s]&&n[s].children&&n[s].unbind(w);return i&&(this.omitChangeEvent||this.trigger(w,{action:"add",index:e,items:r})),n},shift:function(){var e=this.length,t=M.apply(this);return e&&this.trigger(w,{action:"remove",index:0,items:[t]}),t},unshift:function(){var e,t=this.wrapAll(arguments);return e=L.apply(this,t),this.trigger(w,{action:"add",index:0,items:t}),e},indexOf:function(e){var t,i;for(t=0,i=this.length;t<i;t++)if(this[t]===e)return t;return -1},forEach:function(e,t){for(var i=0,n=this.length,s=t||window;i<n;i++)e.call(s,this[i],i,this)},map:function(e,t){for(var i=0,n=[],s=this.length,a=t||window;i<s;i++)n[i]=e.call(a,this[i],i,this);return n},reduce:function(e){var t,i=0,n=this.length;for(2==arguments.length?t=arguments[1]:i<n&&(t=this[i++]);i<n;i++)t=e(t,this[i],i,this);return t},reduceRight:function(e){var t,i=this.length-1;for(2==arguments.length?t=arguments[1]:i>0&&(t=this[i--]);i>=0;i--)t=e(t,this[i],i,this);return t},filter:function(e,t){for(var i,n=0,s=[],a=this.length,r=t||window;n<a;n++)i=this[n],e.call(r,i,n,this)&&(s[s.length]=i);return s},find:function(e,t){for(var i,n=0,s=this.length,a=t||window;n<s;n++)if(i=this[n],e.call(a,i,n,this))return i},every:function(e,t){for(var i,n=0,s=this.length,a=t||window;n<s;n++)if(i=this[n],!e.call(a,i,n,this))return!1;return!0},some:function(e,t){for(var i,n=0,s=this.length,a=t||window;n<s;n++)if(i=this[n],e.call(a,i,n,this))return!0;return!1},remove:function(e){var t=this.indexOf(e);-1!==t&&this.splice(t,1)},empty:function(){this.splice(0,this.length)}});"undefined"!=typeof Symbol&&Symbol.iterator&&!G.prototype[Symbol.iterator]&&(G.prototype[Symbol.iterator]=[][Symbol.iterator]);var q=G.extend({init:function(e,t,i){p.fn.init.call(this),this.type=t||Y,i&&(this._events=i);for(var n=0;n<e.length;n++)this[n]=e[n];this.length=n,this._parent=(function(){return this}).bind(this)},at:function(e){var t=this[e];return t instanceof this.type?t.parent=this._parent:t=this[e]=this.wrap(t,this._parent),t}});function K(e,t,i,n){return function(s){var a,r={};for(a in s)r[a]=s[a];r.field=n?i+"."+s.field:i,t==w&&e._notifyChange&&e._notifyChange(r),e.trigger(t,r)}}function $(e,t){var i,n,s,a=[],r=[];for("object"==typeof(i=e=e||{})&&Object.getPrototypeOf(i)===Object.getPrototypeOf({})||Object.getPrototypeOf(i)===Object.getPrototypeOf(new Date)||"object"!=typeof i||(r=Object.getOwnPropertyNames(Object.getPrototypeOf(e))),n=Object.getOwnPropertyNames(e).concat(r),s=j.filter(function(e){return 0>n.indexOf(e)});e;)Object.getOwnPropertyNames(e).forEach(function(e){-1===a.indexOf(e)&&(!t||0>s.indexOf(e))&&a.push(e)}),e=Object.getPrototypeOf(e);return a}j=$({},!1);var Y=p.extend({init:function(e){var t,i=this,n=$(e,!0),s=function(){return i};p.fn.init.call(this),this._handlers={},n.forEach(function(n){"object"==typeof(t=e[n])&&t&&!t.getTime&&"_"!=n.charAt(0)&&(t=i.wrap(t,n,s)),i[n]=t}),i.uid=u.guid()},shouldSerialize:function(e,t){return this.hasOwnProperty(e)&&"_handlers"!==e&&"_events"!==e&&(t&&t[e]||typeof this[e]!==g)&&"uid"!==e},forEach:function(e){for(var t in this)this.shouldSerialize(t)&&e(this[t],t)},toJSON:function(e){var t,i,n={};for(i in this)this.shouldSerialize(i,e)&&(((t=this[i])instanceof Y||t instanceof G)&&(t=t.toJSON(e)),n[i]=t);return n},get:function(e){return this.trigger("get",{field:e}),"this"===e?this:u.getter(e,!0)(this)},_set:function(e,t){var i=e.indexOf(".")>=0;if(i)for(var n=e.split("."),s="";n.length>1;){s+=n.shift();var a=u.getter(s,!0)(this);if(a instanceof Y)return a.set(n.join("."),t),i;s+="."}return u.setter(e)(this,t),i},set:function(e,t){var i=this,n=!1,s=e.indexOf(".")>=0,a=u.getter(e,!0)(i);return a!==t&&(a instanceof p&&this._handlers[e]&&(this._handlers[e].get&&a.unbind("get",this._handlers[e].get),a.unbind(w,this._handlers[e].change)),(n=i.trigger("set",{field:e,value:t}))||(s||(t=i.wrap(t,e,function(){return i})),(!i._set(e,t)||e.indexOf("(")>=0||e.indexOf("[")>=0)&&i.trigger(w,{field:e}))),n},parent:h,wrap:function(e,t,i){var n,s,a=V.call(e);if(null!=e&&("[object Object]"===a||"[object Array]"===a)){var r=e instanceof G,o=e instanceof eE;"[object Object]"!==a||o||r?("[object Array]"===a||r||o)&&(r||o||(e=new G(e)),s=K(this,w,t,!1),e.bind(w,s),this._handlers[t]={change:s}):(e instanceof Y||(e=new Y(e)),n=K(this,"get",t,!0),e.bind("get",n),s=K(this,w,t,!0),e.bind(w,s),this._handlers[t]={get:n,change:s}),e.parent=i}return e}}),Q={number:function(e){return typeof e===m&&"null"===e.toLowerCase()?null:u.parseFloat(e)},date:function(e){return typeof e===m&&"null"===e.toLowerCase()?null:u.parseDate(e)},boolean:function(e){return typeof e===m?"null"===e.toLowerCase()?null:"true"===e.toLowerCase():null!=e?!!e:e},string:function(e){return typeof e===m&&"null"===e.toLowerCase()?null:null!=e?e+"":e},default:function(e){return e}},X={string:"",number:0,date:new Date,boolean:!1,default:""},J=Y.extend({init:function(i){if((!i||e.isEmptyObject(i))&&(i=e.extend({},this.defaults,i),this._initializers))for(var n=0;n<this._initializers.length;n++){var s=this._initializers[n];i[s]=this.defaults[s]()}Y.fn.init.call(this,i),this.dirty=!1,this.dirtyFields={},this.idField&&(this.id=this.get(this.idField),this.id===t&&(this.id=this._defaultId))},shouldSerialize:function(e){return Y.fn.shouldSerialize.call(this,e)&&"uid"!==e&&!("id"!==this.idField&&"id"===e)&&"dirty"!==e&&"dirtyFields"!==e&&"_accessors"!==e},_parse:function(e,t){var i,n=e,a=this.fields||{};return(e=a[e])||(e=function(e,t){var i,n;for(n in e)if(s(i=e[n])&&i.field&&i.field===t||i===t)return i;return null}(a,n)),!e||(i=e.parse)||!e.type||(i=Q[e.type.toLowerCase()]),i?i(t):t},_notifyChange:function(e){var t=e.action;"add"!=t&&"remove"!=t||(this.dirty=!0,this.dirtyFields[e.field]=!0)},editable:function(e){return!(e=(this.fields||{})[e])||!1!==e.editable},set:function(e,t){var i=this.dirty;this.editable(e)&&(function e(t,i){if(t===i)return!0;var n,s=u.type(t);if(s!==u.type(i))return!1;if("date"===s)return t.getTime()===i.getTime();if("object"!==s&&"array"!==s)return!1;for(n in t)if(!e(t[n],i[n]))return!1;return!0}(t=this._parse(e,t),this.get(e))?this.trigger("equalSet",{field:e,value:t}):(this.dirty=!0,this.dirtyFields[e]=!0,Y.fn.set.call(this,e,t)&&!i&&(this.dirty=i,this.dirty||(this.dirtyFields[e]=!1))))},accept:function(e){var t,i=this,n=function(){return i};for(t in e){var s=e[t];"_"!=t.charAt(0)&&(s=i.wrap(e[t],t,n)),i._set(t,s)}i.idField&&(i.id=i.get(i.idField)),i.dirty=!1,i.dirtyFields={}},isNew:function(){return this.id===this._defaultId}});J.define=function(i,s){s===t&&(s=i,i=J);var a,r,o,l,d,h,u,c,p=n({defaults:{}},s),f={},g=p.id,v=[];if(g&&(p.idField=g),p.id&&delete p.id,g&&(p.defaults[g]=p._defaultId=""),"[object Array]"===V.call(p.fields)){for(h=0,u=p.fields.length;h<u;h++)typeof(o=p.fields[h])===m?f[o]={}:o.field&&(f[o.field]=o);p.fields=f}for(r in p.fields)l=(o=p.fields[r]).type||"default",d=null,c=r,r=typeof o.field===m?o.field:r,o.nullable||"function"==typeof(d=p.defaults[c!==r?c:r]=o.defaultValue!==t?o.defaultValue:X[l.toLowerCase()])&&v.push(r),s.id===r&&(p._defaultId=d),p.defaults[c!==r?c:r]=d,e.isPlainObject(o)?o.parse=o.parse||Q[l]:o={parse:Q[l]};return v.length>0&&(p._initializers=v),(a=i.extend(p)).define=function(e){return J.define(a,e)},p.fields&&(a.fields=p.fields,a.idField=p.idField),a};var Z={selector:function(e){return c(e)?e:A(e)},compare:function(e){var t=this.selector(e);return function(e,i){return e=t(e),i=t(i),null==e&&null==i?0:null==e?-1:null==i?1:e.localeCompare?e.localeCompare(i):e>i?1:e<i?-1:0}},create:function(e){var t=e.compare||this.compare(e.field);return"desc"==e.dir?function(e,i){return t(i,e,!0)}:t},combine:function(e){return function(t,i){var n,s,a=e[0](t,i);for(n=1,s=e.length;n<s;n++)a=a||e[n](t,i);return a}}},ee=n({},Z,{asc:function(e){var t=this.selector(e);return function(e,i){var n=t(e),s=t(i);return n&&n.getTime&&s&&s.getTime&&(n=n.getTime(),s=s.getTime()),n===s?e.__position-i.__position:null==n?-1:null==s?1:n.localeCompare?n.localeCompare(s):n>s?1:-1}},desc:function(e){var t=this.selector(e);return function(e,i){var n=t(e),s=t(i);return n&&n.getTime&&s&&s.getTime&&(n=n.getTime(),s=s.getTime()),n===s?e.__position-i.__position:null==n?1:null==s?-1:s.localeCompare?s.localeCompare(n):n<s?1:-1}},create:function(e){return this[e.dir](e.field)}});i=function(e,t){var i,n=e.length,s=Array(n);for(i=0;i<n;i++)s[i]=t(e[i],i,e);return s};var et=function(){function e(e){return"string"==typeof e&&(e=e.replace(/[\r\n]+/g,"")),JSON.stringify(e)}function t(t){return function(i,n,s,a){return n+="",s&&(i="("+i+" + '').toString()"+(a?".toLocaleLowerCase('"+a+"')":".toLowerCase()"),n=a?n.toLocaleLowerCase(a):n.toLowerCase()),t(i,e(n),s)}}function i(t,i,n,s,a){if(null!=n){if(typeof n===m){var r=W.exec(n);r?n=new Date(+r[1]):s?(n=e(a?n.toLocaleLowerCase(a):n.toLowerCase()),i="(("+i+" || '')+'')"+(a?".toLocaleLowerCase('"+a+"')":".toLowerCase()")):n=e(n)}n.getTime&&(i="("+i+"&&"+i+".getTime?"+i+".getTime():"+i+")",n=n.getTime())}return i+" "+t+" "+n}function n(e){for(var t="/^",i=!1,n=0;n<e.length;++n){var s=e.charAt(n);if(i)t+="\\"+s;else{if("~"==s){i=!0;continue}"*"==s?t+=".*":"?"==s?t+=".":".+^$()[]{}|\\/\n\r\u2028\u2029\xa0".indexOf(s)>=0?t+="\\"+s:t+=s}i=!1}return t+"$/"}return{quote:function(t){return t&&t.getTime?"new Date("+t.getTime()+")":e(t)},eq:function(e,t,n,s){return i("==",e,t,n,s)},neq:function(e,t,n,s){return i("!=",e,t,n,s)},gt:function(e,t,n){return i(">",e,t,n)},gte:function(e,t,n){return i(">=",e,t,n)},lt:function(e,t,n){return i("<",e,t,n)},lte:function(e,t,n){return i("<=",e,t,n)},startswith:t(function(e,t){return e+".lastIndexOf("+t+", 0) == 0"}),doesnotstartwith:t(function(e,t){return e+".lastIndexOf("+t+", 0) == -1"}),endswith:t(function(e,t){return e+".indexOf("+t+", "+e+".length - "+(t?t.length-2:0)+") >= 0"}),doesnotendwith:t(function(e,t){return e+".indexOf("+t+", "+e+".length - "+(t?t.length-2:0)+") < 0"}),contains:t(function(e,t){return e+".indexOf("+t+") >= 0"}),doesnotcontain:t(function(e,t){return e+".indexOf("+t+") == -1"}),matches:t(function(e,t){return n(t=t.substring(1,t.length-1))+".test("+e+")"}),doesnotmatch:t(function(e,t){return"!"+n(t=t.substring(1,t.length-1))+".test("+e+")"}),isempty:function(e){return e+" === ''"},isnotempty:function(e){return e+" !== ''"},isnull:function(e){return"("+e+" == null)"},isnotnull:function(e){return"("+e+" != null)"},isnullorempty:function(e){return"("+e+" === null) || ("+e+" === '')"},isnotnullorempty:function(e){return"("+e+" !== null) && ("+e+" !== '')"}}}();function ei(e){this.data=e||[]}function en(e,i){if(e){var n=typeof e===m?{field:e,dir:i}:e;return o(r(n)?n:n!==t?[n]:[],function(e){return!!e.dir})}}function es(e,i){var n={};if(e)for(var s=typeof e===m?{field:e,dir:i}:e,a=r(s)?s:s!==t?[s]:[],o=0;o<a.length;o++)n[a[o].field]={dir:a[o].dir,index:o+1};return n}ei.filterExpr=function(e){var i,n,s,a,r,o,l=[],d=[],h=[],c=e.filters;for(i=0,n=c.length;i<n;i++)r=(s=c[i]).field,o=s.operator,s.filters?(s=(a=ei.filterExpr(s)).expression.replace(/__o\[(\d+)\]/g,function(e,t){return t=+t,"__o["+(h.length+t)+"]"}).replace(/__f\[(\d+)\]/g,function(e,t){return t=+t,"__f["+(d.length+t)+"]"}),h.push.apply(h,a.operators),d.push.apply(d,a.fields)):(typeof r===g?(a="__f["+d.length+"](d)",d.push(r)):a=u.expr(r),typeof o===g?(s="__o["+h.length+"]("+a+", "+et.quote(s.value)+")",h.push(o)):s=et[(o||"eq").toLowerCase()](a,s.value,s.ignoreCase===t||s.ignoreCase,e.accentFoldingFiltering)),l.push(s);return{expression:"("+l.join({and:" && ",or:" || "}[e.logic])+")",fields:d,operators:h}};var ea={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain",isnull:"isnull",isempty:"isempty",isnotempty:"isnotempty"};function er(e){if(e&&!a(e))return!r(e)&&e.filters||(e={logic:"and",filters:r(e)?e:[e]}),function e(t){var i,n,s,a,r=t.filters;if(r)for(i=0,n=r.length;i<n;i++)(a=(s=r[i]).operator)&&typeof a===m&&(s.operator=ea[a.toLowerCase()]||a),e(s)}(e),e}function eo(e){return a(e=e||{})?{logic:"and",filters:[]}:er(e)}function el(e,t){return t.logic||e.field>t.field?1:e.field<t.field?-1:0}function ed(e,n,s,a){var o=typeof e===m?{field:e,dir:n,compare:s,skipItemSorting:a}:e;return i(r(o)?o:o!==t?[o]:[],function(e){return{field:e.field,dir:e.dir||"asc",aggregates:e.aggregates,compare:e.compare,skipItemSorting:e.skipItemSorting}})}function eh(e,t,i){for(var n=ed(e,t,i),s=0;s<n.length;s++)delete n[s].compare;return n}function eu(e,t){return e&&e.getTime&&t&&t.getTime?e.getTime()===t.getTime():e===t}ei.normalizeFilter=er,ei.compareFilters=function e(t,i){if(t=eo(t),i=eo(i),t.logic!==i.logic)return!1;var n,s,a=(t.filters||[]).slice(),r=(i.filters||[]).slice();if(a.length!==r.length)return!1;a=a.sort(el),r=r.sort(el);for(var o=0;o<a.length;o++)if(n=a[o],s=r[o],n.logic&&s.logic){if(!e(n,s))return!1}else if(n.logic||s.logic||n.field!==s.field||n.value!==s.value||n.operator!==s.operator)return!1;return!0},ei.prototype={toArray:function(){return this.data},range:function(e,t){return new ei(this.data.slice(e,e+t))},skip:function(e){return new ei(this.data.slice(e))},take:function(e){return new ei(this.data.slice(0,e))},select:function(e){return new ei(i(this.data,e))},order:function(e,t,i){var n={dir:t};return e&&(e.compare?n.compare=e.compare:n.field=e),new ei(i?this.data.sort(Z.create(n)):this.data.slice(0).sort(Z.create(n)))},orderBy:function(e,t){return this.order(e,"asc",t)},orderByDescending:function(e,t){return this.order(e,"desc",t)},sort:function(e,t,i,n){var s,a,r=en(e,t),o=[];if(i=i||Z,r.length){for(s=0,a=r.length;s<a;s++)o.push(i.create(r[s]));return this.orderBy({compare:i.combine(o)},n)}return this},filter:function(e){var t,i,n,s,a,r,o,l,d=this.data,h=[];if(!(e=er(e))||0===e.filters.length)return this;for(r=(s=ei.filterExpr(e)).fields,o=s.operators,a=l=Function("d, __f, __o","return "+s.expression),(r.length||o.length)&&(l=function(e){return a(e,r,o)}),t=0,n=d.length;t<n;t++)l(i=d[t])&&h.push(i);return new ei(h)},group:function(e,t,i){e=ed(e||[]),t=t||this.data;var n,s=new ei(this.data);return e.length>0&&(n=e[0],s=i&&i.groupPaging?new ei(t).groupAllData(n,t).select(function(s){var a=new ei(t).filter([{field:s.field,operator:"eq",value:s.value,ignoreCase:!1}]),r=e.length>1?new ei(s.items).group(e.slice(1),a.toArray(),i).toArray():s.items;return{field:s.field,value:s.value,hasSubgroups:e.length>1,items:r,aggregates:a.aggregate(n.aggregates),uid:u.guid(),itemCount:r.length,subgroupCount:r.length}}):s.groupBy(n).select(function(i){var s=new ei(t).filter([{field:i.field,operator:"eq",value:i.value,ignoreCase:!1}]);return{field:i.field,value:i.value,items:e.length>1?new ei(i.items).group(e.slice(1),s.toArray()).toArray():i.items,hasSubgroups:e.length>1,aggregates:s.aggregate(n.aggregates)}})),s},groupBy:function(e){if(a(e)||!this.data.length)return new ei([]);var t,i,n,s,r=e.field,o=e.skipItemSorting?this.data:this._sortForGrouping(r,e.dir||"asc"),l=u.accessor(r),d=l.get(o[0],r),h={field:r,value:d,items:[]},c=[h];for(n=0,s=o.length;n<s;n++)t=o[n],eu(d,i=l.get(t,r))||(h={field:r,value:d=i,items:[]},c.push(h)),h.items.push(t);return new ei(c=this._sortGroups(c,e))},groupAllData:function(e,t){if(a(e)||this.data&&!this.data.length)return new ei([]);var i,n,s,r,o=e.field,l=e.skipItemSorting?t:new ei(t).sort(o,e.dir||"asc",ee).toArray(),d=u.accessor(o),h=d.get(l[0],o),c={field:o,value:h,items:[]},p=[c];for(s=0,r=l.length;s<r;s++)i=l[s],eu(h,n=d.get(i,o))||(c={field:o,value:h=n,items:[]},p.push(c)),c.items.push(i);return new ei(p=this._sortGroups(p,e))},_sortForGrouping:function(e,t){var i,n,s=this.data;if(!U){for(i=0,n=s.length;i<n;i++)s[i].__position=i;for(i=0,n=(s=new ei(s).sort(e,t,ee).toArray()).length;i<n;i++)delete s[i].__position;return s}return this.sort(e,t).toArray()},_sortGroups:function(e,t){var i=e;return t&&c(t.compare)&&(i=new ei(i).order({compare:t.compare},t.dir||"asc").toArray()),i},aggregate:function(e){var t,i,n={},s={};if(e&&e.length)for(t=0,i=this.data.length;t<i;t++)(function(e,t,i,n,s,a){var r,o,l,d=(t=t||[]).length;for(r=0;r<d;r++){l=(o=t[r]).aggregate;var h=o.field;e[h]=e[h]||{},a[h]=a[h]||{},a[h][l]=a[h][l]||{},e[h][l]=ec[l.toLowerCase()](e[h][l],i,u.accessor(h),n,s,a[h][l])}})(n,e,this.data[t],t,i,s);return n}};var ec={sum:function(e,t,i){var n=i.get(t);return ep(e)?ep(n)&&(e+=n):e=n,e},count:function(e){return(e||0)+1},average:function(e,i,n,s,a,r){var o=n.get(i);return r.count===t&&(r.count=0),ep(e)?ep(o)&&(e+=o):e=o,ep(o)&&r.count++,s==a-1&&ep(e)&&(e/=r.count),e},max:function(e,t,i){var n=i.get(t);return ep(e)||ef(e)||(e=n),e<n&&(ep(n)||ef(n))&&(e=n),e},min:function(e,t,i){var n=i.get(t);return ep(e)||ef(e)||(e=n),e>n&&(ep(n)||ef(n))&&(e=n),e}};function ep(e){return"number"==typeof e&&!isNaN(e)}function ef(e){return e&&e.getTime}function em(e){var t,i=e.length,n=Array(i);for(t=0;t<i;t++)n[t]=e[t].toJSON();return n}ei.normalizeGroup=ed,ei.normalizeSort=en,ei.process=function(e,s,o){var l,d,h=(s=s||{}).group,u=function(e){for(var t=r(e)?e:[e],i=0;i<t.length;i++)if(t[i]&&c(t[i].compare))return!0;return!1}(ed(h||[])),p=new ei(e),f=eh(h||[]),m=en(s.sort||[]),g=u?m:f.concat(m),v=s.filterCallback,_=s.filter,b=s.skip,k=s.take;return g&&o&&(p=p.sort(g,t,t,o)),_&&(p=p.filter(_),v&&(p=v(p)),d=p.toArray().length),g&&(o||(p=p.sort(g)),h&&(e=p.toArray())),u?(p=p.group(h,e,s),b===t||k===t||s.groupPaging||(p=new ei(function e(t,i){for(var n,s,a=[],r=(t||[]).length,o=c(i)?i:function(e,t){return e[t]},l=0;l<r;l++)if((n=o(t,l)).hasSubgroups)a=a.concat(e(n.items));else{s=n.items;for(var d=0;d<s.length;d++)a.push(o(s,d))}return a}(p.toArray())).range(b,k),l=i(f,function(e){return n({},e,{skipItemSorting:!0})}),p=p.group(l,e,s))):(b!==t&&k!==t&&(b+k>(d=p.data.length)&&s.virtual&&(b=(b-=b+k-d)<0?0:b),p=p.range(b,k)),!h||a(h)&&0===h.length||(p=p.group(h,e,s))),{total:d,data:p.toArray()}};var eg=f.extend({init:function(e){this.data=e.data},read:function(e){e.success(this.data)},update:function(e){e.success(e.data)},create:function(e){e.success(e.data)},destroy:function(e){e.success(e.data)}}),ev=f.extend({init:function(e){var t;e=this.options=n({},this.options,e),d(F,function(t,i){typeof e[i]===m&&(e[i]={url:e[i]})}),this.cache=e.cache?e_.create(e.cache):{find:h,add:h},t=e.parameterMap,e.submit&&(this.submit=e.submit),c(e.push)&&(this.push=e.push),this.push||(this.push=E),this.parameterMap=c(t)?t:function(e){var i={};return d(e,function(e,n){e in t&&s(e=t[e])&&(n=e.value(n),e=e.key),i[e]=n}),i}},options:{parameterMap:E},create:function(e){return l(this.setup(e,v))},read:function(i){var n,s,a=this.cache;n=(i=this.setup(i,_)).success||h,i.error,(s=a.find(i.data))!==t?n(s):(i.success=function(e){a.add(i.data,e),n(e)},e.ajax(i))},update:function(e){return l(this.setup(e,b))},destroy:function(e){return l(this.setup(e,k))},setup:function(e,t){e=e||{};var i,s=this.options[t],a=c(s.data)?s.data(e.data):s.data;return e=n(!0,{},s,e),i=n(!0,{},a,e.data),e.data=this.parameterMap(i,t),c(e.url)&&(e.url=e.url(i)),e}}),e_=f.extend({init:function(){this._store={}},add:function(e,i){e!==t&&(this._store[z(e)]=i)},find:function(e){return this._store[z(e)]},clear:function(){this._store={}},remove:function(e){delete this._store[z(e)]}});function eb(e,t,i,n,s){var a,r,o,l,d,h={};for(l=0,d=e.length;l<d;l++)for(r in a=e[l],t)(o=s[r])&&o!==r&&(h[o]||(h[o]=u.setter(o)),h[o](a,t[r](a)),delete a[r])}function ek(e,t,i,n,s){var a,r,o,l,d;for(l=0,d=e.length;l<d;l++)for(r in a=e[l],t)a[r]=i._parse(r,t[r](a)),(o=s[r])&&o!==r&&delete a[o]}function ew(e,t,i,n,s,a){return function(r){return r=e(r),ey(t,i,n,s,a)(r)}}function ey(e,t,i,n,s){return function(r){return r&&!a(i)&&("[object Array]"===V.call(r)||r instanceof G||(r=[r]),t(r,i,new e,n,s)),r||[]}}e_.create=function(e){return s(e)&&c(e.find)?e:!0===e?new e_:({inmemory:function(){return new e_}})[e]()};var ex=f.extend({init:function(e){for(i in e=e||{})n=e[i],this[i]=typeof n===m?A(n):n;r=e.modelBase||J,s(this.model)&&(this.model=a=r.define(this.model));var t=this.data.bind(this);if(this._dataAccessFunction=t,this.model){var i,n,a,r,o,l,h=this.groups.bind(this),u=this.serialize.bind(this),c={},p={},f={},g={},v=!1;(a=this.model).fields&&(d(a.fields,function(e,t){var i;o=e,s(t)&&t.field?o=t.field:typeof t===m&&(o=t),s(t)&&t.from&&(i=t.from),v=v||i&&i!==e||o!==e,l=i||o,p[e]=-1!==l.indexOf(".")?A(l,!0):A(l),f[e]=A(e),c[i||o]=e,g[e]=i||o}),!e.serialize&&v&&(this.serialize=ew(u,a,eb,f,c,g))),this._dataAccessFunction=t,this._wrapDataAccessBase=ey(a,ek,p,c,g),this.data=ew(t,a,ek,p,c,g),this.groups=ew(h,a,function e(t,i,n,s,a){var r,o,l,d;for(o=0,d=t.length;o<d;o++)(l=s[(r=t[o]).field])&&l!=r.field&&(r.field=l),r.value=n._parse(r.field,r.value),r.items&&(r.hasSubgroups?e(r.items,i,n,s,a):ek(r.items,i,n,0,a))},p,c,g)}},errors:function(e){return e?e.errors:null},parse:E,data:E,total:function(e){return e.length},groups:E,aggregates:function(){return{}},serialize:function(e){return e}});function eC(e){var t,i,n,s,a=[];for(t=0,i=e.length;t<i;t++){var r=e.at(t);if(r.items){if(r.hasSubgroups)a=a.concat(eC(r.items));else for(n=r.items,s=0;s<n.length;s++)a.push(n.at(s))}}return a}function eT(e,t){return t?eI(e,function(e){return e.uid&&e.uid==t.uid||e[t.idField]===t.id&&t.id!==t._defaultId}):-1}function eS(e,t){return t?eI(e,function(e){return e.uid==t.uid}):-1}function eI(e,t){var i,n;if(e){for(i=0,n=e.length;i<n;i++)if(t(e[i]))return i;return -1}}function eD(e,t){if(e&&!a(e)){var i,n=e[t];return c(i=s(n)?n.from||n.field||t:e[t]||t)?t:i}return t}function eF(e,t){var i,n,s,a,o=[];for(i=0,n=e.length;i<n;i++){for(var l in s={},a=e[i])s[l]=a[l];s.field=eD(t.fields,s.field),s.aggregates&&r(s.aggregates)&&(s.aggregates=eF(s.aggregates,t)),o.push(s)}return o}var eE=p.extend({init:function(e){var i,s=this;if(e&&(i=e.data),e=s.options=n({},s.options,e),s._map={},s._prefetch={},s._data=[],s._pristineData=[],s._ranges=[],s._view=[],s._pristineTotal=0,s._destroyed=[],s._pageSize=e.pageSize,s._page=e.page||(e.pageSize?1:t),s._sort=en(e.sort),s._sortFields=es(e.sort),s._filter=er(e.filter),s._group=ed(e.group),s._aggregate=e.aggregate,s._total=e.total,s._groupPaging=e.groupPaging,s._groupPaging&&(s._groupsState={}),s._shouldDetachObservableParents=!0,p.fn.init.call(s),s.transport=eA.create(e,i,s),c(s.transport.push)&&s.transport.push({pushCreate:s._pushCreate.bind(s),pushUpdate:s._pushUpdate.bind(s),pushDestroy:s._pushDestroy.bind(s)}),null!=e.offlineStorage){if("string"==typeof e.offlineStorage){var a=e.offlineStorage;s._storage={getItem:function(){return JSON.parse(localStorage.getItem(a))},setItem:function(e){localStorage.setItem(a,z(s.reader.serialize(e)))}}}else s._storage=e.offlineStorage}s.reader=new u.data.readers[e.schema.type||"json"](e.schema),s.reader.model,s._detachObservableParents(),s._data=s._observe(s._data),s._online=!0,s.bind(["push",x,w,C,y,S,T],e)},options:{data:null,schema:{modelBase:J},offlineStorage:null,serverSorting:!1,serverPaging:!1,serverFiltering:!1,serverGrouping:!1,serverAggregates:!1,batch:!1,inPlaceSort:!1},clone:function(){return this},online:function(i){return i!==t?this._online!=i&&(this._online=i,i)?this.sync():e.Deferred().resolve().promise():this._online},offlineData:function(e){return null==this.options.offlineStorage?null:e!==t?this._storage.setItem(e):this._storage.getItem()||[]},_isGrouped:function(){return(this.group()||[]).length},_isServerGrouped:function(){var e=this.group()||[];return this.options.serverGrouping&&e.length},_isServerGroupPaged:function(){return this._isServerGrouped()&&this._groupPaging},_isGroupPaged:function(){var e=this._group||[];return this._groupPaging&&e.length},_pushCreate:function(e){this._push(e,"pushCreate")},_pushUpdate:function(e){this._push(e,"pushUpdate")},_pushDestroy:function(e){this._push(e,"pushDestroy")},_push:function(e,t){var i=this._readData(e);i||(i=e),this[t](i)},_flatData:function(e,t){if(e){if(this._isServerGrouped())return eC(e);if(!t)for(var i=0;i<e.length;i++)e.at(i)}return e},parent:h,get:function(e){var t,i,n=this._flatData(this._data,this.options.useRanges);for(t=0,i=n.length;t<i;t++)if(n[t].id==e)return n[t]},getByUid:function(e){return this._getByUid(e,this._data)},_getByUid:function(e,t){var i,n,s=this._flatData(t,this.options.useRanges);if(s){for(i=0,n=s.length;i<n;i++)if(s[i].uid==e)return s[i]}},indexOf:function(e){return eS(this._data,e)},at:function(e){return this._data.at(e)},data:function(e){if(e===t){if(this._data)for(var i=0;i<this._data.length;i++)this._data.at(i);return this._data}this._detachObservableParents(),this._data=this._observe(e),this._pristineData=e.slice(0),this._storeData(),this._ranges=[],this.trigger("reset"),this._addRange(this._data),this._total=this._data.length,this._pristineTotal=this._total,this._process(this._data)},view:function(e){if(e===t)return this._view;this._view=this._observeView(e)},_observeView:function(e){var i=this;!function e(i,n,s,a,r){for(var o=0,l=i.length;o<l;o++){var d=i[o];if(d&&!(d instanceof a)){if(d.hasSubgroups===t||r){for(var h=0;h<n.length;h++)if(n[h]===d){i[o]=n.at(h),function(e,t,i,n){for(var s=0;s<e.length&&e[s].data!==t&&!function e(t,i,n){for(var s=0,a=t.length;s<a;s++){if(t[s]&&t[s].hasSubgroups)return e(t[s].items,i,n);if(t[s]===i||t[s]===n)return t[s]=n,!0}}(e[s].data,i,n);s++);}(s,n,d,i[o]);break}}else e(d.items,n,s,a,r)}}}(e,i._data,i._ranges,i.reader.model||Y,i._isServerGrouped());var n=new q(e,i.reader.model);return n.parent=function(){return i.parent()},n},flatView:function(){return(this.group()||[]).length?eC(this._view):this._view},add:function(e){return this.insert(this._data.length,e)},_createNewModel:function(e){return this.reader.model?new this.reader.model(e):e instanceof Y?e:new Y(e)},insert:function(e,t){return t||(t=e,e=0),t instanceof J||(t=this._createNewModel(t)),this._isServerGrouped()?this._data.splice(e,0,this._wrapInEmptyGroup(t)):this._data.splice(e,0,t),this._insertModelInRange(e,t),t},pushInsert:function(t,i){var n=this._getCurrentRangeSpan();i||(i=t,t=0),r(i)||(i=[i]);var s=[],a=this.options.autoSync;this.options.autoSync=!1;try{for(var o=0;o<i.length;o++){var l=i[o],d=this.insert(t,l);s.push(d);var h=d.toJSON();this._isServerGrouped()&&(h=this._wrapInEmptyGroup(h)),this._pristineData.push(h),n&&n.length&&e(n).last()[0].pristineData.push(h),t++}}finally{this.options.autoSync=a}s.length&&this.trigger("push",{type:"create",items:s})},pushCreate:function(e){this.pushInsert(this._data.length,e)},pushUpdate:function(e){r(e)||(e=[e]);for(var t=[],i=0;i<e.length;i++){var n=e[i],s=this._createNewModel(n),a=this.get(s.id);a?(t.push(a),a.accept(n),a.trigger(w),this._updatePristineForModel(a,n)):this.pushCreate(n)}t.length&&this.trigger("push",{type:"update",items:t})},pushDestroy:function(e){var t=this._removeItems(e);t.length&&this.trigger("push",{type:"destroy",items:t})},_removeItems:function(e,t){r(e)||(e=[e]);var i=void 0===t||t,n=[],s=this.options.autoSync;this.options.autoSync=!1;try{for(var a=0;a<e.length;a++){var o=e[a],l=this._createNewModel(o),d=!1;this._eachItem(this._data,function(e){for(var t=0;t<e.length;t++){var i=e.at(t);if(i.id===l.id){n.push(i),e.splice(t,1),d=!0;break}}}),d&&i&&(this._removePristineForModel(l),this._destroyed.pop())}}finally{this.options.autoSync=s}return n},pushMove:function(e,t){var i=this._moveItems(e,t);i.length&&this.trigger("push",{type:"update",items:i})},_moveItems:function(e,t){r(t)||(t=[t]);var i=[],n=this.options.autoSync;this.options.autoSync=!1;try{for(var s=0;s<t.length;s++){var a=t[s],o=this._createNewModel(a);this._eachItem(this._data,function(t){for(var n=0;n<t.length;n++){var s=t.at(n);if(s.id===o.id){i.push(s),t.splice(e>=n?--e:e,0,t.splice(n,1)[0]),e++;break}}})}}finally{this.options.autoSync=n}return i},remove:function(e){var t=this._isServerGrouped();return!t||!e.uid||e.isNew&&e.isNew()||this._pushInDestroyed(e),this._eachItem(this._data,function(i){if(function(e,t){if(e){var i,n,s=e.length;for(n=0;n<s;n++)if((i=e[n]).uid&&i.uid==t.uid)return e.splice(n,1),i}}(i,e)&&t)return!0}),this._removeModelFromRanges(e),e},destroyed:function(){return this._destroyed},created:function(){var e,t,i=[],n=this._flatData(this._data,this.options.useRanges);for(e=0,t=n.length;e<t;e++)n[e].isNew&&n[e].isNew()&&i.push(n[e]);return i},updated:function(){var e,t,i=[],n=this._flatData(this._data,this.options.useRanges);for(e=0,t=n.length;e<t;e++)n[e].isNew&&!n[e].isNew()&&n[e].dirty&&i.push(n[e]);return i},sync:function(){var t=this,i=[],n=[],s=t._destroyed,a=e.Deferred().resolve().promise();if(t.online()){if(!t.reader.model)return a;i=t.created(),n=t.updated();var r=[];t.options.batch&&t.transport.submit?r=t._sendSubmit(i,n,s):(r.push.apply(r,t._send("create",i)),r.push.apply(r,t._send("update",n)),r.push.apply(r,t._send("destroy",s))),a=e.when.apply(null,r).then(function(){var e,i,n=arguments;for(e=0,i=arguments.length;e<i;e++)n[e]&&t._accept(n[e]);t._storeData(!0),t._syncEnd(),t._change({action:"sync"}),t.trigger(y),t._isServerGroupPaged()&&t.read()})}else t._storeData(!0),t._syncEnd(),t._change({action:"sync"});return a},_syncEnd:h,cancelChanges:function(e){e instanceof u.data.Model?this._cancelModel(e):(this._destroyed=[],this._detachObservableParents(),this._data=this._observe(this._pristineData),this.options.serverPaging&&(this._total=this._pristineTotal),this._ranges=[],this._addRange(this._data,0),this._changesCanceled(),this._change(),this._markOfflineUpdatesAsDirty(),this._isServerGrouped()&&this.read())},_changesCanceled:h,_markOfflineUpdatesAsDirty:function(){null!=this.options.offlineStorage&&this._eachItem(this._data,function(e){for(var t=0;t<e.length;t++){var i=e.at(t);"update"!=i.__state__&&"create"!=i.__state__||(i.dirty=!0)}})},hasChanges:function(){var e,t,i=this._flatData(this._data,this.options.useRanges);if(this._destroyed.length)return!0;for(e=0,t=i.length;e<t;e++)if(i[e].isNew&&i[e].isNew()||i[e].dirty)return!0;return!1},_accept:function(t){var i,n=t.models,s=t.response,o=0,l=this._isServerGrouped(),d=this._pristineData,h=t.type;if(this.trigger(S,{response:s,type:h}),s&&!a(s)){if(s=this.reader.parse(s),this._handleCustomErrors(s))return;r(s=this.reader.data(s))||(s=[s])}else s=e.map(n,function(e){return e.toJSON()});for("destroy"===h&&(this._destroyed=[]),o=0,i=n.length;o<i;o++)"destroy"!==h?(n[o].accept(s[o]),"create"===h?d.push(l?this._wrapInEmptyGroup(n[o].toJSON()):s[o]):"update"===h&&this._updatePristineForModel(n[o],s[o])):this._removePristineForModel(n[o])},_updatePristineForModel:function(e,t){this._executeOnPristineForModel(e,function(e,i){u.deepExtend(i[e],t)})},_executeOnPristineForModel:function(e,t){this._eachPristineItem(function(i){var n=eT(i,e);if(n>-1)return t(n,i),!0})},_removePristineForModel:function(e){this._executeOnPristineForModel(e,function(e,t){t.splice(e,1)})},_readData:function(e){return(this._isServerGrouped()?this.reader.groups:this.reader.data).call(this.reader,e)},_eachPristineItem:function(e){var t=this,i=t.options,n=t._getCurrentRangeSpan();t._eachItem(t._pristineData,e),i.serverPaging&&i.useRanges&&d(n,function(i,n){t._eachItem(n.pristineData,e)})},_eachItem:function(e,t){e&&e.length&&(this._isServerGrouped()?function e(t,i){for(var n=0;n<t.length;n++)if(t[n].hasSubgroups){if(e(t[n].items,i))return!0}else if(i(t[n].items,t[n]))return!0}(e,t):t(e))},_pristineForModel:function(e){var t,i;return this._eachPristineItem(function(n){if((i=eT(n,e))>-1)return t=n[i],!0}),t},_cancelModel:function(e){var t=this,i=this._pristineForModel(e);this._eachItem(this._data,function(n){var s=eS(n,e);s>=0&&(!i||e.isNew()&&!i.__state__?(t._modelCanceled(e),n.splice(s,1),t._removeModelFromRanges(e)):(n[s].accept(i),"update"==i.__state__&&(n[s].dirty=!0)))})},_modelCanceled:h,_submit:function(t,i){var s=this;s.trigger(C,{type:"submit"}),s.trigger(T),s.transport.submit(n({success:function(i,n){var s=e.grep(t,function(e){return e.type==n})[0];s&&s.resolve({response:i,models:s.models,type:n})},error:function(e,i,n){for(var a=0;a<t.length;a++)t[a].reject(e);s.error(e,i,n)}},i))},_sendSubmit:function(t,i,n){var s=[];return this.options.batch&&(t.length&&s.push(e.Deferred(function(e){e.type="create",e.models=t})),i.length&&s.push(e.Deferred(function(e){e.type="update",e.models=i})),n.length&&s.push(e.Deferred(function(e){e.type="destroy",e.models=n})),this._submit(s,{data:{created:this.reader.serialize(em(t)),updated:this.reader.serialize(em(i)),destroyed:this.reader.serialize(em(n))}})),s},_promise:function(t,i,s){var a=this;return e.Deferred(function(e){a.trigger(C,{type:s}),a.trigger(T),a.transport[s].call(a.transport,n({success:function(t){e.resolve({response:t,models:i,type:s})},error:function(t,i,n){e.reject(t),a.error(t,i,n)}},t))}).promise()},_send:function(e,t){var i,n,s=[],a=this.reader.serialize(em(t));if(this.options.batch)t.length&&s.push(this._promise({data:{models:a}},t,e));else for(i=0,n=t.length;i<n;i++)s.push(this._promise({data:a[i]},[t[i]],e));return s},read:function(t){var i=this,n=i._params(t),s=e.Deferred();return i._queueRequest(n,function(){var e=i.trigger(C,{type:"read"});e?(i._dequeueRequest(),s.resolve(e)):(i.trigger(T),i._ranges=[],i.trigger("reset"),i.online()?i.transport.read({data:n,success:function(e){i._ranges=[],i.success(e,n),s.resolve()},error:function(){var e=B.call(arguments);i.error.apply(i,e),s.reject.apply(s,e)}}):null!=i.options.offlineStorage&&(i.success(i.offlineData(),n),s.resolve()))}),s.promise()},_readAggregates:function(e){return this.reader.aggregates(e)},success:function(e){var t,i,n=this.options;if(this.trigger(S,{response:e,type:"read"}),this.online()){if(e=this.reader.parse(e),this._handleCustomErrors(e))return void this._dequeueRequest();this._total=this.reader.total(e),this._isServerGroupPaged()&&(this._serverGroupsTotal=this._total),this._pageSize>this._total&&(this._pageSize=this._total,this.options.pageSize&&this.options.pageSize>this._pageSize&&(this._pageSize=this.options.pageSize)),this._aggregate&&n.serverAggregates&&(this._aggregateResult=this._readAggregates(e)),e=this._readData(e),this._destroyed=[]}else{e=this._readData(e),t=[];var s,a={},r=this.reader.model,o=r?r.idField:"id";for(s=0;s<this._destroyed.length;s++){var l=this._destroyed[s][o];a[l]=l}for(s=0;s<e.length;s++){var d=e[s];"destroy"==d.__state__?a[d[o]]||this._pushInDestroyed(this._createNewModel(d)):t.push(d)}e=t,this._total=e.length}if(this._pristineTotal=this._total,i=this._skip&&this._data.length&&this._skip<this._data.length,this.options.endless){i&&this._pristineData.splice(this._skip,this._pristineData.length),t=e.slice(0);for(var h=0;h<t.length;h++)this._pristineData.push(t[h])}else this._pristineData=e.slice(0);if(this._detachObservableParents(),this.options.endless){this._data.unbind(w,this._changeHandler),this._isServerGrouped()&&this._data[this._data.length-1].value===e[0].value&&(function e(t,i){var n,s;if(i.items&&i.items.length)for(var a=0;a<i.items.length;a++)n=t.items[t.items.length-1],s=i.items[a],n&&s?n.hasSubgroups&&n.value==s.value?e(n,s):n.field&&n.value==s.value?(n.items.omitChangeEvent=!0,n.items.push.apply(n.items,s.items),n.items.omitChangeEvent=!1):(t.items.omitChangeEvent=!0,t.items.push.apply(t.items,[s]),t.items.omitChangeEvent=!1):s&&(t.items.omitChangeEvent=!0,t.items.push.apply(t.items,[s]),t.items.omitChangeEvent=!1)}(this._data[this._data.length-1],e[0]),e.shift()),e=this._observe(e),i&&this._data.splice(this._skip,this._data.length);for(var u=0;u<e.length;u++)this._data.push(e[u]);this._data.bind(w,this._changeHandler)}else this._data=this._observe(e);this._markOfflineUpdatesAsDirty(),this._storeData(),this._addRange(this._data),this._process(this._data),this._dequeueRequest()},_detachObservableParents:function(){if(this._data&&this._shouldDetachObservableParents)for(var e=0;e<this._data.length;e++)this._data[e].parent&&(this._data[e].parent=h)},_storeData:function(e){var t=this._isServerGrouped(),i=this.reader.model;if(null!=this.options.offlineStorage){for(var n=function e(n){for(var s=[],a=0;a<n.length;a++){var r=n.at(a),o=r.toJSON();t&&r.items?o.items=e(r.items):(o.uid=r.uid,i&&(r.isNew()?o.__state__="create":r.dirty&&(o.__state__="update"))),s.push(o)}return s}(this._data),s=[],a=0;a<this._destroyed.length;a++){var r=this._destroyed[a].toJSON();r.__state__="destroy",s.push(r)}this.offlineData(n.concat(s)),e&&(this._pristineData=this.reader.reader?this.reader.reader._wrapDataAccessBase(n):this.reader._wrapDataAccessBase(n))}},_addRange:function(e,t){var i,n=void 0!==t?t:this._skip||0,s={data:e,pristineData:e.toJSON(),timestamp:this._timeStamp()};this._isGroupPaged()?(i=n+e.length,s.outerStart=n,s.outerEnd=i):i=n+this._flatData(e,!0).length,s.start=n,s.end=i,this._ranges.push(s),this._sortRanges(),this._isGroupPaged()&&(this._groupsFlat||(this._groupsFlat=[]),this._appendToGroupsFlat(s.data),this._updateOuterRangesLength())},_appendToGroupsFlat:function(e){for(var t=e.length,i=0;i<t;i++)this._groupsFlat.push(e[i])},_getGroupByUid:function(e){for(var t,i=this._groupsFlat.length,n=0;n<i;n++)if((t=this._groupsFlat[n]).uid===e)return t},_sortRanges:function(){this._ranges.sort(function(e,t){return e.start-t.start})},error:function(e,t,i){this._dequeueRequest(),this.trigger(S,{}),this.trigger(x,{xhr:e,status:t,errorThrown:i})},_params:function(e){var t=n({take:this.take(),skip:this.skip(),page:this.page(),pageSize:this.pageSize(),sort:this._sort,filter:this._filter,group:this._group,aggregate:this._aggregate,groupPaging:!!this._groupPaging},e);return this.options.serverPaging||(delete t.take,delete t.skip,delete t.page,delete t.pageSize),this.options.serverGrouping?this.reader.model&&t.group&&(t.group=eF(t.group,this.reader.model)):delete t.group,this.options.serverFiltering?this.reader.model&&t.filter&&(t.filter=function e(t,i){var n,s,a={};for(var r in t)"filters"!==r&&(a[r]=t[r]);if(t.filters)for(a.filters=[],n=0,s=t.filters.length;n<s;n++)a.filters[n]=e(t.filters[n],i);else a.field=eD(i.fields,a.field);return a}(t.filter,this.reader.model)):delete t.filter,this.options.serverSorting?this.reader.model&&t.sort&&(t.sort=eF(t.sort,this.reader.model)):delete t.sort,this.options.serverAggregates?this.reader.model&&t.aggregate&&(t.aggregate=eF(t.aggregate,this.reader.model)):delete t.aggregate,this.options.groupPaging||delete t.groupPaging,t},_queueRequest:function(e,i){this._requestInProgress?this._pending={callback:i.bind(this),options:e}:(this._requestInProgress=!0,this._pending=t,i())},_dequeueRequest:function(){this._requestInProgress=!1,this._pending&&this._queueRequest(this._pending.options,this._pending.callback)},_handleCustomErrors:function(e){if(this.reader.errors){var t=this.reader.errors(e);if(t)return this.trigger(x,{xhr:null,status:"customerror",errorThrown:"custom error",errors:t}),!0}return!1},_shouldWrap:function(e){var t=this.reader.model;return!(!t||!e.length)&&!(e[0]instanceof t)},_observe:function(e){var t=this,i=t.reader.model;return(t._shouldDetachObservableParents=!0,e instanceof G)?(t._shouldDetachObservableParents=!1,t._shouldWrap(e)&&(e.type=t.reader.model,e.wrapAll(e,e))):(e=new(t.pageSize()&&!t.options.serverPaging?q:G)(e,t.reader.model)).parent=function(){return t.parent()},t._isServerGrouped()&&function e(t,i){var n,s,a;if(i)for(n=0,s=t.length;n<s;n++)(a=t.at(n)).items&&(a.hasSubgroups?e(a.items,i):a.items=new q(a.items,i,a.items._events))}(e,i),!(t._changeHandler&&t._data&&t._data instanceof G)||t.options.useRanges&&t.options.serverPaging?t._changeHandler=t._change.bind(t):t._data.unbind(w,t._changeHandler),e.bind(w,t._changeHandler)},_updateTotalForAction:function(e,t){var i=parseInt(this._total,10);ep(this._total)||(i=parseInt(this._pristineTotal,10)),"add"===e?i+=t.length:"remove"===e?i-=t.length:"itemchange"===e||"sync"===e||this.options.serverPaging?"sync"===e&&(i=this._pristineTotal=parseInt(this._total,10)):i=this._pristineTotal,this._total=i},_pushInDestroyed:function(e){this._destroyed.find(function(t){return t.uid===e.uid})||this._destroyed.push(e)},_change:function(e){var t,i,n=this,s=e?e.action:"";if("remove"===s)for(t=0,i=e.items.length;t<i;t++)e.items[t].isNew&&e.items[t].isNew()||n._pushInDestroyed(e.items[t]);if(n.options.autoSync&&("add"===s||"remove"===s||"itemchange"===s)){var a=function(t){"sync"===t.action&&(n.unbind("change",a),n._updateTotalForAction(s,e.items))};n.first("change",a),n.sync()}else n._updateTotalForAction(s,e?e.items:[]),n._process(n._data,e)},_calculateAggregates:function(e,t){t=t||{};var i=new ei(e),n=t.aggregate,s=t.filter;return s&&(i=i.filter(s)),i.aggregate(n)},_process:function(e,i){var n,s={};if(!0!==this.options.serverPaging&&(s.skip=this._skip,s.take=this._take||this._pageSize,s.skip===t&&this._page!==t&&this._pageSize!==t&&(s.skip=(this._page-1)*this._pageSize),this.options.useRanges&&(s.skip=this.currentRangeStart())),!0!==this.options.serverSorting&&(s.sort=this._sort),!0!==this.options.serverFiltering&&(s.filter=this._filter),!0!==this.options.serverGrouping&&(s.group=this._group),!0!==this.options.serverAggregates&&(s.aggregate=this._aggregate),this.options.serverGrouping&&this._clearEmptyGroups(e),s.groupPaging=this._groupPaging,n=this._isGroupPaged()&&i&&("page"===i.action||"expandGroup"===i.action||"collapseGroup"===i.action)?this._queryProcess(e,{aggregate:this._aggregate}):this._queryProcess(e,s),this._filter&&i&&"add"===i.action){var a=i.items[0];n.data.find(function(e){return e.uid===a.uid})||(n.data.splice(a.index,0,this._isGrouped()?this._wrapInEmptyGroup(a):a),n.total++)}!0!==this.options.serverAggregates&&(this._aggregateResult=this._calculateAggregates(n.dataToAggregate||e,s)),this._setView(n,s,i),this._setFilterTotal(n.total,!1),(i=i||{}).items=i.items||this._view,this.trigger(w,i)},_setView:function(e,t,i){if(this._isGroupPaged()&&!this._isServerGrouped()){if(i&&("page"===i.action||"expandGroup"===i.action||"collapseGroup"===i.action))this.view(e.data),this._updateOuterRangesLength();else{this._ranges=[];var n=new ei(e.data);this._addRange(this._observe(e.data)),t.skip+t.take>e.data.length&&(t.skip=e.data.length-t.take),this.view(n.range(t.skip,t.take).toArray())}}else this.view(e.data)},_clearEmptyGroups:function(e){for(var t=e.length-1;t>=0;t--){var i=e[t];i.hasSubgroups&&this._clearEmptyGroups(i.items),!i.items||i.items.length||i.itemCount||O.apply(i.parent(),[t,1])}},_queryProcess:function(e,t){return this.options.inPlaceSort?ei.process(e,t,this.options.inPlaceSort):ei.process(e,t)},_mergeState:function(i){var n;return i!==t&&(this._pageSize=i.pageSize,this._page=i.page,this._sort=i.sort,this._filter=i.filter,this._group=i.group,this._aggregate=i.aggregate,this._skip=this._currentRangeStart=i.skip,this._take=i.take,this._skip===t&&(this._skip=this._currentRangeStart=this.skip(),i.skip=this.skip()),this._take===t&&this._pageSize!==t&&(this._take=this._pageSize,i.take=this._take),this.options.virtual&&(i.virtual=this.options.virtual),i.sort&&(this._sort=i.sort=en(i.sort),this._sortFields=es(i.sort)),i.filter&&(this._filter=i.filter=this.options.accentFoldingFiltering&&!e.isEmptyObject(i.filter)?e.extend({},er(i.filter),{accentFoldingFiltering:this.options.accentFoldingFiltering}):er(i.filter)),i.group&&(this._group=i.group=ed(i.group)),i.aggregate&&(this._aggregate=i.aggregate=r(n=i.aggregate)?n:[n])),i},query:function(i){if(this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates||(this._data===t||0===this._data.length)&&!this._destroyed.length){if(this.options.endless){var n,s=i.pageSize-this.pageSize();s>0?(s=this.pageSize(),i.page=i.pageSize/s,i.pageSize=s):(i.page=1,this.options.endless=!1)}return this.read(this._mergeState(i))}var a=this.trigger(C,{type:"read"});return a||(this.trigger(T),i&&(i.groupPaging=this._groupPaging),n=this._queryProcess(this._data,this._mergeState(i)),this._setFilterTotal(n.total,!0),this._aggregateResult=this._calculateAggregates(n.dataToAggregate||this._data,i),this._setView(n,i),this.trigger(S,{type:"read"}),this.trigger(w,{items:n.data,action:i?i.action:""})),e.Deferred().resolve(a).promise()},_hasExpandedSubGroups:function(e){var t=!1,i=e.items?e.items.length:0;if(!e.hasSubgroups)return!1;for(var n=0;n<i;n++)if(this._groupsState[e.items[n].uid]){t=!0;break}return t},_findGroupedRange:function(e,t,i,n,s){for(var a,r,o,l,d,h=e.length,u=0;u<h&&(a=e[u],!(i.taken>=i.take));u++)if(this._getGroupByUid(a.uid)||this._groupsFlat.push(a),this._groupsState[a.uid]){if(this._isServerGroupPaged()){if(this._fetchGroupItems(a,i,n,s))return void(this._fetchingGroupItems=!0);if(l=(a.subgroupCount||a.itemCount)+1,d=i.skip-i.skipped,!this._hasExpandedSubGroups(a)&&d>l){i.skipped+=l;continue}}if(i.includeParents&&i.skipped<i.skip?(i.skipped++,a.excludeHeader=!0):i.includeParents&&(i.taken++,a.excludeHeader=!1),a.hasSubgroups&&a.items&&a.items.length)a.currentItems=[],n||(n=[]),n.push(a),this._findGroupedRange(a.items,a.currentItems,i,n,s),n.pop(),a.currentItems.length||i.taken>0?t.push(a):a.excludeHeader=!1;else{r=[],o=a.items.length;for(var c=0;c<o;c++)if(i.skipped<i.skip)i.skipped++;else{if(i.taken>=i.take)break;r.push(a.items[c]),i.taken++}r.length||i.taken>0?(a.currentItems=r,t.push(a)):a.excludeHeader=!1}}else{if(i.skipped<i.skip){i.skipped++;continue}t.push(a),i.taken++}},_expandedSubGroupItemsCount:function(e,t,i){var n,s,a=0,r="number"==typeof t,o=r?t:e.subgroupCount;if(!e.hasSubgroups)return a;for(var l=0;l<o&&(n=e.items[l])&&(n.hasSubgroups&&this._groupsState[e.uid]?(a+=s=this._expandedSubGroupItemsCount(n,o,!0),r&&(o-=s)):!n.hasSubgroups&&this._groupsState[n.uid]&&(a+=s=n.items?n.items.length:0,r&&(o-=s)),i&&(a+=1,r&&(o-=1)),!r||!(a>o));l++);return a},_fetchGroupItems:function(e,t,i,n){var s,a,r,o,l=e.hasSubgroups?e.subgroupCount:e.itemCount,d=t.take,h=t.skipped,u=this.take();return t.includeParents&&(h<t.skip?h+=1:d-=1),e.items&&(!e.items||e.items.length)?(o=this._expandedSubGroupItemsCount(e,t.skip-h),!((s=Math.max(t.skip-(h+o),0))>=l)&&(a=e.items[s],r=e.items[Math.min(s+d,l-1)],a.notFetched?(this.getGroupItems(e,t,i,n,P.max(P.floor(s/u),0)*u,P.round((s+u)/u)),!0):r.notFetched?(this.getGroupItems(e,t,i,n,P.max(P.floor((s+u)/u),0)*u,P.round((s+u)/u)),!0):void 0)):(this.getGroupItems(e,t,i,n,0),!0)},getGroupItems:function(e,t,i,n,s,a){var r,o,l,d=this;e.items||(e.items=[]),o={page:a||1,pageSize:r=d.take(),skip:s,take:r,filter:this._composeItemsFilter(e,i),aggregate:d._aggregate,sort:d._sort},(l=d.findSubgroups(e))&&l.length&&(o.group=l,o.groupPaging=!0),clearTimeout(d._timeout),d._timeout=setTimeout(function(){d._queueRequest(o,function(){d.trigger(C,{type:"read"})?d._dequeueRequest():d.transport.read({data:o,success:d._groupItemsSuccessHandler(e,t.skip,d.take(),n,s),error:function(){var e=B.call(arguments);d.error.apply(d,e)}})})},100)},_groupItemsSuccessHandler:function(e,t,i,n,s){var a=this,r=a._timeStamp();n=c(n)?n:h;var o=a.options.schema&&a.options.schema.total?a.options.schema.total:"Total";return function(l){var d,h,u=J.define(a.options.schema.model);a._dequeueRequest(),a.trigger(S,{response:l,type:"read"}),h=c(o)?o(l):l[o],l=a.reader.parse(l),e.hasSubgroups?(d=a.reader.groups(l),e.subgroupCount=h):d=(d=a.reader.data(l)).map(function(e){return new u(e)}),e.items.omitChangeEvent=!0;for(var p=0;p<h;p++)p>=s&&p<s+i?e.items.splice(p,1,d[p-s]):e.items[p]||e.items.splice(p,0,{notFetched:!0});e.items.omitChangeEvent=!1,a._updateRangePristineData(e),a._fetchingGroupItems=!1,e.countAdded||(a._serverGroupsTotal+=h,e.countAdded=!0),a.range(t,i,n,"expandGroup"),(r>=a._currentRequestTimeStamp||!a._skipRequestsInProgress)&&a.trigger(w,{})}},findSubgroups:function(e){var t=this._group.map(function(e){return e.field}).indexOf(e.field);return this._group.slice(t+1,this._group.length)},_composeItemsFilter:function(e,t){var i=this.filter()||{logic:"and",filters:[]};if(i.logic="and",(i=n(!0,{},i)).filters.push({field:e.field,operator:"eq",value:e.value}),t)for(var s=0;s<t.length;s++)i.filters.push({field:t[s].field,operator:"eq",value:t[s].value});return i},_updateRangePristineData:function(e){for(var t,i,n,s,a,r=this._ranges,o=r.length,l=0;l<o;l++){s=(n=r[l]).data.length,a=[],t=null;for(var d=0;d<s&&(i=n.data[d],a.push(d),!(i.uid===e.uid||i.hasSubgroups&&i.items.length&&this._containsSubGroup(i,e,a)));d++)a.pop();if(a.length){for(t=r[l].pristineData;a.length>1;)t=t[a.splice(0,1)[0]].items;t[a[0]]=this._cloneGroup(e);break}}},_containsSubGroup:function(e,t,i){var n,s=e.items.length;if(e.hasSubgroups&&s)for(var a=0;a<s;a++){if(n=e.items[a],i.push(a),n.uid===t.uid||n.hasSubgroups&&n.items.length&&this._containsSubGroup(n,t,i))return!0;i.pop()}},_cloneGroup:function(e){var t=this;return(e="function"==typeof e.toJSON?e.toJSON():e).items&&e.items.length&&(e.items=e.items.map(function(e){return t._cloneGroup(e)})),e},_setFilterTotal:function(e,i){this.options.serverFiltering||(e!==t?this._total=e:i&&(this._total=this._data.length))},fetch:function(e){var t=this;return this._query().done(function(i){!0!==i&&c(e)&&e.call(t)})},_query:function(e){return this.query(n({},{page:this.page(),pageSize:this.pageSize(),sort:this.sort(),filter:this.filter(),group:this.group(),aggregate:this.aggregate()},e))},next:function(e){var t=this.page(),i=this.total();if(e=e||{},t&&!(i&&t+1>this.totalPages()))return this._skip=this._currentRangeStart=t*this.take(),t+=1,e.page=t,this._query(e),t},prev:function(e){var t=this.page();if(e=e||{},t&&1!==t)return this._skip=this._currentRangeStart=this._skip-this.take(),t-=1,e.page=t,this._query(e),t},page:function(e){var i;if(e!==t){e=P.max(P.min(P.max(e,1),this.totalPages()),1);var n=this.take();return this._isGroupPaged()?(e-=1,void this.range(e*n,n,null,"page")):void this._query(this._pageableQueryOptions({page:e}))}return(i=this.skip())!==t?P.round((i||0)/(this.take()||1))+1:t},pageSize:function(e){if(e===t)return this.take();this._query(this._pageableQueryOptions({pageSize:e,page:1}))},sort:function(e){return e!==t?(this.trigger("sort"),void this._query({sort:e})):this._sort},filter:function(e){if(e===t)return this._filter;this.trigger("reset"),this._query({filter:e,page:1})},group:function(e){var i={group:e};if(this._groupPaging&&(e===t||e&&e.length||(this._ranges=[]),i.page=1),e===t)return this._group;this._query(i)},getGroupsFlat:function(e){var t,i,n=[];for(t=0,i=e.length;t<i;t++){var s=e[t];s.hasSubgroups&&(n=n.concat(this.getGroupsFlat(s.items))),n.push(s)}return n},total:function(){return parseInt(this._total||0,10)},groupsTotal:function(e){return this._group.length?this._isServerGrouped()?(this._serverGroupsTotal||(this._serverGroupsTotal=this.total()),this._serverGroupsTotal):this._calculateGroupsTotal(this._ranges.length?this._ranges[0].data:[],e):this.total()},_calculateGroupsTotal:function(e,t,i,n){var s,a;if(i=i||"items",this._group.length&&e){s=0,a=e.length;for(var r=0;r<a;r++)s+=this.groupCount(e[r],t,i,n);return this._groupsTotal=s,s}return this._groupsTotal=this._data.length,this._groupsTotal},groupCount:function(e,t,i,n){var s=this,a=0;return e.hasSubgroups&&s._groupsState[e.uid]?((t&&!e.excludeHeader||n)&&(a+=1),e[i].forEach(function(e){a+=s.groupCount(e,t,i,n)})):s._groupsState[e.uid]?((t&&!e.excludeHeader||n)&&a++,a+=e[i]?e[i].length:0):a++,a},countGroupRange:function(e){for(var t=0,i=e.length,n=0;n<i;n++)t+=this.groupCount(e[n],!0);return t},aggregate:function(e){if(e===t)return this._aggregate;this._query({aggregate:e})},aggregates:function(){var e=this._aggregateResult;return a(e)&&(e=this._emptyAggregates(this.aggregate())),e},_emptyAggregates:function(e){var t={};if(!a(e)){var i={};r(e)||(e=[e]);for(var n=0;n<e.length;n++)i[e[n].aggregate]=0,t[e[n].field]=i}return t},_pageableQueryOptions:function(e){return e},_wrapInEmptyGroup:function(e){var t,i,n,s=this.group();for(n=s.length-1;n>=0;n--)i=s[n],t={value:e.get?e.get(i.field):e[i.field],field:i.field,items:t?[t]:[e],hasSubgroups:!!t,aggregates:this._emptyAggregates(i.aggregates)};return t},totalPages:function(){var e=this.pageSize()||this.total(),t=this._isGroupPaged()?this.groupsTotal(!0):this.total();return P.ceil((t||0)/e)},inRange:function(e,t){var i=P.min(e+t,this.total());return!this.options.serverPaging&&this._data.length>0||this._findRange(e,i).length>0},lastRange:function(){var e=this._ranges;return e[e.length-1]||{start:0,end:0,data:[]}},firstItemUid:function(){var e=this._ranges;return e.length&&e[0].data.length&&e[0].data[0].uid},enableRequestsInProgress:function(){this._skipRequestsInProgress=!1},_timeStamp:function(){return(new Date).getTime()},range:function(e,i,n,s){this._currentRequestTimeStamp=this._timeStamp(),this._skipRequestsInProgress=!0;var a=this._isGroupPaged()?this.groupsTotal(!0):this.total();"expandGroup"!==s&&"collapseGroup"!==s||this._updateOuterRangesLength(),e=P.min(e||0,a),n=c(n)?n:h;var r,o=this,l=P.max(P.floor(e/i),0)*i,d=P.min(l+i,a);if(((r=o._findRange(e,P.min(e+i,a),n)).length||0===a)&&!o._fetchingGroupItems)return o._processRangeData(r,e,i,o._originalPageSkip||l,o._originalSize||d,{action:s}),o._originalPageSkip=null,o._originalSize=null,void n();o._isGroupPaged()&&(o._originalPageSkip=l,o._originalSize=d,l=P.max(P.floor(o._adjustPageSkip(e,i)/i),0)*i,d=P.min(l+i,a)),i===t||o._fetchingGroupItems||((!o._isGroupPaged()||o._groupRangeExists(l,i))&&o._rangeExists(l,d)?l<e&&o.prefetch(d,i,function(){o.range(e,i,n)}):o.prefetch(l,i,function(){e>l&&d<o.total()&&!o._rangeExists(d,P.min(d+i,o.total()))?o.prefetch(d,i,function(){o.range(e,i,n)}):o.range(e,i,n)}))},_findRange:function(e,i,n){var s,a,r,o,l,d,h,u,c,p,f,m,g=this._ranges,v=[],_=this.options,b=_.serverSorting||_.serverPaging||_.serverFiltering||_.serverGrouping||_.serverAggregates,k={take:i-e,skip:e,skipped:0,taken:0,includeParents:!0},w=this._isGroupPaged(),y=w?"outerStart":"start",x=w?"outerEnd":"end";for(a=0,f=g.length;a<f;a++){if(s=g[a],w){if(s.outerStart>=i)return[];if(e>s.outerEnd){k.skipped+=s.outerEnd-(m||0),m=s.outerEnd;continue}if(void 0!==m&&m!=s.outerStart&&(k.skipped+=s.outerStart-m),k.skipped>k.skip)return[];for(void 0===m&&e>0&&s.start>0&&(k.skipped=s.outerStart),r=a;;){if(this._findGroupedRange(s.data,v,k,null,n),this._calculateGroupsTotal(v,!0,"currentItems")>=k.take)return v;if(this._fetchingGroupItems)return[];if(!g[++r]||g[r].outerStart!==s.outerEnd)break;s=g[r]}}else if(e>=s[y]&&e<=s[x]){for(p=0,r=a;r<f;r++)if(s=g[r],(c=this._flatData(s.data,!0)).length&&e+p>=s.start){if(d=s.data,h=s.end,!b){if(_.inPlaceSort)u=this._queryProcess(s.data,{filter:this.filter()});else{var C=eh(this.group()||[]).concat(en(this.sort()||[]));u=this._queryProcess(s.data,{sort:C,filter:this.filter()})}c=d=u.data,u.total!==t&&(h=u.total)}if(o=0,e+p>s.start&&(o=e+p-s.start),l=c.length,h>i&&(l-=h-i),p+=l-o,v=this._mergeGroups(v,d,o,l),i<=s.end&&p==i-e)return v}break}m=s.outerEnd}return[]},_getRangesMismatch:function(e){for(var t=this._ranges,i=0,n=0;;){var s=t[n];if(!s||s.outerStart>e)break;s.outerEnd!=s.end&&(i=s.outerEnd-s.end),n++}return i},_mergeGroups:function(e,t,i,n){if(this._isServerGrouped()){var s,a=t.toJSON();return e.length&&(s=e[e.length-1]),function e(t,i,n,s){for(var a,r,o=0;i.length&&s;){var l=(r=(a=i[o]).items).length;if(t&&t.field===a.field&&t.value===a.value?(t.hasSubgroups&&t.items.length?e(t.items[t.items.length-1],a.items,n,s):(r=r.slice(n,n+s),t.items=t.items.concat(r)),i.splice(o--,1)):(a.hasSubgroups&&r.length?e(a,r,n,s):(r=r.slice(n,n+s),a.items=r),a.items.length||i.splice(o--,1)),0===r.length?n-=l:(n=0,s-=r.length),++o>=i.length)break}o<i.length&&i.splice(o,i.length-o)}(s,a,i,n),e.concat(a)}return e.concat(t.slice(i,n))},_processRangeData:function(e,i,n,s,a,r){this._pending=t,this._skip=i>this.skip()&&!this._omitPrefetch?P.min(a,(this.totalPages()-1)*this.take()):s,this._currentRangeStart=i,this._take=n;var o=this.options.serverPaging,l=this.options.serverSorting,d=this.options.serverFiltering,h=this.options.serverAggregates;try{this.options.serverPaging=!0,this._isServerGrouped()||this.group()&&this.group().length||(this.options.serverSorting=!0),this.options.serverFiltering=!0,this.options.serverPaging=!0,this.options.serverAggregates=!0,o&&(this._detachObservableParents(),this._data=e=this._observe(e)),this._process(e,r)}finally{this.options.serverPaging=o,this.options.serverSorting=l,this.options.serverFiltering=d,this.options.serverAggregates=h}},skip:function(){return this._skip===t?this._page!==t?(this._page-1)*(this.take()||1):t:this._skip},currentRangeStart:function(){return this._currentRangeStart||0},take:function(){return this._take||this._pageSize},_prefetchSuccessHandler:function(e,t,i,n){var s=this,a=s._timeStamp();return function(r){var o,l,d,h=!1,u={start:e,end:t,data:[],timestamp:s._timeStamp()};if(s._dequeueRequest(),s.trigger(S,{response:r,type:"read"}),r=s.reader.parse(r),(d=s._readData(r)).length){for(o=0,l=s._ranges.length;o<l;o++)if(s._ranges[o].start===e){h=!0,u=s._ranges[o],s._isGroupPaged()||(u.pristineData=d,u.data=s._observe(d),u.end=u.start+s._flatData(u.data,!0).length,s._sortRanges());break}h||s._addRange(s._observe(d),e)}s._total=s.reader.total(r),(n||a>=s._currentRequestTimeStamp||!s._skipRequestsInProgress)&&(i&&d.length?i():s.trigger(w,{}))}},prefetch:function(e,t,i){var n=this,s=P.min(e+t,n.total()),a={take:t,skip:e,page:e/t+1,pageSize:t,sort:n._sort,filter:n._filter,group:n._group,aggregate:n._aggregate};n._isGroupPaged()&&!n._isServerGrouped()&&n._groupRangeExists(e,s)?i&&i():(!n._isServerGroupPaged()||n._groupRangeExists(e,s))&&n._rangeExists(e,s)?i&&i():(clearTimeout(n._timeout),n._timeout=setTimeout(function(){n._queueRequest(a,function(){n.trigger(C,{type:"read"})?n._dequeueRequest():(n._omitPrefetch&&n.trigger(T),n.transport.read({data:n._params(a),success:n._prefetchSuccessHandler(e,s,i),error:function(){var e=B.call(arguments);n.error.apply(n,e)}}))})},100))},_multiplePrefetch:function(e,t,i){var n=P.min(e+t,this.total()),s={take:t,skip:e,page:e/t+1,pageSize:t,sort:this._sort,filter:this._filter,group:this._group,aggregate:this._aggregate};this._rangeExists(e,n)?i&&i():this.trigger(C,{type:"read"})||this.transport.read({data:this._params(s),success:this._prefetchSuccessHandler(e,n,i,!0)})},_adjustPageSkip:function(e,t){var i,n,s=this._getPrevRange(e),a=this.total();if(s){if(!(n=this._getRangesMismatch(e)))return e;e-=n}if((i=P.max(P.floor(e/t),0)*t)>a)for(;!((i-=t)<a););return i},_getNextRange:function(e){var t,i,n=this._ranges;for(t=0,i=n.length;t<i;t++)if(n[t].start<=e&&n[t].end>=e)return n[t]},_getPrevRange:function(e){var t,i,n=this._ranges;for(t=n.length-1;t>=0;t--)if(n[t].outerStart<=e){i=n[t];break}return i},_rangeExists:function(e,t){var i,n,s=this._ranges;for(i=0,n=s.length;i<n;i++)if(s[i].start<=e&&s[i].end>=t)return!0;return!1},_groupRangeExists:function(e,t){var i,n,s=this._ranges,a=0,r=this.groupsTotal(!0);for(t>r&&!this._isServerGrouped()&&(t=r),i=0,n=s.length;i<n;i++){var o=s[i];o.outerStart<=e&&o.outerEnd>=e?a+=o.outerEnd-e:o.outerStart<=t&&o.outerEnd>=t&&(a+=t-o.outerStart)}return a>=t-e},_getCurrentRangeSpan:function(){var e,t,i=this._ranges,n=this.currentRangeStart(),s=n+(this.take()||0),a=[],r=i.length;for(t=0;t<r;t++)((e=i[t]).start<=n&&e.end>=n||e.start>=n&&e.start<=s)&&a.push(e);return a},_removeModelFromRanges:function(e){for(var t,i=0,n=this._ranges.length;i<n;i++)t=this._ranges[i],this._removeModelFromRange(t,e);this._updateRangesLength()},_removeModelFromRange:function(e,t){this._eachItem(e.data,function(e){if(e)for(var i=0;i<e.length;i++){var n=e[i];if(n.uid&&n.uid==t.uid){[].splice.call(e,i,1);break}}})},_insertModelInRange:function(e,t){var i,n,s=this._ranges||[],a=s.length;for(n=0;n<a;n++)if((i=s[n]).start<=e&&i.end>=e){this._getByUid(t.uid,i.data)||(this._isServerGrouped()?i.data.splice(e,0,this._wrapInEmptyGroup(t)):i.data.splice(e,0,t));break}this._updateRangesLength()},_updateRangesLength:function(){var e,t,i=this._ranges||[],n=i.length,s=!1,a=0,r=0;for(t=0;t<n;t++)e=i[t],r=(this._isGroupPaged()?e.data.length:this._flatData(e.data,!0).length)-P.abs(e.end-e.start),s||0===r?s&&(e.start+=a,e.end+=a):(s=!0,a=r,e.end+=a)},_updateOuterRangesLength:function(){var e,t,i,n,s=this._ranges||[],a=s.length,r=0;for(t=0;t<a;t++)e=s[t],n=this._isGroupPaged()?this._calculateGroupsTotal(e.data,!0,"items",!0):this._flatData(e.data,!0).length,i?(i.end!=e.start&&(r=e.start-i.end),e.outerStart=i.outerEnd+r,r=0):e.outerStart=e.start,e.outerEnd=e.outerStart+n,i=e}}),eA={};eA.create=function(t,i,a){var r,o=t.transport?e.extend({},t.transport):null;return o?(o.read=typeof o.read===m?{url:o.read}:o.read,"jsdo"===t.type&&(o.dataSource=a),t.type&&(u.data.transports=u.data.transports||{},u.data.schemas=u.data.schemas||{},u.data.transports[t.type]?s(u.data.transports[t.type])?o=n(!0,{},u.data.transports[t.type],o):r=new u.data.transports[t.type](n(o,{data:i})):u.logToConsole("Unknown DataSource transport type '"+t.type+"'.\nVerify that registration scripts for this type are included after Kendo UI on the page.","warn"),t.schema=n(!0,{},u.data.schemas[t.type],t.schema)),r||(r=c(o.read)?o:new ev(o))):r=new eg({data:t.data||[]}),r},eE.create=function(i){(r(i)||i instanceof G)&&(i={data:i});var s,o,l,d=i||{},h=d.data,c=d.fields,p=d.table,f=d.select,m={};if(h||!c||d.transport||(p?h=function(t,i){var n,s,a,r,o,l,d,h=e(t)[0].tBodies[0],u=h?h.rows:[],c=i.length,p=[];for(n=0,s=u.length;n<s;n++){for(o={},d=!0,r=u[n].cells,a=0;a<c;a++)"th"!==(l=r[a]).nodeName.toLowerCase()&&(d=!1,o[i[a].field]=l.innerHTML);d||p.push(o)}return p}(p,c):f&&(h=function(t,i){var n,s,a,r,o,l,d=(t=e(t)[0]).options,h=i[0],u=i[1],c=[];for(n=0,s=d.length;n<s;n++)o={},(a=(r=d[n]).parentNode)===t&&(a=null),r.disabled||a&&a.disabled||(a&&(o.optgroup=a.label),o[h.field]=r.text,l=(l=r.attributes.value)&&l.specified?r.value:r.text,o[u.field]=l,c.push(o));return c}(f,c),d.group===t&&h[0]&&h[0].optgroup!==t&&(d.group="optgroup"))),u.data.Model&&c&&(!d.schema||!d.schema.model)){for(s=0,o=c.length;s<o;s++)(l=c[s]).type&&(m[l.field]=l);a(m)||(d.schema=n(!0,d.schema,{model:{fields:m}}))}return d.data=h,f=null,d.select=null,p=null,d.table=null,d instanceof eE?d:new eE(d)};var ez=J.define({idField:"id",init:function(e){var t=this.hasChildren||e&&e.hasChildren,i="items",s={};if(u.data.Model.fn.init.call(this,e),typeof this.children===m&&(i=this.children),s={schema:{data:i,model:{hasChildren:t,id:this.idField,fields:this.fields}}},typeof this.children!==m&&n(s,this.children),s.data=e,t||(t=s.schema.data),typeof t===m&&(t=u.getter(t)),c(t)){var a=t.call(this,this);a&&0===a.length?this.hasChildren=!1:this.hasChildren=!!a}this._childrenOptions=s,this.hasChildren&&this._initChildren(),this._loaded=!(!e||!e._loaded)},_initChildren:function(){var e,t,i,n=this;n.children instanceof eH||(i=(t=(e=n.children=new eH(n._childrenOptions)).transport).parameterMap,t.parameterMap=function(e,t){return e[n.idField||"id"]=n.id,i&&(e=i.call(n,e,t)),e},e.parent=function(){return n},e.bind(w,function(e){e.node=e.node||n,n.trigger(w,e)}),e.bind(x,function(e){var t=n.parent();t&&(e.node=e.node||n,t.trigger(x,e))}),e.bind(I,function(e){var t=n.parent();t&&t.trigger(I,e)}),n._updateChildrenField())},append:function(e){this._initChildren(),this.loaded(!0),this.children.add(e)},hasChildren:!1,level:function(){for(var e=this.parentNode(),t=0;e&&e.parentNode;)t++,e=e.parentNode?e.parentNode():null;return t},_updateChildrenField:function(){this[this._childrenOptions.schema.data||"items"]=this.children.data()},_childrenLoaded:function(){this._loaded=!0,this._updateChildrenField()},load:function(){var i,n,s={},a="_query";return this.hasChildren?(this._initChildren(),i=this.children,s[this.idField||"id"]=this.id,this._loaded||(i._data=t,a="read"),i.one(w,this._childrenLoaded.bind(this)),this._matchFilter&&(s.filter={field:"_matchFilter",operator:"eq",value:!0}),n=i[a](s),this._loaded||this.trigger(D,{promise:n,node:this})):this.loaded(!0),n||e.Deferred().resolve().promise()},parentNode:function(){return this.parent().parent()},loaded:function(e){if(e===t)return this._loaded;this._loaded=e},shouldSerialize:function(e){return J.fn.shouldSerialize.call(this,e)&&"children"!==e&&"_loaded"!==e&&"hasChildren"!==e&&"_childrenOptions"!==e}});function eP(e){return function(){var t=this._data,i=eE.fn[e].apply(this,B.call(arguments));return this._data!=t&&this._attachBubbleHandlers(),i}}var eH=eE.extend({init:function(e){var t=ez.define({children:e});e.filter&&!e.serverFiltering&&(this._hierarchicalFilter=e.filter,e.filter=null),eE.fn.init.call(this,n(!0,{},{schema:{modelBase:t,model:t}},e)),this._attachBubbleHandlers()},_attachBubbleHandlers:function(){var e=this;e._data.bind(x,function(t){e.trigger(x,t)}),e._data.bind(I,function(t){e.trigger(I,t)})},loading:function(){return!!this._data&&(this._data.loading()||this._childrenLoading())},_childrenLoading:function(){var e=!1;return this._data.forEach(function(t){t.hasChildren&&t.children.loading()&&(e=!0)}),e},read:function(e){var t=eE.fn.read.call(this,e);return this._hierarchicalFilter&&(this._data&&this._data.length>0?this.filter(this._hierarchicalFilter):(this.options.filter=this._hierarchicalFilter,this._filter=er(this.options.filter),this._hierarchicalFilter=null)),t},remove:function(e){var t,i=e.parentNode(),n=this;return i&&i._initChildren&&(n=i.children),t=eE.fn.remove.call(n,e),i&&!n.data().length&&(i.hasChildren=!1),t},success:eP("success"),data:eP("data"),insert:function(e,t){var i=this.parent();return i&&i._initChildren&&(i.hasChildren=!0,i._initChildren()),eE.fn.insert.call(this,e,t)},filter:function(e){if(e===t)return this._filter;!this.options.serverFiltering&&this._markHierarchicalQuery(e)&&(e={logic:"or",filters:[e,{field:"_matchFilter",operator:"equals",value:!0}]}),this.trigger("reset"),this._query({filter:e,page:1})},_markHierarchicalQuery:function(t){var i,n,s,a,r,o=this.options.accentFoldingFiltering;return(t=o?e.extend({},er(t),{accentFoldingFiltering:o}):er(t))&&0!==t.filters.length?(s=(i=ei.filterExpr(t)).fields,a=i.operators,n=r=Function("d, __f, __o","return "+i.expression),(s.length||a.length)&&(r=function(e){return n(e,s,a)}),this._updateHierarchicalFilter(r),!0):(this._updateHierarchicalFilter(function(){return!0}),!1)},_updateHierarchicalFilter:function(e){for(var t,i=this._data,n=!1,s=0;s<i.length;s++)(t=i[s]).hasChildren?(t._matchFilter=t.children._updateHierarchicalFilter(e),t._matchFilter||(t._matchFilter=e(t))):t._matchFilter=e(t),t._matchFilter&&(n=!0);return n},_find:function(e,t){var i,n,s,a,r=this._data;if(r){if(s=eE.fn[e].call(this,t))return s;for(i=0,n=(r=this._flatData(this._data)).length;i<n;i++)if((a=r[i].children)instanceof eH&&(s=a[e](t)))return s}},get:function(e){return this._find("get",e)},getByUid:function(e){return this._find("getByUid",e)}});eH.create=function(t){var i=(t=t&&t.push?{data:t}:t)||{},n=i.data,s=i.fields,a=i.list;return n&&n._dataSource?n._dataSource:(n||!s||i.transport||a&&(n=function t(i,n){var s,a,r,o,l,d,h,c,p=e(i).children(),f=[],m=n[0].field,g=n[1]&&n[1].field,v=n[2]&&n[2].field,_=n[3]&&n[3].field;function b(e,t){return e.filter(t).add(e.find(t))}for(s=0,a=p.length;s<a;s++)r={_loaded:!0},d=(o=p.eq(s))[0].firstChild,i=(c=o.children()).filter("ul"),c=c.filter(":not(ul)"),(l=o.attr("data-id"))&&(r.id=l),d&&(r[m]=3==d.nodeType?d.nodeValue:c.text()),g&&(r[g]=b(c,"a").attr("href")),_&&(r[_]=b(c,"img").attr("src")),v&&(h=b(c,".k-sprite").prop("className"),r[v]=h&&u.trim(h.replace("k-sprite",""))),i.length&&(r.items=t(i.eq(0),n)),"true"==o.attr("data-hasChildren")&&(r.hasChildren=!0),f.push(r);return f}(a,s)),i.data=n,i instanceof eH?i:new eH(i))};var eN=u.Observable.extend({init:function(e,t,i){u.Observable.fn.init.call(this),this._prefetching=!1,this.dataSource=e,this.prefetch=!i;var n=this;e.bind("change",function(){n._change()}),e.bind("reset",function(){n._reset()}),this._syncWithDataSource(),this.setViewSize(t)},setViewSize:function(e){this.viewSize=e,this._recalculate()},at:function(e){var t=this.pageSize,i=!0;return e>=this.total()?(this.trigger("endreached",{index:e}),null):this.useRanges?this.useRanges?((e<this.dataOffset||e>=this.skip+t)&&(i=this.range(Math.floor(e/t)*t)),e===this.prefetchThreshold&&this._prefetch(),e===this.midPageThreshold?this.range(this.nextMidRange,!0):e===this.nextPageThreshold?this.range(this.nextFullRange):e===this.pullBackThreshold&&(this.offset===this.skip?this.range(this.previousMidRange):this.range(this.previousFullRange)),i?this.dataSource.at(e-this.dataOffset):(this.trigger("endreached",{index:e}),null)):void 0:this.dataSource.view()[e]},indexOf:function(e){return this.dataSource.data().indexOf(e)+this.dataOffset},total:function(){return parseInt(this.dataSource.total(),10)},next:function(){var e=this,t=e.pageSize,i=e.skip-e.viewSize+t,n=P.max(P.floor(i/t),0)*t;this.offset=i,this.dataSource.prefetch(n,t,function(){e._goToRange(i,!0)})},range:function(e,t){if(this.offset===e)return!0;var i=this,n=this.pageSize,s=P.max(P.floor(e/n),0)*n,a=this.dataSource;return t&&(s+=n),a.inRange(e,n)?(this.offset=e,this._recalculate(),this._goToRange(e),!0):!this.prefetch||(a.prefetch(s,n,function(){i.offset=e,i._recalculate(),i._goToRange(e,!0)}),!1)},syncDataSource:function(){var e=this.offset;this.offset=null,this.range(e)},destroy:function(){this.unbind()},_prefetch:function(){var e=this,t=this.pageSize,i=this.skip+t,n=this.dataSource;n.inRange(i,t)||this._prefetching||!this.prefetch||(this._prefetching=!0,this.trigger("prefetching",{skip:i,take:t}),n.prefetch(i,t,function(){e._prefetching=!1,e.trigger("prefetched",{skip:i,take:t})}))},_goToRange:function(e,t){this.offset===e&&(this.dataOffset=e,this._expanding=t,this.dataSource.range(e,this.pageSize),this.dataSource.enableRequestsInProgress())},_reset:function(){this._syncPending=!0},_change:function(){var e=this.dataSource;this.length=this.useRanges?e.lastRange().end:e.view().length,this._syncPending&&(this._syncWithDataSource(),this._recalculate(),this._syncPending=!1,this.trigger("reset",{offset:this.offset})),this.trigger("resize"),this._expanding&&this.trigger("expand"),delete this._expanding},_syncWithDataSource:function(){var e=this.dataSource;this._firstItemUid=e.firstItemUid(),this.dataOffset=this.offset=e.skip()||0,this.pageSize=e.pageSize(),this.useRanges=e.options.serverPaging},_recalculate:function(){var e=this.pageSize,t=this.offset,i=this.viewSize,n=Math.ceil(t/e)*e;this.skip=n,this.midPageThreshold=n+e-1,this.nextPageThreshold=n+i-1,this.prefetchThreshold=n+Math.floor(e/3*2),this.pullBackThreshold=this.offset-1,this.nextMidRange=n+e-i,this.nextFullRange=n,this.previousMidRange=t-i,this.previousFullRange=n-e}}),eR=u.Observable.extend({init:function(e,t){var i=this;u.Observable.fn.init.call(i),this.dataSource=e,this.batchSize=t,this._total=0,this.buffer=new eN(e,3*t),this.buffer.bind({endreached:function(e){i.trigger("endreached",{index:e.index})},prefetching:function(e){i.trigger("prefetching",{skip:e.skip,take:e.take})},prefetched:function(e){i.trigger("prefetched",{skip:e.skip,take:e.take})},reset:function(){i._total=0,i.trigger("reset")},resize:function(){i._total=Math.ceil(this.length/i.batchSize),i.trigger("resize",{total:i.total(),offset:this.offset})}})},syncDataSource:function(){this.buffer.syncDataSource()},at:function(e){var t,i=this.buffer,n=e*this.batchSize,s=this.batchSize,a=[];i.offset>n&&i.at(i.offset-1);for(var r=0;r<s&&null!==(t=i.at(n+r));r++)a.push(t);return a},total:function(){return this._total},destroy:function(){this.buffer.destroy(),this.unbind()}});n(!0,u.data,{readers:{json:ex},Query:ei,DataSource:eE,HierarchicalDataSource:eH,Node:ez,Comparer:Z,ObservableObject:Y,ObservableArray:G,LazyObservableArray:q,LocalTransport:eg,RemoteTransport:ev,Cache:e_,DataReader:ex,Model:J,Buffer:eN,BatchBuffer:eR})}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.ui,s=n.Widget,a=i.Class,r=i.support,o=i.getOffset,l=i._outerWidth,d=i._outerHeight,h="open",u="close",c="deactivate",p="activate",f="center",m="right",g="bottom",v="absolute",_="hidden",b="body",k="location",w="position",y="effects",x="k-active",C="k-state-border",T=/k-state-border-(\w+)/,S=".k-picker-wrap, .k-dropdown-wrap, .k-link",I=e(document.documentElement),D=e(window),F=r.transitions.css+"transform",E=e.extend,A=".kendoPopup",z=["font-size","font-family","font-stretch","font-style","font-weight","line-height"];function P(t,i){return!(!t||!i)&&(t===i||e.contains(t,i))}var H=s.extend({init:function(t,n){var a,o=this;(n=n||{}).isRtl&&(n.origin=n.origin||"bottom right",n.position=n.position||"top right"),s.fn.init.call(o,t,n),t=o.element,n=o.options,o.collisions=n.collision?n.collision.split(" "):[],o.downEvent=i.applyEventMap("down",i.guid()),1===o.collisions.length&&o.collisions.push(o.collisions[0]),a=e(o.options.anchor).closest(".k-popup,.k-group").filter(":not([class^=km-])"),n.appendTo=e(e(n.appendTo)[0]||a[0]||document.body),o.element.hide().addClass("k-popup k-group k-reset").toggleClass("k-rtl",!!n.isRtl).css({position:v}).appendTo(n.appendTo).attr("aria-hidden",!0).on("mouseenter"+A,function(){o._hovered=!0}).on("wheel"+A,function(t){var i=e(t.target).find(".k-list"),n=i.parent();i.length&&i.is(":visible")&&(0===n.scrollTop()&&t.originalEvent.deltaY<0||n.scrollTop()===n.prop("scrollHeight")-n.prop("offsetHeight")&&t.originalEvent.deltaY>0)&&t.preventDefault()}).on("mouseleave"+A,function(){o._hovered=!1}),o.wrapper=e(),!1===n.animation&&(n.animation={open:{effects:{}},close:{hide:!0,effects:{}}}),E(n.animation.open,{complete:function(){o.wrapper.css({overflow:"visible"}),o._activated=!0,o._trigger(p)}}),E(n.animation.close,{complete:function(){o._animationClose()}}),o._mousedownProxy=function(e){o._mousedown(e)},r.mobileOS.android?o._resizeProxy=function(e){setTimeout(function(){o._resize(e)},600)}:o._resizeProxy=function(e){o._resize(e)},n.toggleTarget&&e(n.toggleTarget).on(n.toggleEvent+A,o.toggle.bind(o))},events:[h,p,u,c],options:{name:"Popup",toggleEvent:"click",origin:"bottom left",position:"top left",anchor:b,appendTo:null,collision:"flip fit",viewport:window,copyAnchorStyles:!0,autosize:!1,modal:!1,adjustSize:{width:0,height:0},animation:{open:{effects:"slideIn:down",transition:!0,duration:200},close:{duration:100,hide:!0}},omitOriginOffsets:!1},_animationClose:function(){var e=this.wrapper.data(k);this.wrapper.hide(),e&&this.wrapper.css(e),this.options.anchor!=b&&this._hideDirClass(),this._closing=!1,this._trigger(c)},destroy:function(){var t,n=this.options,a=this.element.off(A);s.fn.destroy.call(this),n.toggleTarget&&e(n.toggleTarget).off(A),n.modal||(I.off(this.downEvent,this._mousedownProxy),this._toggleResize(!1)),i.destroy(this.element.children()),a.removeData(),n.appendTo[0]===document.body&&((t=a.parent(".k-animation-container"))[0]?t.remove():a.remove())},open:function(t,n){var s,a,o={isFixed:!isNaN(parseInt(n,10)),x:t,y:n},l=this.element,d=this.options,u=e(d.anchor),c=l[0]&&l.hasClass("km-widget"),p=l.find("[role='listbox']");if(!this.visible()){if(d.copyAnchorStyles&&(c&&"font-size"==z[0]&&z.shift(),l.css(i.getComputedStyles(u[0],z))),l.data("animating")||this._trigger(h))return;this._activated=!1,d.modal||(I.off(this.downEvent,this._mousedownProxy).on(this.downEvent,this._mousedownProxy),this._toggleResize(!1),this._toggleResize(!0)),this.wrapper=a=i.wrap(l,d.autosize).css({overflow:_,display:"block",position:v}).attr("aria-hidden",!1),p.attr("aria-label")?a.attr("aria-label",p.attr("aria-label")):p.attr("aria-labelledby")&&a.attr("aria-labelledby",p.attr("aria-labelledby")),r.mobileOS.android&&a.css(F,"translatez(0)"),a.css(w),e(d.appendTo)[0]==document.body&&a.css("top","-10000px"),this.flipped=this._position(o),s=this._openAnimation(),d.anchor!=b&&this._showDirClass(s),l.is(":visible")||void 0!==l.data("olddisplay")||(l.show(),l.data("olddisplay",l.css("display")),l.hide()),l.data(y,s.effects).kendoStop(!0).kendoAnimate(s).attr("aria-hidden",!1)}},_location:function(t){var n,s=this.element,a=this.options,o=e(a.anchor),l=s[0]&&s.hasClass("km-widget");a.copyAnchorStyles&&(l&&"font-size"==z[0]&&z.shift(),s.css(i.getComputedStyles(o[0],z))),this.wrapper=n=i.wrap(s,a.autosize).css({overflow:_,display:"block",position:v}),r.mobileOS.android&&n.css(F,"translatez(0)"),n.css(w),e(a.appendTo)[0]==document.body&&n.css("top","-10000px"),this._position(t||{});var d=n.offset();return{width:i._outerWidth(n),height:i._outerHeight(n),left:d.left,top:d.top}},_openAnimation:function(){var e=E(!0,{},this.options.animation.open);return e.effects=i.parseEffects(e.effects,this.flipped),e},_hideDirClass:function(){var t=e(this.options.anchor),n=((t.attr("class")||"").match(T)||["","down"])[1],s=C+"-"+n;t.removeClass(s).children(S).removeClass(x).removeClass(s),this.element.removeClass(C+"-"+i.directions[n].reverse)},_showDirClass:function(t){var n=t.effects.slideIn?t.effects.slideIn.direction:"down",s=C+"-"+n;e(this.options.anchor).addClass(s).children(S).addClass(x).addClass(s),this.element.addClass(C+"-"+i.directions[n].reverse)},position:function(){this.visible()&&(this.flipped=this._position())},toggle:function(){this[this.visible()?u:h]()},visible:function(){return this.element.is(":visible")},close:function(t){var n,s,a,r,o=this.options;if(this.visible()){if(n=this.wrapper[0]?this.wrapper:i.wrap(this.element).hide(),this._toggleResize(!1),this._closing||this._trigger(u))return void this._toggleResize(!0);this.element.find(".k-popup").each(function(){var i=e(this).data("kendoPopup");i&&i.close(t)}),I.off(this.downEvent,this._mousedownProxy),t?s={hide:!0,effects:{}}:(s=E(!0,{},o.animation.close),a=this.element.data(y),!(r=s.effects)&&!i.size(r)&&a&&i.size(a)&&(s.effects=a,s.reverse=!0),this._closing=!0),this.element.kendoStop(!0).attr("aria-hidden",!0),n.css({overflow:_}).attr("aria-hidden",!0),this.element.kendoAnimate(s),t&&this._animationClose()}},_trigger:function(e){return this.trigger(e,{type:e})},_resize:function(e){var t=this;-1!==r.resize.indexOf(e.type)?(clearTimeout(t._resizeTimeout),t._resizeTimeout=setTimeout(function(){t._position(),t._resizeTimeout=null},50)):(!t._hovered||t._activated&&t.element.find(".k-list").length>0)&&t.close()},_toggleResize:function(e){var t=e?"on":"off",i=r.resize;r.mobileOS.ios||r.mobileOS.android||r.browser.safari||(i+=" scroll"),e&&!this.scrollableParents&&(this.scrollableParents=this._scrollableParents()),this.scrollableParents&&this.scrollableParents.length&&this.scrollableParents[t]("scroll",this._resizeProxy),D[t](i,this._resizeProxy)},_mousedown:function(t){var n=this.element[0],s=this.options,a=e(s.anchor)[0],r=s.toggleTarget,o=i.eventTarget(t),l=e(o).closest(".k-popup"),d=l.parent().parent(".km-shim").length;l=l[0],!d&&l&&l!==this.element[0]||"popover"!==e(t.target).closest("a").data("rel")&&(P(n,o)||P(a,o)||r&&P(e(r)[0],o)||this.close())},_fit:function(e,t,i){var n=0;return e+t>i&&(n=i-(e+t)),e<0&&(n=-e),n},_flip:function(e,t,i,n,s,a,r){var o=0;return r=r||t,a!==s&&a!==f&&s!==f&&(e+r>n&&(o+=-(i+t)),e+o<0&&(o+=i+t)),o},_scrollableParents:function(){return e(this.options.anchor).parentsUntil("body").filter(function(e,t){return i.isScrollable(t)})},_position:function(t){var n,s,a,h,u,c,p,f=this.element,m=this.wrapper,g=this.options,_=e(g.viewport),b=r.zoomLevel(),y=!!(_[0]==window&&window.innerWidth&&b<=1.02),x=e(g.anchor),C=g.origin.toLowerCase().split(" "),T=g.position.toLowerCase().split(" "),S=this.collisions,I=10002,D=0,F=document.documentElement;if(u=g.viewport===window?{top:window.pageYOffset||document.documentElement.scrollTop||0,left:window.pageXOffset||document.documentElement.scrollLeft||0}:_.offset(),y?(c=window.innerWidth,p=window.innerHeight):(c=_.width(),p=_.height()),y&&F.scrollHeight-F.clientHeight>0&&(c-=(g.isRtl?-1:1)*i.support.scrollbar()),(n=x.parents().filter(m.siblings()))[0]){if(a=Math.max(Number(n.css("zIndex")),0))I=a+10;else for(h=(s=x.parentsUntil(n)).length;D<h;D++)(a=Number(e(s[D]).css("zIndex")))&&I<a&&(I=a+10)}m.css("zIndex",I),t&&t.isFixed?m.css({left:t.x,top:t.y}):m.css(this._align(C,T));var A=o(m,w,x[0]===m.offsetParent()[0]),z=o(m);x.offsetParent().parent(".k-animation-container,.k-popup,.k-group").length&&(A=o(m,w,!0),z=o(m)),z.top-=u.top,z.left-=u.left,this.wrapper.data(k)||m.data(k,E({},A));var P=E({},z),H=E({},A),N=g.adjustSize;"fit"===S[0]&&(H.top+=this._fit(P.top,d(m)+N.height,p/b)),"fit"===S[1]&&(H.left+=this._fit(P.left,l(m)+N.width,c/b));var R=E({},H),O=d(f),M=d(m);return!m.height()&&O&&(M+=O),"flip"===S[0]&&(H.top+=this._flip(P.top,O,d(x),p/b,C[0],T[0],M)),"flip"===S[1]&&(H.left+=this._flip(P.left,l(f),l(x),c/b,C[1],T[1],l(m))),f.css(w,v),m.css(H),H.left!=R.left||H.top!=R.top},_align:function(t,i){var n,s=this.wrapper,a=e(this.options.anchor),r=t[0],h=t[1],u=i[0],c=i[1],p=o(a),v=e(this.options.appendTo),_=l(s),b=d(s)||d(s.children().first()),k=l(a),w=d(a),y=this.options.omitOriginOffsets?0:p.top,x=this.options.omitOriginOffsets?0:p.left,C=Math.round;return v[0]!=document.body&&(y-=(n=o(v)).top,x-=n.left),r===g&&(y+=w),r===f&&(y+=C(w/2)),u===g&&(y-=b),u===f&&(y-=C(b/2)),h===m&&(x+=k),h===f&&(x+=C(k/2)),c===m&&(x-=_),c===f&&(x-=C(_/2)),{top:y,left:x}}});n.plugin(H);var N=i.support.stableSort,R="kendoTabKeyTrap",O=a.extend({init:function(t){this.element=e(t),this.element.autoApplyNS(R)},trap:function(){this.element.on("keydown",this._keepInTrap.bind(this))},removeTrap:function(){this.element.kendoDestroy(R)},destroy:function(){this.element.kendoDestroy(R),this.element=void 0},shouldTrap:function(){return!0},_keepInTrap:function(e){if(9===e.which&&this.shouldTrap()&&!e.isDefaultPrevented()){var t=this._focusableElements(),i=this._sortFocusableElements(t),n=this._nextFocusable(e,i);this._focus(n),e.preventDefault()}},_focusableElements:function(){var t=this.element.find("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex], *[contenteditable]").filter(function(t,i){return i.tabIndex>=0&&e(i).is(":visible")&&!e(i).is("[disabled]")});return this.element.is("[tabindex]")&&t.push(this.element[0]),t},_sortFocusableElements:function(e){var t;if(N)t=e.sort(function(e,t){return e.tabIndex-t.tabIndex});else{var i="__k_index";e.each(function(e,t){t.setAttribute(i,e)}),t=e.sort(function(e,t){return e.tabIndex===t.tabIndex?parseInt(e.getAttribute(i),10)-parseInt(t.getAttribute(i),10):e.tabIndex-t.tabIndex}),e.removeAttr(i)}return t},_nextFocusable:function(e,t){var i=t.length,n=t.index(e.target);return t.get((n+(e.shiftKey?-1:1))%i)},_focus:function(e){"IFRAME"!=e.nodeName?(e.focus(),"INPUT"==e.nodeName&&e.setSelectionRange&&this._haveSelectionRange(e)&&e.setSelectionRange(0,e.value.length)):e.contentWindow.document.body.focus()},_haveSelectionRange:function(e){var t=e.type.toLowerCase();return"text"===t||"search"===t||"url"===t||"tel"===t||"password"===t}});n.Popup.TabKeyTrap=O}(window.kendo.jQuery),e=window.kendo.jQuery,n=(i=window.kendo).ui.Widget,s=i.ui,a=".kendoFloatingLabel",o="k-empty",l="k-focus",d="k-disabled",h="k-no-click",u="k-readonly",c=n.extend({init:function(s,a){n.fn.init.call(this,s,a),a=e.extend(!0,{},a),this.widget=this.options.widget,this.widgetWrapper=this.widget.wrapper[0],this.refresh(),this._editable({readonly:void 0!==this.options.widget.options.readonly&&this.options.widget.options.readonly,disable:this.options.widget.options.enable!==t&&!this.options.widget.options.enable}),this.widgetWrapper.style.width&&(this.element.css("width",this.widgetWrapper.style.width),this.widgetWrapper.style.width="100%"),this.element.addClass("k-floating-label-container"),i.notify(this)},options:{name:"FloatingLabel",widget:null,useReadOnlyClass:!1,floatCheck:function(e){return!e.element.val()}},readonly:function(e){this._editable({readonly:e===t||e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t||e)})},refresh:function(){var e=this.element;e.removeClass(o).removeClass(l),this.options.floatCheck({element:this.options.widget.element,floating:this.element})&&e.addClass(o),(document.activeElement===this.options.widget.element[0]||this.options.widget.input&&document.activeElement===this.options.widget.input[0])&&e.addClass(l)},destroy:function(){this.element.off(a),n.fn.destroy.call(this)},_editable:function(e){var t=this.element,i=e.disable,n=e.readonly;t.off(a),n||i?t.toggleClass(d,i).toggleClass(this.options.useReadOnlyClass?u:h,n):(t.removeClass(d).removeClass(this.options.useReadOnlyClass?u:h),t.on("focusin"+a,this.refresh.bind(this)),t.on("focusout"+a,this.refresh.bind(this)))}}),s.plugin(c);var uK=window.kendo,u$=uK.jQuery,uY=uK.ui.Widget,uQ=uK.isFunction,uX=uY.extend({options:{name:"Label",widget:null},init:function(e,t){e=e||u$("<label></label>"),uY.fn.init.call(this,e,t),t=u$.extend(!0,{},t),this.widget=t.widget,t.floating&&this._floatingLabel(),this._label()},destroy:function(){this.floatingLabel&&this.floatingLabel.destroy(),uY.fn.destroy.call(this)},_unwrapFloating:function(){this.floatingLabel&&(this.floatingLabel.destroy(),this.widget.wrapper.unwrap(this._floatingLabelContainer))},setOptions:function(e){var t=!1;("string"==typeof e||u$.isPlainObject(e)&&!1===e.floating)&&(t=!0),e=u$.isPlainObject(e)?e:{content:e},uY.fn.setOptions.call(this,e),t&&this.floatingLabel?(this._unwrapFloating(),this.floatingLabel.destroy(),delete this.floatingLabel):!0!==e.floating||this.floatingLabel||(this.element.remove(),this._floatingLabel()),this._label(),this.floatingLabel&&this.floatingLabel.refresh()},_label:function(){var e=this.widget.element,t=this.options,i=e.attr("id"),n=t.content;uQ(n)&&(n=n.call(this)),n||(n=""),i||(i=t.name+"_"+uK.guid(),e.attr("id",i)),this.element.addClass("k-label k-input-label").attr("for",i).text(n).insertBefore(this.options.beforeElm||this.widget.wrapper)},_floatingLabel:function(){var e=u$.extend({},this.options);delete e.name,e.floating&&(this._floatingLabelContainer=this.widget.wrapper.wrap("<span></span>").parent(),this.floatingLabel=new uK.ui.FloatingLabel(this._floatingLabelContainer,u$.extend({},e)))}});uK.ui.plugin(uX),function(e,t){var i=window.kendo,n=i.ui,s=i._outerHeight,a=/^\d+(\.\d+)?%$/i,r=n.Widget,o=i.keys,l=i.support,d=i.htmlEncode,h=i._activeElement,u=i._outerWidth,c=i.data.ObservableArray,p="change",f="k-focus",m="k-hover",g="k-selected",v="k-i-loading k-input-loading-icon",_="k-list-ul",b=".k-list-group-sticky-header",k=".k-list-item",w="open",y="close",x="cascade",C="select",T="click",S="activate",I="deactivate",D="dataBinding",F="dataBound",E="selectedItemChange",A="selected",z="requestStart",P="requestEnd",H="focus",N=e.extend,R=Array.isArray,O=l.browser,M="k-hidden",B="width",L="text",V=O.msie,U=/"/g,W={ComboBox:["DropDownList","MultiColumnComboBox"],DropDownList:["ComboBox","MultiColumnComboBox"],MultiColumnComboBox:["ComboBox","DropDownList"]},j="aria-labelledby",G="aria-label",q="aria-activedescendant",K="aria-expanded",$="aria-hidden",Y="aria-busy",Q="aria-selected",X=".k-table-group-row",J=i.ui.DataBoundWidget.extend({init:function(t,n){var s;r.fn.init.call(this,t,n),t=this.element,n=this.options,this._isSelect=t.is(C),this._isSelect&&this.element[0].length&&(n.dataSource||(n.dataTextField=n.dataTextField||L,n.dataValueField=n.dataValueField||"value")),this._listSize=i.cssProperties.getValidClass({widget:"List",propName:"size",value:n.size}),this.ul=e('<ul unselectable="on"/>').attr({tabIndex:-1,"aria-hidden":!0}),this.list=e("<div class='k-list'/>").addClass(this._listSize).append(this.ul),(s=t.attr("id"))||(s=i.guid()),this.list.attr("id",s+"-list"),this.ul.attr("id",s+"_listbox"),n.columns&&n.columns.length&&(this.list.removeClass("k-list").addClass("k-data-table"),this.list.removeClass(this._listSize).addClass("k-table-md"),this.ul.removeClass(_).addClass("k-table"),this._columnsHeader()),this._header(),this._noData(),this._footer(),this._accessors(),this._initValue()},options:{valuePrimitive:!1,footerTemplate:"",headerTemplate:"",noDataTemplate:!0,size:"medium",messages:{noData:"No data found.",clear:"clear"}},setOptions:function(e){r.fn.setOptions.call(this,e),e&&void 0!==e.enable&&(e.enabled=e.enable),e.columns&&e.columns.length&&this._columnsHeader(),this._header(),this._noData(),this._footer(),this._renderFooter(),this._renderNoData(),e.label&&this._inputLabel?this.label.setOptions(e.label):!1===e.label?(this.label._unwrapFloating(),this._inputLabel.remove(),delete this._inputLabel):e.label&&this._label()},focus:function(){this._focused.trigger(H)},readonly:function(e){this._editable({readonly:void 0===e||e,disable:!1}),this.label&&this.label.floatingLabel&&this.label.floatingLabel.readonly(void 0===e||e)},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t||e)}),this.label&&this.label.floatingLabel&&this.label.floatingLabel.enable(e=e===t||e)},_label:function(){var t=this.options,n=e.isPlainObject(t.label)?t.label:{content:t.label};this.label=new i.ui.Label(null,e.extend({},n,{widget:this,floatCheck:this._floatCheck.bind(this)})),this._inputLabel=this.label.element},_floatCheck:function(){return!this.listView||!(this.value()||this.text&&this.text())&&!this.popup.visible()},_refreshFloatingLabel:function(){this.label&&this.label.floatingLabel&&this.label.floatingLabel.refresh()},_header:function(){var t=e(this.header),n=this.options.headerTemplate;(this._angularElement(t,"cleanup"),i.destroy(t),t.remove(),n)?(t=e(("function"!=typeof n?i.template(n):n)({})),this.header=t[0]?t:null,this.list.parent.length>0&&this.list.before(t),this._angularElement(this.header,"compile")):this.header=null},_columnsHeader:function(){var t=e(this.columnsHeader);this._angularElement(t,"cleanup"),i.destroy(t),t.remove();for(var n="<div class='k-table-header'><div class='k-table-header-wrap'><table class='k-table' role='presentation'>",s="<colgroup>",r="<tr class='k-table-row'>",o=0;o<this.options.columns.length;o++){var l=this.options.columns[o],d=l.title||l.field||"",h=l.headerTemplate||d,u="function"!=typeof h?i.template(h):h,c=l.width,p=parseInt(c,10),f="";c&&!isNaN(p)&&(f+="style='width:"+p+(a.test(c)?"%":"px")+";'"),s+="<col "+f+"/>",r+="<th class='k-table-th'>"+u(l)+"</th>"}n+=(s+="</colgroup>")+"<thead class='k-table-thead'>"+(r+="</tr>")+"</thead></table></div></div>",this.columnsHeader=t=e(n),this.list.prepend(t),this._angularElement(this.columnsHeader,"compile")},_noData:function(){var t=e(this.noData),n=!0===this.options.noDataTemplate?this.options.messages.noData:this.options.noDataTemplate;this.angular("cleanup",function(){return{elements:t}}),i.destroy(t),t.remove(),n?(this.noData=e('<div class="k-no-data" style="display: none;"></div>').appendTo(this.list),this.noDataTemplate="function"!=typeof n?i.template(n):n):this.noData=null},_footer:function(){var t=e(this.footer),n=this.options.footerTemplate,s=this.options.columns&&this.options.columns.length?'<div class="k-table-footer"><span class="k-table-td"></span></div>':'<div class="k-list-footer"></div>';this._angularElement(t,"cleanup"),i.destroy(t),t.remove(),n?(this.footer=e(s).appendTo(this.list),this.footerTemplate="function"!=typeof n?i.template(n):n):this.footer=null},_listOptions:function(t){var n=this,s=n.options,a=s.virtual,r={change:n._listChange.bind(n)},o=n._listBound.bind(n),l=n._focused,d=n.element.attr("id"),h=e('label[for="'+n.element.attr("id")+'"]'),u=l.attr(j);return!u&&h.length&&(u=h.attr("id")||n._generateLabelId(h,d||i.guid())),a="object"==typeof a?a:{},(t=e.extend({autoBind:!1,selectable:!0,dataSource:n.dataSource,click:n._click.bind(n),activate:n._activateItem.bind(n),columns:s.columns,deactivate:n._deactivateItem.bind(n),dataBinding:function(){n.trigger(D)},dataBound:o,height:s.height,dataValueField:s.dataValueField,dataTextField:s.dataTextField,groupTemplate:s.groupTemplate,fixedGroupTemplate:s.fixedGroupTemplate,template:s.template,ariaLabel:l.attr(G),ariaLabelledBy:u,listSize:n._listSize},t,a,r)).template||(t.template="#:"+i.expr(t.dataTextField,"data")+"#"),s.$angular&&(t.$angular=s.$angular),t},_initList:function(){var e=this._listOptions({selectedItemChange:this._listChange.bind(this)});this.options.virtual?(this.listView=new i.ui.VirtualList(this.ul,e),this.list.addClass("k-virtual-list")):this.listView=new i.ui.StaticList(this.ul,e),this.listView.bind("listBound",this._listBound.bind(this)),this._setListValue()},_setListValue:function(e){(e=e||this.options.value)!==t&&this.listView.value(e).done(this._updateSelectionState.bind(this))},_updateSelectionState:e.noop,_listMousedown:function(e){this.filterInput&&this.filterInput[0]===e.target||e.preventDefault()},_isFilterEnabled:function(){var e=this.options.filter;return e&&"none"!==e},_hideClear:function(){this._clear&&this._clear.addClass(M)},_showClear:function(){this._clear&&this._clear.removeClass(M)},_clearValue:function(){this._clearText(),this._accessor(""),this.listView.value([]),this._isSelect&&(this._customOption=t),this._isFilterEnabled()&&!this.options.enforceMinLength&&(this._filter({word:"",open:!1}),this.options.highlightFirst&&this.listView.focus(0)),this._change()},_clearText:function(){this.text("")},_clearFilter:function(){this.options.virtual||this.listView.bound(!1),this._filterSource()},_filterSource:function(t,i){var n=this.options,s=n.filterFields&&t&&t.logic&&t.filters&&t.filters.length,a=this.dataSource,r=N({},a.filter()||{}),o=t||r.filters&&r.filters.length&&!t,l=es(r,n.dataTextField);if(this._clearFilterExpressions(r),(t||l)&&this.trigger("filtering",{filter:t}))return e.Deferred().reject().promise();var d={filters:[],logic:"and"};s?d.filters.push(t):this._pushFilterExpression(d,t),en(r)&&(d.logic===r.logic?d.filters=d.filters.concat(r.filters):d.filters.push(r)),this._cascading&&this.listView.setDSFilter(d);var h=N({},{page:o?1:a.page(),pageSize:o?a.options.pageSize:a.pageSize(),sort:a.sort(),filter:a.filter(),group:a.group(),aggregate:a.aggregate()},{filter:d});return a[i?"read":"query"](a._mergeState(h))},_pushFilterExpression:function(e,t){en(t)&&""!==t.value&&e.filters.push(t)},_clearFilterExpressions:function(e){if(e.filters){for(var t,i=0;i<e.filters.length;i++)"fromFilter"in e.filters[i]&&(t=i);isNaN(t)||e.filters.splice(t,1)}},_angularElement:function(e,t){e&&this.angular(t,function(){return{elements:e}})},_renderNoData:function(){var e=this.noData;e&&(this._angularElement(e,"cleanup"),e.html(this.noDataTemplate({instance:this})),this._angularElement(e,"compile"))},_toggleNoData:function(t){e(this.noData).toggle(t)},_toggleHeader:function(e){this.listView.content.prev(b).toggle(e)},_renderFooter:function(){var e=this.footer?this.options.columns&&this.options.columns.length?this.footer.children().first():this.footer:null;e&&(this._angularElement(e,"cleanup"),e.html(this.footerTemplate({instance:this})),this._angularElement(e,"compile"))},_allowOpening:function(){return this.options.noDataTemplate||this.dataSource.flatView().length},_initValue:function(){var e=this.options.value;null!==e?this.element.val(e):(e=this._accessor(),this.options.value=e),this._old=e},_ignoreCase:function(){var e,t=this.dataSource.reader.model;t&&t.fields&&(e=t.fields[this.options.dataTextField])&&e.type&&"string"!==e.type&&(this.options.ignoreCase=!1)},_focus:function(e){return this.listView.focus(e)},_filter:function(e){var t,i=this.options,n=e.word,s=i.filterFields,a=i.dataTextField;if(s&&s.length){t={logic:"or",filters:[],fromFilter:!0};for(var r=0;r<s.length;r++)this._pushFilterExpression(t,this._buildExpression(n,s[r]))}else t=this._buildExpression(n,a);this._open=e.open,this._filterSource(t)},_buildExpression:function(e,t){var i=this.options,n=i.ignoreCase,s=this.dataSource.options.accentFoldingFiltering;return{value:n?s?e.toLocaleLowerCase(s):e.toLowerCase():e,field:t,operator:i.filter,ignoreCase:n}},_clearButton:function(){var t=this.options.messages.clear;this._clear||(this._clear=e('<span unselectable="on" class="k-clear-value" title="'+t+'"><span class="k-icon k-i-x"></span></span>').attr({role:"button",tabIndex:-1})),this.options.clearButton||this._clear.remove(),this._hideClear()},search:function(e){var t=this.options;e="string"==typeof e?e:this._inputValue(),clearTimeout(this._typingTimeout),(t.enforceMinLength||e.length)&&!(e.length>=t.minLength)||(this._state="filter",this.listView&&(this.listView._emptySearch=!i.trim(e).length),this._isFilterEnabled()?this._filter({word:e,open:!0}):this._searchByWord(e))},current:function(e){return this._focus(e)},items:function(){return this.ul[0].children},destroy:function(){var e=this.ns;r.fn.destroy.call(this),this._unbindDataSource(),this.listView.destroy(),this.list.off(e),this.popup.destroy(),this._form&&this._form.off("reset",this._resetHandler),this.label&&this.label.destroy()},dataItem:function(i){if(i===t)return this.listView.selectedDataItems()[0];if("number"!=typeof i){if(this.options.virtual)return this.dataSource.getByUid(e(i).data("uid"));i=e(this.items()).index(i)}return this.dataSource.flatView()[i]},_activateItem:function(){var e=this.listView.focus();e&&this.popup.visible()&&this._focused.add(this.filterInput).attr(q,e.attr("id"))},_deactivateItem:function(){this._focused.add(this.filterInput).removeAttr(q)},_accessors:function(){var e=this.element,t=this.options,n=i.getter,s=e.attr(i.attr("text-field")),a=e.attr(i.attr("value-field"));!t.dataTextField&&s&&(t.dataTextField=s),!t.dataValueField&&a&&(t.dataValueField=a),this._text=n(t.dataTextField),this._value=n(t.dataValueField)},_aria:function(e){var i,n=this.options,s=this._focused;n.suggest!==t&&(i="none"===n.filter?!0===n.suggest?"inline":"none":!0===n.suggest?"both":"list",s.attr("aria-autocomplete",i)),e=e?e+" "+this.ul[0].id:this.ul[0].id,s.attr({"aria-controls":e}),this.filterInput&&this.filterInput.length>0&&this.filterInput.attr("aria-controls",e),this.ul.attr("aria-live",this._isFilterEnabled()?"polite":"off"),this._ariaLabel(this._focused)},_blur:function(){this._change(),this.close(),this._userTriggered=!1},_isValueChanged:function(e){return e!==Z(this._old,typeof e)},_change:function(){var e,i=this.selectedIndex,n=this.options.value,s=this.value();this._isSelect&&!this.listView.bound()&&n&&(s=n),this._isValueChanged(s)||this._valueBeforeCascade!==t&&this._valueBeforeCascade!==Z(this._old,typeof this._valueBeforeCascade)&&this._userTriggered?e=!0:i===t||i===this._oldIndex||this.listView.isFiltered()||(e=!0),e&&(null===this._old||""===this._old||""===s?this._valueBeforeCascade=this._old=s:this.dataItem()?this._valueBeforeCascade=this._old=this.options.dataValueField?this.dataItem()[this.options.dataValueField]:this.dataItem():this._valueBeforeCascade=this._old=null,this._oldIndex=i,this._typing||this.element.trigger(p),this.trigger(p)),this.typing=!1},_data:function(){return this.dataSource.view()},_enable:function(){var e=this.options,i=this.element.is("[disabled]");e.enable!==t&&(e.enabled=e.enable),!e.enabled||i?this.enable(!1):this.readonly(this.element.is("[readonly]"))},_dataValue:function(e){var i=this._value(e);return i===t&&(i=this._text(e)),i},_offsetHeight:function(){var t=0;return this.listView.content.parent().prevAll(":visible").each(function(){var i=e(this);t+=s(i,!0)}),t},_height:function(t){var i,n=this.list,a=this.options.height,r=this.popup.visible(),o=this.options.columns&&this.options.columns.length;if(t||this.options.noDataTemplate){if(i=n.parent().add(n.closest(".k-animation-container")).show(),!n.parent().is(":visible"))return void i.hide();a=this.listView.content[0].scrollHeight>a?a:"auto",i.height(a),"auto"!==a&&(a-=this._offsetHeight(),o&&(a=a-(s(e(this.footer))||0)-(s(e(this.columnsHeader))||0))),o?this.listView.content.outerHeight(a):this.listView.content.parent().outerHeight(a),r||n.parent().hide()}return a},_openHandler:function(e){var t;this._adjustListWidth(),this.trigger(w)?e.preventDefault():(this._focused.attr(K,!0),this.ul.attr($,!1),(t=this.listView.focus())&&this._focused.add(this.filterInput).attr(q,t.attr("id")))},_adjustListWidth:function(){var e,t,i=this.list.parent(),n=i[0].style.width,s=this.wrapper;if(i.data(B)||!n)return t=parseFloat((e=window.getComputedStyle?window.getComputedStyle(s[0],null):0)&&e.width)||u(s),e&&O.msie&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),n="border-box"!==i.css("box-sizing")?t-(u(i)-i.width()):t,i.css({fontFamily:s.css("font-family"),width:this.options.autoWidth?"auto":n,minWidth:n,whiteSpace:this.options.autoWidth?"nowrap":"normal"}).data(B,n),!0},_closeHandler:function(e){this.trigger(y)?e.preventDefault():(this._focused.attr(K,!1),this.ul.attr($,!0),this._focused.add(this.filterInput).removeAttr(q))},_focusItem:function(){var e=this.listView,i=!e.focus(),n=et(e.select());n===t&&this.options.highlightFirst&&i&&(n=0),n!==t?e.focus(n):i&&e.scrollToIndex(0)},_calculateGroupPadding:function(e){var t=this.ul.children(".k-first").first(),n=this.listView.content.prev(b),s=0,a="right";n[0]&&"none"!==n[0].style.display&&("auto"!==e&&(s=i.support.scrollbar()),this.element.parents(".k-rtl").length&&(a="left"),s+=parseFloat(t.css("border-"+a+"-width"),10)+parseFloat(t.children(".k-list-item-group-label").css("padding-"+a),10),n.css("padding-"+a,s))},_calculatePopupHeight:function(e){var t=this._height(this.dataSource.flatView().length||e);this._calculateGroupPadding(t),this._calculateColumnsHeaderPadding(t)},_calculateColumnsHeaderPadding:function(e){if(this.options.columns&&this.options.columns.length){var t=l.isRtl(this.wrapper),n=i.support.scrollbar();this.columnsHeader.css(t?"padding-left":"padding-right","auto"!==e?n:0)}},_refreshScroll:function(){var e=this.listView,t=e.element.height()>e.content.height();this.options.autoWidth&&e.content.css({overflowX:"hidden",overflowY:t?"scroll":"auto"})},_resizePopup:function(e){this.options.virtual||(this.popup.element.is(":visible")?this._calculatePopupHeight(e):(this.popup.one("open",(function(e){return(function(){this._calculatePopupHeight(e)}).bind(this)}).call(this,e)),this.popup.one(S,this._refreshScroll.bind(this))))},_popup:function(){var e=this;this.list.wrap("<div>"),this.popup=new n.Popup(this.list.parent(),N({},this.options.popup,{anchor:this.wrapper,open:this._openHandler.bind(this),close:this._closeHandler.bind(this),animation:this.options.animation,isRtl:l.isRtl(this.wrapper),autosize:this.options.autoWidth,activate:function(){e._refreshFloatingLabel()},deactivate:function(){e._refreshFloatingLabel()}})),this.popup.element.prepend(this.header).on("mousedown"+this.ns,this._listMousedown.bind(this))},_toggleHover:function(t){e(t.currentTarget).toggleClass(m,"mouseenter"===t.type)},_toggle:function(e,i){var n=l.mobileOS&&(l.touch||l.MSPointers||l.pointers);e=e!==t?e:!this.popup.visible(),i||n||this._focused[0]===h()||(this._prevent=!0,this._focused.trigger(H),this._prevent=!1),this[e?w:y]()},_triggerCascade:function(){this._cascadeTriggered&&this.value()===Z(this._cascadedValue,typeof this.value())||(this._cascadedValue=this.value(),this._cascadeTriggered=!0,this.trigger(x,{userTriggered:this._userTriggered}))},_triggerChange:function(){this._valueBeforeCascade!==this.value()&&this.trigger(p)},_unbindDataSource:function(){this.dataSource.unbind(z,this._requestStartHandler).unbind(P,this._requestEndHandler).unbind("error",this._errorHandler)},requireValueMapper:function(e,t){if(((e.value instanceof Array?e.value.length:e.value)||(t instanceof Array?t.length:t))&&e.virtual&&"function"!=typeof e.virtual.valueMapper)throw Error("ValueMapper is not provided while the value is being set. See http://docs.telerik.com/kendo-ui/controls/editors/combobox/virtualization#the-valuemapper-function")}});function Z(e,i){return e!==t&&""!==e&&null!==e&&("boolean"===i?("boolean"!=typeof e&&(e="true"===e.toString().toLowerCase()),e=!!e):"number"===i?e=Number(e):"string"===i&&(e=e.toString())),e}N(J,{inArray:function(e,t){var i,n,s=t.children;if(!e||e.parentNode!==t)return -1;for(i=0,n=s.length;i<n;i++)if(e===s[i])return i;return -1},unifyType:Z}),i.ui.List=J,n.Select=J.extend({init:function(e,t){J.fn.init.call(this,e,t),this._initial=this.element.val()},setDataSource:function(e){var t;this.options.dataSource=e,this._dataSource(),this.listView.bound()&&(this._initialIndex=null,this.listView._current=null),this.listView.setDataSource(this.dataSource),this.options.autoBind&&this.dataSource.fetch(),(t=this._parentWidget())&&this._cascadeSelect(t)},close:function(){this.popup.close()},select:function(e){var i=this;return e===t?i.selectedIndex:i._select(e).done(function(){i._cascadeValue=i._old=i._accessor(),i._oldIndex=i.selectedIndex,i._refreshFloatingLabel()})},_accessor:function(e,t){return this[this._isSelect?"_accessorSelect":"_accessorInput"](e,t)},_accessorInput:function(e){var i=this.element[0];if(e===t)return i.value;null===e&&(e=""),i.value=e},_accessorSelect:function(e,i){var n=this.element[0];if(e===t)return ei(n).value||"";ei(n).selected=!1,i===t&&(i=-1),null!==e&&""!==e&&-1==i?this._custom(e):e?n.value=e:n.selectedIndex=i},_syncValueAndText:function(){return!0},_custom:function(t){var i=this.element,n=this._customOption;n||(n=e("<option/>"),this._customOption=n,i.append(n)),n.text(t),n[0].selected=!0},_hideBusy:function(){clearTimeout(this._busy),this._arrowIcon.removeClass(v),this._focused.attr(Y,!1),this._busy=null,this._showClear()},_showBusy:function(e){var t=this;e.isDefaultPrevented()||(t._request=!0,t._busy||(t._busy=setTimeout(function(){t._arrowIcon&&(t._focused.attr(Y,!0),t._arrowIcon.addClass(v),t._hideClear())},100)))},_requestEnd:function(){this._request=!1,this._hideBusy()},_dataSource:function(){var e,t=this.element,n=this.options,s=n.dataSource||{};s=Array.isArray(s)?{data:s}:s,this._isSelect&&((e=t[0].selectedIndex)>-1&&(n.index=e),s.select=t,s.fields=[{field:n.dataTextField},{field:n.dataValueField}]),this.dataSource?this._unbindDataSource():(this._requestStartHandler=this._showBusy.bind(this),this._requestEndHandler=this._requestEnd.bind(this),this._errorHandler=this._hideBusy.bind(this)),this.dataSource=i.data.DataSource.create(s).bind(z,this._requestStartHandler).bind(P,this._requestEndHandler).bind("error",this._errorHandler)},_firstItem:function(){this.listView.focusFirst()},_lastItem:function(){this.listView.focusLast()},_nextItem:function(){return this.listView.focusNext()},_prevItem:function(){return this.listView.focusPrev()},_getNormalizedDataItem:function(e){var t,i=this.listView,n="number"==typeof e,s=this.optionLabel&&this.optionLabel.length;return t=n?s?--e:e:i.getElementIndex(e),i.dataItemByIndex(t)},_getNormalizedSelectCandidate:function(e){var t=e;return this.optionLabel&&this.optionLabel.length&&"number"==typeof e&&t++,t},_move:function(e){var t,i,n,s,a,r=this,l=r.listView,d=e.keyCode,u=d===o.DOWN,c=r.options.virtual;if(d===o.UP||u){if(e.altKey)r.toggle(u);else{if(!l.bound()&&!r.ul[0].firstChild)return r._fetch||(r.dataSource.one(p,function(){r._fetch=!1,r._move(e)}),r._fetch=!0,r._filterSource()),e.preventDefault(),!0;n=r._focus(),r._fetch||n&&!n.hasClass(g)||(u?(s=r._nextItem(),(c&&s<=0||!r._focus()&&!s)&&r._lastItem()):(s=r._prevItem(),(c&&s>=l.dataSource.total()-1||!r._focus()&&!s)&&r._firstItem())),a=r._getNormalizedSelectCandidate(r._get(r._focus())||s||0),r._select(a,!0).done(function(){var e=function(){r.popup.visible()||r._blur(),null===r._cascadedValue?r._cascadedValue=r.value():r._cascadedValue=r.dataItem()?r.dataItem()[r.options.dataValueField]||r.dataItem():null};r.trigger(C,{dataItem:r._getNormalizedDataItem(a),item:r._focus()})?r._select(n).done(e):e()})}e.preventDefault(),i=!0}else if(d===o.ENTER||d===o.TAB){r.popup.visible()&&e.preventDefault(),n=r._focus(),t=r.dataItem(),r.popup.visible()||t&&r.text()===r._text(t)||(n=null);var f,m=r.filterInput&&r.filterInput[0]===h();if(n){var v=!0;if((t=l.dataItemByIndex(l.getElementIndex(n)))&&(v=r._value(t)!==J.unifyType(r.value(),typeof r._value(t))),v&&r.trigger(C,{dataItem:t,item:n}))return;f=r._select(n)}else r.input&&((r._syncValueAndText()||r._isSelect)&&r._accessor(r.input.val()),r.listView.value(r.input.val()));r._focusElement&&r._focusElement(r.wrapper),m&&d===o.TAB?r.wrapper.focusout():f&&"function"==typeof f.done?f.done(function(){r._blur()}):r._blur(),r.close(),i=!0}else if(d===o.ESC)r.popup.visible()&&e.preventDefault(),r.close(),i=!0;else if(r.popup.visible()&&(d===o.PAGEDOWN||d===o.PAGEUP)){e.preventDefault();var _=d===o.PAGEDOWN?1:-1;l.scrollWith(_*l.screenHeight()),i=!0}return i},_fetchData:function(){var e=this,t=!!e.dataSource.view().length;e._request||e.options.cascadeFrom||e.listView.bound()||e._fetch||t||(e._fetch=!0,e.dataSource.fetch().done(function(){e._fetch=!1}))},_options:function(e,i,n){var s,a,r,o,l=this.element,h=l[0],u=e.length,c="",p=0;for(i&&(c=i);p<u;p++)s="<option",a=e[p],r=this._text(a),(o=this._value(a))!==t&&(-1!==(o+="").indexOf('"')&&(o=o.replace(U,"&quot;")),s+=' value="'+o+'"'),s+=">",r!==t&&(s+=d(r)),c+=s+="</option>";l.html(c),n!==t&&(h.value=n,h.value&&!n&&(h.selectedIndex=-1)),-1!==h.selectedIndex&&(s=ei(h))&&s.setAttribute(A,A)},_reset:function(){var t=this,i=t.element,n=i.attr("form"),s=n?e("#"+n):i.closest("form");s[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(t._initial)})},t._form=s.on("reset",t._resetHandler))},_parentWidget:function(){var t=this.options.name;if(this.options.cascadeFrom){var i=e("#"+this.options.cascadeFrom),n=i.data("kendo"+t);if(!n)for(var s=0;s<W[t].length&&!(n=i.data("kendo"+W[t][s]));s+=1);return n}},_cascade:function(){var e,t=this,i=t.options;if(i.cascadeFrom){if(!(e=t._parentWidget()))return;t._cascadeHandlerProxy=t._cascadeHandler.bind(t),t._cascadeFilterRequests=[],i.autoBind=!1,e.bind("set",function(){t.one("set",function(e){t._selectedValue=e.value||t._accessor()})}),e.first(x,t._cascadeHandlerProxy),e.listView.bound()?(t._toggleCascadeOnFocus(),t._cascadeSelect(e)):(e.one(F,function(){t._toggleCascadeOnFocus(),e.popup.visible()&&e._focused.trigger(H)}),e.value()||t.enable(!1))}},_toggleCascadeOnFocus:function(){var e=this,t=e._parentWidget(),i=V&&t instanceof n.DropDownList?"blur":"focusout";t._focused.add(t.filterInput).on(H,function(){t.unbind(x,e._cascadeHandlerProxy),t.unbind(p,e._cascadeHandlerProxy),t.first(p,e._cascadeHandlerProxy)}),t._focused.add(t.filterInput).on(i,function(){t.unbind(p,e._cascadeHandlerProxy),t.unbind(x,e._cascadeHandlerProxy),t.first(x,e._cascadeHandlerProxy)})},_cascadeHandler:function(e){var t=this._parentWidget(),i=this.value();this._userTriggered=e.userTriggered||t._userTriggered,this.listView.bound()&&this._clearSelection(t,!0),this._cascadeSelect(t,i)},_cascadeChange:function(e){var t=this._accessor()||this._selectedValue;this._cascadeFilterRequests.length||(this._selectedValue=null),this._userTriggered?this._clearSelection(e,!0):t?(t!==Z(this.listView.value()[0],typeof t)&&this.value(t),this.dataSource.view()[0]&&-1!==this.selectedIndex||this._clearSelection(e,!0)):this.dataSource.flatView().length&&this.select(this.options.index),this.enable(),this._triggerCascade(),this._triggerChange(),this._userTriggered=!1},_cascadeSelect:function(e,i){var n=this,s=e.dataItem(),a=s?s[n.options.cascadeFromParentField]||e._value(s):null,r=n.options.cascadeFromField||e.options.dataValueField;if(n._valueBeforeCascade=i!==t?i:n.value(),a||0===a){es(n.dataSource.filter()||{},r);var o=function(){var t=n._cascadeFilterRequests.shift();t&&n.unbind("dataBound",t),(t=n._cascadeFilterRequests[0])&&n.first("dataBound",t),n._cascadeChange(e)};n._cascadeFilterRequests.push(o),1===n._cascadeFilterRequests.length&&n.first("dataBound",o),n._cascading=!0,n._filterSource({field:r,operator:"eq",value:a}),n._cascading=!1}else n.enable(!1),n._clearSelection(e),n._triggerCascade(),n._triggerChange(),n._userTriggered=!1;n._refreshFloatingLabel()}});var ee=i.ui.DataBoundWidget.extend({init:function(t,n){if(r.fn.init.call(this,t,n),this.element.attr("role","listbox").on("click.StaticList","li",this._click.bind(this)).on("mouseenter.StaticList","li",function(){e(this).addClass(m)}).on("mouseleave.StaticList","li",function(){e(this).removeClass(m)}),n&&n.ariaLabel?this.element.attr(G,n.ariaLabel):n&&n.ariaLabelledBy&&this.element.attr(j,n.ariaLabelledBy),l.touch&&this._touchHandlers(),"multiple"===this.options.selectable&&this.element.attr("aria-multiselectable",!0),this.options.columns&&this.options.columns.length){var s=this.element.parent().find(".k-table-thead"),a=e('<tr class="k-table-group-row"><th class="k-table-th" colspan="'+this.options.columns.length+'"></th></tr>');s.append(a),this.header=a.find(".k-table-th"),this.content=this.element.wrap("<div class='k-table-body k-table-scroller' unselectable='on'></div>").parent(),this.element.addClass("k-table-list")}else this.content=this.element.wrap("<div class='k-list-content k-list-scroller' unselectable='on'></div>").parent(),this.header=this.content.before('<div class="k-list-group-sticky-header" style="display:none"></div>').prev(),this.element.addClass(_);this.bound(!1),this._optionID=i.guid(),this._selectedIndices=[],this._view=[],this._dataItems=[],this._values=[];var o=this.options.value;o&&(this._values=Array.isArray(o)?o.slice(0):[o]),this._getter(),this._templates(),this.setDataSource(this.options.dataSource),this._createOnScrollProxy()},options:{name:"StaticList",dataValueField:null,valuePrimitive:!1,selectable:!0,template:null,groupTemplate:null,fixedGroupTemplate:null,ariaLabel:null,ariaLabelledBy:null},events:[T,p,S,I,D,F,E],setDataSource:function(e){var t,n=e||{};n=Array.isArray(n)?{data:n}:n,n=i.data.DataSource.create(n),this.dataSource?(this.dataSource.unbind(p,this._refreshHandler),t=this.value(),this.value([]),this.bound(!1),this.value(t)):this._refreshHandler=this.refresh.bind(this),this.setDSFilter(n.filter()),this.dataSource=n.bind(p,this._refreshHandler),this._fixedHeader()},_touchHandlers:function(){var t,i=this,n=this.options.columns&&this.options.columns.length?".k-table-row":k,s=function(e){return(e.originalEvent||e).changedTouches[0].pageY};i.element.on("touchstart.StaticList",function(e){t=s(e)}),i.element.on("touchend.StaticList",function(a){a.isDefaultPrevented()||10>Math.abs(s(a)-t)&&(i._touchTriggered=!0,i._triggerClick(e(a.target).closest(n).get(0)))})},skip:function(){return this.dataSource.skip()},setOptions:function(e){r.fn.setOptions.call(this,e),this._getter(),this._templates(),this._render(),e.label?this.label.setOptions(e.label):!1===e.label&&(this.label._unwrapFloating(),this._inputLabel.remove(),delete this._inputLabel)},destroy:function(){this.element.off(".StaticList"),this._refreshHandler&&this.dataSource.unbind(p,this._refreshHandler),clearTimeout(this._scrollId),r.fn.destroy.call(this)},dataItemByIndex:function(e){return this.dataSource.flatView()[e]},screenHeight:function(){return this.content[0].clientHeight},scrollToIndex:function(e){var t=this.element[0].children[e];t&&this.scroll(t)},scrollWith:function(e){this.content.scrollTop(this.content.scrollTop()+e)},scroll:function(e){if(e){e[0]&&(e=e[0]);var t=this.content[0],i=e.offsetTop,n=e.offsetHeight,s=t.scrollTop,a=t.clientHeight,r=i+n;s>i?s=i:r>s+a&&(s=r-a),t.scrollTop=s}},selectedDataItems:function(e){if(e===t)return this._dataItems.slice();this._dataItems=e,this._values=this._getValues(e)},_getValues:function(t){var i=this._valueGetter;return e.map(t,function(e){return i(e)})},focusNext:function(){var e=this.focus();e=e?e.next():0,this.focus(e)},focusPrev:function(){var e=this.focus();e=e?e.prev():this.element[0].children.length-1,this.focus(e)},focusFirst:function(){this.focus(this.element[0].children[0])},focusLast:function(){this.focus(et(this.element[0].children))},focus:function(i){var n,s=this._optionID;if(i===t)return this._current;i=et(this._get(i)),i=e(this.element[0].children[i]),this._current&&(this._current.removeClass(f).removeAttr("id"),this.trigger(I)),(n=!!i[0])&&(i.addClass(f),this.scroll(i),i.attr("id",s)),this._current=n?i:null,this.trigger(S)},focusIndex:function(){return this.focus()?this.focus().index():t},skipUpdate:function(e){this._skipUpdate=e},select:function(i){var n,s,a=this.options.selectable,r="multiple"!==a&&!1!==a,o=this._selectedIndices,l=[this.element.find(".k-selected").index()],d=[];if(i===t)return o.slice();1===(i=this._get(i)).length&&-1===i[0]&&(i=[]);var h=e.Deferred().resolve(),u=this.isFiltered();return u&&!r&&this._deselectFiltered(i)||(r&&!u&&-1!==e.inArray(et(i),o)&&-1!==e.inArray(et(i),l)?this._dataItems.length&&this._view.length&&(this._dataItems=[this._view[o[0]].item]):(n=(s=this._deselect(i)).removed,(i=s.indices).length&&(r&&(i=[et(i)]),d=this._select(i)),(d.length||n.length)&&(this._valueComparer=null,this.trigger(p,{added:d,removed:n})))),h},removeAt:function(e){return this._selectedIndices.splice(e,1),this._values.splice(e,1),this._valueComparer=null,{position:e,dataItem:this._dataItems.splice(e,1)[0]}},setValue:function(e){e=Array.isArray(e)||e instanceof c?e.slice(0):[e],this._values=e,this._valueComparer=null},value:function(i){var n,s=this._valueDeferred;return i===t?this._values.slice():(this.setValue(i),s&&"resolved"!==s.state()||(this._valueDeferred=s=e.Deferred()),this.bound()&&(n=this._valueIndices(this._values),"multiple"===this.options.selectable&&this.select(-1),this.select(n),s.resolve()),this._skipUpdate=!1,s)},items:function(){return this.element.children(k)},_click:function(e){this._touchTriggered?this._touchTriggered=!1:e.isDefaultPrevented()||this._triggerClick(e.currentTarget)},_createOnScrollProxy:function(){this._onScroll=(function(){var e=this;clearTimeout(e._scrollId),e._scrollId=setTimeout(function(){e._renderHeader()},50)}).bind(this)},_triggerClick:function(t){this.trigger(T,{item:e(t)})||this.select(t)},_valueExpr:function(e,t){var i,n=0,s=[];if(!this._valueComparer||this._valueType!==e){for(this._valueType=e;n<t.length;n++)s.push(Z(t[n],e));i=Function("current","values","for (var idx = 0; idx < "+s.length+"; idx++) { if (current === values[idx]) {   return idx; }} return -1;"),this._valueComparer=function(e){return i(e,s)}}return this._valueComparer},_dataItemPosition:function(e,t){var i=this._valueGetter(e);return this._valueExpr(typeof i,t)(i)},_getter:function(){this._valueGetter=i.getter(this.options.dataValueField)},_deselect:function(t){var i,n,s,a=this.element[0].children,r=this.options.selectable,o=this._selectedIndices,l=this._dataItems,d=this._values,h=[],u=0;if(t=t.slice(),!0!==r&&t.length){if("multiple"===r){for(;u<t.length;u++)if(e(a[n=t[u]]).hasClass(g)){for(i=0;i<o.length;i++)if((s=o[i])===n){e(a[s]).removeClass(g).attr(Q,!1);var c=this._view[n].item,p=this._dataItemPosition(c,this._values);h.push({position:p,dataItem:c}),l.splice(i,1),o.splice(i,1),t.splice(u,1),d.splice(i,1),u-=1,i-=1;break}}}}else{for(;u<o.length;u++)e(a[o[u]]).removeClass(g).attr(Q,!1),h.push({position:u,dataItem:l[u]});this._values=[],this._dataItems=[],this._selectedIndices=[]}return{indices:t,removed:h}},_deselectFiltered:function(t){for(var i,n,s,a=this.element[0].children,r=[],o=0;o<t.length;o++)n=t[o],i=this._view[n].item,(s=this._dataItemPosition(i,this._values))>-1&&(r.push(this.removeAt(s)),e(a[n]).removeClass(g));return!!r.length&&(this.trigger(p,{added:[],removed:r}),!0)},_select:function(t){var i,n,s=this.element[0].children,a=this._view,r=[],o=0;for(-1!==et(t)&&this.focus(t);o<t.length;o++)i=a[n=t[o]],-1!==n&&i&&(i=i.item,this._selectedIndices.push(n),this._dataItems.push(i),this._values.push(this._valueGetter(i)),e(s[n]).addClass(g).attr(Q,!0),r.push({dataItem:i}));return r},getElementIndex:function(t){return e(t).data("offset-index")},_get:function(e){return"number"==typeof e?e=[e]:R(e)||(e=[(e=this.getElementIndex(e))!==t?e:-1]),e},_template:function(){var e=this.options,t=e.template;return t?(t=i.template(t),t=function(e){return'<li tabindex="-1" role="option" unselectable="on" class="k-list-item">'+t(e)+"</li>"}):t=i.template('<li tabindex="-1" role="option" unselectable="on" class="k-list-item"><span class="k-list-item-text">${'+i.expr(e.dataTextField,"data")+"}</span></li>",{useWithBlock:!1}),t},_templates:function(){var e,t=this.options,n={template:t.template,groupTemplate:t.groupTemplate,fixedGroupTemplate:t.fixedGroupTemplate};if(t.columns)for(var s=0;s<t.columns.length;s++){var a=t.columns[s],r=a.field?a.field.toString():L;n["column"+s]=a.template||"#: "+r+"#"}for(var o in n)(e=n[o])&&"function"!=typeof e&&(n[o]=i.template(e));this.templates=n},_normalizeIndices:function(e){for(var i=[],n=0;n<e.length;n++)e[n]!==t&&i.push(e[n]);return i},_valueIndices:function(e,t){var i,n=this._view,s=0;if(t=t?t.slice():[],!e.length)return[];for(;s<n.length;s++)-1!==(i=this._dataItemPosition(n[s].item,e))&&(t[i]=s);return this._normalizeIndices(t)},_firstVisibleItem:function(){for(var t=this.element[0],i=this.content[0].scrollTop,n=e(t.children[0]).height(),s=t.children[Math.floor(i/n)||0]||t.lastChild,a=s.offsetTop<i;s;)if(a){if(s.offsetTop+n>i||!s.nextSibling)break;s=s.nextSibling}else{if(s.offsetTop<=i||!s.previousSibling)break;s=s.previousSibling}return this._view[e(s).data("offset-index")]},_fixedHeader:function(){this.isGrouped()&&this.templates.fixedGroupTemplate?(this.header.closest(X).length?this.header.closest(X).show():this.header.show(),this.content.scroll(this._onScroll)):(this.header.closest(X).length?this.header.closest(X).hide():this.header.hide(),this.content.off("scroll",this._onScroll))},_renderHeader:function(){var e=this.templates.fixedGroupTemplate;if(e){var t=this._firstVisibleItem();t&&t.group.toString().length&&this.header.html(e(t.group))}},_renderItem:function(e){var t='<li tabindex="-1" role="option" unselectable="on" ',i=e.item,n=0!==e.index,s=e.selected,a=this.isGrouped(),r=this.options.columns&&this.options.columns.length,o=e.index%2==1?" k-table-alt-row":"";return t+=r?'class="k-table-row'+o:'class="k-list-item',n&&e.newGroup&&(t+=" k-first"),e.isLastGroupedItem&&r&&(t+=" k-last"),s&&(t+=" k-selected"),t+='" aria-selected="'+(s?"true":"false")+'" data-offset-index="'+e.index+'">',r?t+=this._renderColumns(i):t+='<span class="k-list-item-text">'+this.templates.template(i)+"</span>",n&&e.newGroup?t+=r?'<span class="k-table-td k-table-group-td"><span>'+this.templates.groupTemplate(e.group)+"</span></span>":'<div class="k-list-item-group-label">'+this.templates.groupTemplate(e.group)+"</div>":a&&r&&(t+='<span class="k-table-td k-table-spacer-td"></span>'),t+"</li>"},_renderColumns:function(e){for(var t="",i=0;i<this.options.columns.length;i++){var n=this.options.columns[i].width,s=parseInt(n,10),r="";n&&!isNaN(s)&&(r+="style='width:"+s+(a.test(n)?"%":"px")+";'"),t+="<span class='k-table-td' "+r+">"+this.templates["column"+i](e)+"</span>"}return t},_render:function(){var e,t,i,n,s="",a=0,r=0,o=[],l=this.dataSource.view(),d=this.value(),h=this.isGrouped();if(h)for(a=0;a<l.length;a++)for(t=l[a],i=!0,n=0;n<t.items.length;n++)e={selected:this._selected(t.items[n],d),item:t.items[n],group:t.value,newGroup:i,isLastGroupedItem:n===t.items.length-1,index:r},o[r]=e,r+=1,s+=this._renderItem(e),i=!1;else for(a=0;a<l.length;a++)e={selected:this._selected(l[a],d),item:l[a],index:a},o[a]=e,s+=this._renderItem(e);this._view=o,this.element[0].innerHTML=s,h&&o.length&&this._renderHeader()},_selected:function(e,t){return(!this.isFiltered()||"multiple"===this.options.selectable)&&-1!==this._dataItemPosition(e,t)},setDSFilter:function(e){this._lastDSFilter=N({},e)},isFiltered:function(){return this._lastDSFilter||this.setDSFilter(this.dataSource.filter()),!i.data.Query.compareFilters(this.dataSource.filter(),this._lastDSFilter)},refresh:function(e){var t,i=e&&e.action,n=this.options.skipUpdateOnBind,s="itemchange"===i;this.trigger(D),this._angularItems("cleanup"),this._fixedHeader(),this._render(),this.bound(!0),s||"remove"===i?(t=function(e,t){var i,n,s,a,r=t.length,o=e.length,l=[],d=[];if(o)for(s=0;s<o;s++){for(i=e[s],n=!1,a=0;a<r;a++)if(i===t[a]){n=!0,l.push({index:s,item:i});break}n||d.push(i)}return{changed:l,unchanged:d}}(this._dataItems,e.items)).changed.length&&(s?this.trigger(E,{items:t.changed}):this.value(this._getValues(t.unchanged))):this.isFiltered()||this._skipUpdate||this._emptySearch?(this.focus(0),this._skipUpdate&&(this._skipUpdate=!1,this._selectedIndices=this._valueIndices(this._values,this._selectedIndices))):n||i&&"add"!==i||this.value(this._values),this._valueDeferred&&this._valueDeferred.resolve(),this._angularItems("compile"),this.trigger(F)},bound:function(e){if(e===t)return this._bound;this._bound=e},isGrouped:function(){return(this.dataSource.group()||[]).length}});function et(e){return e[e.length-1]}function ei(e){var t=e.selectedIndex;return t>-1?e.options[t]:{}}function en(t){return!(!t||e.isEmptyObject(t))&&!(t.filters&&!t.filters.length)}function es(t,i){var n,s=!1;return t.filters&&(n=e.grep(t.filters,function(e){return s=es(e,i),e.filters?e.filters.length:e.field!=i}),s||t.filters.length===n.length||(s=!0),t.filters=n),s}n.plugin(ee),i.cssProperties.registerPrefix("List","k-list-")}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.effects,s=e.each,a=e.extend,r=i.support,o=r.browser,l=r.transforms,d=r.transitions,h={scale:0,scalex:0,scaley:0,scale3d:0},u={translate:0,translatex:0,translatey:0,translate3d:0},c=void 0!==document.documentElement.style.zoom&&!l,p=/matrix3?d?\s*\(.*,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?/i,f=/^(-?[\d\.\-]+)?[\w\s]*,?\s*(-?[\d\.\-]+)?[\w\s]*/i,m=/translatex?$/i,g=/(zoom|fade|expand)(\w+)/,v=/(zoom|fade|expand)/,_=/[xy]$/i,b=["perspective","rotate","rotatex","rotatey","rotatez","rotate3d","scale","scalex","scaley","scalez","scale3d","skew","skewx","skewy","translate","translatex","translatey","translatez","translate3d","matrix","matrix3d"],k=["rotate","scale","scalex","scaley","skew","skewx","skewy","translate","translatex","translatey","matrix"],w={rotate:"deg",scale:"",skew:"px",translate:"px"},y=l.css,x=Math.round,C="auto",T="width",S="height",I="hidden",D="origin",F="abortId",E="overflow",A="translate",z="position",P="completeCallback",H=y+"transition",N=y+"transform",R=y+"backface-visibility",O=y+"perspective",M="1500px",B="perspective(1500px)",L={left:{reverse:"right",property:"left",transition:"translatex",vertical:!1,modifier:-1},right:{reverse:"left",property:"left",transition:"translatex",vertical:!1,modifier:1},down:{reverse:"up",property:"top",transition:"translatey",vertical:!0,modifier:1},up:{reverse:"down",property:"top",transition:"translatey",vertical:!0,modifier:-1},top:{reverse:"bottom"},bottom:{reverse:"top"},in:{reverse:"out",modifier:-1},out:{reverse:"in",modifier:1},vertical:{reverse:"vertical"},horizontal:{reverse:"horizontal"}};if(i.directions=L,a(e.fn,{kendoStop:function(e,t){return d?n.stopQueue(this,e||!1,t||!1):this.stop(e,t)}}),l&&!d){s(k,function(t,i){e.fn[i]=function(t){if(void 0===t)return q(this,i);var n=e(this)[0],s=i+"("+t+w[i.replace(_,"")]+")";return -1==n.style.cssText.indexOf(N)?e(this).css(N,s):n.style.cssText=n.style.cssText.replace(RegExp(i+"\\(.*?\\)","i"),s),this},e.fx.step[i]=function(t){e(t.elem)[i](t.now)}});var V=e.fx.prototype.cur;e.fx.prototype.cur=function(){return -1!=k.indexOf(this.prop)?parseFloat(e(this.elem)[this.prop]()):V.apply(this,arguments)}}function U(e){return parseInt(e,10)}function W(e,t){return U(e.css(t))}function j(e){for(var t in e)-1!=b.indexOf(t)&&-1==k.indexOf(t)&&delete e[t];return e}function G(e,t){var i,n,s,a,o=[],d={};for(n in t)i=n.toLowerCase(),a=l&&-1!=b.indexOf(i),!r.hasHW3D&&a&&-1==k.indexOf(i)?delete t[n]:(s=t[n],a?o.push(n+"("+s+")"):d[n]=s);return o.length&&(d[N]=o.join(" ")),d}function q(e,t){if(l){var i=e.css(N);if("none"==i)return"scale"==t?1:0;var n=i.match(RegExp(t+"\\s*\\(([\\d\\w\\.]+)")),s=0;return n?s=U(n[1]):(n=i.match(p)||[0,0,0,0,0],t=t.toLowerCase(),m.test(t)?s=parseFloat(n[3]/n[2]):"translatey"==t?s=parseFloat(n[4]/n[2]):"scale"==t?s=parseFloat(n[2]):"rotate"==t&&(s=parseFloat(Math.atan2(n[2],n[1])))),s}return parseFloat(e.css(t))}i.toggleClass=function(e,t,i,n){return t&&(t=t.split(" "),d&&(i=a({exclusive:"all",duration:400,ease:"ease-out"},i),e.css(H,i.exclusive+" "+i.duration+"ms "+i.ease),setTimeout(function(){e.css(H,"").css(S)},i.duration)),s(t,function(t,i){e.toggleClass(i,n)})),e},i.parseEffects=function(e,t){var i={};return"string"==typeof e?s(e.split(" "),function(e,n){var s=!v.test(n),a=n.replace(g,function(e,t,i){return t+":"+i.toLowerCase()}).split(":"),r=a[1],o={};a.length>1&&(o.direction=t&&s?L[r].reverse:r),i[a[0]]=o}):s(e,function(e){var n=this.direction;n&&t&&!v.test(e)&&(this.direction=L[n].reverse),i[e]=this}),i},d&&a(n,{transition:function(t,i,n){var s,r,o=0,l=t.data("keys")||[];n=a({duration:200,ease:"ease-out",complete:null,exclusive:"all"},n);var h=!1,u=function(){h||(h=!0,r&&(clearTimeout(r),r=null),t.removeData(F).dequeue().css(H,"").css(H),n.complete.call(t))};n.duration=e.fx&&e.fx.speeds[n.duration]||n.duration,s=G(0,i),e.merge(l,function(e){var t=[];for(var i in e)t.push(i);return t}(s)),e.hasOwnProperty("uniqueSort")?t.data("keys",e.uniqueSort(l)).height():t.data("keys",e.unique(l)).height(),t.css(H,n.exclusive+" "+n.duration+"ms "+n.ease).css(H),t.css(s).css(N),d.event&&(t.one(d.event,u),0!==n.duration&&(o=500)),r=setTimeout(u,n.duration+o),t.data(F,r),t.data(P,u)},stopQueue:function(e,t,n){var s,a=e.data("keys"),r=!n&&a,o=e.data(P);return r&&(s=i.getComputedStyles(e[0],a)),o&&o(),r&&e.css(s),e.removeData("keys").stop(t)}});var K=i.Class.extend({init:function(e,t){this.element=e,this.effects=[],this.options=t,this.restore=[]},run:function(t){var i,s,r,o,h,u,c=t.length,p=this.element,f=this.options,m=e.Deferred(),g={},v={};for(this.effects=t,m.done(this.complete.bind(this)),p.data("animating",!0),s=0;s<c;s++)for((i=t[s]).setReverse(f.reverse),i.setOptions(f),this.addRestoreProperties(i.restore),i.prepare(g,v),r=0,u=(h=i.children()).length;r<u;r++)h[r].duration(f.duration).run();for(var _ in f.effects)a(v,f.effects[_].properties);for(p.is(":visible")||a(g,{display:p.data("olddisplay")||"block"}),l&&!f.reset&&(o=p.data("targetTransform"))&&(g=a(o,g)),g=G(0,g),l&&!d&&(g=j(g)),p.css(g).css(N),s=0;s<c;s++)t[s].setup();return f.init&&f.init(),p.data("targetTransform",v),n.animate(p,v,a({},f,{complete:m.resolve})),m.promise()},stop:function(){e(this.element).kendoStop(!0,!0)},addRestoreProperties:function(e){for(var t,i=this.element,n=0,s=e.length;n<s;n++)t=e[n],this.restore.push(t),i.data(t)||i.data(t,i.css(t))},restoreCallback:function(){for(var e=this.element,t=0,i=this.restore.length;t<i;t++){var n=this.restore[t];e.css(n,e.data(n))}},complete:function(){var e=0,t=this.element,i=this.options,n=this.effects,s=n.length;for(t.removeData("animating").dequeue(),i.hide&&t.data("olddisplay",t.css("display")).hide(),this.restoreCallback(),c&&!l&&setTimeout(this.restoreCallback.bind(this),0);e<s;e++)n[e].teardown();i.completeCallback&&i.completeCallback(t)}});n.promise=function(e,t){var s,a,r=[],o=new K(e,t),l=i.parseEffects(t.effects);for(var d in t.effects=l,l)(s=n[Y(d)])&&(a=new s(e,l[d].direction),r.push(a));r[0]?o.run(r):(e.is(":visible")||e.css({display:e.data("olddisplay")||"block"}).css("display"),t.init&&t.init(),e.dequeue(),o.complete())},a(n,{animate:function(i,r,c){var p=!1!==c.transition;delete c.transition,d&&"transition"in n&&p?n.transition(i,r,c):l?i.animate(j(r),{queue:!1,show:!1,hide:!1,duration:c.duration,complete:c.complete}):i.each(function(){var i=e(this),n={};s(b,function(e,s){var o,d=r?r[s]+" ":null;if(d){if(s in h&&r[s]!==t)o=d.match(f),l&&a(r,{scale:+o[0]});else if(s in u&&r[s]!==t){var c=i.css(z),p="absolute"==c||"fixed"==c;i.data(A)||(p?i.data(A,{top:W(i,"top")||0,left:W(i,"left")||0,bottom:W(i,"bottom"),right:W(i,"right")}):i.data(A,{top:W(i,"marginTop")||0,left:W(i,"marginLeft")||0}));var m=i.data(A);if(o=d.match(f)){var g="translatey"==s?0:+o[1],v="translatey"==s?+o[1]:+o[2];p?(isNaN(m.right)?isNaN(g)||a(r,{left:m.left+g}):isNaN(g)||a(r,{right:m.right-g}),isNaN(m.bottom)?isNaN(v)||a(r,{top:m.top+v}):isNaN(v)||a(r,{bottom:m.bottom-v})):(isNaN(g)||a(r,{marginLeft:m.left+g}),isNaN(v)||a(r,{marginTop:m.top+v}))}}!l&&"scale"!=s&&s in r&&delete r[s],r&&a(n,r)}}),o.msie&&delete n.scale,i.animate(n,{queue:!1,show:!1,hide:!1,duration:c.duration,complete:c.complete})})}}),n.animatedPromise=n.promise;var $=i.Class.extend({init:function(e,t){this.element=e,this._direction=t,this.options={},this._additionalEffects=[],this.restore||(this.restore=[])},reverse:function(){return this._reverse=!0,this.run()},play:function(){return this._reverse=!1,this.run()},add:function(e){return this._additionalEffects.push(e),this},direction:function(e){return this._direction=e,this},duration:function(e){return this._duration=e,this},compositeRun:function(){var e=new K(this.element,{reverse:this._reverse,duration:this._duration}),t=this._additionalEffects.concat([this]);return e.run(t)},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var t,i,s=this.element,r=0,o=this.restore,h=o.length,u=e.Deferred(),c={},p={},f=this.children(),m=f.length;for(u.done(this._complete.bind(this)),s.data("animating",!0),r=0;r<h;r++)t=o[r],s.data(t)||s.data(t,s.css(t));for(r=0;r<m;r++)f[r].duration(this._duration).run();return this.prepare(c,p),s.is(":visible")||a(c,{display:s.data("olddisplay")||"block"}),l&&(i=s.data("targetTransform"))&&(c=a(i,c)),c=G(0,c),l&&!d&&(c=j(c)),s.css(c).css(N),this.setup(),s.data("targetTransform",p),n.animate(s,p,{duration:this._duration,complete:u.resolve}),u.promise()},stop:function(){var t=0,i=this.children(),n=i.length;for(t=0;t<n;t++)i[t].stop();return e(this.element).kendoStop(!0,!0),this},restoreCallback:function(){for(var e=this.element,t=0,i=this.restore.length;t<i;t++){var n=this.restore[t];e.css(n,e.data(n))}},_complete:function(){var e=this.element;e.removeData("animating").dequeue(),this.restoreCallback(),this.shouldHide()&&e.data("olddisplay",e.css("display")).hide(),c&&!l&&setTimeout(this.restoreCallback.bind(this),0),this.teardown()},setOptions:function(e){a(!0,this.options,e)},children:function(){return[]},shouldHide:e.noop,setup:e.noop,prepare:e.noop,teardown:e.noop,directions:[],setReverse:function(e){return this._reverse=e,this}});function Y(e){return e.charAt(0).toUpperCase()+e.substring(1)}function Q(e,t){var i=$.extend(t),a=i.prototype.directions;n[Y(e)]=i,n.Element.prototype[e]=function(e,t,n,s){return new i(this.element,e,t,n,s)},s(a,function(t,s){n.Element.prototype[e+Y(s)]=function(e,t,n){return new i(this.element,s,e,t,n)}})}var X=["left","right","up","down"],J=["in","out"];function Z(e,t,i,n){Q(e,{directions:J,startValue:function(e){return this._startValue=e,this},endValue:function(e){return this._endValue=e,this},shouldHide:function(){return this._shouldHide},prepare:function(e,s){var a,r,o="out"===this._direction,l=this.element.data(t);a=isNaN(l)||l==i?void 0!==this._startValue?this._startValue:o?i:n:l,r=void 0!==this._endValue?this._endValue:o?n:i,this._reverse?(e[t]=r,s[t]=a):(e[t]=a,s[t]=r),this._shouldHide=s[t]===n}})}Q("slideIn",{directions:X,divisor:function(e){return this.options.divisor=e,this},prepare:function(e,t){var n,s=this.element,a=i._outerWidth,r=i._outerHeight,o=L[this._direction],d=-o.modifier*(o.vertical?r(s):a(s))/(this.options&&this.options.divisor||1)+"px";this._reverse&&(n=e,e=t,t=n),l?(e[o.transition]=d,t[o.transition]="0px"):(e[o.property]=d,t[o.property]="0px")}}),Q("tile",{directions:X,init:function(e,t,i){$.prototype.init.call(this,e,t),this.options={previous:i}},previousDivisor:function(e){return this.options.previousDivisor=e,this},children:function(){var e=this._reverse,t=this.options.previous,n=this.options.previousDivisor||1,s=this._direction,a=[i.fx(this.element).slideIn(s).setReverse(e)];return t&&a.push(i.fx(t).slideIn(L[s].reverse).divisor(n).setReverse(!e)),a}}),Z("fade","opacity",1,0),Z("zoom","scale",1,.01),Q("slideMargin",{prepare:function(e,t){var i,n=this.element,s=this.options,a=n.data(D),r=s.offset,o=this._reverse;o||null!==a||n.data(D,parseFloat(n.css("margin-"+s.axis))),i=n.data(D)||0,t["margin-"+s.axis]=o?i:i+r}}),Q("slideTo",{prepare:function(e,t){var i=this.element,n=this.options.offset.split(","),s=this._reverse;l?(t.translatex=s?0:n[0],t.translatey=s?0:n[1]):(t.left=s?0:n[0],t.top=s?0:n[1]),i.css("left")}}),Q("expand",{directions:["horizontal","vertical"],restore:[E],prepare:function(e,i){var n=this.element,s=this.options,a=this._reverse,r="vertical"===this._direction?S:T,o=n[0].style[r],l=n.data(r),d=parseFloat(l||o),h=x(n.css(r,C)[r]());e.overflow=I,d=s&&s.reset?h||d:d||h,i[r]=(a?0:d)+"px",e[r]=(a?d:0)+"px",l===t&&n.data(r,o)},shouldHide:function(){return this._reverse},teardown:function(){var e=this.element,t="vertical"===this._direction?S:T,i=e.data(t);i!=C&&""!==i||setTimeout(function(){e.css(t,C).css(t)},0)}});var ee={position:"absolute",marginLeft:0,marginTop:0,scale:1};Q("transfer",{init:function(e,t){this.element=e,this.options={target:t},this.restore=[]},setup:function(){this.element.appendTo(document.body)},prepare:function(e,t){var i=this.element,s=n.box(i),r=n.box(this.options.target),o=q(i,"scale"),l=n.fillScale(r,s),d=n.transformOrigin(r,s);a(e,ee),t.scale=1,i.css(N,"scale(1)").css(N),i.css(N,"scale("+o+")"),e.top=s.top,e.left=s.left,e.transformOrigin=d.x+"px "+d.y+"px",this._reverse?e.scale=l:t.scale=l}});var et={top:"rect(auto auto $size auto)",bottom:"rect($size auto auto auto)",left:"rect(auto $size auto auto)",right:"rect(auto auto auto $size)"},ei={top:{start:"rotatex(0deg)",end:"rotatex(180deg)"},bottom:{start:"rotatex(-180deg)",end:"rotatex(0deg)"},left:{start:"rotatey(0deg)",end:"rotatey(-180deg)"},right:{start:"rotatey(180deg)",end:"rotatey(0deg)"}};function en(e,t){var n=e[i.directions[t].vertical?S:T]()/2+"px";return et[t].replace("$size",n)}Q("turningPage",{directions:X,init:function(e,t,i){$.prototype.init.call(this,e,t),this._container=i},prepare:function(e,t){var n=this._reverse,s=n?L[this._direction].reverse:this._direction,a=ei[s];e.zIndex=1,this._clipInHalf&&(e.clip=en(this._container,i.directions[s].reverse)),e[R]=I,t[N]=B+(n?a.start:a.end),e[N]=B+(n?a.end:a.start)},setup:function(){this._container.append(this.element)},face:function(e){return this._face=e,this},shouldHide:function(){var e=this._reverse,t=this._face;return e&&!t||!e&&t},clipInHalf:function(e){return this._clipInHalf=e,this},temporary:function(){return this.element.addClass("temp-page"),this}}),Q("staticPage",{directions:X,init:function(e,t,i){$.prototype.init.call(this,e,t),this._container=i},restore:["clip"],prepare:function(e,t){var i=this._reverse?L[this._direction].reverse:this._direction;e.clip=en(this._container,i),e.opacity=.999,t.opacity=1},shouldHide:function(){var e=this._reverse,t=this._face;return e&&!t||!e&&t},face:function(e){return this._face=e,this}}),Q("pageturn",{directions:["horizontal","vertical"],init:function(e,t,i,n){$.prototype.init.call(this,e,t),this.options={},this.options.face=i,this.options.back=n},children:function(){var e,t=this.options,n="horizontal"===this._direction?"left":"top",s=i.directions[n].reverse,a=this._reverse,r=t.face.clone(!0).removeAttr("id"),o=t.back.clone(!0).removeAttr("id"),l=this.element;return a&&(e=n,n=s,s=e),[i.fx(t.face).staticPage(n,l).face(!0).setReverse(a),i.fx(t.back).staticPage(s,l).setReverse(a),i.fx(r).turningPage(n,l).face(!0).clipInHalf(!0).temporary().setReverse(a),i.fx(o).turningPage(s,l).clipInHalf(!0).temporary().setReverse(a)]},prepare:function(e,t){e[O]=M,e.transformStyle="preserve-3d",e.opacity=.999,t.opacity=1},teardown:function(){this.element.find(".temp-page").remove()}}),Q("flip",{directions:["horizontal","vertical"],init:function(e,t,i,n){$.prototype.init.call(this,e,t),this.options={},this.options.face=i,this.options.back=n},children:function(){var e,t=this.options,n="horizontal"===this._direction?"left":"top",s=i.directions[n].reverse,a=this._reverse,r=this.element;return a&&(e=n,n=s,s=e),[i.fx(t.face).turningPage(n,r).face(!0).setReverse(a),i.fx(t.back).turningPage(s,r).setReverse(a)]},prepare:function(e){e[O]=M,e.transformStyle="preserve-3d"}});var es=!r.mobileOS.android;Q("replace",{_before:e.noop,_after:e.noop,init:function(t,i,n){$.prototype.init.call(this,t),this._previous=e(i),this._transitionClass=n},duration:function(){throw Error("The replace effect does not support duration setting; the effect duration may be customized through the transition class rule")},beforeTransition:function(e){return this._before=e,this},afterTransition:function(e){return this._after=e,this},_both:function(){return e().add(this._element).add(this._previous)},_containerClass:function(){var e=this._direction,t="k-fx k-fx-start k-fx-"+this._transitionClass;return e&&(t+=" k-fx-"+e),this._reverse&&(t+=" k-fx-reverse"),t},complete:function(t){if(!(!this.deferred||t&&e(t.target).is(".km-touch-scrollbar, .km-actionsheet-wrapper"))){var i=this.container;i.removeClass("k-fx-end").removeClass(this._containerClass()).off(d.event,this.completeProxy),this._previous.hide().removeClass("k-fx-current"),this.element.removeClass("k-fx-next"),es&&i.css(E,""),this.isAbsolute||this._both().css(z,""),this.deferred.resolve(),delete this.deferred}},run:function(){if(this._additionalEffects&&this._additionalEffects[0])return this.compositeRun();var t=this,n=t.element,s=t._previous,a=n.parents().filter(s.parents()).first(),r=t._both(),o=e.Deferred(),l=n.css(z);return a.length||(a=n.parent()),this.container=a,this.deferred=o,this.isAbsolute="absolute"==l,this.isAbsolute||r.css(z,"absolute"),es&&(a.css(E),a.css(E,"hidden")),d?(n.addClass("k-fx-hidden"),a.addClass(this._containerClass()),this.completeProxy=this.complete.bind(this),a.on(d.event,this.completeProxy),i.animationFrame(function(){n.removeClass("k-fx-hidden").addClass("k-fx-next"),s.css("display","").addClass("k-fx-current"),t._before(s,n),i.animationFrame(function(){a.removeClass("k-fx-start").addClass("k-fx-end"),t._after(s,n)})})):this.complete(),o.promise()},stop:function(){this.complete()}});var ea=i.Class.extend({init:function(){this._tickProxy=this._tick.bind(this),this._started=!1},tick:e.noop,done:e.noop,onEnd:e.noop,onCancel:e.noop,start:function(){this.enabled()&&(this.done()?this.onEnd():(this._started=!0,i.animationFrame(this._tickProxy)))},enabled:function(){return!0},cancel:function(){this._started=!1,this.onCancel()},_tick:function(){this._started&&(this.tick(),this.done()?(this._started=!1,this.onEnd()):i.animationFrame(this._tickProxy))}}),er=ea.extend({init:function(e){a(this,e),ea.fn.init.call(this)},done:function(){return this.timePassed()>=this.duration},timePassed:function(){return Math.min(this.duration,new Date-this.startDate)},moveTo:function(e){var t=this.movable;this.initial=t[this.axis],this.delta=e.location-this.initial,this.duration="number"==typeof e.duration?e.duration:300,this.tick=this._easeProxy(e.ease),this.startDate=new Date,this.start()},_easeProxy:function(e){var t=this;return function(){t.movable.moveAxis(t.axis,e(t.timePassed(),t.initial,t.delta,t.duration))}}});a(er,{easeOutExpo:function(e,t,i,n){return e==n?t+i:i*(1-Math.pow(2,-10*e/n))+t},easeOutBack:function(e,t,i,n,s){return i*((e=e/n-1)*e*(((s=1.70158)+1)*e+s)+1)+t}}),n.Animation=ea,n.Transition=er,n.createEffect=Q,n.box=function(t){var n=(t=e(t)).offset();return n.width=i._outerWidth(t),n.height=i._outerHeight(t),n},n.transformOrigin=function(e,t){var i=(e.left-t.left)*t.width/(t.width-e.width),n=(e.top-t.top)*t.height/(t.height-e.height);return{x:isNaN(i)?0:i,y:isNaN(n)?0:n}},n.fillScale=function(e,t){return Math.min(e.width/t.width,e.height/t.height)},n.fitScale=function(e,t){return Math.max(e.width/t.width,e.height/t.height)}}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.support,s=i.Class,a=i.Observable,r=Date.now,o=e.extend,l=n.mobileOS,d=l&&l.android,h=800,u=n.browser.msie?5:0,c="press",p="hold",f="select",m="start",g="move",v="cancel",_="doubleTap",b="release",k="gesturechange",w="gestureend",y="gesturetap",x={api:0,touch:0,mouse:9,pointer:9},C=!n.touch||n.mouseAndTouchPresent;function T(e,t){var i=e.x.location,n=e.y.location,s=t.x.location,a=t.y.location,r=i-s,o=n-a;return{center:{x:(i+s)/2,y:(n+a)/2},distance:Math.sqrt(r*r+o*o)}}function S(e){var t,i,s,a=[],r=e.originalEvent,o=e.currentTarget,l=0;if(e.api)a.push({id:2,event:e,target:e.target,currentTarget:e.target,location:e,type:"api"});else if(e.type.match(/touch/))for(t=(i=r?r.changedTouches:[]).length;l<t;l++)a.push({location:s=i[l],event:e,target:s.target,currentTarget:o,id:s.identifier,type:"touch"});else n.pointers||n.msPointers?a.push({location:r,event:e,target:e.target,currentTarget:o,id:r.pointerId,type:"pointer"}):a.push({id:1,event:e,target:e.target,currentTarget:o,location:e,type:"mouse"});return a}var I=s.extend({init:function(e,t){this.axis=e,this._updateLocationData(t),this.startLocation=this.location,this.velocity=this.delta=0,this.timeStamp=r()},move:function(e){var t=e["page"+this.axis],i=r(),n=i-this.timeStamp||1;!t&&d||(this.delta=t-this.location,this._updateLocationData(e),this.initialDelta=t-this.startLocation,this.velocity=this.delta/n,this.timeStamp=i)},_updateLocationData:function(e){var t=this.axis;this.location=e["page"+t],this.client=e["client"+t],this.screen=e["screen"+t]}}),D=s.extend({init:function(e,t,i){o(this,{x:new I("X",i.location),y:new I("Y",i.location),type:i.type,useClickAsTap:e.useClickAsTap,threshold:e.threshold||x[i.type],userEvents:e,target:t,currentTarget:i.currentTarget,initialTouch:i.target,id:i.id,pressEvent:i,_clicks:e._clicks,supportDoubleTap:e.supportDoubleTap,_moved:!1,_finished:!1})},press:function(){this._holdTimeout=setTimeout(this._hold.bind(this),this.userEvents.minHold),this._trigger(c,this.pressEvent)},_tap:function(e){var t=this;t.userEvents._clicks++,1==t.userEvents._clicks&&(t._clickTimeout=setTimeout(function(){1==t.userEvents._clicks?t._trigger("tap",e):t._trigger(_,e),t.userEvents._clicks=0},300))},_hold:function(){this._trigger(p,this.pressEvent)},move:function(e){var t="api"!==e.type&&this.userEvents._shouldNotMove;if(!this._finished&&!t){if(this.x.move(e.location),this.y.move(e.location),!this._moved){if(this._withinIgnoreThreshold())return;if(E.current&&E.current!==this.userEvents)return this.dispose();this._start(e)}this._finished||this._trigger(g,e)}},end:function(e){this.endTime=r(),this._finished||(this._finished=!0,this._trigger(b,e),this._moved?this._trigger("end",e):this.useClickAsTap||(this.supportDoubleTap?this._tap(e):this._trigger("tap",e)),clearTimeout(this._holdTimeout),this.dispose())},dispose:function(){var t=this.userEvents.touches;this._finished=!0,this.pressEvent=null,clearTimeout(this._holdTimeout),t.splice(e.inArray(this,t),1)},skip:function(){this.dispose()},cancel:function(){this.dispose()},isMoved:function(){return this._moved},_start:function(e){clearTimeout(this._holdTimeout),this.startTime=r(),this._moved=!0,this._trigger(m,e)},_trigger:function(e,t){var i=t.event,n={touch:this,x:this.x,y:this.y,target:this.target,event:i};this.userEvents.notify(e,n)&&i.preventDefault()},_withinIgnoreThreshold:function(){var e=this.x.initialDelta,t=this.y.initialDelta;return Math.sqrt(e*e+t*t)<=this.threshold}});function F(e){for(var t=i.eventMap.up.split(" "),n=0,s=t.length;n<s;n++)e(t[n])}var E=a.extend({init:function(t,s){var r,l=i.guid();if(s=s||{},r=this.filter=s.filter,this.threshold=s.threshold||u,this.minHold=s.minHold||h,this.touches=[],this._maxTouches=s.multiTouch?2:1,this.allowSelection=s.allowSelection,this.captureUpIfMoved=s.captureUpIfMoved,this.useClickAsTap=!s.fastTap&&!n.delayedClick(),this.eventNS=l,this._clicks=0,this.supportDoubleTap=s.supportDoubleTap,t=e(t).handler(this),a.fn.init.call(this),o(this,{element:t,surface:s.global&&C?e(t[0].ownerDocument.documentElement):e(s.surface||t),stopPropagation:s.stopPropagation,pressed:!1}),this.surface.handler(this).on(i.applyEventMap("move",l),"_move").on(i.applyEventMap("up cancel",l),"_end"),t.on(i.applyEventMap("down",l),r,"_start"),this.useClickAsTap&&t.on(i.applyEventMap("click",l),r,"_click"),n.pointers||n.msPointers){if(n.browser.version<11){var d="pinch-zoom double-tap-zoom";t.css("-ms-touch-action",s.touchAction&&"none"!=s.touchAction?d+" "+s.touchAction:d)}else t.css("touch-action",s.touchAction||"none")}if(s.preventDragEvent&&t.on(i.applyEventMap("dragstart",l),i.preventDefault),t.on(i.applyEventMap("mousedown",l),r,{root:t},"_select"),this.captureUpIfMoved&&n.eventCapture){var x=this.surface[0],T=this.preventIfMoving.bind(this);F(function(e){x.addEventListener(e,T,!0)})}this.bind([c,p,"tap",_,m,g,"end",b,v,"gesturestart",k,w,y,f],s)},preventIfMoving:function(e){this._isMoved()&&e.preventDefault()},destroy:function(){var e=this;if(!e._destroyed){if(e._destroyed=!0,e.captureUpIfMoved&&n.eventCapture){var t=e.surface[0];F(function(i){t.removeEventListener(i,e.preventIfMoving)})}e.element.kendoDestroy(e.eventNS),e.surface.kendoDestroy(e.eventNS),e.element.removeData("handler"),e.surface.removeData("handler"),e._disposeAll(),e.unbind(),delete e.surface,delete e.element,delete e.currentTarget}},capture:function(){E.current=this},cancel:function(){this._disposeAll(),this.trigger(v)},notify:function(e,t){var i=this.touches;if(this._isMultiTouch()){switch(e){case g:e=k;break;case"end":e=w;break;case"tap":e=y}o(t,{touches:i},T(i[0],i[1]))}return this.trigger(e,o(t,{type:e}))},press:function(e,t,i){this._apiCall("_start",e,t,i)},move:function(e,t){this._apiCall("_move",e,t)},end:function(e,t){this._apiCall("_end",e,t)},_isMultiTouch:function(){return this.touches.length>1},_maxTouchesReached:function(){return this.touches.length>=this._maxTouches},_disposeAll:function(){for(var e=this.touches;e.length>0;)e.pop().dispose()},_isMoved:function(){return e.grep(this.touches,function(e){return e.isMoved()}).length},_select:function(e){this.allowSelection&&!this.trigger(f,{event:e})||e.preventDefault()},_start:function(t){var i,n,s=0,a=this.filter,r=S(t),o=r.length,l=t.which;if(!(l&&l>1||this._maxTouchesReached()))for(E.current=null,this.currentTarget=t.currentTarget,this.stopPropagation&&t.stopPropagation();s<o&&!this._maxTouchesReached();s++)n=r[s],(i=a?e(n.currentTarget):this.element).length&&(n=new D(this,i,n),this.touches.push(n),n.press(),this._isMultiTouch()&&this.notify("gesturestart",{}))},_move:function(e){this._eachTouch("move",e)},_end:function(e){this._eachTouch("end",e)},_click:function(t){var i={touch:{initialTouch:t.target,target:e(t.currentTarget),endTime:r(),x:{location:t.pageX,client:t.clientX},y:{location:t.pageY,client:t.clientY}},x:t.pageX,y:t.pageY,target:e(t.currentTarget),event:t,type:"tap"};this.trigger("tap",i)&&t.preventDefault()},_eachTouch:function(e,t){var i,n,s,a,r={},o=S(t),l=this.touches;for(i=0;i<l.length;i++)r[(n=l[i]).id]=n;for(i=0;i<o.length;i++)(a=r[(s=o[i]).id])&&a[e](s)},_apiCall:function(t,i,n,s){this[t]({api:!0,pageX:i,pageY:n,clientX:i,clientY:n,target:e(s||this.element)[0],stopPropagation:e.noop,preventDefault:e.noop})}});E.defaultThreshold=function(e){u=e},E.minHold=function(e){h=e},i.getTouches=S,i.touchDelta=T,i.UserEvents=E}(window.kendo.jQuery),function(e,t){var i,n=window.kendo,s=n.support,a=window.document,r=e(window),o=n.Class,l=n.ui.Widget,d=n.Observable,h=n.UserEvents,u=e.extend,c=n.getOffset,p={},f={},m={},g=n.elementUnderCursor,v="keyup",_="change",b="dragstart",k="hold",w="drag",y="dragend",x="dragcancel",C="hintDestroyed",T="dragenter",S="dragleave",I="drop";function D(e,t){return parseInt(e.css(t),10)||0}function F(e,t){return Math.min(Math.max(e,t.min),t.max)}function E(e,t){var i=c(e),s=n._outerWidth,a=n._outerHeight,r=i.left+D(e,"borderLeftWidth")+D(e,"paddingLeft"),o=i.top+D(e,"borderTopWidth")+D(e,"paddingTop");return{x:{min:r,max:r+e.width()-s(t,!0)},y:{min:o,max:o+e.height()-a(t,!0)}}}var A,z=d.extend({init:function(t,i){var s=this,a=t[0];s.capture=!1,a.addEventListener?(e.each(n.eventMap.down.split(" "),function(){a.addEventListener(this,s._press.bind(s),!0)}),e.each(n.eventMap.up.split(" "),function(){a.addEventListener(this,s._release.bind(s),!0)})):(e.each(n.eventMap.down.split(" "),function(){a.attachEvent(this,s._press.bind(s))}),e.each(n.eventMap.up.split(" "),function(){a.attachEvent(this,s._release.bind(s))})),d.fn.init.call(s),s.bind(["press","release"],i||{})},captureNext:function(){this.capture=!0},cancelCapture:function(){this.capture=!1},_press:function(e){this.trigger("press"),this.capture&&e.preventDefault()},_release:function(e){this.trigger("release"),this.capture&&(e.preventDefault(),this.cancelCapture())}}),P=d.extend({init:function(t){d.fn.init.call(this),this.forcedEnabled=!1,e.extend(this,t),this.scale=1,this.horizontal?(this.measure="offsetWidth",this.scrollSize="scrollWidth",this.axis="x"):(this.measure="offsetHeight",this.scrollSize="scrollHeight",this.axis="y")},makeVirtual:function(){e.extend(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})},virtualSize:function(e,t){this._virtualMin===e&&this._virtualMax===t||(this._virtualMin=e,this._virtualMax=t,this.update())},outOfBounds:function(e){return e>this.max||e<this.min},forceEnabled:function(){this.forcedEnabled=!0},getSize:function(){return this.container[0][this.measure]},getTotal:function(){return this.element[0][this.scrollSize]},rescale:function(e){this.scale=e},update:function(e){var t=this.virtual?this._virtualMax:this.getTotal(),i=t*this.scale,n=this.getSize();(0!==t||this.forcedEnabled)&&(this.max=this.virtual?-this._virtualMin:0,this.size=n,this.total=i,this.min=Math.min(this.max,n-i),this.minScale=n/t,this.centerOffset=(i-n)/2,this.enabled=this.forcedEnabled||i>n,e||this.trigger(_,this))}}),H=d.extend({init:function(e){d.fn.init.call(this),this.x=new P(u({horizontal:!0},e)),this.y=new P(u({horizontal:!1},e)),this.container=e.container,this.forcedMinScale=e.minScale,this.maxScale=e.maxScale||100,this.bind(_,e)},rescale:function(e){this.x.rescale(e),this.y.rescale(e),this.refresh()},centerCoordinates:function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},refresh:function(){this.x.update(),this.y.update(),this.enabled=this.x.enabled||this.y.enabled,this.minScale=this.forcedMinScale||Math.min(this.x.minScale,this.y.minScale),this.fitScale=Math.max(this.x.minScale,this.y.minScale),this.trigger(_)}}),N=d.extend({init:function(e){u(this,e),d.fn.init.call(this)},outOfBounds:function(){return this.dimension.outOfBounds(this.movable[this.axis])},dragMove:function(e){var t=this.dimension,i=this.axis,n=this.movable,s=n[i]+e;t.enabled&&((s<t.min&&e<0||s>t.max&&e>0)&&(e*=this.resistance),n.translateAxis(i,e),this.trigger(_,this))}}),R=o.extend({init:function(t){var i,n,s,a,r=this;u(r,{elastic:!0},t),s=r.elastic?.5:0,a=r.movable,r.x=i=new N({axis:"x",dimension:r.dimensions.x,resistance:s,movable:a}),r.y=n=new N({axis:"y",dimension:r.dimensions.y,resistance:s,movable:a}),r.userEvents.bind(["press","move","end","gesturestart","gesturechange"],{gesturestart:function(e){r.gesture=e,r.offset=r.dimensions.container.offset()},press:function(t){e(t.event.target).closest("a").is("[data-navigate-on-press=true]")&&t.sender.cancel()},gesturechange:function(e){var t,s=r.gesture,o=s.center,l=e.center,d=e.distance/s.distance,h=r.dimensions.minScale,u=r.dimensions.maxScale;a.scale<=h&&d<1&&(d+=.8*(1-d)),a.scale*d>=u&&(d=u/a.scale);var c=a.x+r.offset.left,p=a.y+r.offset.top;t={x:(c-o.x)*d+l.x-c,y:(p-o.y)*d+l.y-p},a.scaleWith(d),i.dragMove(t.x),n.dragMove(t.y),r.dimensions.rescale(a.scale),r.gesture=e,e.preventDefault()},move:function(e){e.event.target.tagName.match(/textarea|input/i)||(i.dimension.enabled||n.dimension.enabled?(i.dragMove(e.x.delta),n.dragMove(e.y.delta),e.preventDefault()):e.touch.skip())},end:function(e){e.preventDefault()}})}}),O=s.transitions.prefix+"Transform";A=s.hasHW3D?function(e,t,i){return"translate3d("+e+"px,"+t+"px,0) scale("+i+")"}:function(e,t,i){return"translate("+e+"px,"+t+"px) scale("+i+")"};var M=d.extend({init:function(t){d.fn.init.call(this),this.element=e(t),this.element[0].style.webkitTransformOrigin="left top",this.x=0,this.y=0,this.scale=1,this._saveCoordinates(A(this.x,this.y,this.scale))},translateAxis:function(e,t){this[e]+=t,this.refresh()},scaleTo:function(e){this.scale=e,this.refresh()},scaleWith:function(e){this.scale*=e,this.refresh()},translate:function(e){this.x+=e.x,this.y+=e.y,this.refresh()},moveAxis:function(e,t){this[e]=t,this.refresh()},moveTo:function(e){u(this,e),this.refresh()},refresh:function(){var e,t=this.x,i=this.y;this.round&&(t=Math.round(t),i=Math.round(i)),(e=A(t,i,this.scale))!=this.coordinates&&(n.support.browser.msie&&n.support.browser.version<10?(this.element[0].style.position="absolute",this.element[0].style.left=this.x+"px",this.element[0].style.top=this.y+"px"):this.element[0].style[O]=e,this._saveCoordinates(e),this.trigger(_))},_saveCoordinates:function(e){this.coordinates=e}});function B(e,t){var i,n=t.options.group,s=e[n];if(l.fn.destroy.call(t),s.length>1){for(i=0;i<s.length;i++)if(s[i]==t){s.splice(i,1);break}}else s.length=0,delete e[n]}var L=l.extend({init:function(e,t){l.fn.init.call(this,e,t);var i=this.options.group;i in f?f[i].push(this):f[i]=[this]},events:[T,S,I],options:{name:"DropTarget",group:"default"},destroy:function(){B(f,this)},_trigger:function(e,t){var i=p[this.options.group];if(i)return this.trigger(e,u({},t.event,{draggable:i,dropTarget:t.dropTarget}))},_over:function(e){this._trigger(T,e)},_out:function(e){this._trigger(S,e)},_drop:function(e){var t=p[this.options.group];t&&(t.dropped=!this._trigger(I,e))}});L.destroyGroup=function(e){var t,i=f[e]||m[e];if(i){for(t=0;t<i.length;t++)l.fn.destroy.call(i[t]);i.length=0,delete f[e],delete m[e]}},L._cache=f;var V=L.extend({init:function(e,t){l.fn.init.call(this,e,t);var i=this.options.group;i in m?m[i].push(this):m[i]=[this]},destroy:function(){B(m,this)},options:{name:"DropTargetArea",group:"default",filter:null}}),U=l.extend({init:function(e,t){l.fn.init.call(this,e,t),this._activated=!1,this.userEvents=new h(this.element,{global:!0,allowSelection:!0,filter:this.options.filter,threshold:this.options.distance,start:this._start.bind(this),hold:this._hold.bind(this),move:this._drag.bind(this),end:this._end.bind(this),cancel:this._cancel.bind(this),select:this._select.bind(this)}),n.support.touch&&this.element.find(this.options.filter).css("touch-action","none"),this._afterEndHandler=this._afterEnd.bind(this),this._captureEscape=this._captureEscape.bind(this)},events:[k,b,w,y,x,C],options:{name:"Draggable",distance:n.support.touch?0:5,group:"default",cursorOffset:null,axis:null,container:null,filter:null,ignore:null,holdToDrag:!1,autoScroll:!1,dropped:!1},cancelHold:function(){this._activated=!1},_captureEscape:function(e){e.keyCode===n.keys.ESC&&(this._trigger(x,{event:e}),this.userEvents.cancel())},_updateHint:function(t){var i,n=this.options,s=this.boundaries,a=n.axis,r=this.options.cursorOffset;r?i={left:t.x.location+r.left,top:t.y.location+r.top}:(this.hintOffset.left+=t.x.delta,this.hintOffset.top+=t.y.delta,i=e.extend({},this.hintOffset)),s&&(i.top=F(i.top,s.y),i.left=F(i.left,s.x)),"x"===a?delete i.top:"y"===a&&delete i.left,this.hint.css(i)},_shouldIgnoreTarget:function(t){var i=this.options.ignore;return i&&e(t).is(i)},_select:function(e){this._shouldIgnoreTarget(e.event.target)||e.preventDefault()},_start:function(t){var i=this,s=i.options,r=s.container?e(s.container):null,o=s.hint;if(this._shouldIgnoreTarget(t.touch.initialTouch)||s.holdToDrag&&!i._activated)i.userEvents.cancel();else{if(i.currentTarget=t.target,i.currentTargetOffset=c(i.currentTarget),o){i.hint&&i.hint.stop(!0,!0).remove(),i.hint=n.isFunction(o)?e(o.call(i,i.currentTarget)):o;var l=c(i.currentTarget);i.hintOffset=l,i.hint.css({position:"absolute",zIndex:2e4,left:l.left,top:l.top}).appendTo(a.body),i.angular("compile",function(){i.hint.removeAttr("ng-repeat");for(var n=e(t.target);!n.data("$$kendoScope")&&n.length;)n=n.parent();return{elements:i.hint.get(),scopeFrom:n.data("$$kendoScope")}})}p[s.group]=i,i.dropped=!1,r&&(i.boundaries=E(r,i.hint)),e(a).on(v,i._captureEscape),i._trigger(b,t)&&(i.userEvents.cancel(),i._afterEnd()),i.userEvents.capture()}},_hold:function(e){this.currentTarget=e.target,this._trigger(k,e)?this.userEvents.cancel():this._activated=!0},_drag:function(t){t.preventDefault();var i=this._elementUnderCursor(t);if(this.options.autoScroll&&this._cursorElement!==i&&(this._scrollableParent=G(i),this._cursorElement=i),this._lastEvent=t,this._processMovement(t,i),this.options.autoScroll&&this._scrollableParent[0]){var n=q(t.x.location,t.y.location,W(this._scrollableParent));this._scrollCompenstation=e.extend({},this.hintOffset),this._scrollVelocity=n,0===n.y&&0===n.x?(clearInterval(this._scrollInterval),this._scrollInterval=null):this._scrollInterval||(this._scrollInterval=setInterval(this._autoScroll.bind(this),50))}this.hint&&this._updateHint(t)},_processMovement:function(t,n){this._withDropTarget(n,function(n,s){if(n){if(i){if(s===i.targetElement)return;i._trigger(S,u(t,{dropTarget:e(i.targetElement)}))}n._trigger(T,u(t,{dropTarget:e(s)})),i=u(n,{targetElement:s})}else i&&(i._trigger(S,u(t,{dropTarget:e(i.targetElement)})),i=null)}),this._trigger(w,u(t,{dropTarget:i,elementUnderCursor:n}))},_autoScroll:function(){var e=this._scrollableParent[0],t=this._scrollVelocity,i=this._scrollCompenstation;if(e){var n,s,o=this._elementUnderCursor(this._lastEvent);this._processMovement(this._lastEvent,o);var l=e===j()[0];l?(n=a.body.scrollHeight>r.height(),s=a.body.scrollWidth>r.width()):(n=e.offsetHeight<=e.scrollHeight,s=e.offsetWidth<=e.scrollWidth);var d=e.scrollTop+t.y,h=n&&d>0&&d<e.scrollHeight,u=e.scrollLeft+t.x,c=s&&u>0&&u<e.scrollWidth;h?e.scrollTop+=t.y:n&&d<0&&(e.scrollTop=0),c?e.scrollLeft+=t.x:s&&u<0&&(e.scrollLeft=0),this.hint&&l&&(c||h)&&(h&&(i.top+=t.y),c&&(i.left+=t.x),this.hint.css(i))}},_end:function(t){this._withDropTarget(this._elementUnderCursor(t),function(n,s){n&&(n._drop(u({},t,{dropTarget:e(s)})),i=null)}),clearInterval(this._scrollInterval),this._scrollInterval=null,this._cancel(this._trigger(y,t))},_cancel:function(e){var t=this;t._scrollableParent=null,this._cursorElement=null,clearInterval(this._scrollInterval),t._activated=!1,t.hint&&!t.dropped?setTimeout(function(){t.hint.stop(!0,!0),e?t._afterEndHandler():t.hint.animate(t.currentTargetOffset,"fast",t._afterEndHandler)},0):t._afterEnd()},_trigger:function(e,t){return this.trigger(e,u({},t.event,{x:t.x,y:t.y,currentTarget:this.currentTarget,initialTarget:t.touch?t.touch.initialTouch:null,dropTarget:t.dropTarget,elementUnderCursor:t.elementUnderCursor}))},_elementUnderCursor:function(t){var i=g(t),n=this.hint;return n&&function(t,i){try{return e.contains(t,i)||t==i}catch(e){return!1}}(n[0],i)&&(n.hide(),(i=g(t))||(i=g(t)),n.show()),i},_withDropTarget:function(t,i){var n,a=this.options.group,r=f[a],o=m[a];(r&&r.length||o&&o.length)&&((n=function(t,i,n){for(var a,r,o=0,l=i&&i.length,d=n&&n.length;t&&t.parentNode;){for(o=0;o<l;o++)if((a=i[o]).element[0]===t)return{target:a,targetElement:t};for(o=0;o<d;o++)if(r=n[o],e.contains(r.element[0],t)&&s.matchesSelector.call(t,r.options.filter))return{target:r,targetElement:t};t=t.parentNode}}(t,r,o))?i(n.target,n.targetElement):i())},destroy:function(){l.fn.destroy.call(this),this._afterEnd(),this.userEvents.destroy(),this._scrollableParent=null,this._cursorElement=null,clearInterval(this._scrollInterval),this.currentTarget=null},_afterEnd:function(){this.hint&&this.hint.remove(),delete p[this.options.group],this.trigger("destroy"),this.trigger(C),e(a).off(v,this._captureEscape)}});function W(e){var t,i,n,s=j()[0];return e[0]===s?{top:i=s.scrollTop,left:n=s.scrollLeft,bottom:i+r.height(),right:n+r.width()}:((t=e.offset()).bottom=t.top+e.height(),t.right=t.left+e.width(),t)}function j(){return e(n.support.browser.edge||n.support.browser.safari?a.body:a.documentElement)}function G(t){var i=j();if(!t||t===a.body||t===a.documentElement)return i;for(var s=e(t)[0];s&&!n.isScrollable(s)&&s!==a.body;)s=s.parentNode;return s===a.body?i:e(s)}function q(e,t,i){var n={x:0,y:0};return e-i.left<50?n.x=-(50-(e-i.left)):i.right-e<50&&(n.x=50-(i.right-e)),t-i.top<50?n.y=-(50-(t-i.top)):i.bottom-t<50&&(n.y=50-(i.bottom-t)),n}n.ui.plugin(L),n.ui.plugin(V),n.ui.plugin(U),n.TapCapture=z,n.containerBoundaries=E,u(n.ui,{Pane:R,PaneDimensions:H,Movable:M}),n.ui.Draggable.utils={autoScrollVelocity:q,scrollableViewPort:W,findScrollableParent:G}}(window.kendo.jQuery),p=window.kendo.jQuery,m=(f=window.kendo).mobile,g=f.effects,v=m.ui,_=p.extend,b=v.Widget,k=f.Class,w=f.ui.Movable,y=f.ui.Pane,x=f.ui.PaneDimensions,C=g.Transition,T=g.Animation,S=Math.abs,I="km-scroller-release",D="km-scroller-refresh",F="change",E="scroll",A=T.extend({init:function(e){T.fn.init.call(this),_(this,e),this.userEvents.bind("gestureend",this.start.bind(this)),this.tapCapture.bind("press",this.cancel.bind(this))},enabled:function(){return this.movable.scale<this.dimensions.minScale},done:function(){return this.dimensions.minScale-this.movable.scale<.01},tick:function(){var e=this.movable;e.scaleWith(1.1),this.dimensions.rescale(e.scale)},onEnd:function(){var e=this.movable;e.scaleTo(this.dimensions.minScale),this.dimensions.rescale(e.scale)}}),z=T.extend({init:function(e){var t=this;T.fn.init.call(t),_(t,e,{transition:new C({axis:e.axis,movable:e.movable,onEnd:function(){t._end()}})}),t.tapCapture.bind("press",function(){t.cancel()}),t.userEvents.bind("end",t.start.bind(t)),t.userEvents.bind("gestureend",t.start.bind(t)),t.userEvents.bind("tap",t.onEnd.bind(t))},onCancel:function(){this.transition.cancel()},freeze:function(e){this.cancel(),this._moveTo(e)},onEnd:function(){this.paneAxis.outOfBounds()?this._snapBack():this._end()},done:function(){return 1>S(this.velocity)},start:function(e){var t;this.dimension.enabled&&(this.paneAxis.outOfBounds()?this.transition._started?(this.transition.cancel(),this.velocity=Math.min(e.touch[this.axis].velocity*this.velocityMultiplier,55),T.fn.start.call(this)):this._snapBack():(t=2===e.touch.id?0:e.touch[this.axis].velocity,this.velocity=Math.max(Math.min(t*this.velocityMultiplier,55),-55),this.tapCapture.captureNext(),T.fn.start.call(this)))},tick:function(){var e=this.dimension,t=this.paneAxis.outOfBounds()?.5:this.friction,i=this.velocity*=t,n=this.movable[this.axis]+i;!this.elastic&&e.outOfBounds(n)&&(n=Math.max(Math.min(n,e.max),e.min),this.velocity=0),this.movable.moveAxis(this.axis,n)},_end:function(){this.tapCapture.cancelCapture(),this.end()},_snapBack:function(){var e=this.dimension,t=this.movable[this.axis]>e.max?e.max:e.min;this._moveTo(t)},_moveTo:function(e){this.transition.moveTo({location:e,duration:500,ease:C.easeOutExpo})}}),P=T.extend({init:function(e){f.effects.Animation.fn.init.call(this),_(this,e,{origin:{},destination:{},offset:{}})},tick:function(){this._updateCoordinates(),this.moveTo(this.origin)},done:function(){return 5>S(this.offset.y)&&5>S(this.offset.x)},onEnd:function(){this.moveTo(this.destination),this.callback&&this.callback.call()},setCoordinates:function(e,t){this.offset={},this.origin=e,this.destination=t},setCallback:function(e){e&&f.isFunction(e)?this.callback=e:e=void 0},_updateCoordinates:function(){this.offset={x:(this.destination.x-this.origin.x)/4,y:(this.destination.y-this.origin.y)/4},this.origin={y:this.origin.y+this.offset.y,x:this.origin.x+this.offset.x}}}),H=k.extend({init:function(e){var t="x"===e.axis,i=p('<div role="scrollbar" aria-controls="'+e.controlsId+'" class="km-touch-scrollbar km-'+(t?"horizontal":"vertical")+'-scrollbar" />');t&&i.attr("aria-orientation","horizontal"),_(this,e,{element:i,elementSize:0,movable:new w(i),scrollMovable:e.movable,alwaysVisible:e.alwaysVisible,size:t?"width":"height"}),this.scrollMovable.bind(F,this.refresh.bind(this)),this.container.append(i),e.alwaysVisible&&this.show()},refresh:function(){var e=this.axis,t=this.dimension,i=t.size,n=this.scrollMovable,s=i/t.total,a=Math.round(-n[e]*s),r=Math.round(i*s);s>=1?this.element.css("display","none"):this.element.css("display",""),a+r>i?r=i-a:a<0&&(r+=a,a=0),this.elementSize!=r&&(this.element.css(this.size,r+"px"),this.elementSize=r),this._ariaValue(a,t.size-this.elementSize),this.movable.moveAxis(e,a)},show:function(){this.element.css({opacity:.7,visibility:"visible"})},hide:function(){this.alwaysVisible||this.element.css({opacity:0})},_ariaValue:function(e,t){var i=this.element;e>t&&(e=t),i.attr("aria-valuemax",t),i.attr("aria-valuenow",e)}}),N=b.extend({init:function(e,t){var i=this;if(b.fn.init.call(i,e,t),e=i.element,i._native=i.options.useNative&&f.support.hasNativeScrolling,i._native)return e.addClass("km-native-scroller").prepend('<div class="km-scroll-header"/>'),void _(i,{scrollElement:e,fixedContainer:e.children().first()});e.css("overflow","hidden").addClass("km-scroll-wrapper").wrapInner('<div class="km-scroll-container"/>').prepend('<div class="km-scroll-header"/>');var n=e.children().eq(1),s=new f.TapCapture(e),a=new w(n),r=new x({element:n,container:e,forcedEnabled:i.options.zoom}),o=this.options.avoidScrolling,l=new f.UserEvents(e,{touchAction:"pan-y",fastTap:!0,allowSelection:!0,preventDragEvent:!0,captureUpIfMoved:!0,multiTouch:i.options.zoom,supportDoubleTap:i.options.supportDoubleTap,start:function(e){r.refresh();var t=S(e.x.velocity),n=S(e.y.velocity);!p.contains(i.fixedContainer[0],e.event.target)&&!o(e)&&i.enabled&&(r.x.enabled&&2*t>=n||r.y.enabled&&2*n>=t)?l.capture():l.cancel()}}),d=new y({movable:a,dimensions:r,userEvents:l,elastic:i.options.elastic}),h=new A({movable:a,dimensions:r,userEvents:l,tapCapture:s}),u=new P({moveTo:function(e){i.scrollTo(e.x,e.y)}});a.bind(F,function(){i.scrollTop=-a.y,i.scrollLeft=-a.x,i.trigger(E,{scrollTop:i.scrollTop,scrollLeft:i.scrollLeft})}),i.options.mousewheelScrolling&&e.on("DOMMouseScroll mousewheel",this._wheelScroll.bind(this)),_(i,{movable:a,dimensions:r,zoomSnapBack:h,animatedScroller:u,userEvents:l,pane:d,tapCapture:s,pulled:!1,enabled:!0,scrollElement:n,scrollTop:0,scrollLeft:0,fixedContainer:e.children().first()}),i._initAxis("x"),i._initAxis("y"),i._wheelEnd=function(){i._wheel=!1,i.userEvents.end(0,i._wheelY)},r.refresh(),i.options.pullToRefresh&&i._initPullToRefresh()},_wheelScroll:function(e){if(!e.ctrlKey){this._wheel||(this._wheel=!0,this._wheelY=0,this.userEvents.press(0,this._wheelY)),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(this._wheelEnd,50);var t=f.wheelDeltaY(e);t&&(this._wheelY+=t,this.userEvents.move(0,this._wheelY)),e.preventDefault()}},makeVirtual:function(){this.dimensions.y.makeVirtual()},virtualSize:function(e,t){this.dimensions.y.virtualSize(e,t)},height:function(){return this.dimensions.y.size},scrollHeight:function(){return this.scrollElement[0].scrollHeight},scrollWidth:function(){return this.scrollElement[0].scrollWidth},options:{name:"Scroller",zoom:!1,pullOffset:140,visibleScrollHints:!1,elastic:!0,useNative:!1,mousewheelScrolling:!0,avoidScrolling:function(){return!1},pullToRefresh:!1,messages:{pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"}},events:["pull",E,"resize"],_resize:function(){this._native||this.contentResized()},setOptions:function(e){b.fn.setOptions.call(this,e),e.pullToRefresh&&this._initPullToRefresh()},reset:function(){this._native?this.scrollElement.scrollTop(0):(this.movable.moveTo({x:0,y:0}),this._scale(1))},contentResized:function(){this.dimensions.refresh(),this.pane.x.outOfBounds()&&this.movable.moveAxis("x",this.dimensions.x.min),this.pane.y.outOfBounds()&&this.movable.moveAxis("y",this.dimensions.y.min)},zoomOut:function(){var e=this.dimensions;e.refresh(),this._scale(e.fitScale),this.movable.moveTo(e.centerCoordinates())},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},scrollTo:function(e,t){this._native?(f.scrollLeft(this.scrollElement,S(e)),this.scrollElement.scrollTop(S(t))):(this.dimensions.refresh(),this.movable.moveTo({x:e,y:t}))},animatedScrollTo:function(e,t,i){var n,s;this._native?this.scrollTo(e,t):(n={x:this.movable.x,y:this.movable.y},s={x:e,y:t},this.animatedScroller.setCoordinates(n,s),this.animatedScroller.setCallback(i),this.animatedScroller.start())},pullHandled:function(){this.refreshHint.removeClass(D),this.hintContainer.html(this.pullTemplate({})),this.yinertia.onEnd(),this.xinertia.onEnd(),this.userEvents.cancel()},destroy:function(){b.fn.destroy.call(this),this.userEvents&&this.userEvents.destroy()},_scale:function(e){this.dimensions.rescale(e),this.movable.scaleTo(e)},_initPullToRefresh:function(){this.dimensions.y.forceEnabled(),this.pullTemplate=f.template(this.options.messages.pullTemplate),this.releaseTemplate=f.template(this.options.messages.releaseTemplate),this.refreshTemplate=f.template(this.options.messages.refreshTemplate),this.scrollElement.prepend('<span class="km-scroller-pull"><span class="km-icon"></span><span class="km-loading-left"></span><span class="km-loading-right"></span><span class="km-template">'+this.pullTemplate({})+"</span></span>"),this.refreshHint=this.scrollElement.children().first(),this.hintContainer=this.refreshHint.children(".km-template"),this.pane.y.bind("change",this._paneChange.bind(this)),this.userEvents.bind("end",this._dragEnd.bind(this))},_dragEnd:function(){this.pulled&&(this.pulled=!1,this.refreshHint.removeClass(I).addClass(D),this.hintContainer.html(this.refreshTemplate({})),this.yinertia.freeze(this.options.pullOffset/2),this.trigger("pull"))},_paneChange:function(){this.movable.y/.5>this.options.pullOffset?this.pulled||(this.pulled=!0,this.refreshHint.removeClass(D).addClass(I),this.hintContainer.html(this.releaseTemplate({}))):this.pulled&&(this.pulled=!1,this.refreshHint.removeClass(I),this.hintContainer.html(this.pullTemplate({})))},_initAxis:function(e){var t,i=this,n=i.element.attr("id"),s=i.movable,a=i.dimensions[e],r=i.tapCapture,o=i.pane[e];n||(n=f.guid(),i.element.attr("id",n)),t=new H({axis:e,movable:s,dimension:a,container:i.element,alwaysVisible:i.options.visibleScrollHints,controlsId:n}),a.bind(F,function(){t.refresh()}),o.bind(F,function(){t.show()}),i[e+"inertia"]=new z({axis:e,paneAxis:o,movable:s,tapCapture:r,userEvents:i.userEvents,dimension:a,elastic:i.options.elastic,friction:i.options.friction||.96,velocityMultiplier:i.options.velocityMultiplier||10,end:function(){t.hide(),i.trigger("scrollEnd",{axis:e,scrollTop:i.scrollTop,scrollLeft:i.scrollLeft})}})}}),v.plugin(N),function(e,t){var i=window.kendo,n=i.ui,s=n.Widget,a=n.DataBoundWidget,o=/^\d+(\.\d+)?%$/i,l="k-list-item",d="k-table-row",h="k-list-item-group-label",u="k-selected",c="k-focus",p="k-hover",f="change",m="click",g="listBound",v="itemChange",_="activate",b="deactivate",k=".k-table-group-row";function w(e){return e[e.length-1]}function y(e){return e instanceof Array?e:[e]}function x(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}function C(e,t,i){var n=document.createElement(i||"div");return t&&(n.className=t),e.appendChild(n),n}function T(t,i,n){var s,a,r=n.template,l=this.options.columns&&this.options.columns.length,d=i.index%2==1?"k-table-alt-row":"";t=e(t),i.item||(r=n.placeholderTemplate),0===i.index&&this.header&&i.group&&this.header.html(n.fixedGroupTemplate(i.group)),this.angular("cleanup",function(){return{elements:[t]}}),t.attr("data-uid",i.item?i.item.uid:"").attr("data-offset-index",i.index),l&&i.item?(d.length>0?t.addClass(d):t.removeClass("k-table-alt-row"),t.html(function(e,t,i){for(var n="",s=0;s<e.columns.length;s++){var a=e.columns[s].width,r=parseInt(a,10),l="";a&&(l+="style='width:"+r+(o.test(a)?"%":"px")+";'"),n+="<span class='k-table-td' "+l+">"+i["column"+s](t)+"</span>"}return n}(this.options,i.item,n))):(t.find("."+h).remove(),t.find(".k-list-item-text").html(r(i.item||{}))),t.toggleClass(c,i.current),t.toggleClass(u,i.selected),t.toggleClass("k-first",i.newGroup),t.toggleClass("k-last",i.isLastGroupedItem),t.toggleClass("k-loading-item",!i.item),0!==i.index&&i.newGroup?l?e('<span class="k-table-td k-table-group-td"><span>'+n.groupTemplate(i.group)+"</span></span>").appendTo(t):e("<div class="+h+"></div>").appendTo(t).html(n.groupTemplate(i.group)):i.group&&l&&t.append(e('<span class="k-table-td k-table-spacer-td"></span>')),void 0!==i.top&&(s=t[0],a=i.top,s.style.webkitTransform="translateY("+a+"px)",s.style.transform="translateY("+a+"px)"),this.angular("compile",function(){return{elements:[t],data:[{dataItem:i.item,group:i.group,newGroup:i.newGroup}]}})}function S(e){return e&&"resolved"!==e.state()}var I=a.extend({init:function(t,n){var a,r,o=this,l=n.columns&&n.columns.length?"k-table-body k-table-scroller":"k-list-content k-virtual-content";if(o.bound(!1),o._fetching=!1,s.fn.init.call(o,t,n),o.options.itemHeight||(o.options.itemHeight=((r=e('<div class="k-list '+n.listSize+' k-virtual-list"><div class="k-list-content k-virtual-content"><ul class="k-list-ul"><li class="k-list-item"><span class="k-list-item-text">test</span></li></ul></div></div>')).css({position:"absolute",left:"-200000px",visibility:"hidden"}),r.appendTo(document.body),a=parseFloat(i.getComputedStyles(r.find(".k-list-item")[0],["height"]).height),r.remove(),a)),n=o.options,o.element.attr("role","listbox"),o.content=o.wrapper=o.element.wrap("<div unselectable='on' class='"+l+"'></div>").parent(),o.options.columns&&o.options.columns.length){var d=o.element.closest(".k-data-table").find(".k-table-thead"),h=e('<tr class="k-table-group-row"><th class="k-table-th" colspan="'+o.options.columns.length+'"></th></tr>');d.append(h),o.header=h.find(".k-table-th"),o.element.addClass("k-table-list k-virtual-table")}else o.header=o.content.before("<div class='k-list-group-sticky-header'></div>").prev(),o.element.addClass("k-list-ul");n.ariaLabel?this.element.attr("aria-label",n.ariaLabel):n.ariaLabelledBy&&this.element.attr("aria-labelledby",n.ariaLabelledBy),o.element.on("mouseenter.VirtualList","li:not(.k-loading-item)",function(){e(this).addClass(p)}).on("mouseleave.VirtualList","li",function(){e(this).removeClass(p)}),o._values=y(o.options.value),o._selectedDataItems=[],o._selectedIndexes=[],o._rangesList={},o._promisesList=[],o._optionID=i.guid(),o._templates(),o.setDataSource(n.dataSource),o.content.on("scroll.VirtualList",i.throttle(function(){o._renderItems(),o._triggerListBound()},n.delay)),o._selectable()},options:{name:"VirtualList",autoBind:!0,delay:100,height:null,listScreens:4,threshold:.5,itemHeight:null,oppositeBuffer:1,type:"flat",selectable:!1,value:[],dataValueField:null,template:"#:data#",placeholderTemplate:"loading...",groupTemplate:"#:data#",fixedGroupTemplate:"#:data#",mapValueTo:"index",valueMapper:null,ariaLabel:null,ariaLabelledBy:null},events:[f,m,g,v,_,b],setOptions:function(e){var t=this.options.columns&&this.options.columns.length?d:l;s.fn.setOptions.call(this,e),this._selectProxy&&!1===this.options.selectable?this.element.off(m,"."+t,this._selectProxy):!this._selectProxy&&this.options.selectable&&this._selectable(),this._templates(),this.refresh()},items:function(){return e(this._items)},destroy:function(){this.wrapper.off(".VirtualList"),this.dataSource.unbind(f,this._refreshHandler),s.fn.destroy.call(this)},setDataSource:function(e){var t,n=this,s=e||{};s=Array.isArray(s)?{data:s}:s,s=i.data.DataSource.create(s),n.dataSource?(n.dataSource.unbind(f,n._refreshHandler),n._clean(),n.bound(!1),n._deferValueSet=!0,t=n.value(),n.value([]),n.mute(function(){n.value(t)})):n._refreshHandler=n.refresh.bind(n),n.dataSource=s.bind(f,n._refreshHandler),n.setDSFilter(s.filter()),0!==s.view().length?n.refresh():n.options.autoBind&&s.fetch()},skip:function(){return this.dataSource.currentRangeStart()},_triggerListBound:function(){var e=this.skip();this.bound()&&!this._selectingValue&&this._skip!==e&&(this._skip=e,this.trigger(g))},_getValues:function(t){var i=this._valueGetter;return e.map(t,function(e){return i(e)})},_highlightSelectedItems:function(){for(var e=0;e<this._selectedDataItems.length;e++){var t=this._getElementByDataItem(this._selectedDataItems[e]);t.length&&t.addClass(u)}},refresh:function(e){var t,i=this,n=e&&e.action,s="itemchange"===n,a=this.isFiltered();i._mute||(i._deferValueSet=!1,i._fetching?(i._renderItems&&i._renderItems(!0),i._triggerListBound()):(a&&i.focus(0),i._createList(),n||!i._values.length||a||i.options.skipUpdateOnBind||i._emptySearch?(i.bound(!0),i._highlightSelectedItems(),i._triggerListBound()):(i._selectingValue=!0,i.bound(!0),i.value(i._values,!0).done(function(){i._selectingValue=!1,i._triggerListBound()}))),(s||"remove"===n)&&(t=function(e,t){var i,n,s,a,r=t.length,o=e.length,l=[],d=[];if(o)for(s=0;s<o;s++){for(i=e[s],n=!1,a=0;a<r;a++)if(i===t[a]){n=!0,l.push({index:s,item:i});break}n||d.push(i)}return{changed:l,unchanged:d}}(i._selectedDataItems,e.items)).changed.length&&(s?i.trigger("selectedItemChange",{items:t.changed}):i.value(i._getValues(t.unchanged))),i._fetching=!1)},removeAt:function(e){var t=this._values.splice(e,1)[0];return{position:e,dataItem:this._removeSelectedDataItem(t)}},_removeSelectedDataItem:function(e){var t=this._valueGetter;for(var i in this._selectedDataItems)if(t(this._selectedDataItems[i])===e)return this._selectedIndexes.splice(i,1),this._selectedDataItems.splice(i,1)[0]},setValue:function(e){this._values=y(e)},value:function(t,i){return void 0===t?this._values.slice():(null===t&&(t=[]),t=y(t),this._valueDeferred&&"resolved"!==this._valueDeferred.state()||(this._valueDeferred=e.Deferred()),!("multiple"===this.options.selectable&&this.select().length&&t.length)&&t.length||this.select(-1),this._values=t,(this.bound()&&!this._mute&&!this._deferValueSet||i)&&this._prefetchByValue(t),this._valueDeferred)},_checkValuesOrder:function(e){if(this._removedAddedIndexes&&this._removedAddedIndexes.length===e.length){var t=this._removedAddedIndexes.slice();return this._removedAddedIndexes=null,t}return e},_prefetchByValue:function(e){for(var t,i=this,n=i._dataView,s=i._valueGetter,a=i.options.mapValueTo,r=[],o=0;o<e.length;o++)for(var l=0;l<n.length;l++)(t=n[l].item)&&(x(t)?e[o]===t:e[o]===s(t))&&r.push(n[l].index);if(r.length===e.length)return i._values=[],void i.select(r);"function"==typeof i.options.valueMapper?i.options.valueMapper({value:"multiple"===this.options.selectable?e:e[0],success:function(e){"index"===a?i.mapValueToIndex(e):"dataItem"===a&&i.mapValueToDataItem(e)}}):i.value()[0]?(i._selectingValue=!1,i._triggerListBound()):i.select([-1])},mapValueToIndex:function(e){if((e=void 0===e||-1===e||null===e?[]:y(e)).length){var t=this._deselect([]).removed;t.length&&this._triggerChange(t,[])}else e=[-1];this.select(e)},mapValueToDataItem:function(i){var n,s;if((i=i===t||null===i?[]:y(i)).length){n=e.map(this._selectedDataItems,function(e,t){return{index:t,dataItem:e}}),s=e.map(i,function(e,t){return{index:t,dataItem:e}}),this._selectedDataItems=i,this._selectedIndexes=[];for(var a=0;a<this._selectedDataItems.length;a++){var r=this._getElementByDataItem(this._selectedDataItems[a]);this._selectedIndexes.push(this._getIndecies(r)[0]),r.addClass(u)}this._triggerChange(n,s),this._valueDeferred&&this._valueDeferred.resolve()}else this.select([-1])},deferredRange:function(t){var i=this.dataSource,n=this.itemCount,s=this._rangesList,a=e.Deferred(),r=[],o=Math.floor(t/n)*n,l=Math.ceil(t/n)*n;return e.each(l===o?[l]:[o,l],function(t,a){var o,l=a+n,d=s[a];d&&d.end===l?o=d.deferred:(o=e.Deferred(),s[a]={end:l,deferred:o},i._multiplePrefetch(a,n,function(){o.resolve()})),r.push(o)}),e.when.apply(e,r).then(function(){a.resolve()}),a},prefetch:function(t){var i=this,n=this.itemCount,s=!i._promisesList.length;return S(i._activeDeferred)||(i._activeDeferred=e.Deferred(),i._promisesList=[]),e.each(t,function(e,t){i._promisesList.push(i.deferredRange(i._getSkip(t,n)))}),s&&e.when.apply(e,i._promisesList).done(function(){i._promisesList=[],i._activeDeferred.resolve()}),i._activeDeferred},_findDataItem:function(e,t){var i;if("group"===this.options.type)for(var n=0;n<e.length;n++){if(!((i=e[n].items).length<=t))return i[t];t-=i.length}return e[t]},_getRange:function(e,t){return this.dataSource._findRange(e,Math.min(e+t,this.dataSource.total()))},dataItemByIndex:function(t){var n=this,s=n.itemCount,a=n._getSkip(t,s),r=this._getRange(a,s);return n._getRange(a,s).length?("group"===n.options.type&&(i.ui.progress(e(n.wrapper),!0),n.mute(function(){n.dataSource.range(a,s,function(){i.ui.progress(e(n.wrapper),!1)}),r=n.dataSource.view()})),n._findDataItem(r,[t-a])):null},selectedDataItems:function(){return this._selectedDataItems.slice()},scrollWith:function(e){this.content.scrollTop(this.content.scrollTop()+e)},scrollTo:function(e){this.content.scrollTop(e)},scrollToIndex:function(e){this.scrollTo(e*this.options.itemHeight)},focus:function(i){var n,s,a,r,o=this.options.itemHeight,l=this._optionID,d=!0;if(i===t)return(r=this.element.find(".k-focus")).length?r:null;if("function"==typeof i){a=this.dataSource.flatView();for(var h=0;h<a.length;h++)if(i(a[h])){i=h;break}}if(i instanceof Array&&(i=w(i)),isNaN(i)?(n=e(i),s=parseInt(e(n).attr("data-offset-index"),10)):(s=i,n=this._getElementByIndex(s)),-1===s)return this.element.find(".k-focus").removeClass(c),void(this._focusedIndex=t);if(n.length){n.hasClass(c)&&(d=!1),this._focusedIndex!==t&&((r=this._getElementByIndex(this._focusedIndex)).removeClass(c).removeAttr("id"),d&&this.trigger(b)),this._focusedIndex=s,n.addClass(c).attr("id",l);var u=this._getElementLocation(s);"top"===u?this.scrollTo(s*o):"bottom"===u?this.scrollTo(s*o+o-this._screenHeight):"outScreen"===u&&this.scrollTo(s*o),d&&this.trigger(_)}else this._focusedIndex=s,this.items().removeClass(c),this.scrollToIndex(s)},focusIndex:function(){return this._focusedIndex},focusFirst:function(){this.scrollTo(0),this.focus(0)},focusLast:function(){var e=this.dataSource.total();this.scrollTo(this.heightContainer.offsetHeight),this.focus(e-1)},focusPrev:function(){var e,t=this._focusedIndex;return!isNaN(t)&&t>0?(t-=1,this.focus(t),(e=this.focus())&&e.hasClass("k-loading-item")&&(t+=1,this.focus(t))):(t=this.dataSource.total()-1,this.focus(t)),t},focusNext:function(){var e,t=this._focusedIndex,i=this.dataSource.total()-1;return!isNaN(t)&&t<i?(t+=1,this.focus(t),(e=this.focus())&&e.hasClass("k-loading-item")&&(t-=1,this.focus(t))):(t=0,this.focus(t)),t},_triggerChange:function(e,t){t=t||[],((e=e||[]).length||t.length)&&this.trigger(f,{removed:e,added:t})},select:function(i){var n,s,a,r,o,l=this,d="multiple"!==l.options.selectable,h=S(l._activeDeferred),u=this.isFiltered(),c=[];if(i===t)return l._selectedIndexes.slice();if(l._selectDeferred&&"resolved"!==l._selectDeferred.state()||(l._selectDeferred=e.Deferred()),n=l._getIndecies(i),a=d&&!u&&w(n)===w(this._selectedIndexes),(c=l._deselectCurrentValues(n)).length||!n.length||a)return l._triggerChange(c),l._valueDeferred&&l._valueDeferred.resolve().promise(),l._selectDeferred.resolve().promise();1===n.length&&-1===n[0]&&(n=[]),s=n,c=(o=l._deselect(n)).removed,n=o.indices,d&&(h=!1,n.length&&(n=[w(n)]));var p=function(){var e=l._select(n);(s.length===n.length||d)&&l.focus(n),l._triggerChange(c,e),l._valueDeferred&&l._valueDeferred.resolve(),l._selectDeferred.resolve()};return r=l.prefetch(n),h||(r?r.done(p):p()),l._selectDeferred.promise()},bound:function(e){if(e===t)return this._listCreated;this._listCreated=e},mute:function(e){this._mute=!0,e(),this._mute=!1},setDSFilter:function(t){this._lastDSFilter=e.extend({},t)},isFiltered:function(){return this._lastDSFilter||this.setDSFilter(this.dataSource.filter()),!i.data.Query.compareFilters(this.dataSource.filter(),this._lastDSFilter)},skipUpdate:e.noop,_getElementByIndex:function(t){return this.items().filter(function(i,n){return t===parseInt(e(n).attr("data-offset-index"),10)})},_getElementByDataItem:function(t){for(var i,n=this._dataView,s=this._valueGetter,a=0;a<n.length;a++)if(n[a].item&&x(n[a].item)?n[a].item===t:n[a].item&&t&&s(n[a].item)==s(t)){i=n[a];break}return i?this._getElementByIndex(i.index):e()},_clean:function(){this.result=t,this._lastScrollTop=t,this._skip=t,e(this.heightContainer).remove(),this.heightContainer=t,this.element.empty()},_height:function(){var e=!!this.dataSource.view().length,t=this.options.height,i=this.options.itemHeight,n=this.dataSource.total();return e?t/i>n&&(t=n*i):t=0,t},setScreenHeight:function(){var e=this._height();this.content.height(e),this._screenHeight=e},screenHeight:function(){return this._screenHeight},_getElementLocation:function(e){var t=this.content.scrollTop(),i=this._screenHeight,n=this.options.itemHeight,s=e*n,a=s+n,r=t+i;return s===t-n||a>t&&s<t?"top":s===r||s<r&&r<a?"bottom":s>=t&&s<=t+(i-n)?"inScreen":"outScreen"},_templates:function(){var e=this.options,t={template:e.template,placeholderTemplate:e.placeholderTemplate,groupTemplate:e.groupTemplate,fixedGroupTemplate:e.fixedGroupTemplate};if(e.columns)for(var n=0;n<e.columns.length;n++){var s=e.columns[n],a=s.field?s.field.toString():"text";t["column"+n]=s.template||"#: "+a+"#"}for(var r in t)"function"!=typeof t[r]&&(t[r]=i.template(t[r]||""));this.templates=t},_generateItems:function(e,t){for(var i,n,s=[],a=this.options.itemHeight+"px",r=this.options.columns&&this.options.columns.length?d:l;t-- >0;)(n=document.createElement("span")).className="k-list-item-text",(i=document.createElement("li")).tabIndex=-1,i.className=r,i.setAttribute("role","option"),i.style.height=a,i.style.minHeight=a,i.appendChild(n),e.appendChild(i),s.push(i);return s},_saveInitialRanges:function(){var t=this.dataSource._ranges,i=e.Deferred();i.resolve(),this._rangesList={};for(var n=0;n<t.length;n++)this._rangesList[t[n].start]={end:t[n].end,deferred:i}},_createList:function(){var e,t,i=this,n=i.content.get(0),s=i.options,a=i.dataSource;i.bound()&&i._clean(),i._saveInitialRanges(),i._buildValueGetter(),i.setScreenHeight(),i.itemCount=Math.ceil(i._screenHeight*s.listScreens/s.itemHeight),i.itemCount>a.total()&&(i.itemCount=a.total()),i._items=i._generateItems(i.element[0],i.itemCount),i._setHeight(s.itemHeight*a.total()),i.options.type=(a.group()||[]).length?"group":"flat","flat"===i.options.type?i.header.closest(k).length?i.header.closest(k).hide():i.header.hide():i.header.closest(k).length?i.header.closest(k).show():i.header.show(),i.getter=i._getter(function(){i._renderItems(!0)}),i._onScroll=function(e,t){var n=i._listItems(i.getter);return i._fixedHeader(e,n(e,t))},i._renderItems=i._whenChanged((t=i._onScroll,function(e){return t(n.scrollTop,e)}),(e=i._reorderList(i._items,T.bind(i)),function(t,i){return e(t.items,t.index,i),t})),i._renderItems(),i._calculateGroupPadding(i._screenHeight),i._calculateColumnsHeaderPadding()},_setHeight:function(e){var t,i=this.heightContainer;if(i?t=i.offsetHeight:i=this.heightContainer=C(this.content[0],"k-height-container"),e!==t)for(i.innerHTML="";e>0;){var n=Math.min(e,25e4);C(i).style.height=n+"px",e-=n}},_getter:function(){var e=null,t=this.dataSource,i=t.skip(),n=this.options.type,s=this.itemCount,a={};return t.pageSize()<s&&this.mute(function(){t.pageSize(s)}),function(r,o){var l,d=this;if(t.inRange(o,s)){if(i!==o&&this.mute(function(){t.range(o,s),i=o}),"group"===n){if(!a[o])for(var h=a[o]=[],u=t.view(),c=0,p=u.length;c<p;c++)for(var f=u[c],m=0,g=f.items.length;m<g;m++)h.push({item:f.items[m],group:f.value});l=a[o][r-o]}else l=t.view()[r-o];return l}return e!==o&&(e=o,i=o,d._getterDeferred&&d._getterDeferred.reject(),d._getterDeferred=d.deferredRange(o),d._getterDeferred.then(function(){var e=d._indexConstraint(d.content[0].scrollTop);d._getterDeferred=null,o<=e&&e<=o+s&&(d._fetching=!0,t.range(o,s))})),null}},_fixedHeader:function(e,t){var i=this.currentVisibleGroup,n=this.options.itemHeight,s=Math.floor((e-t.top)/n),a=t.items[s];if(a&&a.item){var r=a.group;r!==i&&(this.header.html(this.templates.fixedGroupTemplate(r||"")),this.currentVisibleGroup=r)}return t},_itemMapper:function(e,t,i){var n=this.options.type,s=this.options.itemHeight,a=this._focusedIndex,r=!1,o=!1,l=!1,d=null,h=this._valueGetter;if("group"===n&&(e&&(l=0===t||!1!==this._currentGroup&&this._currentGroup!==e.group,this._currentGroup=e.group),d=e?e.group:null,e=e?e.item:null),"dataItem"===this.options.mapValueTo&&this._selectedDataItems.length&&e){for(var u=0;u<this._selectedDataItems.length;u++)if(h(this._selectedDataItems[u])===h(e)){r=!0;break}}else if(!this.isFiltered()&&i.length&&e){for(var c=0;c<i.length;c++)if(x(e)?i[c]===e:i[c]===h(e)){i.splice(c,1),r=!0;break}}return a===t&&(o=!0),{item:e||null,group:d,newGroup:l,selected:r,current:o,index:t,top:t*s}},_range:function(e){var t,i=this.itemCount,n=this._values.slice(),s=[];this._view={},this._currentGroup=!1;for(var a=e,r=e+i;a<r;a++)t=this._itemMapper(this.getter(a,e),a,n),s[s.length-1]&&(s[s.length-1].isLastGroupedItem=t.newGroup),s.push(t),this._view[t.index]=t;return this._dataView=s,s},_getDataItemsCollection:function(e,t){var i=this._range(this._listIndex(e,t));return{index:i.length?i[0].index:0,top:i.length?i[0].top:0,items:i}},_listItems:function(){var e,t,i,n=this._screenHeight,s=(t=((e=this.options).listScreens-1-e.threshold)*n,i=e.threshold*n,function(e,n,s){return n>s?n-e.top<t:0===e.top||n-e.top>i});return(function(e,t){var i=this.result,n=this._lastScrollTop;return!t&&i&&s(i,e,n)||(i=this._getDataItemsCollection(e,n)),this._lastScrollTop=e,this.result=i,i}).bind(this)},_whenChanged:function(e,t){var i;return function(n){var s=e(n);s!==i&&(i=s,t(s,n))}},_reorderList:function(t,n){var s,a,r=this,o=t.length,l=-1/0;return n=(s=n,a=this.templates,function(t,n){for(var r=0,o=t.length;r<o;r++)s(t[r],n[r],a),n[r].item&&this.trigger(v,{item:e(t[r]),data:n[r].item,ns:i.ui})}).bind(this),function(e,i,s){var a,d,h,u=i-l;s||Math.abs(u)>=o?(d=t,h=e):(u>0?(a=t.splice(0,u),t.push.apply(t,a)):(a=t.splice(u,-u),t.unshift.apply(t,a)),d=a,h=u>0?e.slice(-u):e.slice(0,-u)),n(d,h,r.bound()),l=i}},_bufferSizes:function(){var e,t,i,n=this.options;return e=this._screenHeight,t=n.listScreens,{down:e*(i=n.oppositeBuffer),up:e*(t-1-i)}},_indexConstraint:function(e){var t=this.itemCount,i=this.options.itemHeight;return Math.min(Math.max(this.dataSource.total()-t,0),Math.max(0,Math.floor(e/i)))},_listIndex:function(e,t){var i,n=this._bufferSizes();return i=e-(e>t?n.down:n.up),this._indexConstraint(i)},_selectable:function(){var e=this.options.columns&&this.options.columns.length?d:l;this.options.selectable&&(this._selectProxy=this._clickHandler.bind(this),this.element.on("click.VirtualList","."+e,this._selectProxy))},getElementIndex:function(e){return e instanceof r?parseInt(e.attr("data-offset-index"),10):t},_getIndecies:function(e){var t,i=[];if("function"==typeof e){t=this.dataSource.flatView();for(var n=0;n<t.length;n++)if(e(t[n])){i.push(n);break}}"number"==typeof e&&i.push(e);var s=this.getElementIndex(e);return isNaN(s)||i.push(s),e instanceof Array&&(i=e),i},_deselect:function(i){var n,s,a,r=[],o=this._selectedIndexes,l=this._selectedDataItems,d=0,h=this.options.selectable,c=0,p=this._valueGetter,f=null;if(i=i.slice(),!0!==h&&i.length){if("multiple"===h)for(var m=0;m<i.length;m++){if(f=null,d=e.inArray(i[m],o),s=this.dataItemByIndex(i[m]),-1===d&&s)for(var g=0;g<l.length;g++)(x(s)?l[g]===s:p(l[g])===p(s))&&(a=this._getElementByIndex(i[m]),f=this._deselectSingleItem(a,g,i[m],c));else(n=o[d])!==t&&(a=this._getElementByIndex(n),f=this._deselectSingleItem(a,d,n,c));f&&(i.splice(m,1),r.push(f),c++,m--)}}else{for(var v=0;v<o.length;v++)o[v]!==t?this._getElementByIndex(o[v]).removeClass(u):l[v]&&this._getElementByDataItem(l[v]).removeClass(u),r.push({index:o[v],position:v,dataItem:l[v]});this._values=[],this._selectedDataItems=[],this._selectedIndexes=[]}return{indices:i,removed:r}},_deselectSingleItem:function(e,t,i,n){if(e.hasClass(u))return e.removeClass(u),this._values.splice(t,1),this._selectedIndexes.splice(t,1),{index:i,position:t+n,dataItem:this._selectedDataItems.splice(t,1)[0]}},_deselectCurrentValues:function(t){var i,n,s,a,r=this.element[0].children,o=this._values,l=[],d=0;if("multiple"!==this.options.selectable||!this.isFiltered())return[];if(-1===t[0])return e(r).removeClass(u),l=e.map(this._selectedDataItems.slice(0),function(e,t){return{dataItem:e,position:t}}),this._selectedIndexes=[],this._selectedDataItems=[],this._values=[],l;for(;d<t.length;d++){for(s=-1,n=t[d],this.dataItemByIndex(n)&&(i=this._valueGetter(this.dataItemByIndex(n))),a=0;a<o.length;a++)if(i==o[a]){s=a;break}s>-1&&(l.push(this.removeAt(s)),e(r[n]).removeClass(u))}return l},_getSkip:function(e,t){return((e<t?1:Math.floor(e/t)+1)-1)*t},_select:function(t){var i,n,s=this,a="multiple"!==this.options.selectable,r=this.dataSource,o=this.itemCount,l=this._valueGetter,d=[];return a&&(s._selectedIndexes=[],s._selectedDataItems=[],s._values=[]),n=r.skip(),e.each(t,function(e,t){var a=s._getSkip(t,o);s.mute(function(){r.range(a,o),i=s._findDataItem(r.view(),[t-a]),s._selectedIndexes.push(t),s._selectedDataItems.push(i),s._values.push(x(i)?i:l(i)),d.push({index:t,dataItem:i}),s._getElementByIndex(t).addClass(u),r.range(n,o)})}),s._values=s._checkValuesOrder(s._values),d},_clickHandler:function(t){var i=e(t.currentTarget);!t.isDefaultPrevented()&&i.attr("data-uid")&&this.trigger(m,{item:i})},_buildValueGetter:function(){this._valueGetter=i.getter(this.options.dataValueField)},_calculateGroupPadding:function(e){var t=this.items().first(),n=this.header,s=0;n[0]&&"none"!==n[0].style.display&&("auto"!==e&&(s=i.support.scrollbar()),s+=parseFloat(t.css("border-right-width"),10)+parseFloat(t.children(".k-group").css("right"),10),n.css("padding-right",s))},_calculateColumnsHeaderPadding:function(){if(this.options.columns&&this.options.columns.length){var e=i.support.isRtl(this.wrapper),t=i.support.scrollbar(),n=this.content.parent().parent().find(".k-table-header"),s=this.dataSource.total();n.css(e?"padding-left":"padding-right",s?t:0)}}});i.ui.VirtualList=I,i.ui.plugin(I)}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.Class;i.html=i.html||{};var s=n.extend({init:function(t,i){this.element=e(t),delete(i=i||{}).name,this._initOptions(i)},options:{stylingOptions:[]},_addClasses:function(){var e=this.options,t=e.stylingOptions,n=this.wrapper.data("added-classes");t=t.map(function(t){var n;return"themeColor"!==t||(n=i.cssProperties.getValidClass({widget:e.name,propName:"fillMode",value:e.fillMode}))&&0!==n.length?i.cssProperties.getValidClass({widget:e.name,propName:t,value:e[t],fill:e.fillMode}):""}),n&&this.wrapper.removeClass(n.join(" ")),this.wrapper.data("added-classes",t),this.wrapper.addClass(t.join(" "))},html:function(){return this.wrapper[0].outerHTML}});e.extend(i.html,{HTMLBase:s})}(window.kendo.jQuery),R=window.kendo.jQuery,B=(M=window.kendo).html.HTMLBase,L="k-button-icon",V=B.extend({init:function(e,t){B.fn.init.call(this,e,t),this.wrapper=this.element.addClass("k-button"),this.element.attr("type")||this.element.attr("type",this.options.type),this._addClasses(),this.iconElement(),this._textElement()},options:{name:"HTMLButton",type:"button",icon:"",iconClass:"",spriteCssClass:"",imageUrl:"",size:"medium",rounded:"medium",fillMode:"solid",themeColor:"base",stylingOptions:["size","rounded","fillMode","themeColor"]},iconElement:function(){var e,t,i,n=this.element,s=this.options,a=s.icon,r=s.iconClass,o=s.spriteCssClass,l=s.imageUrl;(o||l||a||r)&&(i=!0,n.contents().filter(function(){return!R(this).hasClass("k-sprite")&&!R(this).hasClass("k-icon")&&!R(this).hasClass("k-image")}).each(function(e,t){(1==t.nodeType||3==t.nodeType&&M.trim(t.nodeValue).length>0)&&(i=!1)})),i&&this.element.addClass("k-icon-button"),l?((t=n.children("img.k-image").first())[0]||(t=R('<img alt="icon" class="k-image" />').prependTo(n)),t.attr("src",l),t.addClass(L)):a||r?((e=n.children("span.k-icon").first())[0]||(e=R("<span></span>").prependTo(n)),e.attr("class",a?"k-icon k-i-"+a:r),e.addClass(L)):o&&((e=n.children("span.k-sprite").first())[0]||(e=R('<span class="k-sprite"></span>').prependTo(n)),e.addClass(o+" "+L))},_textElement:function(){this.element.contents().filter(function(){return!(R(this).hasClass(L)||R(this).hasClass("k-sprite")||R(this).hasClass("k-icon")||R(this).hasClass("k-image"))}).each(function(e,t){if(1==t.nodeType||3==t.nodeType&&M.trim(t.nodeValue).length>0){if(3===t.nodeType){var i=document.createElement("span");t.parentNode.insertBefore(i,t),i.appendChild(t),t=i}t.classList.add("k-button-text")}})}}),R.extend(M.html,{renderButton:function(e,t){return(arguments[0]===O||R.isPlainObject(arguments[0]))&&(t=e,e=R("<button></button>")),new V(e,t).html()},HTMLButton:V}),M.cssProperties.registerPrefix("HTMLButton","k-button-"),M.cssProperties.registerValues("HTMLButton",[{prop:"fillMode",values:M.cssProperties.fillModeValues.concat(["link"])},{prop:"rounded",values:M.cssProperties.roundedValues.concat([["full","full"]])}]),U=window.kendo.jQuery,G=(j=window.kendo).ui,q=j.html,K=G.List,$=G.Select,Y=j.caret,X=(Q=j.support).placeholder,J=j._activeElement,Z=j.keys,et=(ee=".kendoComboBox")+"FocusEvent",ei="click"+ee,en="mousedown"+ee,es="disabled",ea="readonly",er="change",eo="k-focus",el="k-disabled",ed="aria-disabled",eh="aria-readonly",eu="filter",ec="accept",ep="rebind",ef=/(\r\n|\n|\r)/gm,em=[16,17,18,19,20,33,34,37,39,45,91,92,144,145],eg=$.extend({init:function(e,t){var i;this.ns=ee,t=Array.isArray(t)?{dataSource:t}:t,$.fn.init.call(this,e,t),t=this.options,e=this.element.on("focus"+ee,this._focusHandler.bind(this)),t.placeholder=t.placeholder||e.attr("placeholder"),this._reset(),this._wrapper(),this._input(),this._clearButton(),this._tabindex(this.input),this._popup(),this._dataSource(),this._ignoreCase(),this._enable(),this._attachFocusEvents(),this._oldIndex=this.selectedIndex=-1,this._initialIndex=t.index,this.requireValueMapper(this.options),this._initList(),this._cascade(),t.autoBind?this._filterSource():((i=t.text)||!this._isSelect||(i=e.children(":selected").text()),i&&this._setText(i)),i||this._placeholder(),U(this.element).parents("fieldset").is(":disabled")&&this.enable(!1),j.notify(this),this._toggleCloseVisibility(),this._applyCssClasses(),t.label&&this._label(),this._aria()},options:{name:"ComboBox",enabled:!0,index:-1,text:null,value:null,autoBind:!0,delay:200,dataTextField:"",dataValueField:"",minLength:1,enforceMinLength:!1,height:200,highlightFirst:!0,filter:"none",placeholder:"",suggest:!1,cascadeFrom:"",cascadeFromField:"",cascadeFromParentField:"",ignoreCase:!0,animation:{},virtual:!1,template:null,groupTemplate:"#:data#",fixedGroupTemplate:"#:data#",clearButton:!0,syncValueAndText:!0,autoWidth:!1,popup:null,size:"medium",fillMode:"solid",rounded:"medium",label:null},events:["open","close",er,"select","filtering","dataBinding","dataBound","cascade","set"],setOptions:function(e){var t=this._listOptions(e);$.fn.setOptions.call(this,e),this.listView.setOptions(t),this._accessors(),this._aria(),this._clearButton()},destroy:function(){this.input.off(ee),this.input.off(et),this.element.off(ee),this.wrapper.off(ee),clearTimeout(this._pasteTimeout),this._arrow.off(ei+" "+en),this._clear.off(ei+" "+en),$.fn.destroy.call(this)},_isValueChanged:function(e){return e!==K.unifyType(this._old,typeof e)&&e!==K.unifyType(this._oldText,typeof e)},_change:function(){var e=this.text(),t=e&&e!==this._oldText&&e!==this.options.placeholder,i=this.selectedIndex;if(!this.options.syncValueAndText&&!this.value()&&-1===i&&t)return this._old="",this._oldIndex=i,this._oldText=e,this._typing||this.element.trigger(er),this.trigger(er),void(this._typing=!1);$.fn._change.call(this),this._oldText=this.text&&this.text(),this._toggleCloseVisibility()},_attachFocusEvents:function(){this.input.on("focus"+et,this._inputFocus.bind(this)).on("focusout"+et,this._inputFocusout.bind(this))},_focusHandler:function(e){e.target===this.element[0]&&this.input.trigger("focus")},_arrowClick:function(){this._toggle()},_inputFocus:function(){this.wrapper.addClass(eo),this._placeholder(!1)},_inputFocusout:function(e){var t=this.value(),i=!U(e.relatedTarget).closest(".k-clear-value").length;this._userTriggered=!0,this.wrapper.removeClass(eo),clearTimeout(this._typingTimeout),this._typingTimeout=null,i&&this.text(this.text());var n=this._focus(),s=this.listView.dataItemByIndex(this.listView.getElementIndex(n));t!==this.value()&&this.trigger("select",{dataItem:s,item:n})?this.value(t):(this._placeholder(),this._valueBeforeCascade=this._old,i&&(this._blur(),this.element.trigger("blur")))},_inputPaste:function(){var e=this;clearTimeout(e._pasteTimeout),e._pasteTimeout=null,e._pasteTimeout=setTimeout(function(){e.search()})},_editable:function(e){var t=e.disable,i=e.readonly,n=this.wrapper.off(ee),s=this.element.add(this.input.off(ee)),a=this._arrow.off(ei+" "+en),r=this._clear;i||t?(n.addClass(t?el:"").removeClass(t?"":el),s.attr(es,t).attr(ea,i).attr(ed,t).attr(eh,i)):(n.removeClass(el).on("mouseenter.kendoComboBox mouseleave.kendoComboBox",this._toggleHover),s.prop(es,!1).prop(ea,!1).attr(ed,!1).attr(eh,!1),a.on(ei,this._arrowClick.bind(this)).on(en,function(e){e.preventDefault()}),r.on(ei+" touchend"+ee,this._clearValue.bind(this)),this.input.on("keydown"+ee,this._keydown.bind(this)).on("input"+ee,this._search.bind(this)).on("paste"+ee,this._inputPaste.bind(this)),this.wrapper.on(ei+ee,this._focusHandler.bind(this))),this._toggleCloseVisibility()},open:function(){var e=this._state,t=!!this.dataSource.filter()&&this.dataSource.filter().filters.length>0,i=!this.ul.find(this.listView.focus()).length;this.popup.visible()||((this.listView.bound()||e===eu)&&e!==ec?this._allowOpening()&&(this.popup._hovered=!0,this._openPopup(),this.options.virtual?this._focusItem():i&&this.options.highlightFirst&&this.listView.focus(0)):(this._open=!0,this._state=ep,1!==this.options.minLength&&!t||t&&this.value()&&-1===this.selectedIndex?(this.refresh(),this._openPopup(),this.options.virtual||this.listView.bound(!1)):this._filterSource()))},_scrollToFocusedItem:function(){var e=this.listView;e.scrollToIndex(e.getElementIndex(e.focus()))},_openPopup:function(){this.popup.one("activate",this._scrollToFocusedItem.bind(this)),this.popup.open()},_updateSelectionState:function(){var e=this.options.text,t=this.options.value;this.listView.isFiltered()||(-1===this.selectedIndex?(null!=e||(e=t),this._accessor(t),this.input.val(e||this.input.val()),this._placeholder()):-1===this._oldIndex&&(this._oldIndex=this.selectedIndex))},_buildOptions:function(e){if(this._isSelect){var t=this._customOption;this._state===ep&&(this._state=""),this._customOption=W,this._options(e,"",this.value()),t&&t[0].selected&&!this.listView._emptySearch&&this._custom(t.val())}},_updateSelection:function(){var e=this.listView,t=this._initialIndex,i=null!==t&&t>-1;if(this._state===eu)U(e.focus()).removeClass("k-selected");else if(!this._fetch){e.value().length||(i?this.select(t):this._accessor()&&e.value(this._accessor())),this._initialIndex=null;var n=e.selectedDataItems()[0];n&&(this._value(n)!==this.value()?this._custom(this._value(n)):this._value(n)!==this.element[0].value&&this._accessor(this._value(n)),this.text()&&this.text()!==this._text(n)&&this._selectValue(n))}},_updateItemFocus:function(){var e=this.listView;this.options.highlightFirst?e.focus()||e.focusIndex()||e.focus(0):e.focus(-1)},_listBound:function(){var e=this.input[0]===J(),t=this.dataSource.flatView(),i=this.listView.skip(),n=t.length,s=this.dataSource._group?this.dataSource._group.length:0,a=i===W||0===i;this._presetValue=!1,this._renderFooter(),this._renderNoData(),this._toggleNoData(!n),this._toggleHeader(!!s&&!!n),this._resizePopup(),this.popup.position(),this._buildOptions(t),this._updateSelection(),t.length&&a&&(this._updateItemFocus(),this.options.suggest&&e&&this.input.val()&&this.suggest(t[0])),this._open&&(this._open=!1,this._typingTimeout&&!e?this.popup.close():this.toggle(this._allowOpening()),this._typingTimeout=null),this._hideBusy(),this.trigger("dataBound")},_listChange:function(){this._selectValue(this.listView.selectedDataItems()[0]),this._presetValue&&(this._oldIndex=this.selectedIndex)},_get:function(e){var t,i,n;if("function"==typeof e){for(t=this.dataSource.flatView(),n=0;n<t.length;n++)if(e(t[n])){e=n,i=!0;break}i||(e=-1)}return this.dataSource.total()||e||(e=-1),e},_select:function(e,t){var i=this;return -1===(e=i._get(e))&&(i.input[0].value="",i._accessor("")),i.listView.select(e).done(function(){t||i._state!==eu||(i._state=ec),i._toggleCloseVisibility()})},_selectValue:function(e){var t=this.listView.select(),i="",n="";(t=t[t.length-1])===W&&(t=-1),this.selectedIndex=t,this.listView.isFiltered()&&-1!==t&&(this._valueBeforeCascade=this._old),-1!==t||e?((e||0===e)&&(i=this._dataValue(e),n=this._text(e)),null===i&&(i="")):(this.options.syncValueAndText?i=n=this.options.dataTextField===this.options.dataValueField?this._accessor():this.input[0].value:n=this.text(),this.listView.focus(-1)),this._setDomInputValue(n),this._accessor(i!==W?i:n,t),this._placeholder(),this._triggerCascade()},_setDomInputValue:function(e){var t,i=this,n=Y(this.input);if(n&&n.length&&(t=n[0]),this._prev=this.input[0].value=e,t&&-1===this.selectedIndex){var s=Q.mobileOS;s.wp||s.android?setTimeout(function(){i.input[0].setSelectionRange(t,t)},0):this.input[0].setSelectionRange(t,t)}},refresh:function(){this.listView.refresh()},_toggleCloseVisibility:function(){var e=this.element.is(":disabled")||this.element.is("[readonly]");this.text()&&!e?this._showClear():this._hideClear()},suggest:function(e){var t,i=this.input[0],n=this.text(),s=Y(i)[0],a=this._last,r=this.dataSource.options.accentFoldingFiltering;a!=Z.BACKSPACE&&a!=Z.DELETE?("string"!=typeof(e=e||"")&&(e[0]&&(e=this.dataSource.view()[K.inArray(e[0],this.ul[0])]),e=e?this._text(e):""),s<=0&&(s=(r?n.toLocaleLowerCase(r):n.toLowerCase()).indexOf(r?e.toLocaleLowerCase(r):e.toLowerCase())+1),e?(e=e.toString(),(t=(r?e.toLocaleLowerCase(r):e.toLowerCase()).indexOf(r?n.toLocaleLowerCase(r):n.toLowerCase()))>-1&&(n+=e.substring(t+n.length))):n=n.substring(0,s),n.length===s&&e||(i.value=n,i===J()&&Y(i,s,n.length))):this._last=W},text:function(e){e=null===e?"":e;var t,i,n=this,s=n.input[0],a=n.options.ignoreCase,r=e;if(e===W)return s.value;!1!==n.options.autoBind||n.listView.bound()?(t=n.dataItem())&&n._text(t).replace&&n._text(t).replace(ef,"")===e&&(i=n._value(t))===K.unifyType(n._old,typeof i)?n._triggerCascade():(a&&(r=r.toLowerCase()),n.dataItem()&&n._text(n.dataItem())===e||(n._select(function(e){return e=n._text(e),a&&(e=(e+"").toLowerCase()),e===r}).done(function(){n.selectedIndex<0&&(s.value=e,n.options.syncValueAndText&&n._accessor(e),n._cascadeTriggered=!0,n._triggerCascade(),n._refreshFloatingLabel()),n._prev=s.value}),n._toggleCloseVisibility())):n._setText(e)},toggle:function(e){this._toggle(e,!0)},value:function(e){var t=this,i=t.options,n=t.listView;if(e===W)return(e=t._accessor()||t.listView.value()[0])===W||null===e?"":e;t.requireValueMapper(t.options,e),t.trigger("set",{value:e}),(e!==i.value||t.input.val()!==i.text||t.options.cascadeFrom)&&(t._accessor(e),t._isFilterEnabled()&&n.bound()&&n.isFiltered()?t._clearFilter():t._fetchData(),n.value(e).done(function(){-1!==t.selectedIndex||n._selectedDataItems&&n._selectedDataItems.length||(t._accessor(e),t.input.val(e),t._placeholder(!0)),t._userTriggered?t._old=t._accessor():t._old=t._valueBeforeCascade=t._accessor(),t._oldIndex=t.selectedIndex,t._prev=t._oldText=t.input.val(),t._state===eu&&(t._state=ec),t._toggleCloseVisibility(),t._refreshFloatingLabel()}))},_hideBusy:function(){clearTimeout(this._busy),this._arrowIcon.removeClass("k-i-loading k-input-loading-icon"),this._focused.attr("aria-busy",!1),this._busy=null,this._toggleCloseVisibility()},_click:function(e){var t=this,i=e.item,n=t.listView.dataItemByIndex(t.listView.getElementIndex(i)),s=!0;e.preventDefault(),n&&((s=t._value(n)!==K.unifyType(t.value(),typeof t._value(n)))||t.input.val(t._text(n))),s&&t.trigger("select",{dataItem:n,item:i})?t.close():(t._userTriggered=!0,t._select(i).done(function(){t._blur()}))},_syncValueAndText:function(){return this.options.syncValueAndText},_inputValue:function(){return this.text()},_searchByWord:function(e){var t=this,i=t.options,n=t.dataSource,s=i.ignoreCase;if(s&&(e=e.toLowerCase()),t.ul[0].firstChild){this.listView.focus(this._get(function(i){var n=t._text(i);if(n!==W)return(""==(n+="")||""!==e)&&(s&&(n=n.toLowerCase()),0===n.indexOf(e))}));var a=this.listView.focus();a&&(i.suggest&&t.suggest(a),this.open()),this.options.highlightFirst&&!e&&this.listView.focusFirst()}else n.one(er,function(){n.view()[0]&&t.search(e)}).fetch()},_input:function(){var e,t,i,n=this.element.removeClass("k-input-inner")[0],s=n.accessKey,a=this.wrapper,r="input.k-input-inner",o=n.name||"",l=this.options;o&&(o='name="'+o+'_input" '),(e=a.find(r))[0]||(i=q.renderButton('<button type="button" class="k-input-button" aria-label="expand combobox"></button>',{icon:"arrow-s",size:l.size,fillMode:l.fillMode,shape:"none",rounded:"none"}),a.append("<input "+o+'class="k-input-inner" type="text" autocomplete="off"/>').append(i).append(this.element),e=a.find(r)),e[0].style.cssText=n.style.cssText,e[0].title=n.title,(t=parseInt(this.element.prop("maxlength")||this.element.attr("maxlength"),10))>-1&&(e[0].maxLength=t),e.addClass(n.className).css({width:"",height:n.style.height,position:""}).attr({role:"combobox","aria-expanded":!1}).show(),X&&e.attr("placeholder",this.options.placeholder),s&&(n.accessKey="",e[0].accessKey=s),this._focused=this.input=e,this._arrow=a.find(".k-input-button").attr({role:"button",tabIndex:-1}),this._arrowIcon=this._arrow.find(".k-icon")},_clearButton:function(){K.fn._clearButton.call(this),this.options.clearButton&&(this._clear.insertAfter(this.input),this.wrapper.addClass("k-combobox-clearable"))},_keydown:function(e){var t=this,i=e.keyCode,n=t.options.dataTextField||"text",s=i>=112&&i<=135,a=em.indexOf(i)>-1;if(t._last=i,clearTimeout(t._typingTimeout),t._typingTimeout=null,i===Z.HOME)t._firstItem();else if(i===Z.END)t._lastItem();else if(i===Z.ENTER||i===Z.TAB&&t.popup.visible()){var r=t.listView.focus(),o=t.dataItem(),l=!0;if(t.popup.visible()||o&&t.text()===t._text(o)||(r=null),r){if(t.popup.visible()&&e.preventDefault(),(o=t.listView.dataItemByIndex(t.listView.getElementIndex(r)))&&(l=t._value(o)!==K.unifyType(t.value(),typeof t._value(o))),l&&t.trigger("select",{dataItem:o,item:r}))return;t._userTriggered=!0,t._select(r).done(function(){t._blur(),t._valueBeforeCascade=t._old=t.value()})}else(t._syncValueAndText()||t._isSelect)&&(t.dataItem()&&t.dataItem()[n]===t.input.val()||t._accessor(t.input.val())),t.options.highlightFirst?(t.listView.value(t.input.val()),t._blur()):t._oldText=t.text()}else i==Z.TAB||t._move(e)||a||s||e.ctrlKey?i===Z.ESC&&!t.popup.visible()&&t.text()&&t._clearValue():t._search()},_placeholder:function(e){if(!X){var t,i=this.input,n=this.options.placeholder;if(n){if(t=this.value(),e===W&&(e=!t),i.toggleClass("k-readonly",e),!e){if(t)return;n=""}i.val(n),n||i[0]!==J()||Y(i[0],0,0)}}},_search:function(){var e=this;clearTimeout(e._typingTimeout),e._typingTimeout=setTimeout(function(){var t=e.text();""!==t&&e._prev!==t?(e._prev=t,"none"===e.options.filter&&e.options.virtual&&e.listView.select(-1),e.search(t),e._toggleCloseVisibility()):""===t&&""!==e._prev&&e._prev!==W&&(e._clearValue(),e._open=!0,e._state=ep),e._typingTimeout=null},e.options.delay)},_setText:function(e){this.input.val(e),this._prev=e},_wrapper:function(){var e=this.element,t=e.parent();t.is("span.k-input")||((t=e.hide().wrap("<span />").parent())[0].style.cssText=e[0].style.cssText),this.wrapper=t.addClass("k-input k-combobox").addClass(e[0].className).removeClass("input-validation-error").css("display","")},_clearSelection:function(e,t){var i=e.value(),n=i&&-1===e.selectedIndex;-1==this.selectedIndex&&this.value()||(t||!i||n)&&(this.options.value="",this.value(""))},_preselect:function(e,t){this.input.val(t),this._accessor(e),this._old=this._accessor(),this._oldIndex=this.selectedIndex,this.listView.setValue(e),this._placeholder(),this._initialIndex=null,this._presetValue=!0,this._toggleCloseVisibility()},_clearText:function(){this._old=this.value(),this.text("")},_clearValue:function(){$.fn._clearValue.call(this),this.input.trigger("focus")}}),G.plugin(eg),j.cssProperties.registerPrefix("ComboBox","k-input-"),j.cssProperties.registerValues("ComboBox",[{prop:"rounded",values:j.cssProperties.roundedValues.concat([["full","full"]])}]),function(e,t){var i=window.kendo,n=i.ui.Widget,s=Math.abs,a="aria-selected",r="k-selected",o="k-selecting",l="k-selectable",d="change",h="unselect",u="k-unselecting",c=i.support.browser.msie,p=!1,f=e.extend;!function(e){e('<div class="parent"><span></span></div>').on("click",">*",function(){p=!0}).find("span").trigger("click").end().off()}(e);var m=n.extend({init:function(t,s){var a,r;n.fn.init.call(this,t,s),this._marquee=e("<div class='k-marquee'><div class='k-marquee-color'></div></div>"),this._lastActive=null,this.element.addClass(l),this.relatedTarget=this.options.relatedTarget,a=this.options.multiple,r=this.options.dragToSelect,this.userEvents=new i.UserEvents(this.element,{global:!0,allowSelection:!0,filter:(p?"":".k-selectable ")+this.options.filter,tap:this._tap.bind(this),touchAction:a?"none":"pan-x pan-y"}),a&&(r&&this.userEvents.bind("start",this._start.bind(this)).bind("move",this._move.bind(this)).bind("end",this._end.bind(this)),this.userEvents.bind("select",this._select.bind(this)))},events:[d,h],options:{name:"Selectable",filter:">*",inputSelectors:"input,a,textarea,.k-multiselect-wrap,select,button,.k-button>span,.k-button>img,span.k-icon.k-i-arrow-60-down,span.k-icon.k-i-arrow-60-up,label.k-checkbox-label.k-no-text,.k-icon.k-i-collapse,.k-icon.k-i-expand,span.k-numeric-wrap,.k-focusable",multiple:!1,dragToSelect:!0,relatedTarget:e.noop,ignoreOverlapped:!1,addIdToRanges:!1},_isElement:function(e){var t,i=this.element,n=i.length,s=!1;for(e=e[0],t=0;t<n;t++)if(i[t]===e){s=!0;break}return s},_tap:function(t){var i,n=e(t.target),s=t.event.ctrlKey||t.event.metaKey,a=this.options.multiple,o=a&&t.event.shiftKey,h=this.options.selectedClass||r,u=t.event.which,c=t.event.button;!this._isElement(n.closest("."+l))||u&&3==u||c&&2==c||this._allowSelection(t.event.target)&&(i=n.hasClass(h),n=n.add(this.relatedTarget(n)),a?o?(this._lastRange&&g(this._lastRange,n)||(this.selectRange(this._firstSelectee(),n,t),this._notify(d,t)),this._lastRange=n):(this._lastRange=null,i&&s?(this._unselect(n),this._notify(d,t)):s?(this.value(n,t),this._notify(d,t)):(!i||this.value().length>1)&&(this.clear(),this.value(n,t),this._notify(d,t)),this._lastActive=this._downTarget=n):i&&s?(this._unselect(n),this._notify(d,t)):i||(this.clear(),this.value(n,t),this._notify(d,t)))},_start:function(t){var i,n=e(t.target),s=this.options.selectedClass||r,a=n.hasClass(s),o=t.event.ctrlKey||t.event.metaKey;this._allowSelection(t.event.target)&&(this._downTarget=n,this._isElement(n.closest("."+l))?(this.options.useAllItems?this._items=this.element.find(this.options.filter):(i=n.closest(this.element),this._items=i.find(this.options.filter)),t.sender.capture(),this._marquee.appendTo(document.body).css({left:t.x.client+1,top:t.y.client+1,width:0,height:0}),o||this.clear(),n=n.add(this.relatedTarget(n)),a&&(this._selectElement(n,!0),o&&n.addClass(u))):this.userEvents.cancel())},_move:function(e){var t={left:e.x.startLocation>e.x.location?e.x.location:e.x.startLocation,top:e.y.startLocation>e.y.location?e.y.location:e.y.startLocation,width:s(e.x.initialDelta),height:s(e.y.initialDelta)};this._marquee.css(t),this._invalidateSelectables(t,e.event.ctrlKey||e.event.metaKey),e.preventDefault()},_end:function(t){var n=i.attr("range-selected"),s=i.guid();this._marquee.remove(),this._unselect(this.element.find(this.options.filter+"."+u)).removeClass(u);var a=this.element.find(this.options.filter+"."+o);if(a=a.add(this.relatedTarget(a)),this.options.addIdToRanges)for(var r=0;r<this._currentlyActive.length;r++)e(this._currentlyActive[r]).attr(n,s);this._lastRange&&g(this._lastRange,a)||(this.value(a,t),this._notify(d,t)),this._lastRange=a,this._lastActive=this._downTarget,this._items=null},_invalidateSelectables:function(e,t){var n,s,a,l,d=this._downTarget[0],h=this._items,c=this.options.selectedClass||r;for(this._currentlyActive=[],n=0,s=h.length;n<s;n++)a=(l=h.eq(n)).add(this.relatedTarget(l)),function(e,t){if(!e.is(":visible"))return!1;var n=i.getOffset(e),s=t.left+t.width,a=t.top+t.height;return n.right=n.left+i._outerWidth(e),n.bottom=n.top+i._outerHeight(e),!(n.left>s||n.right<t.left||n.top>a||n.bottom<t.top)}(l,e)?(l.hasClass(c)?t&&d!==l[0]&&a.removeClass(c).addClass(u):l.hasClass(o)||l.hasClass(u)||this._collidesWithActiveElement(a,e)||a.addClass(o),this._currentlyActive.push(a[0])):l.hasClass(o)?a.removeClass(o):t&&l.hasClass(u)&&a.removeClass(u).addClass(c)},_collidesWithActiveElement:function(e,t){if(!this.options.ignoreOverlapped)return!1;var n,s=this._currentlyActive,a=e[0].getBoundingClientRect(),r=!1,o=i.support.isRtl(e)?"right":"left",l={};t.right=t.left+t.width,t.bottom=t.top+t.height;for(var d=0;d<s.length;d++)if(v(a,n=s[d].getBoundingClientRect())){if(l[o]="left"===o?n.right:n.left,(a=f({},a,l)).left>a.right)return!0;r=!v(a,t)}return r},value:function(e){var t=this._selectElement.bind(this);if(!e)return this.element.find(this.options.filter+"."+(this.options.selectedClass||r));e.each(function(){t(this)})},selectedRanges:function(){var t=i.attr("range-selected"),n={};return this.element.find("["+t+"]").each(function(i,s){var a=e(s).attr(t),r=n[a];r||(r=n[a]=[]),r.push(e(s))}),n},selectedSingleItems:function(){var t=i.attr("range-selected");return this.element.find(this.options.filter+"."+(this.options.selectedClass||r)+":not(["+t+"])").toArray().map(function(t){return e(t)})},_firstSelectee:function(){var e;return null!==this._lastActive?this._lastActive:(e=this.value()).length>0?e[0]:this.element.find(this.options.filter)[0]},_selectElement:function(t,i){var n=e(t),s=this.options.selectedClass||r,l=!i&&this._notify("select",{element:t});n.removeClass(o),l||(n.addClass(s),this.options.aria&&n.attr(a,!0))},_notify:function(e,t){return t=t||{},this.trigger(e,t)},_unselect:function(e){if(!this.trigger(h,{element:e})){var t=i.attr("range-selected");return e.removeClass(this.options.selectedClass||r).removeAttr(t),this.options.aria&&e.attr(a,!1),e}},_select:function(t){this._allowSelection(t.event.target)&&(!c||c&&!e(i._activeElement()).is(this.options.inputSelectors))&&t.preventDefault()},_allowSelection:function(t){return!e(t).is(this.options.inputSelectors)||(this.userEvents.cancel(),this._downTarget=null,!1)},resetTouchEvents:function(){this.userEvents.cancel()},clear:function(){var e=this.element.find(this.options.filter+"."+(this.options.selectedClass||r));this._unselect(e)},selectRange:function(t,i){var n,s,a;for(this.clear(),this.element.length>1&&(a=this.options.continuousItems()),a&&a.length||(a=this.element.find(this.options.filter)),(t=e.inArray(e(t)[0],a))>(i=e.inArray(e(i)[0],a))&&(s=t,t=i,i=s),this.options.useAllItems||(i+=this.element.length-1),n=t;n<=i;n++)this._selectElement(a[n],!0)},destroy:function(){n.fn.destroy.call(this),this.element.off(".kendoSelectable"),this.userEvents.destroy(),this._marquee=this._lastActive=this.element=this.userEvents=null}});function g(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function v(e,t){return!(e.right<=t.left||e.left>=t.right||e.bottom<=t.top||e.top>=t.bottom)}m.parseOptions=function(e){var t=e.mode||e,i="string"==typeof t&&t.toLowerCase();return{multiple:i&&i.indexOf("multiple")>-1,cell:i&&i.indexOf("cell")>-1}},i.ui.plugin(m)}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.support,s=i.ui,a=s.Widget,r=i.keys,o=i.parseDate,l=i.date.adjustDST,d=i.date.weekInYear,h=i.ui.Selectable,u=i._extractFormat,c=i.template,p=i.getCulture,f=i.support.transitions,m=f?f.css+"transform-origin":"",g=c('<td class="#=data.cssClass#" role="gridcell"><a tabindex="-1" class="k-link" href="\\#" data-#=data.ns#value="#=data.dateString#">#=data.value#</a></td>',{useWithBlock:!1}),v=c('<td role="gridcell" class="k-calendar-td k-out-of-range"><a class="k-link"></a></td>',{useWithBlock:!1}),_=c('<td role="gridcell" class="k-calendar-td k-out-of-range">&nbsp;</td>',{useWithBlock:!1}),b=c('<td class="k-calendar-td k-alt">#= data.weekNumber #</td>',{useWithBlock:!1}),k=i._outerWidth,w=".kendoCalendar",y="click"+w,x="slideIn",C="month",T="century",S="change",I="navigate",D="value",F="k-disabled",E="k-focus",A="k-other-month",z="td:has(.k-link)",P="td:has(.k-link):not(.k-disabled):not(.k-out-of-range)",H="k-selected",N=n.touch?"touchstart":"mouseenter",R=n.touch?"touchstart"+w:"mouseenter"+w,O=n.touch?"touchend"+w+" touchmove"+w:"mouseleave"+w,M="aria-disabled",B="aria-selected",L=e.extend,V=Date,U={month:0,year:1,decade:2,century:3},W=".k-header, .k-calendar-header",j=a.extend({init:function(t,n){var s,r=this;(n=n||{}).componentType=n.componentType||"classic",a.fn.init.call(r,t,n),t=r.wrapper=r.element,(n=r.options).url=i.unescape(n.url),r.options.disableDates=el(r.options.disableDates),r._templates(),r._selectable(),r._header(),r._viewWrapper(),r.options.hasFooter?r._footer(r.footer):(r._today=r.element.find("a.k-nav-today"),r._toggle()),t.addClass("k-widget k-calendar "+(n.weekNumber?" k-week-number":"")).on(R+" "+O,z,ei).on("keydown.kendoCalendar","table.k-content",r._move.bind(r)).on(y+" touchend",z,function(t){var i=t.currentTarget.firstChild,s=eh(i);-1!=i.href.indexOf("#")&&t.preventDefault(),"month"==r._view.name&&r.options.disableDates(s)||"month"==r._view.name&&"single"!=n.selectable||r._click(e(i))}).on("mouseup"+w,"table.k-content, .k-footer",function(){r._focusView(!1!==r.options.focusOnNav)}).attr("id"),r._isMultipleSelection()&&r.options.weekNumber&&t.on(y,"td:not(:has(.k-link))",function(t){var i=e(t.currentTarget).closest("tr").find(P).first(),n=r.selectable._lastActive=e(t.currentTarget).closest("tr").find(P).last();r.selectable.selectRange(i,n),r.selectable.trigger(S,{event:t}),r._current=r._value=eh(n.find("a")),r._setCurrent(r._current)}),er(n),s=o(n.value,n.format,n.culture),r._selectDates=[],r._index=U[n.start],r._current=new V(+Q(s,n.min,n.max)),r._addClassProxy=function(){if(r._active=!0,r._cell.hasClass(F)){var e=r._view.toDateString(Y());r._cell=r._cellByDate(e)}r._cell.addClass(E)},r._removeClassProxy=function(){r._active=!1,r._cell&&r._cell.removeClass(E)},r.value(s),r._isMultipleSelection()&&n.selectDates.length>0&&r.selectDates(n.selectDates),i.notify(r)},options:{name:"Calendar",value:null,min:new V(1900,0,1),max:new V(2099,11,31),dates:[],disableDates:null,url:"",culture:"",footer:"",format:"",month:{},weekNumber:!1,selectable:"single",selectDates:[],start:C,depth:C,size:"medium",animation:{horizontal:{effects:x,reverse:!0,duration:500,divisor:2},vertical:{effects:"zoomIn",duration:400}},messages:{weekColumnHeader:"",today:"Today",navigateTo:"Navigate to ",parentViews:{month:"year view",year:"decade view",decade:"century view"}},componentType:"classic"},events:[S,I],componentTypes:{classic:{header:{template:'<div class="k-header k-hstack"><a tabindex="-1" href="\\#" #=actionAttr#="prev" role="button" class="k-nav-prev k-button #=size# k-rounded-md k-button-flat k-button-flat-base k-icon-button" aria-label="Previous"><span class="k-button-icon k-icon k-i-arrow-60-left"></span></a><a tabindex="-1" href="\\#" #=actionAttr#="nav-up" role="button" id="nav-up" class="k-nav-fast k-button #=size# k-rounded-md k-button-flat k-button-flat-base  k-flex"></a><a tabindex="-1" href="\\#" #=actionAttr#="next" role="button" class="k-nav-next k-button #=size# k-rounded-md k-button-flat k-button-flat-base  k-icon-button" aria-label="Next"><span class="k-icon k-i-arrow-60-right"></span></a></div>'},hasFooter:!0,linksSelector:".k-button",contentClasses:"k-calendar-table k-content"},modern:{header:{template:'<div class="k-calendar-header k-hstack"><a href="\\#" #=actionAttr#="nav-up" id="nav-up" role="button" class="k-calendar-title k-title k-button #=size# k-rounded-md k-button-flat k-button-flat-base "></a><span class="k-spacer"></span><span class="k-calendar-nav k-hstack"><a tabindex="-1" #=actionAttr#="prev" class="k-button #=size# k-rounded-md k-button-flat k-button-flat-base  k-icon-button k-prev-view"><span class="k-button-icon k-icon k-i-arrow-60-left"></span></a><a tabindex="-1" #=actionAttr#="today" class="k-nav-today">#=messages.today#</a><a tabindex="-1" #=actionAttr#="next" class="k-button #=size# k-rounded-md k-button-flat k-button-flat-base  k-icon-button k-next-view"><span class="k-button-icon k-icon k-i-arrow-60-right"></span></a></span></div>'},hasFooter:!1,linksSelector:".k-button",contentClasses:"k-calendar-table k-content k-calendar-content"}},setOptions:function(t){er(t),t.disableDates=el(t.disableDates),this._destroySelectable(),t.messages&&(t.messages=e.extend({},!0,this.options.messages,t.messages)),a.fn.setOptions.call(this,t),this._templates(),this._selectable(),this._viewWrapper(),this.options.hasFooter?this._footer(this.footer):(this.element.find(".k-footer").hide(),this._toggle()),this._index=U[this.options.start],this.navigate(),t.weekNumber&&this.element.addClass("k-week-number")},destroy:function(){var e=this._today;this.element.off(w),this._title.off(w),this._prevArrow.off(w),this._nextArrow.off(w),this._destroySelectable(),i.destroy(this._table),e&&i.destroy(e.off(w)),a.fn.destroy.call(this)},current:function(){return this._current},view:function(){return this._view},focus:function(e){e=e||this._table,this._bindTable(e),e.trigger("focus")},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},navigateToPast:function(){this._navigate("_prevArrow",-1)},navigateToFuture:function(){this._navigate("_nextArrow",1)},navigateUp:function(){var e=this._index;this._title.hasClass(F)||this.navigate(this._current,++e)},navigateDown:function(e){var t=this._index,i=this.options.depth;e&&(t!==U[i]?this.navigate(e,--t):ed(this._value,this._current)&&ed(this._value,e)||(this.value(e),this.trigger(S)))},navigate:function(t,i){i=isNaN(i)?U[i]:i;var n,s,a,r,o=this.options,l=o.culture,d=o.min,h=o.max,u=this._title,c=this._table,p=this._oldTable,f=this._current,m=t&&+t>+f,g=void 0!==i&&i!==this._index,v=this.element.children(".k-calendar-view");if(t||(t=f),this._current=t=new V(+Q(t,d,h)),void 0===i?i=this._index:this._index=i,this._view=s=G.views[i],a=s.compare,r=i===U.century,u.toggleClass(F,r).attr(M,r),r=1>a(t,d),this._prevArrow.toggleClass(F,r).attr(M,r),r=a(t,h)>-1,this._nextArrow.toggleClass(F,r).attr(M,r),c&&p&&p.data("animating")&&(p.kendoStop(!0,!0),c.kendoStop(!0,!0)),this._oldTable=c,!c||this._changeView){u.html(s.title(t,d,h,l)),this.options.messages.parentViews&&this._view.name!==T?u.attr("title",this.options.messages.navigateTo+this.options.messages.parentViews[this._view.name]):u.removeAttr("title"),this._table=n=e(s.content(L({min:d,max:h,date:t,url:o.url,dates:o.dates,format:o.format,otherMonth:!0,culture:l,disableDates:o.disableDates,isWeekColumnVisible:o.weekNumber,messages:o.messages,contentClasses:this.options.contentClasses},this[s.name]))),this._aria(),eo(n,s.name);var _=c&&c.data("start")===n.data("start");this._animate({from:c,to:n,vertical:g,future:m,replace:_}),v.removeClass("k-calendar-monthview k-calendar-yearview k-calendar-decadeview k-calendar-centuryview"),v.addClass("k-calendar-"+s.name+"view"),this.trigger(I),this._focus(t)}i===U[o.depth]&&this._selectDates.length>0&&this._visualizeSelectedDatesInView(),"single"===this.options.selectable&&i===U[o.depth]&&this._value&&!this.options.disableDates(this._value)&&this._selectCell(this._value),this._setCurrent(t),!c&&this._cell&&this._cell.removeClass(E),this._changeView=!0},selectDates:function(t){var i,n,s=this;if(void 0===t)return s._selectDates;n=t.map(function(e){return e.getTime()}).filter(function(e,t,i){return i.indexOf(e)===t}).map(function(e){return new Date(e)}),i=e.grep(n,function(e){if(e)return+s._validateValue(new Date(e.setHours(0,0,0,0)))==+e}),s._selectDates=i.length>0?i:0===n.length?n:s._selectDates,s._visualizeSelectedDatesInView()},value:function(e){var i=this._view,n=this._view;if(e===t)return this._value;if((e=this._validateValue(e))&&this._isMultipleSelection()){var s=new Date(+e);s.setHours(0,0,0,0),this._selectDates=[s],this.selectable._lastActive=null}i&&null===e&&this._cell?this._cell.removeClass(H):(this._changeView=!e||n&&0!==n.compare(e,this._current),this.navigate(e))},_aria:function(){var e=this._table;e.attr("aria-labelledby",this._title.attr("id")),"month"===this._view.name&&"multiple"===this.options.selectable&&e.attr("aria-multiselectable","true")},_validateValue:function(e){var i=this.options,n=i.min,s=i.max;return null===e&&(this._current=es(this._current.getFullYear(),this._current.getMonth(),this._current.getDate())),null!==(e=o(e,i.format,i.culture))&&(X(e=new V(+e),n,s)||(e=null)),null!==e&&this.options.disableDates(new Date(+e))?this._value===t&&(this._value=null):this._value=e,this._value},_visualizeSelectedDatesInView:function(){var t={};e.each(this._selectDates,function(e,n){t[i.calendar.views[0].toDateString(n)]=n}),this.selectable.clear();var n=this._table.find(z).filter(function(n,s){return t[e(s.firstChild).attr(i.attr(D))]});n.length>0&&this.selectable._selectElement(n,!0)},_isMultipleSelection:function(){return"multiple"===this.options.selectable},_selectable:function(){if(this._isMultipleSelection()){var e=this.options.selectable,t=h.parseOptions(e);this.selectable=new h(this.wrapper,{aria:!0,inputSelectors:"input,textarea,.k-multiselect-wrap,select,button,.k-button>span,.k-button>img,span.k-icon.k-i-arrow-60-down,span.k-icon.k-i-arrow-60-up",multiple:t.multiple,filter:"table.k-month:eq(0) "+P,change:this._onSelect.bind(this),relatedTarget:this._onRelatedTarget.bind(this)})}},_onRelatedTarget:function(e){this.selectable.options.multiple&&e.is(P)&&(this._current=eh(e.find("a")),this._setCurrent(this._current))},_onSelect:function(t){var i=this;h.parseOptions(i.options.selectable).multiple?(t.event.ctrlKey||t.event.metaKey?e(t.event.currentTarget).is(P)?i._toggleSelection(e(t.event.currentTarget)):(i._cellsBySelector(P).each(function(t,n){var s=eh(e(n).find("a"));i._deselect(s)}),i._addSelectedCellsToArray()):t.event.shiftKey?i._rangeSelection(i._cell):e(t.event.currentTarget).is(z)?i.value(eh(e(t.event.currentTarget).find("a"))):(i._selectDates=[],i._addSelectedCellsToArray()),i.trigger(S)):e(t.event.currentTarget).is("td")&&!e(t.event.currentTarget).hasClass("k-selected")?e(t.event.currentTarget).addClass("k-selected"):i._click(e(t.event.currentTarget).find("a"))},_destroySelectable:function(){this.selectable&&(this.selectable.destroy(),this.selectable=null)},_toggleSelection:function(e){var t=eh(e.find("a"));e.hasClass("k-selected")?this._selectDates.push(t):this._deselect(t)},_rangeSelection:function(e,t){var i,n=t||eh(this.selectable.value().first().find("a")),s=eh(e.find("a"));this.selectable._lastActive||this._value?n=this.selectable._lastActive?eh(this.selectable._lastActive.find("a")):new Date(+this._value):this.selectable._lastActive=t?this._cellByDate(this._view.toDateString(t),P):this.selectable.value().first(),this._selectDates=[],i=ee(n,s),et(this._selectDates,i,n,this.options.disableDates),this._visualizeSelectedDatesInView()},_cellsBySelector:function(e){return this._table.find(e)},_addSelectedCellsToArray:function(){var t=this;t.selectable.value().each(function(i,n){var s=eh(e(n.firstChild));t.options.disableDates(s)||t._selectDates.push(s)})},_deselect:function(e){var t=this._selectDates.map(Number).indexOf(+e);-1!=t&&this._selectDates.splice(t,1)},_dateInView:function(e){var t=eh(this._cellsBySelector(P).first().find("a"));return+e<=+eh(this._cellsBySelector(P).last().find("a"))&&+e>=+t},_isNavigatable:function(e,t){var i,n=this.options.disableDates;return"month"==this._view.name?!n(e):(i=this.wrapper.find(".k-focus").index(),this.wrapper.find(".k-content td").eq(i+t).is(P)||!n(e))},_move:function(n){var s,a,o,l,d=this.options,h=n.keyCode,u=this._view,c=this._index,p=this.options.min,f=this.options.max,m=new V(+this._current),g=i.support.isRtl(this.wrapper),v=this.options.disableDates;if(n.target===this._table[0]&&(this._active=!0),h==r.RIGHT&&!g||h==r.LEFT&&g?(s=1,a=!0):h==r.LEFT&&!g||h==r.RIGHT&&g?(s=-1,a=!0):h==r.UP?(s=0===c?-7:-4,a=!0):h==r.DOWN?(s=0===c?7:4,a=!0):h==r.SPACEBAR?(s=0,a=!0):h==r.HOME||h==r.END?((m=new V((l=u[o=h==r.HOME?"first":"last"](m)).getFullYear(),l.getMonth(),l.getDate(),m.getHours(),m.getMinutes(),m.getSeconds(),m.getMilliseconds())).setFullYear(l.getFullYear()),a=!0):84===h&&(this._todayClick(n),a=!0),n.ctrlKey||n.metaKey){if(h==r.RIGHT&&!g||h==r.LEFT&&g)this.navigateToFuture(),a=!0;else if(h==r.LEFT&&!g||h==r.RIGHT&&g)this.navigateToPast(),a=!0;else if(h==r.UP)this.navigateUp(),a=!0;else if(h==r.DOWN)this._click(e(this._cell[0].firstChild)),a=!0;else if((h==r.ENTER||h==r.SPACEBAR)&&this._isMultipleSelection()){this._keyboardToggleSelection(n);var _=eh(e(this._cell[0]).find("a"));this._setCurrent(_)}}else n.shiftKey?(s!==t||o)&&(o||u.setDate(m,s),X(m,p,f)||(m=Q(m,d.min,d.max)),v(m)&&(m=this._nextNavigatable(m,s)),p=es(p.getFullYear(),p.getMonth(),p.getDate()),this._isMultipleSelection()?this._keyboardRangeSelection(n,m):this._focus(m)):(h==r.ENTER||h==r.SPACEBAR?("month"==u.name&&this._isMultipleSelection()?(this.value(eh(e(this._cell.find("a")))),this.selectable._lastActive=e(this._cell[0]),this.trigger(S)):this._click(e(this._cell[0].firstChild)),a=!0):h==r.PAGEUP?(a=!0,this.navigateToPast()):h==r.PAGEDOWN&&(a=!0,this.navigateToFuture()),(s||o)&&(o||u.setDate(m,s),X(m,p=es(p.getFullYear(),p.getMonth(),p.getDate()),f)||(m=Q(m,d.min,d.max)),this._isNavigatable(m,s)||(m=this._nextNavigatable(m,s)),this._isMultipleSelection()?this._dateInView(m)?(this._current=m,this._setCurrent(m)):this.navigate(m):this._focus(m)));return a&&n.preventDefault(),this._current},_keyboardRangeSelection:function(e,t){var i,n;if(!this._dateInView(t))return this._selectDates=[],n=ee(i=this.selectable._lastActive?eh(this.selectable._lastActive.find("a")):t,new Date(+t)),et(this._selectDates,n,i,this.options.disableDates),this.navigate(t),this._current=t,this.selectable._lastActive=this.selectable._lastActive||this._cellByDate(this._view.toDateString(t),P),void this.trigger(S);this.selectable.options.filter=this.wrapper.find("table").length>1&&+t>+this._current?"table.k-month:eq(1) "+P:"table.k-month:eq(0) "+P,this._setCurrent(t),this._current=t,this._rangeSelection(this._cellByDate(this._view.toDateString(t),P),t),this.trigger(S),this.selectable.options.filter="table.k-month:eq(0) "+P},_keyboardToggleSelection:function(t){t.currentTarget=this._cell[0],this.selectable._lastActive=e(this._cell[0]),e(this._cell[0]).hasClass(H)?this.selectable._unselect(e(this._cell[0])):this.selectable.value(e(this._cell[0])),this.selectable.trigger(S,{event:t})},_nextNavigatable:function(e,t){var i=!0,n=this._view,s=this.options.min,a=this.options.max,r=this.options.disableDates,o=new Date(e.getTime());for(n.setDate(o,-t);i;){if(n.setDate(e,t),!X(e,s,a)){e=o;break}i=r(e)}return e},_animate:function(e){var t=e.from,i=e.to,n=this._active,s=this.element.children(".k-calendar-view");t?t.parent().data("animating")?(t.off(w),t.parent().kendoStop(!0,!0).remove(),t.remove(),s.append(i),this._focusView(n)):!t.is(":visible")||!1===this.options.animation||e.replace?(i.insertAfter(t),t.off(w).remove(),this._focusView(n)):this[e.vertical?"_vertical":"_horizontal"](t,i,e.future):(s.append(i),this._bindTable(i))},_horizontal:function(e,t,i){var n=this,s=n._active,a=n.options.animation.horizontal,r=a.effects,o=k(e),l=k(e,!0)-o;r&&-1!=r.indexOf(x)&&(e.add(t).css({width:o}),e.wrap("<div/>"),n._focusView(s,e),e.parent().css({position:"relative",width:2*o+2*l,display:"flex","margin-left":i?0:-o-l}),t[i?"insertAfter":"insertBefore"](e),L(a,{effects:x+":"+(i?"right":"left"),complete:function(){e.off(w).remove(),n._oldTable=null,t.unwrap(),n._focusView(s)}}),e.parent().kendoStop(!0,!0).kendoAnimate(a))},_vertical:function(e,t){var i,n,s=this,a=s.options.animation.vertical,r=a.effects,o=s._active;r&&-1!=r.indexOf("zoom")&&(t.insertBefore(e),e.css({position:"absolute",width:t.width()}),m&&(n=(n=(i=s._cellByDate(s._view.toDateString(s._current))).position()).left+parseInt(i.width()/2,10)+"px "+(n.top+parseInt(i.height()/2,10))+"px",t.css(m,n)),e.kendoStop(!0,!0).kendoAnimate({effects:"fadeOut",duration:600,complete:function(){e.off(w).remove(),s._oldTable=null,s._focusView(o)}}),t.kendoStop(!0,!0).kendoAnimate(a))},_cellByDate:function(t,n){return this._table.find(n||"td:not(.k-other-month)").filter(function(){return e(this.firstChild).attr(i.attr(D))===t})},_selectCell:function(e){var t=this._selectedCell,i=this._view.toDateString(e);t&&t[0]&&(t[0].removeAttribute(B),t.removeClass(H)),t=this._cellByDate(i,"multiple"==this.options.selectable?z:"td:not(.k-other-month)"),this._selectedCell=t,t.addClass(H).attr(B,!0)},_setCurrent:function(e){var t=i.guid(),n=this._cell,s=this._view.toDateString(e);n&&n[0]&&(n.removeClass(E),n[0].removeAttribute("aria-label"),n[0].removeAttribute("id")),n=this._cellByDate(s,"multiple"==this.options.selectable?z:"td:not(.k-other-month)"),this._cell=n,n.attr("id",t).addClass(E),this._table[0]&&(this._table[0].removeAttribute("aria-activedescendant"),this._table.attr("aria-activedescendant",t))},_bindTable:function(e){e.on("focus.kendoCalendar",this._addClassProxy).on("blur.kendoCalendar",this._removeClassProxy)},_click:function(e){var t=this.options,i=new Date(+this._current),n=eh(e);l(n,0),"month"==this._view.name&&this.options.disableDates(n)&&(n=this._value),this._view.setDate(i,n),this.navigateDown(Q(i,t.min,t.max))},_focus:function(e){0!==this._view.compare(e,this._current)?this.navigate(e):(this._current=e,this._setCurrent(e))},_focusView:function(e,t){e&&this.focus(t)},_viewWrapper:function(){var t=this.element,i=t.children(".k-calendar-view");i[0]||(i=e("<div class='k-calendar-view' />").insertAfter(t.find(W)))},_footer:function(t){var n=Y(),s=this.element,a=s.find(".k-footer");if(!t)return this._toggle(!1),void a.hide();a[0]||(a=e('<div class="k-footer"><a tabindex="-1" href="#" class="k-link k-nav-today"></a></div>').appendTo(s)),this._today=a.show().find(".k-link").html(t(n)).attr("title",i.toString(n,"D",this.options.culture)),this._toggle()},_header:function(){var t=this,n=t.element,s=t.options.linksSelector;n.find(W)[0]||n.html(i.template(t.options.header.template)(e.extend(!0,{},t.options,{actionAttr:i.attr("action"),size:i.getValidCssClass("k-button-","size",t.options.size)}))),n.find(s).on(y+" touchend"+w,function(){return!1}),t._title=n.find("["+i.attr("action")+'="nav-up"]').on(y+" touchend"+w,function(){t._active=!1!==t.options.focusOnNav,t.navigateUp()}),t._prevArrow=n.find("["+i.attr("action")+'="prev"]').on(y+" touchend"+w,function(){t._active=!1!==t.options.focusOnNav,t.navigateToPast()}),t._nextArrow=n.find("["+i.attr("action")+'="next"]').on(y+" touchend"+w,function(){t._active=!1!==t.options.focusOnNav,t.navigateToFuture()}),n.find("["+i.attr("action")+'="today"]').on(y+" touchend"+w,t._todayClick.bind(t))},_navigate:function(e,t){var i=this._index+1,n=new V(+this._current);this._isMultipleSelection()&&(n=eh(this._table.find("td:not(.k-other-month):not(.k-out-of-range)").has(".k-link").first().find("a")),this._current=new Date(+n)),(e=this[e]).hasClass(F)||(i>3?n.setFullYear(n.getFullYear()+100*t):G.views[i].setDate(n,t),this.navigate(n))},_option:function(e,i){var n,s,a=this.options,r=this._value||this._current;if(i===t)return a[e];(i=o(i,a.format,a.culture))&&(a[e]=new V(+i),((s="min"===e?i>r:r>i)||(n=i,r&&r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()))&&(s&&(this._value=null),this._changeView=!0),this._changeView||(this._changeView=!(!a.month.content&&!a.month.empty)),this.navigate(this._value),this._toggle())},_toggle:function(e){var i=this.options,n=this.options.disableDates(Y()),s=this._today,a=this._todayClass();e===t&&(e=X(Y(),i.min,i.max)),s&&(s.off(y),e&&!n?s.addClass(a).removeClass(F).on(y,this._todayClick.bind(this)):s.removeClass(a).addClass(F).on(y,en))},_todayClass:function(){return"k-nav-today"},_todayClick:function(e){var t=U[this.options.depth],i=this.options.disableDates,n=Y();e.preventDefault(),i(n)||(0===this._view.compare(this._current,n)&&this._index==t&&(this._changeView=!1),this._isMultipleSelection()&&(this._selectDates=[n],this.selectable._lastActive=null),this._value=n,this.navigate(n,t),this.trigger(S))},_templates:function(){var e=this.options,t=e.footer,n=e.month,s=n.content,a=n.weekNumber,r=n.empty,o='#= kendo.toString(data,"D","'+e.culture+'") #';this.month={content:c('<td class="#=data.cssClass#" role="gridcell"><a tabindex="-1" class="k-link#=data.linkClass#" href="#=data.url#" '+i.attr(D)+'="#=data.dateString#" title="#=data.title#">'+(s||"#=data.value#")+"</a></td>",{useWithBlock:!!s}),empty:c('<td role="gridcell">'+(r||"&nbsp;")+"</td>",{useWithBlock:!!r}),weekNumber:c('<td class="k-alt">'+(a||"#= data.weekNumber #")+"</td>",{useWithBlock:!!a})},this.year={content:c('<td class="#=data.cssClass#" role="gridcell"><a tabindex="-1" class="k-link" href="\\#" data-#=data.ns#value="#=data.dateString#" aria-label="#=data.label#">#=data.value#</a></td>',{useWithBlock:!1})},t&&!0!==t&&(o=t),this.footer=!1!==t?c(o,{useWithBlock:!1}):null},_updateAria:function(e,t){var n,s=this._cell,a=this.view().valueType(),r=t||this.current();return n="month"===a?i.toString(r,"MMMM"):"date"===a?i.toString(r,"D"):s.text(),s.attr("aria-label",e({current:r,valueType:a,text:n})),s.attr("id")}});s.plugin(j);var G={firstDayOfMonth:function(e){return es(e.getFullYear(),e.getMonth(),1)},firstVisibleDay:function(e,t){var n=(t=t||i.culture().calendar).firstDay,s=new V(e.getFullYear(),e.getMonth(),1,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());for(s.setFullYear(e.getFullYear());s.getDay()!=n;)G.setTime(s,-864e5);return s},setTime:function(e,t){var i=e.getTimezoneOffset(),n=new V(e.getTime()+t),s=n.getTimezoneOffset()-i;e.setTime(n.getTime()+6e4*s)},views:[{name:C,title:function(e,t,i,n){return ea(n).months.names[e.getMonth()]+" "+e.getFullYear()},content:function(e){var t=0,n=e.min,s=e.max,a=e.date,r=e.dates,o=e.format,h=e.culture,u=e.url,c=e.showHeader,p=e.otherMonth,f=e.isWeekColumnVisible,m=u&&r[0],g=ea(h),v=g.firstDay,_=g.days,b=J(_.names,v),k=J(_.namesShort,v),w=G.firstVisibleDay(a,g),y=this.first(a),x=this.last(a),C=this.toDateString,T=Y(),S='<table tabindex="0" role="grid" class="'+e.contentClasses+'" cellspacing="0" data-start="'+C(w)+'">';for(c&&(S+='<caption class="k-calendar-caption k-month-header">'+this.title(a,n,s,h)+"</caption>"),S+='<thead class="k-calendar-thead"><tr role="row" class="k-calendar-tr">',f&&(S+='<th scope="col" class="k-calendar-th k-alt">'+e.messages.weekColumnHeader+"</th>");t<7;t++)S+='<th scope="col" class="k-calendar-th" aria-label="'+b[t]+'">'+k[t]+"</th>";return l(T,0),T=+T,K({cells:42,perRow:7,html:S+='</tr></thead><tbody class="k-calendar-tbody"><tr role="row" class="k-calendar-tr">',start:es(w.getFullYear(),w.getMonth(),w.getDate()),isWeekColumnVisible:f,weekNumber:e.weekNumber,min:es(n.getFullYear(),n.getMonth(),n.getDate()),max:es(s.getFullYear(),s.getMonth(),s.getDate()),otherMonth:p,content:e.content,lastDayOfMonth:x,empty:e.empty,setter:this.setDate,disableDates:e.disableDates,build:function(e,t,n){var s=["k-calendar-td"],a=e.getDay(),l="",d="#";return(e<y||e>x)&&s.push(A),n(e)&&s.push(F),+e===T&&s.push("k-today"),0!==a&&6!==a||s.push("k-weekend"),m&&function(e,t){for(var i=0,n=t.length;i<n;i++)if(e===+t[i])return!0;return!1}(+e,r)&&(d=u.replace("{0}",i.toString(e,o,h)),l=" k-action-link"),{date:e,dates:r,ns:i.ns,title:i.toString(e,"D",h),value:e.getDate(),dateString:C(e),cssClass:s.join(" "),linkClass:l,url:d}},weekNumberBuild:function(e){return{weekNumber:d(e,i.culture().calendar.firstDay),currentDate:e}}})},first:function(e){return G.firstDayOfMonth(e)},last:function(e){var t=es(e.getFullYear(),e.getMonth()+1,0),i=G.firstDayOfMonth(e),n=Math.abs(t.getTimezoneOffset()-i.getTimezoneOffset());return n&&t.setHours(i.getHours()+n/60),t},compare:function(e,t){var i=e.getMonth(),n=e.getFullYear(),s=t.getMonth(),a=t.getFullYear();return n>a?1:n<a?-1:i==s?0:i>s?1:-1},setDate:function(e,t){var i=e.getHours();t instanceof V?e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()):G.setTime(e,864e5*t),l(e,i)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/"+e.getDate()},valueType:function(){return"date"}},{name:"year",title:function(e){return e.getFullYear()},content:function(e){var t=ea(e.culture).months,n=t.namesAbbr,s=t.names,a=this.toDateString,r=e.min,o=e.max,l="";return e.showHeader&&(l+='<table tabindex="0" role="grid" class="k-calendar-table k-content k-meta-view" cellspacing="0"><caption class="k-calendar-caption k-meta-header">'+this.title(e.date)+'</caption><tbody class="k-calendar-tbody"><tr role="row" class="k-calendar-tr">'),K({min:es(r.getFullYear(),r.getMonth(),1),max:es(o.getFullYear(),o.getMonth(),1),start:es(e.date.getFullYear(),0,1),html:l,setter:this.setDate,content:e.content,build:function(e){return{value:n[e.getMonth()],label:s[e.getMonth()],ns:i.ns,dateString:a(e),cssClass:"k-calendar-td"}}})},first:function(e){return es(e.getFullYear(),0,e.getDate())},last:function(e){return es(e.getFullYear(),11,e.getDate())},compare:function(e,t){return $(e,t)},setDate:function(e,t){var i,n=e.getHours();t instanceof V?(i=t.getMonth(),e.setFullYear(t.getFullYear(),i,e.getDate()),i!==e.getMonth()&&e.setDate(0)):(i=e.getMonth()+t,e.setMonth(i),i>11&&(i-=12),i>0&&e.getMonth()!=i&&e.setDate(0)),l(e,n)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/1"},valueType:function(){return"month"}},{name:"decade",title:function(e,t,i){return q(e,t,i,10)},content:function(e){var t=e.date.getFullYear(),n=this.toDateString,s="";return e.showHeader&&(s+='<table tabindex="0" role="grid" class="k-calendar-table k-content k-meta-view" cellspacing="0"><caption class="k-meta-header">'+this.title(e.date,e.min,e.max)+'</caption><tbody class="k-calendar-thead"><tr role="row" class="k-calendar-tr">'),K({start:es(t-t%10-1,0,1),min:es(e.min.getFullYear(),0,1),max:es(e.max.getFullYear(),0,1),otherMonth:e.otherMonth,html:s,setter:this.setDate,build:function(e,t){var s=["k-calendar-td"];return 0!==t&&11!==t||s.push(A),{value:e.getFullYear(),ns:i.ns,dateString:n(e),cssClass:s.join(" ")}}})},first:function(e){var t=e.getFullYear();return es(t-t%10,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return es(t-t%10+9,e.getMonth(),e.getDate())},compare:function(e,t){return $(e,t,10)},setDate:function(e,t){Z(e,t,1)},toDateString:function(e){return e.getFullYear()+"/0/1"},valueType:function(){return"year"}},{name:T,title:function(e,t,i){return q(e,t,i,100)},content:function(e){var t=e.date.getFullYear(),n=e.min.getFullYear(),s=e.max.getFullYear(),a=this.toDateString,r=n,o=s,l="";return(o-=o%10)-(r-=r%10)<10&&(o=r+9),e.showHeader&&(l+='<table tabindex="0" role="grid" class="k-calendar-table k-content k-meta-view" cellspacing="0"><caption class="k-calendar-caption k-meta-header">'+this.title(e.date,e.min,e.max)+'</caption><tbody class="k-calendar-tbody"><tr role="row" class="k-calendar-tr">'),K({start:es(t-t%100-10,0,1),min:es(r,0,1),max:es(o,0,1),otherMonth:e.otherMonth,html:l,setter:this.setDate,build:function(e,t){var r=["k-calendar-td"],o=e.getFullYear(),l=o+9;return 0!==t&&11!==t||r.push(A),o<n&&(o=n),l>s&&(l=s),{ns:i.ns,value:o+" - "+l,dateString:a(e),cssClass:r.join(" ")}}})},first:function(e){var t=e.getFullYear();return es(t-t%100,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return es(t-t%100+99,e.getMonth(),e.getDate())},compare:function(e,t){return $(e,t,100)},setDate:function(e,t){Z(e,t,10)},toDateString:function(e){var t=e.getFullYear();return t-t%10+"/0/1"},valueType:function(){return"decade"}}]};function q(e,t,i,n){var s,a=e.getFullYear(),r=t.getFullYear(),o=i.getFullYear();return s=(a-=a%n)+(n-1),a<r&&(a=r),s>o&&(s=o),a+"-"+s}function K(e){var t,i=0,n=e.min,s=e.max,a=e.start,r=e.setter,o=e.build,d=e.weekNumberBuild,h=e.cells||12,u=e.isWeekColumnVisible,c=e.perRow||4,p=e.otherMonth,f=e.lastDayOfMonth,m=e.weekNumber||b,k=e.content||g,w=e.empty||v,y=e.otherMonthCellTemplate||_,x=e.html||'<table tabindex="0" role="grid" class="k-calendar-table k-content k-meta-view" cellspacing="0"><tbody class="k-calendar-tbody"><tr role="row" class="k-calendar-tr">';for(u&&(x+=m(d(a)));i<h;i++)i>0&&i%c==0&&(x+='</tr><tr role="row" class="k-calendar-tr">',u&&(x+=m(p||+a<=+f?d(a):{weekNumber:"&nbsp;"}))),l(a=es(a.getFullYear(),a.getMonth(),a.getDate()),0),x+=-1===(t=o(a,i,e.disableDates)).cssClass.indexOf(A)||p?X(a,n,s)?k(t):w(t):y(t),r(a,1);return x+"</tr></tbody></table>"}function $(e,t,i){var n=e.getFullYear(),s=t.getFullYear(),a=s,r=0;return i&&(a=(s-=s%i)-s%i+i-1),n>a?r=1:n<s&&(r=-1),r}function Y(){var e=new V;return new V(e.getFullYear(),e.getMonth(),e.getDate())}function Q(e,t,i){var n=Y();return e&&(n=new V(+e)),t>n?n=new V(+t):i<n&&(n=new V(+i)),n}function X(e,t,i){return+e>=+t&&+e<=+i}function J(e,t){return e.slice(t).concat(e.slice(0,t))}function Z(e,t,i){t=t instanceof V?t.getFullYear():e.getFullYear()+i*t,e.setFullYear(t)}function ee(e,t){if(+t<+e){var n=+e;G.views[0].setDate(e,t),G.views[0].setDate(t,new Date(n))}var s=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return Math.ceil((+Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())-+s)/i.date.MS_PER_DAY)}function et(e,t,i,n){for(var s=0;s<=t;s++){var a=new Date(i.getTime());n(a=new Date(a.setDate(a.getDate()+s)))||e.push(a)}}function ei(t){e(this).hasClass("k-disabled")||e(this).toggleClass("k-hover",N.indexOf(t.type)>-1||"focus"==t.type)}function en(e){e.preventDefault()}function es(e,t,i){var n=new V(e,t,i);return n.setFullYear(e,t,i),n}function ea(e){return p(e).calendars.standard}function er(e){var i=U[e.start],n=U[e.depth],s=p(e.culture);e.format=u(e.format||s.calendars.standard.patterns.d),isNaN(i)&&(i=0,e.start=C),(n===t||n>i)&&(e.depth=C),null===e.dates&&(e.dates=[])}function eo(e,t){e.addClass("k-"+t)}function el(t){return i.isFunction(t)?t:Array.isArray(t)?function(t){var i,n=[],s=["su","mo","tu","we","th","fr","sa"],a="if (found) { return true } else {return false}";if(t[0]instanceof V)i="var clonedDate = new Date(date); var found = date && window.kendo.jQuery.inArray(clonedDate.setHours(0, 0, 0, 0),["+(n=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].setHours(0,0,0,0));return t}(t))+"]) > -1;"+a;else{for(var r=0;r<t.length;r++){var o=t[r].slice(0,2).toLowerCase(),l=e.inArray(o,s);l>-1&&n.push(l)}i="var clonedDate = new Date(date); var found = date && window.kendo.jQuery.inArray(clonedDate.getDay(),["+n+"]) > -1;"+a}return Function("date",i)}(t):e.noop}function ed(e,t){return e instanceof Date&&t instanceof Date&&(e=e.getTime(),t=t.getTime()),e===t}function eh(t){var n=e(t).attr(i.attr(D)).split("/");return es(n[0],n[1],n[2])}G.isEqualDatePart=function(e,t){return!!e&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},G.isEqualDate=ed,G.restrictValue=Q,G.isInRange=X,G.addClassToViewContainer=eo,G.normalize=er,G.viewsEnum=U,G.disabled=el,G.toDateObject=eh,G.getToday=Y,G.createDate=es,i.calendar=G}(window.kendo.jQuery),ev=window.kendo.jQuery,ek=(eb=window.kendo).caret,ey=(ew=eb.ui).Widget,ex=eb.keys,eC=".kendoDateInput",eT=({}).toString,eS=ev.isPlainObject,eI=(eb.support.propertyChangeEvent?"propertychange.kendoDateInput input":"input")+eC,eD="k-focus",eF="k-disabled",eE="k-invalid",eA="disabled",ez="readonly",eP="change",eH="dMyHhmftsz",eN=ey.extend({init:function(e,t){var i=this;ey.fn.init.call(i,e,t),e=i.element,(t=i.options).format=eb._extractFormat(t.format||eb.getCulture(t.culture).calendars.standard.patterns.d),t.min=eb.parseDate(e.attr("min"))||eb.parseDate(t.min),t.max=eb.parseDate(e.attr("max"))||eb.parseDate(t.max);var n=e.parent().attr("class")||"",s=n.indexOf("picker")>=0&&0>n.indexOf("rangepicker");s?i.wrapper=e.parent():(i.wrapper=e.wrap("<span class='k-dateinput k-input'></span>").parent(),i.wrapper.addClass(e[0].className).removeClass("input-validation-error"),i.wrapper[0].style.cssText=e[0].style.cssText,e.css({height:e[0].style.height})),i._validationIcon=ev("<span class='k-input-validation-icon k-icon k-i-warning k-hidden'></span>").insertAfter(e),i._form(),i.element.addClass(s?" ":"k-input-inner").attr("autocomplete","off").on("focus"+eC,function(){i.wrapper.addClass(eD)}).on("focusout"+eC,function(){i.wrapper.removeClass(eD),i._change()});try{e[0].setAttribute("type","text")}catch(t){e[0].type="text"}e.is("[disabled]")||ev(i.element).parents("fieldset").is(":disabled")?i.enable(!1):i.readonly(e.is("[readonly]")),i.value(i.options.value||e.val()),i._applyCssClasses(),t.label&&i._label(),eb.notify(i)},options:{name:"DateInput",culture:"",value:"",format:"",min:new Date(1900,0,1),max:new Date(2099,11,31),messages:{year:"year",month:"month",day:"day",weekday:"day of the week",hour:"hours",minute:"minutes",second:"seconds",dayperiod:"AM/PM"},size:"medium",fillMode:"solid",rounded:"medium",label:null},events:[eP],min:function(e){if(void 0===e)return this.options.min;this.options.min=e},max:function(e){if(e===e_)return this.options.max;this.options.max=e},setOptions:function(e){ey.fn.setOptions.call(this,e),this._unbindInput(),this._bindInput(),this._updateElementValue(),e.label&&this._inputLabel?this.label.setOptions(e.label):!1===e.label?(this.label._unwrapFloating(),this._inputLabel.remove(),delete this._inputLabel):e.label&&this._label()},destroy:function(){this.element.off(eC),this._formElement&&this._formElement.off("reset",this._resetHandler),this.label&&this.label.destroy(),ey.fn.destroy.call(this)},value:function(e){if(e===e_)return this._dateTime.getDateObject();null===e&&(e=""),"[object Date]"!==eT.call(e)&&(e=eb.parseDate(e,this.options.format,this.options.culture)),e&&!e.getTime()&&(e=null),this._dateTime=new eR(e,this.options.format,this.options.culture,this.options.messages),this._updateElementValue(),this._oldValue=e,this.label&&this.label.floatingLabel&&this.label.floatingLabel.refresh()},_updateElementValue:function(){var e=this._dateTime.toPair(this.options.format,this.options.culture,this.options.messages);this.element.val(e[0]),this._oldText=e[0],this._format=e[1]},_toggleDateMask:function(e){e?this._updateElementValue():this.element.val("")},readonly:function(e){this._editable({readonly:e===e_||e,disable:!1}),this.label&&this.label.floatingLabel&&this.label.floatingLabel.readonly(e===e_||e)},enable:function(e){this._editable({readonly:!1,disable:!(e=e===e_||e)}),this.label&&this.label.floatingLabel&&this.label.floatingLabel.enable(e=e===e_||e)},_label:function(){var e=this,t=e.options,i=eS(t.label)?t.label:{content:t.label};e.label=new eb.ui.Label(null,ev.extend({},i,{widget:e,floatCheck:function(){return e._toggleDateMask(!0),!e.value()&&document.activeElement!==e.element[0]&&(e._toggleDateMask(!1),!0)}})),e._inputLabel=e.label.element},_bindInput:function(){var e=this;e.element.on("focus"+eC,function(){e.wrapper.addClass(eD)}).on("focusout"+eC,function(){e.wrapper.removeClass(eD),e._change()}).on("paste"+eC,e._paste.bind(e)).on("keydown"+eC,e._keydown.bind(e)).on(eI,e._input.bind(e)).on("mouseup"+eC,e._mouseUp.bind(e)).on("DOMMouseScroll"+eC+" mousewheel"+eC,e._scroll.bind(e))},_unbindInput:function(){this.element.off("keydown"+eC).off("paste"+eC).off("focus"+eC).off("focusout"+eC).off(eI).off("mouseup"+eC).off("DOMMouseScroll"+eC+" mousewheel"+eC)},_editable:function(e){var t=this.element,i=e.disable,n=e.readonly,s=this.wrapper;this._unbindInput(),n||i?(i&&(s.addClass(eF),t.attr(eA,i),t&&t.length&&t[0].removeAttribute(ez)),n&&t.attr(ez,n)):(s.removeClass(eF),t&&t.length&&(t[0].removeAttribute(eA),t[0].removeAttribute(ez)),this._bindInput())},_change:function(){var e=this._oldValue,t=this.value();t&&this.min()&&t<this.min()&&(this.value(this.min()),t=this.value()),t&&this.max()&&t>this.max()&&(this.value(this.max()),t=this.value()),(e&&t&&t.getTime()!==e.getTime()||e&&!t||!e&&t)&&(this._oldValue=t,this.trigger(eP),this.element.trigger(eP))},_input:function(){var e=this,t=e.element[0],i=!1;if(eb._activeElement()===t){var n=function(e,t,i,n){var s=e[n+e.length-i.length];e=e.substring(0,n+e.length-i.length);var a,r=[];if(e===(i=i.substring(0,n))&&n>0)return r.push([t[n-1],i[n-1]]),r;if(0===e.indexOf(i)&&(0===i.length||t[i.length-1]!==t[i.length])){var o="";for(a=i.length;a<e.length;a++)t[a]!==o&&eH.indexOf(t[a])>=0&&(o=t[a],r.push([o,""]));return r}if(" "===i[i.length-1]||i[i.length-1]===s)return[[t[n-1]," "]];if(0===i.indexOf(e)||-1===eH.indexOf(t[n-1])){var l=t[0];for(a=Math.max(0,e.length-1);a<t.length;a++)if(eH.indexOf(t[a])>=0){l=t[a];break}return[[l,i[n-1]]]}return[[t[n-1],i[n-1]]]}(this._oldText,this._format,this.element[0].value,ek(this.element[0])[0]),s=1===n.length&&" "===n[0][1];if(!s)for(var a=0;a<n.length;a++){var r=this._dateTime.parsePart(n[a][0],n[a][1]);i=i||!r}if(this._updateElementValue(),n.length&&" "!==n[0][0]&&(this._selectSegment(n[0][0]),!s)){var o=n[0][0];setTimeout(function(){e._selectSegment(o)})}s&&this._keydown({keyCode:39,preventDefault:function(){}}),i&&e._blinkInvalidState()}},_blinkInvalidState:function(){this._addInvalidState(),clearTimeout(this._invalidStateTimeout),this._invalidStateTimeout=setTimeout(this._removeInvalidState.bind(this),100)},_addInvalidState:function(){this.wrapper.addClass(eE),this._validationIcon.removeClass("k-hidden")},_removeInvalidState:function(){this.wrapper.removeClass(eE),this._validationIcon.addClass("k-hidden"),this._invalidStateTimeout=null},_mouseUp:function(){var e=ek(this.element[0]);e[0]===e[1]&&this._selectNearestSegment()},_scroll:function(e){if(eb._activeElement()===this.element[0]&&!this.element.is("[readonly]")){var t={keyCode:37,preventDefault:function(){}};(e=window.event||e).shiftKey?t.keyCode=(e.wheelDelta||-e.detail)>0?37:39:t.keyCode=(e.wheelDelta||-e.detail)>0?38:40,this._keydown(t),e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()}},_form:function(){var e=this,t=e.element,i=t.attr("form"),n=i?ev("#"+i):t.closest("form"),s=t[0].value;!s&&e.options.value&&(s=e.options.value),n[0]&&(e._resetHandler=function(){setTimeout(function(){e.value(s)})},e._formElement=n.on("reset",e._resetHandler))},_paste:function(e){e.preventDefault()},_keydown:function(e){var t,i=e.keyCode;if(37==i||39==i){e.preventDefault(),(t=ek(this.element[0]))[0]!=t[1]&&this._selectNearestSegment();for(var n=37==i?-1:1,s=-1==n?ek(this.element[0])[0]-1:ek(this.element[0])[1]+1;s>=0&&s<this._format.length;){if(eH.indexOf(this._format[s])>=0){this._selectSegment(this._format[s]);break}s+=n}}if(38==i||40==i){e.preventDefault(),t=ek(this.element[0]);var a=this._format[t[0]];if(eH.indexOf(a)>=0){var r=1;"m"==a&&(r=this.options.interval||1),this._dateTime.modifyPart(a,38==i?1*r:-1*r),this._updateElementValue(),this._selectSegment(a),this.element.trigger(eP)}}if(eb.support.browser.msie&&eb.support.browser.version<10){var o=e.keyCode?e.keyCode:e.which;if(8===o||46===o){var l=this;setTimeout(function(){l._input()},0)}}i===ex.ENTER&&this._change()},_selectNearestSegment:function(){for(var e=ek(this.element[0])[0],t=e,i=e-1;t<this._format.length||i>=0;t++,i--){if(t<this._format.length&&-1!==eH.indexOf(this._format[t]))return void this._selectSegment(this._format[t]);if(i>=0&&-1!==eH.indexOf(this._format[i]))return void this._selectSegment(this._format[i])}},_selectSegment:function(e){for(var t=-1,i=0,n=0;n<this._format.length;n++)this._format[n]===e&&(i=n+1,-1===t&&(t=n));t<0&&(t=0),ek(this.element,t,i)}}),eb.cssProperties.registerPrefix("DateInput","k-input-"),eb.cssProperties.registerValues("DateInput",[{prop:"rounded",values:eb.cssProperties.roundedValues.concat([["full","full"]])}]),ew.plugin(eN),eR=function(e,t,i,n){var s=null,a=!0,r=!0,o=!0,l=!0,d=!0,h=!0,u="",c="",p={},f=["","0","00","000","0000"];function m(e,t,i){return(i=(t=t||2)-(e+="").length)?f[t].substring(0,i)+e:e}var g=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|"[^"]*"|'[^']*'/g,v=null,_=null,b=null,k=!1,w=function(e){var t,i,n;switch(e){case"d":n=o?s.getDate():p.day;break;case"dd":n=o?m(s.getDate()):p.day;break;case"ddd":n=o&&r&&a?b.namesAbbr[s.getDay()]:p.weekday;break;case"dddd":n=o&&r&&a?b.names[s.getDay()]:p.weekday;break;case"M":n=r?s.getMonth()+1:p.month;break;case"MM":n=r?m(s.getMonth()+1):p.month;break;case"MMM":n=r?v.namesAbbr[s.getMonth()]:p.month;break;case"MMMM":n=r?v.names[s.getMonth()]:p.month;break;case"yy":n=a?m(s.getFullYear()%100):p.year;break;case"yyyy":n=a?m(s.getFullYear(),4):p.year;break;case"h":n=l?s.getHours()%12||12:p.hour;break;case"hh":n=l?m(s.getHours()%12||12):p.hour;break;case"H":n=l?s.getHours():p.hour;break;case"HH":n=l?m(s.getHours()):p.hour;break;case"m":n=d?s.getMinutes():p.minute;break;case"mm":n=d?m(s.getMinutes()):p.minute;break;case"s":n=h?s.getSeconds():p.second;break;case"ss":n=h?m(s.getSeconds()):p.second;break;case"f":n=Math.floor(s.getMilliseconds()/100);break;case"ff":(n=s.getMilliseconds())>99&&(n=Math.floor(n/10)),n=m(n);break;case"fff":n=m(s.getMilliseconds(),3);break;case"tt":n=l?12>s.getHours()?_.AM[0]:_.PM[0]:p.dayperiod;break;case"zzz":i=(t=s.getTimezoneOffset())<0,n=Math.abs(t/60).toString().split(".")[0],t=Math.abs(t)-60*n,n=(i?"+":"-")+m(n)+":"+m(t);break;case"z":case"zz":i=(n=s.getTimezoneOffset()/60)<0,n=Math.abs(n).toString().split(".")[0],n=(i?"+":"-")+("zz"===e?m(n):n)}if(n=n!==e_?n:e.slice(1,e.length-1),k){n=""+n;var u="";"ddd"==e&&(e="EEE"),"dddd"==e&&(e="EEEE");for(var c=0;c<n.length;c++)u+=e[0];return u}return n};function y(e,t){switch(e){case"y":a=t;break;case"M":r=t,t||(s.setMonth(0),u="");break;case"d":o=t;break;case"H":case"h":l=t,t||(c="");break;case"m":d=t;break;case"s":h=t;break;default:return}}if(this.setValue=function(e){o=e},this.getValue=function(){return o},this.modifyPart=function(e,t){var i=new Date(s&&s.getTime?s.getTime():s);switch(e){case"y":i.setFullYear(i.getFullYear()+t);break;case"M":var n=i.getMonth()+t;i.setMonth(n),i.getMonth()%12!=(n+12)%12&&(i.setDate(1),i.setMonth(n));break;case"d":case"E":i.setDate(i.getDate()+t);break;case"H":case"h":i.setHours(i.getHours()+t);break;case"m":i.setMinutes(i.getMinutes()+t);break;case"s":i.setSeconds(i.getSeconds()+t);break;case"t":i.setHours((i.getHours()+12)%24)}i.getFullYear()>0&&(y(e,!0),s=i)},this.parsePart=function(e,t){if(!t)return y(e,!1),!0;var i,n=new Date(s&&s.getTime?s.getTime():s),p=new Date(n.getFullYear(),n.getMonth()+1,0).getDate();switch(e){case"d":var f=(o?10*n.getDate():0)+parseInt(t,10);if(isNaN(f))return;for(;f>p;)f=parseInt(f.toString().slice(1),10);if(f<1)o=!1;else{if(n.setDate(f),n.getMonth()!==s.getMonth())return;o=!0}break;case"M":var m=(r?10*(n.getMonth()+1):0)+parseInt(t,10);if(isNaN(m)){var g=_.months.names;for(u+=t.toLowerCase();u.length>0;){for(var v=0;v<g.length;v++)if(0===g[v].toLowerCase().indexOf(u))return n.setMonth(v),r=!0,s=n,!0;u=u.substring(1,u.length)}return!1}for(;m>12;)m=parseInt(m.toString().slice(1),10);m<1?r=!1:(n.setMonth(m-1),n.getMonth()!==m-1&&(n.setDate(1),n.setMonth(m-1)),r=!0);break;case"y":var b=(a?10*n.getFullYear():0)+parseInt(t,10);if(isNaN(b))return;for(;b>9999;)b=parseInt(b.toString().slice(1),10);b<1?a=!1:(n.setFullYear(b),a=!0);break;case"h":if(isNaN(i=(l?10*(n.getHours()%12||12):0)+parseInt(t,10)))return;for(;i>12;)i=parseInt(i.toString().slice(1),10);n.setHours(12*Math.floor(n.getHours()/12)+i%12),l=!0;break;case"H":if(isNaN(i=(l?10*n.getHours():0)+parseInt(t,10)))return;for(;i>23;)i=parseInt(i.toString().slice(1),10);n.setHours(i),l=!0;break;case"m":var k=(d?10*n.getMinutes():0)+parseInt(t,10);if(isNaN(k))return;for(;k>59;)k=parseInt(k.toString().slice(1),10);n.setMinutes(k),d=!0;break;case"s":var w=(h?10*n.getSeconds():0)+parseInt(t,10);if(isNaN(w))return;for(;w>59;)w=parseInt(w.toString().slice(1),10);n.setSeconds(w),h=!0;break;case"t":if(l){for(c+=t.toLowerCase();c.length>0;){if(0===_.AM[0].toLowerCase().indexOf(c)&&n.getHours()>=12||0===_.PM[0].toLowerCase().indexOf(c)&&12>n.getHours())return n.setHours((n.getHours()+12)%24),s=n,!0;c=c.substring(1,c.length)}return!1}}return s=n,!0},this.toPair=function(e,t,i){return e?(e=(_=(t=eb.getCulture(t)).calendars.standard).patterns[e]||e,b=_.days,v=_.months,p=i,[e.replace(g,(k=!1,w)),e.replace(g,(k=!0,w))]):["",""]},this.getDateObject=function(){return a&&r&&o&&l&&d&&h?new Date(s.getTime()):null},e)s=new Date(e.getTime());else{s=new Date;for(var x=this.toPair(t,i,n)[1],C=0;C<x.length;C++)y(x[C],!1)}},function(e,t){var i=window.kendo,n=i.ui,s=i.html,a=n.Widget,r=i.parseDate,o=i.keys,l=i.support,d=i.template,h=i._activeElement,u="<div />",c=".kendoDatePicker",p="click"+c,f=l.mouseAndTouchPresent?i.applyEventMap("up",c.slice(1)):p,m="open",g="close",v="change",_="disabled",b="readonly",k="k-focus",w="k-selected",y="k-disabled",x="mousedown"+c,C="navigate",T="month",S="aria-disabled",I="aria-readonly",D="aria-expanded",F="aria-hidden",E="aria-activedescendant",A=i.calendar,z=A.isInRange,P=A.restrictValue,H=A.isEqualDatePart,N=e.extend,R=Date;function O(t){var i=t.parseFormats,n=t.format;A.normalize(t),(i=Array.isArray(i)?i:[i]).length||i.push("yyyy-MM-dd"),-1===e.inArray(n,i)&&i.splice(0,0,t.format),t.parseFormats=i}function M(e){e.preventDefault()}var B=function(t){var s,a=document.body,r=e(u).attr(F,"true").addClass("k-calendar-container");this.options=t=t||{},s=t.id,t.omitPopup?r=t.dateDiv:(r.appendTo(a),this.popup=new n.Popup(r,N(t.popup,t,{name:"Popup",isRtl:i.support.isRtl(t.anchor)}))),s&&(s+="_dateview",r.attr("id",s),this._dateViewID=s),this.div=r,this.value(t.value)};B.prototype={_calendar:function(){var t,s=this.calendar,a=this.options;s||(t=e(u).attr("id",i.guid()).appendTo(a.omitPopup?a.dateDiv:this.popup.element).on(x,M).on(p,"td:has(.k-link)",this._click.bind(this)),this.calendar=s=new n.Calendar(t,{componentType:a.componentType,size:a.size,messages:a.messages}),this._setOptions(a),t.addClass(i.getValidCssClass("k-calendar-","size",a.size)),s.navigate(this._value||this._current,a.start),this.value(this._value))},_setOptions:function(e){this.calendar.setOptions({focusOnNav:!1,change:e.change,culture:e.culture,dates:e.dates,depth:e.depth,footer:e.footer,format:e.format,max:e.max,min:e.min,month:e.month,weekNumber:e.weekNumber,start:e.start,messages:e.messages,disableDates:e.disableDates})},setOptions:function(e){var t=this.options,i=e.disableDates;i&&(e.disableDates=A.disabled(i)),this.options=N(t,e,{change:t.change,close:t.close,open:t.open}),this.calendar&&this._setOptions(this.options)},destroy:function(){this.popup&&this.popup.destroy()},open:function(){var e,t=this;t._calendar(),e=t.popup._hovered,t.popup._hovered=!0,t.popup.open(),setTimeout(function(){t.popup._hovered=e},1)},close:function(){this.popup&&this.popup.close()},min:function(e){this._option("min",e)},max:function(e){this._option("max",e)},toggle:function(){this[this.popup.visible()?g:m]()},move:function(e){var t=e.keyCode,i=this.calendar,n=e.ctrlKey&&t==o.DOWN||t==o.ENTER,s=!1;if(e.altKey)t==o.DOWN?(this.open(),e.preventDefault(),s=!0):t==o.UP&&(this.close(),e.preventDefault(),s=!0);else if(this.popup&&this.popup.visible()){if(t==o.ESC||n&&i._cell.hasClass(w))return this.close(),e.preventDefault(),!0;t!=o.SPACEBAR&&(this._current=i._move(e)),s=!0}return s},current:function(e){this._current=e,this.calendar&&this.calendar._focus(e)},value:function(e){var t=this.calendar,i=this.options,n=i.disableDates;n&&n(e)&&(e=null),this._value=e,this._current=new R(+P(e,i.min,i.max)),t&&t.value(e)},_click:function(e){-1!==e.currentTarget.className.indexOf(w)&&(this.calendar.trigger("change"),this.close())},_option:function(e,t){var i=this.calendar;this.options[e]=t,i&&i[e](t)}},B.normalize=O,i.DateView=B;var L=a.extend({init:function(t,n){var s,o,l=this;a.fn.init.call(l,t,n),t=l.element,(n=l.options).disableDates=i.calendar.disabled(n.disableDates),n.min=r(t.attr("min"))||r(n.min),n.max=r(t.attr("max"))||r(n.max),l.options.readonly=void 0!==n.readonly?n.readonly:!!l.element.attr("readonly"),l.options.enable=void 0!==n.enable?n.enable:!(t.is("[disabled]")||e(t).parents("fieldset").is(":disabled")),O(n),l._initialOptions=N({},n),l._wrapper(),l.dateView=new B(N({},n,{id:t.attr("id"),anchor:l.wrapper,change:function(){l._change(this.value()),l.close()},close:function(e){l.trigger(g)?e.preventDefault():(t.attr(D,!1),o.attr(F,!0),setTimeout(function(){t.removeAttr("aria-activedescendant")}))},open:function(e){var i,n=l.options;l.trigger(m)?e.preventDefault():(l.element.val()!==l._oldText&&(i=r(t.val(),n.parseFormats,n.culture),l.dateView[i?"current":"value"](i)),t.attr(D,!0),o.attr(F,!1),l._updateARIA(i))}})),o=l.dateView.div,l._icon();try{t[0].setAttribute("type","text")}catch(e){t[0].type="text"}t.addClass("k-input-inner").attr({role:"combobox","aria-expanded":!1,"aria-haspopup":"grid","aria-controls":l.dateView._dateViewID,autocomplete:"off"}),l._reset(),l._template(),l.options.enable?l.readonly(t.is("[readonly]")):l.enable(!1),s=r(n.value||l.element.val(),n.parseFormats,n.culture),l._createDateInput(n),l._old=l._update(s||l.element.val()),l._oldText=t.val(),l._applyCssClasses(),n.label&&l._label(),i.notify(l)},events:[m,g,v],options:{name:"DatePicker",value:null,footer:"",format:"",culture:"",parseFormats:[],min:new Date(1900,0,1),max:new Date(2099,11,31),start:T,depth:T,animation:{},month:{},dates:[],disableDates:null,ARIATemplate:"Current focused #=data.valueType# is #=data.text#",dateInput:!1,weekNumber:!1,messages:{weekColumnHeader:""},componentType:"classic",size:"medium",fillMode:"solid",rounded:"medium",label:null},setOptions:function(e){var n=this._value;a.fn.setOptions.call(this,e),(e=this.options).min=r(e.min),e.max=r(e.max),O(e),this._dateIcon.off(c),this._dateIcon.remove(),this.dateView.setOptions(e),this._icon(),this._editable({readonly:void 0===e.readonly?this.options.readonly:e.readonly,disable:!(e.enable===t?this.options.enable:e.enable)}),this._createDateInput(e),this._dateInput||this.element.val(i.toString(n,e.format,e.culture)),n&&this._updateARIA(n),e.label&&this._inputLabel?this.label.setOptions(e.label):!1===e.label?(this.label._unwrapFloating(),this._inputLabel.remove(),delete this._inputLabel):e.label&&this._label()},_editable:function(e){var t=this,i=t._dateIcon.off(c),n=t.element.off(c),s=t.wrapper.off(c),a=e.readonly,r=e.disable;a||r?(s.addClass(r?y:"").removeClass(r?"":y),n.attr(_,r).attr(b,a).attr(S,r).attr(I,a)):(s.removeClass(y).on("mouseenter.kendoDatePicker mouseleave.kendoDatePicker",t._toggleHover),n&&n.length&&(n[0].removeAttribute(_),n[0].removeAttribute(b)),n.attr(S,!1).attr(I,!1).on("keydown"+c,t._keydown.bind(t)).on("focusout"+c,t._blur.bind(t)).on("focus"+c,function(){t.wrapper.addClass(k)}),i.on(f,t._click.bind(t)).on(x,M))},readonly:function(e){this._editable({readonly:e===t||e,disable:!1}),this._dateInput&&this._dateInput._editable({readonly:e===t||e,disable:!1}),this.label&&this.label.floatingLabel&&this.label.floatingLabel.readonly(e===t||e)},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t||e)}),this._dateInput&&this._dateInput._editable({readonly:!1,disable:!(e=e===t||e)}),this.label&&this.label.floatingLabel&&this.label.floatingLabel.enable(e=e===t||e)},_label:function(){var t=this.options,n=e.isPlainObject(t.label)?t.label:{content:t.label};this.label=new i.ui.Label(null,e.extend({},n,{widget:this})),this._inputLabel=this.label.element},destroy:function(){this.label&&this.label.destroy(),a.fn.destroy.call(this),this.dateView.calendar&&this._navigateCalendarHandler&&(this.dateView.calendar.unbind(C,this._navigateCalendarHandler),this._navigateCalendarHandler=null),this.dateView.destroy(),this.element.off(c),this._dateIcon.off(c),this._form&&this._form.off("reset",this._resetHandler)},open:function(){this.dateView.open(),this._navigateCalendar()},close:function(){this.dateView.close()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},value:function(e){if(e===t)return this._value;this._old=this._update(e),null===this._old&&(this._dateInput?this._dateInput.value(this._old):this.element.val("")),this._oldText=this.element.val(),this.label&&this.label.floatingLabel&&this.label.floatingLabel.refresh()},_toggleHover:function(t){e(t.currentTarget).toggleClass("k-hover","mouseenter"===t.type)},_blur:function(){var e=this.element.val();this.close(),e!==this._oldText&&(this._change(e),e||this.dateView.current(i.calendar.getToday())),this.wrapper.removeClass(k)},_click:function(e){this.dateView.toggle(),this._navigateCalendar(),this._focusElement(e.type)},_focusElement:function(e){var t=this.element;l.touch&&(!l.mouseAndTouchPresent||(e||"").match(/touch/i))||t[0]===h()||t.trigger("focus")},_change:function(e){var t,n=this.element.val();e=this._update(e);var s=(t=!i.calendar.isEqualDate(this._old,e))&&!this._typing,a=n!==this.element.val();(s||a)&&this.element.trigger(v),t&&(this._old=e,this._oldText=this.element.val(),this.trigger(v)),this._typing=!1},_keydown:function(e){var t=this.dateView,i=this.element.val(),n=!1;t.popup.visible()||e.keyCode!=o.ENTER||i===this._oldText?(n=t.move(e),this._updateARIA(t._current),n?this._dateInput&&e.stopImmediatePropagation&&e.stopImmediatePropagation():this._typing=!0):this._change(i)},_icon:function(){var t,i=this.element,n=this.options;(t=i.next("button.k-input-button"))[0]||(t=e(s.renderButton('<button aria-label="select" tabindex="-1" class="k-input-button k-button k-icon-button"></button>',{icon:"calendar",size:n.size,fillMode:n.fillMode,shape:"none",rounded:"none"})).insertAfter(i)),this._dateIcon=t.attr({role:"button"})},_setCalendarAttribute:function(){var e=this;setTimeout(function(){e.element.attr(E,e.dateView.calendar._table.attr(E))})},_navigateCalendar:function(){this._navigateCalendarHandler||(this._navigateCalendarHandler=this._setCalendarAttribute.bind(this)),this.dateView.calendar&&this.dateView.calendar.unbind(C,this._navigateCalendarHandler).bind(C,this._navigateCalendarHandler)},_option:function(e,i){var n=this.options;if(i===t)return n[e];(i=r(i,n.parseFormats,n.culture))&&(n[e]=new R(+i),this.dateView[e](i))},_update:function(e){var t,n=this.options,s=n.min,a=n.max,o=this._value,l=r(e,n.parseFormats,n.culture),d=null===l&&null===o||l instanceof Date&&o instanceof Date;return n.disableDates(l)&&(l=null,this._old||this.element.val()||(e=null)),+l==+o&&d?(t=i.toString(l,n.format,n.culture))===e||this._dateInput&&!l||this.element.val(null===l?e:t):(null!==l&&H(l,s)?l=P(l,s,a):z(l,s,a)||(l=null),this._value=l,this.dateView.value(l),this._dateInput&&l?this._dateInput.value(l||e):this.element.val(i.toString(l||e,n.format,n.culture)),this._updateARIA(l)),l},_wrapper:function(){var e,t=this.element;(e=t.parents(".k-datepicker"))[0]||(e=t.wrap("<span />").parent()),e[0].style.cssText=t[0].style.cssText,t.css({height:t[0].style.height}),this.wrapper=e.addClass("k-datepicker k-input").addClass(t[0].className).removeClass("input-validation-error")},_reset:function(){var t=this,n=t.element,s=n.attr("form"),a=t.options,r=a.disableDates,o=a.parseFormats.length?a.parseFormats:null,l=t._initialOptions.value,d=s?e("#"+s):n.closest("form"),h=n[0].defaultValue;l&&r&&r(l)&&(l=null),h&&i.parseDate(h,o,a.culture)||!l||n.attr("value",i.toString(l,a.format,a.culture)),d[0]&&(t._resetHandler=function(){t.value(l||n[0].defaultValue),t.max(t._initialOptions.max),t.min(t._initialOptions.min)},t._form=d.on("reset",t._resetHandler))},_template:function(){this._ariaTemplate=d(this.options.ARIATemplate).bind(this)},_createDateInput:function(e){this._dateInput&&(this._dateInput.destroy(),this._dateInput=null),e.dateInput&&(this._dateInput=new n.DateInput(this.element,{culture:e.culture,format:e.format,size:e.size,fillMode:e.fillMode,rounded:e.rounded,min:e.min,max:e.max}))},_updateARIA:function(e){var t=this.dateView.calendar;this.element&&this.element.length&&this.element[0].removeAttribute(E),t&&this.element.attr(E,t._updateAria(this._ariaTemplate,e))}});i.cssProperties.registerPrefix("DatePicker","k-input-"),i.cssProperties.registerValues("DatePicker",[{prop:"rounded",values:i.cssProperties.roundedValues.concat([["full","full"]])}]),n.plugin(L)}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.ui,s=i.html,a=n.List,r=n.Select,o=i.support,l=i._activeElement,d=i.data.ObservableObject,h=i.keys,u=".kendoDropDownList",c=u+"FocusEvent",p="disabled",f="readonly",m="change",g="k-focus",v="k-disabled",_="aria-disabled",b="aria-readonly",k="mouseenter"+u+" mouseleave"+u,w="tabindex",y="filter",x="accept",C=r.extend({init:function(t,n){var s,a,o=this,l=n&&n.index;o.ns=u,n=Array.isArray(n)?{dataSource:n}:n,r.fn.init.call(o,t,n),n=o.options,t=o.element.on("focus"+u,o._focusHandler.bind(o)),o._focusInputHandler=o._focusInput.bind(o),o.optionLabel=e(),o._optionLabel(),o._inputTemplate(),o._reset(),o._prev="",o._word="",o._wrapper(),o._tabindex(),o.wrapper.data(w,o.wrapper.attr(w)),o._span(),o._popup(),o._mobile(),o._dataSource(),o._ignoreCase(),o._filterHeader(),n.label&&this._label(),o._aria(),o._enable(),o._attachFocusHandlers(),o._oldIndex=o.selectedIndex=-1,void 0!==l&&(n.index=l),o._initialIndex=n.index,o.requireValueMapper(o.options),o._initList(),o.listView.one("dataBound",o._attachAriaActiveDescendant.bind(o)),o._cascade(),o.one("set",function(e){!e.sender.listView.bound()&&o.hasOptionLabel()&&o._textAccessor(o._optionLabelText())}),n.autoBind?o.dataSource.fetch():-1===o.selectedIndex&&((a=n.text||"")||((s=n.optionLabel)&&0===n.index?a=s:o._isSelect&&(a=t.children(":selected").text())),o._textAccessor(a)),e(o.element).parents("fieldset").is(":disabled")&&o.enable(!1),o.listView.bind("click",function(e){e.preventDefault()}),i.notify(o),o._applyCssClasses()},options:{name:"DropDownList",enabled:!0,autoBind:!0,index:0,text:null,value:null,delay:500,height:200,dataTextField:"",dataValueField:"",optionLabel:"",cascadeFrom:"",cascadeFromField:"",cascadeFromParentField:"",ignoreCase:!0,animation:{},filter:"none",minLength:1,enforceMinLength:!1,virtual:!1,template:null,valueTemplate:null,optionLabelTemplate:null,groupTemplate:"#:data#",fixedGroupTemplate:"#:data#",autoWidth:!1,popup:null,filterTitle:null,size:"medium",fillMode:"solid",rounded:"medium",label:null},events:["open","close",m,"select","filtering","dataBinding","dataBound","cascade","set","kendoKeydown"],setOptions:function(e){r.fn.setOptions.call(this,e),this.listView.setOptions(this._listOptions(e)),this._optionLabel(),this._inputTemplate(),this._accessors(),this._filterHeader(),this._enable(),this._aria(),!this.value()&&this.hasOptionLabel()&&this.select(0)},destroy:function(){r.fn.destroy.call(this),this.wrapper.off(u),this.wrapper.off(c),this.element.off(u),this._arrow.off(),this._arrow=null,this._arrowIcon=null,this.optionLabel.off(),this.filterInput&&this.filterInput.off(c)},open:function(){var e=!!this.dataSource.filter()&&this.dataSource.filter().filters.length>0,t=this.listView;this.popup.visible()||(this.listView.bound()&&this._state!==x?this._allowOpening()&&(this._focusFilter=!0,this.popup.one("activate",this._focusInputHandler),this.popup._hovered=!0,this.wrapper.attr("aria-activedescendant",t._optionID),this.popup.open(),this._resizeFilterInput(),this._focusItem()):(this._open=!0,this._state="rebind",this.filterInput&&(this.filterInput.val(""),this._prev=""),this.filterInput&&1!==this.options.minLength&&!e?(this.refresh(),this.popup.one("activate",this._focusInputHandler),this.wrapper.attr("aria-activedescendant",t._optionID),this.popup.open(),this._resizeFilterInput()):this._filterSource()))},close:function(){this._attachAriaActiveDescendant(),this.popup.close()},_attachAriaActiveDescendant:function(){var e=this.wrapper,t=e.find(".k-input-inner").attr("id");e.attr("aria-describedby",t)},_focusInput:function(){this._focusElement(this.filterInput)},_resizeFilterInput:function(){var e=this.filterInput,t=this._prevent;if(e){var n=this.filterInput[0]===l(),s=i.caret(this.filterInput[0])[0];this._prevent=!0,e.addClass("k-hidden"),e.closest(".k-list-filter").css("width",this.popup.element.css("width")),e.removeClass("k-hidden"),n&&(e.trigger("focus"),i.caret(e[0],s)),this._prevent=t}},_allowOpening:function(){return this.hasOptionLabel()||this.filterInput||r.fn._allowOpening.call(this)},toggle:function(e){this._toggle(e,!0)},current:function(e){var t;if(void 0===e)return!(t=this.listView.focus())&&0===this.selectedIndex&&this.hasOptionLabel()?this.optionLabel:t;this._focus(e)},dataItem:function(t){var i=null;if(null===t)return t;if(void 0===t)i=this.listView.selectedDataItems()[0];else{if("number"!=typeof t){if(this.options.virtual)return this.dataSource.getByUid(e(t).data("uid"));t=t.hasClass("k-list-optionlabel")?-1:e(this.items()).index(t)}else this.hasOptionLabel()&&(t-=1);i=this.dataSource.flatView()[t]}return i||(i=this._optionLabelDataItem()),i},refresh:function(){this.listView.refresh()},text:function(e){var i,n=this,s=n.options.ignoreCase;if((e=null===e?"":e)===t)return n._textAccessor();"string"==typeof e?(i=s?e.toLowerCase():e,n._select(function(e){return e=n._text(e),s&&(e=(e+"").toLowerCase()),e===i}).done(function(){n._textAccessor(n.dataItem()||e),n._refreshFloatingLabel()})):n._textAccessor(e)},_clearFilter:function(){e(this.filterInput).val(""),r.fn._clearFilter.call(this)},value:function(e){var i=this,n=i.listView,s=i.dataSource;return e===t?(e=i._accessor()||i.listView.value()[0])===t||null===e?"":e:(i.requireValueMapper(i.options,e),!e&&i.hasOptionLabel()||(i._initialIndex=null),this.trigger("set",{value:e}),i._request&&i.options.cascadeFrom&&i.listView.bound()?(i._valueSetter&&s.unbind(m,i._valueSetter),i._valueSetter=(function(){i.value(e)}).bind(i),void s.one(m,i._valueSetter)):(i._isFilterEnabled()&&n.bound()&&n.isFiltered()?i._clearFilter():i._fetchData(),void n.value(e).done(function(){i._old=i._valueBeforeCascade=i._accessor(),i._oldIndex=i.selectedIndex,i._refreshFloatingLabel()})))},hasOptionLabel:function(){return this.optionLabel&&!!this.optionLabel[0]},_optionLabel:function(){var t=this,n=t.options,s=n.optionLabel,a=n.optionLabelTemplate;if(!s)return t.optionLabel.off().remove(),void(t.optionLabel=e());a||(a="#:"+("string"==typeof s?"data":i.expr(n.dataTextField,"data"))+"#"),"function"!=typeof a&&(a=i.template(a)),t.optionLabelTemplate=a,t.hasOptionLabel()||(t.optionLabel=e('<div role="option" class="k-list-optionlabel"></div>').prependTo(t.list)),t.optionLabel.html(a(s)).off().on("click.kendoDropDownList touchend.kendoDropDownList",t._click.bind(t)).on(k,t._toggleHover),t.angular("compile",function(){return{elements:t.optionLabel,data:[{dataItem:t._optionLabelDataItem()}]}})},_optionLabelText:function(){var e=this.options.optionLabel;return"string"==typeof e?e:this._text(e)},_optionLabelDataItem:function(){var i=this.options.optionLabel;return this.hasOptionLabel()?e.isPlainObject(i)?new d(i):this._assignInstance(this._optionLabelText(),""):t},_buildOptions:function(e){if(this._isSelect){var i=this.listView.value()[0],n=this._optionLabelDataItem(),s=n&&this._value(n);i!==t&&null!==i||(i=""),n&&(s!==t&&null!==s||(s=""),n='<option value="'+s+'">'+this._text(n)+"</option>"),this._options(e,n,i),i!==a.unifyType(this._accessor(),typeof i)&&(this._customOption=null,this._custom(i))}},_listBound:function(){var e,t=this._initialIndex,i=this._state===y,n=this.dataSource.flatView();this._presetValue=!1,this._renderFooter(),this._renderNoData(),this._toggleNoData(!n.length),this._resizePopup(!0),this.popup.position(),this._buildOptions(n),i||(this._open&&this.toggle(this._allowOpening()),this._open=!1,this._fetch||(n.length?(!this.listView.value().length&&t>-1&&null!==t&&this.select(t),this._initialIndex=null,(e=this.listView.selectedDataItems()[0])&&this.text()!==this._text(e)&&this._selectValue(e)):this._textAccessor()!==this._optionLabelText()&&(this.listView.value(""),this._selectValue(null),this._oldIndex=this.selectedIndex))),this._hideBusy(),this.trigger("dataBound")},_listChange:function(){this._selectValue(this.listView.selectedDataItems()[0]),(this._presetValue||this._old&&-1===this._oldIndex)&&(this._oldIndex=this.selectedIndex)},_filterPaste:function(){this._search()},_attachFocusHandlers:function(){this.wrapper.on("focusin"+c,this._focusinHandler.bind(this)).on("focusout"+c,this._focusoutHandler.bind(this)),this.filterInput&&this.filterInput.on("focusin"+c,this._focusinHandler.bind(this)).on("focusout"+c,this._focusoutHandler.bind(this))},_focusHandler:function(){this.wrapper.trigger("focus")},_focusinHandler:function(){this.wrapper.addClass(g),this._prevent=!1},_focusoutHandler:function(){var e=window.self!==window.top;this._prevent||(clearTimeout(this._typingTimeout),o.mobileOS.ios&&e?this._change():this._blur(),this.wrapper.removeClass(g),this._prevent=!0,this._open=!1,this.element.trigger("blur"))},_wrapperMousedown:function(){this._prevent=!!this.filterInput},_wrapperClick:function(e){e.preventDefault(),this.popup.unbind("activate",this._focusInputHandler),this._focused=this.wrapper,this._prevent=!1,this._toggle()},_editable:function(e){var t=this.element,n=e.disable,s=e.readonly,a=this.wrapper.add(this.filterInput).off(u),r=this.wrapper.off(k);s||n?n?(a.removeAttr(w),r.addClass(v)):r.removeClass(v):(t.prop(p,!1).prop(f,!1),r.removeClass(v).on(k,this._toggleHover),a.attr(w,a.data(w)).attr(_,!1).attr(b,!1).on("keydown"+u,this,this._keydown.bind(this)).on(i.support.mousedown+u,this._wrapperMousedown.bind(this)).on("paste"+u,this._filterPaste.bind(this)),this.wrapper.on("click"+u,this._wrapperClick.bind(this)),this.filterInput?a.on("input"+u,this._search.bind(this)):a.on("keypress"+u,this._keypress.bind(this))),t.attr(p,n).attr(f,s),a.attr(_,n).attr(b,s)},_keydown:function(e){var t,i,n=this,s=e.keyCode,a=e.altKey,r=n.popup.visible();if(n.filterInput&&(t=n.filterInput[0]===l()),s===h.LEFT?(s=h.UP,i=!0):s===h.RIGHT&&(s=h.DOWN,i=!0),!i||!t){if(e.keyCode=s,(a&&s===h.UP||s===h.ESC)&&n._focusElement(n.wrapper),n._state===y&&s===h.ESC&&(n._clearFilter(),n._open=!1,n._state=x),s===h.ENTER&&n._typingTimeout&&n.filterInput&&r)e.preventDefault();else if(s!==h.SPACEBAR||t||(n.toggle(!r),e.preventDefault()),!(i=n._move(e))){if(!r||!n.filterInput){var o=n._focus();if(s===h.HOME?(i=!0,n._firstItem()):s===h.END&&(i=!0,n._lastItem()),i){if(n.trigger("select",{dataItem:n._getElementDataItem(n._focus()),item:n._focus()}))return void n._focus(o);n._select(n._focus(),!0).done(function(){r||n._blur()}),e.preventDefault()}}a||i||!n.filterInput||n._search()}}},_matchText:function(e,i){var n=this.options.ignoreCase;return e!==t&&null!==e&&(e+="",n&&(e=e.toLowerCase()),0===e.indexOf(i))},_shuffleData:function(e,t){var i=this._optionLabelDataItem();return i&&(e=[i].concat(e)),e.slice(t).concat(e.slice(0,t))},_selectNext:function(){var e,t,i,n,s=this,a=s.dataSource.flatView(),r=a.length+(s.hasOptionLabel()?1:0),o=function(e,t){for(var i=0;i<e.length;i++)if(e.charAt(i)!==t)return!1;return!0}(s._word,s._last),l=s.selectedIndex;l=-1===l?0:((e=l+=o?1:0)>=r&&(e-=r),e),a=a.toJSON?a.toJSON():a.slice(),a=s._shuffleData(a,l);for(var d=0;d<r&&(n=s._text(a[d]),!o||!s._matchText(n,s._last))&&!s._matchText(n,s._word);d++);d!==r&&(i=s._focus(),s._select(((t=l+d)>=r&&(t-=r),t)).done(function(){var e=function(){s.popup.visible()||s._change()};s.trigger("select",{dataItem:s._getElementDataItem(s._focus()),item:s._focus()})?s._select(i).done(e):e()}))},_keypress:function(e){if(0!==e.which&&e.keyCode!==i.keys.ENTER){var t=String.fromCharCode(e.charCode||e.keyCode);this.options.ignoreCase&&(t=t.toLowerCase())," "===t&&e.preventDefault(),this._word+=t,this._last=t,this._search()}},_popupOpen:function(){var e=this.popup;e.wrapper=i.wrap(e.element),e.element.closest(".km-root")[0]&&(e.wrapper.addClass("km-popup km-widget"),this.wrapper.addClass("km-widget"))},_popup:function(){r.fn._popup.call(this),this.popup.one("open",this._popupOpen.bind(this))},_getElementDataItem:function(e){return e&&e[0]?e[0]===this.optionLabel[0]?this._optionLabelDataItem():this.listView.dataItemByIndex(this.listView.getElementIndex(e)):null},_click:function(t){var i=this,n=t.item||e(t.currentTarget);t.preventDefault(),i.trigger("select",{dataItem:i._getElementDataItem(n),item:n})?i.close():(i._userTriggered=!0,i._select(n).done(function(){i._blur(),i._focusElement(i.wrapper)}))},_focusElement:function(e){var t=l(),i=this.wrapper,n=this.filterInput,s=o.mobileOS&&(o.touch||o.MSPointers||o.pointers);n&&n[0]===e[0]&&s||n&&((e===n?i:n)[0]===t||this._focusFilter)&&(this._focusFilter=!1,this._prevent=!0,this._focused=e.trigger("focus"))},_searchByWord:function(e){if(e){var t=this;t.options.ignoreCase&&(e=e.toLowerCase()),t._select(function(i){return t._matchText(t._text(i),e)})}},_inputValue:function(){return this.text()},_search:function(){var e=this,t=e.dataSource;if(clearTimeout(e._typingTimeout),e._isFilterEnabled())e._typingTimeout=setTimeout(function(){var t=e.filterInput.val();e._prev!==t&&(e._prev=t,e.search(t),e._resizeFilterInput()),e._typingTimeout=null},e.options.delay);else{if(e._typingTimeout=setTimeout(function(){e._word=""},e.options.delay),!e.listView.bound())return void t.fetch().done(function(){e._selectNext()});e._selectNext()}},_get:function(t){var i,n,s,a="function"==typeof t,r=a?e():e(t);if(this.hasOptionLabel()&&("number"==typeof t?t>-1&&(t-=1):r.hasClass("k-list-optionlabel")&&(t=-1)),a){for(i=this.dataSource.flatView(),s=0;s<i.length;s++)if(t(i[s])){t=s,n=!0;break}n||(t=-1)}return t},_firstItem:function(){this.hasOptionLabel()?this._focus(this.optionLabel):this.listView.focusFirst()},_lastItem:function(){this._resetOptionLabel(),this.listView.focusLast()},_nextItem:function(){var e;return this.optionLabel.hasClass("k-focus")?(this._resetOptionLabel(),this.listView.focusFirst(),e=1):e=this.listView.focusNext(),e},_prevItem:function(){var e;if(!this.optionLabel.hasClass("k-focus"))return e=this.listView.focusPrev(),this.listView.focus()||this.options.virtual||this._focus(this.optionLabel),e},_focusItem:function(){var e=this.options,i=this.listView,n=i.focus(),s=i.select();(s=s[s.length-1])===t&&e.highlightFirst&&!n&&(s=0),s!==t?i.focus(s):!e.optionLabel||e.virtual&&"dataItem"===e.virtual.mapValueTo?i.scrollToIndex(0):(this._focus(this.optionLabel),this._select(this.optionLabel),this.listView.content.scrollTop(0))},_resetOptionLabel:function(e){this.optionLabel.removeClass("k-focus"+(e||"")).removeAttr("id")},_focus:function(e){var i=this.listView,n=this.optionLabel;if(e===t)return!(e=i.focus())&&n.hasClass("k-focus")&&(e=n),e;this._resetOptionLabel(),e=this._get(e),i.focus(e),-1===e&&(n.addClass("k-focus").attr("id",i._optionID),this.filterInput&&this.filterInput.removeAttr("aria-activedescendant").attr("aria-activedescendant",i._optionID))},_select:function(e,t){var i=this;return e=i._get(e),i.listView.select(e).done(function(){t||i._state!==y||(i._state=x),-1===e&&i._selectValue(null)})},_selectValue:function(e){var i=this.options.optionLabel,n=this.listView.select(),s="",a="";(n=n[n.length-1])===t&&(n=-1),this._resetOptionLabel(" k-selected"),e||0===e?(a=e,s=this._dataValue(e),i&&(n+=1)):i&&(this._focus(this.optionLabel.addClass("k-selected")),a=this._optionLabelText(),s="string"==typeof i?"":this._value(i),n=0),this.selectedIndex=n,null===s&&(s=""),this._textAccessor(a),this._accessor(s,n),this._triggerCascade()},_mobile:function(){var e=this.popup,t=o.mobileOS;e.element.parents(".km-root").eq(0).length&&t&&(e.options.animation.open.effects=t.android||t.meego?"fadeIn":t.ios||t.wp?"slideIn:up":e.options.animation.open.effects)},_filterHeader:function(){this.filterInput&&(this.filterInput.off(u).closest(".k-list-filter").remove(),this.filterInput=null),this._isFilterEnabled()&&(this.filterInput=e('<input class="k-input-inner" type="text" />').attr({placeholder:this.element.attr("placeholder"),title:this.options.filterTitle||this.element.attr("title"),role:"searchbox","aria-label":this.options.filterTitle,"aria-haspopup":"listbox","aria-autocomplete":"list"}),this.list.parent().prepend(e('<div class="k-list-filter"><span class="k-searchbox k-input k-input-md k-rounded-md k-input-solid" type="text" autocomplete="off"><span class="k-input-icon k-icon k-i-search"></span></span></div>')).find(".k-searchbox").append(this.filterInput))},_span:function(){var e,t,n=this.wrapper,a="span.k-input-value-text",r=i.guid(),o=this.options;(e=n.find(a))[0]||(t=s.renderButton('<span role="button" class="k-input-button" aria-label="select"></span>',{icon:"arrow-s",size:o.size,fillMode:o.fillMode,shape:"none",rounded:"none"}),n.append('<span id="'+r+'" unselectable="on" class="k-input-inner"><span class="k-input-value-text"></span></span>').append(t).append(this.element),e=n.find(a)),this.span=e,this._arrow=n.find(".k-input-button"),this._arrowIcon=this._arrow.find(".k-icon")},_wrapper:function(){var e,t=this.element,i=t[0];(e=t.parent()).is("span.k-picker")||((e=t.wrap("<span />").parent())[0].style.cssText=i.style.cssText,e[0].title=i.title),this._focused=this.wrapper=e.addClass("k-picker k-dropdownlist").addClass(i.className).removeClass("input-validation-error").css("display","").attr({accesskey:t.attr("accesskey"),unselectable:"on",role:"combobox","aria-expanded":!1}),t.hide().removeAttr("accesskey")},_clearSelection:function(e){this.select(e.value()?0:-1)},_openHandler:function(e){this._adjustListWidth(),this.trigger("open")?e.preventDefault():(this.wrapper.attr("aria-expanded",!0),this.ul.attr("aria-hidden",!1))},_closeHandler:function(e){this.trigger("close")?e.preventDefault():(this.wrapper.attr("aria-expanded",!1),this.ul.attr("aria-hidden",!0))},_inputTemplate:function(){var e=this.options.valueTemplate;if(e=e?i.template(e):i.template("#:this._text(data)#",{useWithBlock:!1}).bind(this),this.valueTemplate=e,this.hasOptionLabel()&&!this.options.optionLabelTemplate)try{this.valueTemplate(this._optionLabelDataItem())}catch(e){throw Error("The `optionLabel` option is not valid due to missing fields. Define a custom optionLabel as shown here http://docs.telerik.com/kendo-ui/api/javascript/ui/dropdownlist#configuration-optionLabel")}},_textAccessor:function(i){var n=null,s=this.valueTemplate,a=this._optionLabelText(),r=this.span;if(i===t)return r.text();e.isPlainObject(i)||i instanceof d?n=i:a&&a===i&&(n=this.options.optionLabel),n||(n=this._assignInstance(i,this._accessor())),this.hasOptionLabel()&&(n!==a&&this._text(n)!==a||(s=this.optionLabelTemplate,"string"!=typeof this.options.optionLabel||this.options.optionLabelTemplate||(n=a)));var o=function(){return{elements:r.get(),data:[{dataItem:n}]}};this.angular("cleanup",o);try{r.html(s(n))}catch(e){r.html("")}this.angular("compile",o)},_preselect:function(e,t){e||t||(t=this._optionLabelText()),this._accessor(e),this._textAccessor(t),this._old=this._accessor(),this._oldIndex=this.selectedIndex,this.listView.setValue(e),this._initialIndex=null,this._presetValue=!0},_assignInstance:function(e,t){var i=this.options.dataTextField,n={};return i?(T(n,i.split("."),e),T(n,this.options.dataValueField.split("."),t),n=new d(n)):n=e,n}});function T(e,t,i){for(var n,s=0,a=t.length-1;s<a;++s)(n=t[s])in e||(e[n]={}),e=e[n];e[t[a]]=i}n.plugin(C),i.cssProperties.registerPrefix("DropDownList","k-picker-"),i.cssProperties.registerValues("DropDownList",[{prop:"rounded",values:i.cssProperties.roundedValues.concat([["full","full"]])}])}(window.kendo.jQuery),eO=window.kendo.jQuery,eV=(eL=(eB=window.kendo).ui).Widget,eU=eB.isFunction,eW=eO.extend,ej="horizontal",eG="vertical",eq="start",eK="resize",e$="resizeend",eY=eV.extend({init:function(e,t){eV.fn.init.call(this,e,t),this.orientation=this.options.orientation.toLowerCase()!=eG?ej:eG,this._positionMouse=this.orientation==ej?"x":"y",this._position=this.orientation==ej?"left":"top",this._sizingDom=this.orientation==ej?"outerWidth":"outerHeight",this.draggable=new eL.Draggable(t.draggableElement||e,{distance:1,filter:t.handle,drag:this._resize.bind(this),dragcancel:this._cancel.bind(this),dragstart:this._start.bind(this),dragend:this._stop.bind(this)}),this.userEvents=this.draggable.userEvents},events:[eK,e$,eq],options:{name:"Resizable",orientation:ej},resize:function(){},_max:function(e){var t=this.hint?this.hint[this._sizingDom]():0,i=this.options.max;return eU(i)?i(e):void 0!==i?this._initialElementPosition+i-t:i},_min:function(e){var t=this.options.min;return eU(t)?t(e):t!==eM?this._initialElementPosition+t:t},_start:function(e){var t=this.options.hint,i=eO(e.currentTarget);this._initialElementPosition=i.position()[this._position],this._initialMousePosition=e[this._positionMouse].startLocation,t&&(this.hint=eU(t)?eO(t(i)):t,this.hint.css({position:"absolute"}).css(this._position,this._initialElementPosition).appendTo(this.element)),this.trigger(eq,e),this._maxPosition=this._max(e),this._minPosition=this._min(e),eO(document.body).css("cursor",i.css("cursor"))},_resize:function(e){var t,i=this._maxPosition,n=this._minPosition,s=this._initialElementPosition+(e[this._positionMouse].location-this._initialMousePosition);t=n!==eM?Math.max(n,s):s,this.position=t=i!==eM?Math.min(i,t):t,this.hint&&this.hint.toggleClass(this.options.invalidClass||"",t==i||t==n).css(this._position,t),this.resizing=!0,this.trigger(eK,eW(e,{position:t}))},_stop:function(e){this.hint&&this.hint.remove(),this.resizing=!1,this.trigger(e$,eW(e,{position:this.position})),eO(document.body).css("cursor","")},_cancel:function(e){this.hint&&(this.position=eM,this.hint.css(this._position,this._initialElementPosition),this._stop(e))},destroy:function(){eV.fn.destroy.call(this),this.draggable&&this.draggable.destroy()},press:function(e){if(e){var t=e.position();this.userEvents.press(t.left,t.top,e[0]),this.targetPosition=t,this.target=e}},move:function(e){var t=this._position,i=this.targetPosition,n=this.position;n===eM&&(n=i[t]),i[t]=n+e,this.userEvents.move(i.left,i.top)},end:function(){this.userEvents.end(),this.target=this.position=eM}}),eB.ui.plugin(eY),function(e,t){var i,n=window.kendo,s=n.ui.Widget,a=n.ui.Popup.TabKeyTrap,r=n.ui.Draggable,o=e.isPlainObject,l=n._activeElement,d=n._outerWidth,h=n._outerHeight,u=e.extend,c=e.each,p=n.template,f="body",m=".kendoWindow",g=".kendoWindowModal",v=".k-window",_=".k-window-title",b=_+"bar",k=".k-window-content",w=".k-resize-handle",y=".k-overlay",x="k-content-frame",C="k-i-loading",T="k-hover",S="k-focus",I="k-window-maximized",D="k-display-inline-flex",F=":visible",E="hidden",A="cursor",z="open",P="activate",H="deactivate",N="close",R="refresh",O="resizeStart",M="resizeEnd",B="dragstart",L="dragend",V="restore",U="error",W="overflow",j="original-overflow-rule",G="zIndex",q=".k-window-actions .k-i-window-minimize,.k-window-actions .k-i-window-maximize",K=".k-i-pin",$=".k-i-unpin",Y=K+","+$,Q=".k-window-titlebar .k-window-action",X=".k-window-titlebar .k-i-refresh",J="WindowEventsHandled",Z=/^0[a-z]*$/i,ee=n.isLocalUrl,et={small:"k-window-sm",medium:"k-window-md",large:"k-window-lg"};function ei(e){return void 0!==e}function en(e,t){return parseInt(e.css(t),10)||0}function es(e,t,i){return e&&isNaN(e)&&0>e.toString().indexOf("px")?e:Math.max(Math.min(parseInt(e,10),i===1/0?i:parseInt(i,10)),t===-1/0?t:parseInt(t,10))}function ea(){return!this.type||this.type.toLowerCase().indexOf("script")>=0}function er(t){for(var i={top:t.offsetTop,left:t.offsetLeft},n=t.offsetParent;n;){i.top+=n.offsetTop,i.left+=n.offsetLeft;var s=e(n).css("overflowX"),a=e(n).css("overflowY");"auto"!==a&&"scroll"!==a||(i.top-=n.scrollTop),"auto"!==s&&"scroll"!==s||(i.left-=n.scrollLeft),n=n.offsetParent}return i}var eo=s.extend({init:function(i,r){var l,d,h,u,c,p,f,g,w={},y=r&&r.actions&&!r.actions.length;s.fn.init.call(this,i,r),u=(r=this.options).position,i=this.element,c=r.content,f=e(window),y&&(r.actions=[]),this.appendTo=e(r.appendTo),this.containment=r.draggable.containment?e(r.draggable.containment).first():null,c&&!o(c)&&(c=r.content={url:c}),i.find("script").filter(ea).remove(),i.parent().is(this.appendTo)||this.containment||u.top!==t&&u.left!==t||(i.is(F)?w=i.offset():(d=i.css("visibility"),h=i.css("display"),i.css({visibility:E,display:""}),w=document.body.contains(i[0])?i.offset():{top:0,left:0},i.css({visibility:d,display:h})),u.top===t&&(u.top=w.top),u.left===t&&(u.left=w.left)),ei(r.visible)&&null!==r.visible||(r.visible=i.is(F)),l=this.wrapper=i.closest(v),i.is(".k-window-content")&&l[0]||(i.addClass("k-window-content"),i.attr("tabindex",0),this._createWindow(i,r),l=this.wrapper=i.closest(v),this.title(this.options.title),this._dimensions()),this.minTop=this.minLeft=-1/0,this.maxTop=this.maxLeft=1/0,this._position(),c&&this.refresh(c),r.visible&&this.toFront(null,!r.modal),p=l.children(k),r.visible&&r.modal&&this._overlay(l.is(F)).css({opacity:.5}),l.on("mouseenter"+m,Q,this._buttonEnter.bind(this)).on("mouseleave"+m,Q,this._buttonLeave.bind(this)).on("click"+m,"> "+Q,this._windowActionHandler.bind(this)).on("keydown"+m,this,this._keydown.bind(this)).on("focus"+m,this._focus.bind(this)).on("blur"+m,this._blur.bind(this)),p.on("keydown"+m,this,this._keydownContent.bind(this)),p.find("."+x)[0]&&!f.data(J)&&(f.on("blur"+m,function(){var t=e(document.activeElement).parent(k);t.length&&n.widgetInstance(t)._focus()}),f.on("focus"+m,function(){e(k).not(".k-dialog-content").each(function(t,i){n.widgetInstance(e(i))._blur()})}),f.data(J,!0)),this._resizable(),this._draggable(),r.pinned&&this.wrapper.is(":visible")&&this.pin(),(g=i.attr("id"))&&(g+="_wnd_title",l.attr({role:"dialog","aria-labelledby":g}).children(b).children(_).attr("id",g)),l.add(l.children(".k-resize-handle,"+b)).on(n.support.mousedown+m,this.toFront.bind(this)),this.touchScroller=n.touchScroller(i),this._resizeHandler=this._onDocumentResize.bind(this),this._marker=n.guid().substring(0,8),e(window).on("resize"+m+this._marker,this._resizeHandler),r.visible&&(this.trigger(z),this.trigger(P)),n.notify(this),this.options.modal&&(this._tabKeyTrap=new a(l),this._tabKeyTrap.trap(),this._tabKeyTrap.shouldTrap=function(){return l.data("isFront")})},_buttonEnter:function(t){e(t.currentTarget).addClass(T)},_buttonLeave:function(t){e(t.currentTarget).removeClass(T)},_focus:function(){this.wrapper.addClass(S)},_blur:function(){this.wrapper.removeClass(S)},_dimensions:function(){var e=this.wrapper,t=this.options,i=t.width,n=t.height,s=t.maxHeight,a=t.size,r=["minWidth","minHeight","maxWidth","maxHeight"],o="content-box"==e.css("box-sizing"),l=o?en(e,"border-left-width")+en(e,"border-right-width"):0,d=o?en(e,"border-top-width")+en(e,"border-bottom-width"):0,h=o?en(e,"padding-top"):0;this.containment&&!this._isPinned&&(this._updateBoundaries(),t.maxHeight=Math.min(this.containment.height-(d+h),s),t.maxWidth=Math.min(this.containment.width-l,t.maxWidth));for(var u=0;u<r.length;u++){var c=t[r[u]]||"";c!=1/0&&e.css(r[u],c)}s!=1/0&&this.element.css("maxHeight",s),i?e.outerWidth(es(i,t.minWidth,t.maxWidth)):e.outerWidth(""),n?e.outerHeight(es(n,t.minHeight,t.maxHeight)):e.outerHeight(""),t.visible||e.removeClass(D).hide(),a&&et[a]&&e.addClass(et[a])},_position:function(){var e,t,i=this.wrapper,n=this.options.position;this._updateBoundaries(),this.containment&&(n.top=n.top||0,n.left=n.left||0,e=n.top.toString().indexOf("%")>0?parseInt(this.containment.height*(parseFloat(n.top)/100),10):n.top,t=n.left.toString().indexOf("%")>0?parseInt(this.containment.width*(parseFloat(n.left)/100),10):n.left,n.top=es(e,this.minTop,this.maxTop),n.left=es(t,this.minLeft,this.maxLeft)),n.top&&n.top.toString().indexOf("px")>0&&(n.top=Number(n.top.replace("px",""))),n.left&&n.left.toString().indexOf("px")>0&&(n.left=Number(n.left.replace("px",""))),0===n.top&&(n.top=n.top.toString()),0===n.left&&(n.left=n.left.toString()),i.css({top:n.top||"",left:n.left||""})},_updateBoundaries:function(){var e=this.containment;if(!e)return null;e.width=e.innerWidth(),e.height=e.innerHeight(),parseInt(e.width,10)>e[0].clientWidth&&(e.width-=n.support.scrollbar()),parseInt(e.height,10)>e[0].clientHeight&&(e.height-=n.support.scrollbar()),e.position=er(e[0]),this._isPinned?(this.minTop=this.minLeft=-1/0,this.maxTop=this.maxLeft=1/0):(this.minTop=e.scrollTop(),this.minLeft=e.scrollLeft(),this.maxLeft=this.minLeft+e.width-d(this.wrapper,!0),this.maxTop=this.minTop+e.height-h(this.wrapper,!0))},_animationOptions:function(e){var t=this.options.animation;return t&&t[e]||({open:{effects:{}},close:{hide:!0,effects:{}}})[e]},_resize:function(){n.resize(this.element.children())},_resizable:function(){var t=this.options.resizable,n=this.wrapper;this.resizing&&(n.off("dblclick"+m).children(w).remove(),this.resizing.destroy(),this.resizing=null),t&&(n.on("dblclick"+m,b,(function(t){e(t.target).closest(".k-window-action").length||this.toggleMaximization()}).bind(this)),c("n e s w se sw ne nw".split(" "),function(e,t){n.append(i.resizeHandle(t))}),this.resizing=new el(this)),n=null},_draggable:function(){var e=this.options.draggable;this.dragging&&(this.dragging.destroy(),this.dragging=null),e&&(this.dragging=new ed(this,e.dragHandle||b))},_actions:function(){var t=this.options,s=t.actions,a=t.pinned,r=this.wrapper.children(b).find(".k-window-actions"),o=["maximize","minimize"];s=e.map(s,function(e){return e=a&&"pin"===e.toLowerCase()?"unpin":e,{name:o.indexOf(e.toLowerCase())>-1?"window-"+e:e}}),r.html(n.render(i.action,s))},setOptions:function(t){var i=this.options.size,n=this.containment&&!this._isPinned?this.containment:e(document),a=JSON.parse(JSON.stringify(t));u(t.position,this.options.position),u(t.position,a.position),this._containerScrollTop=n.scrollTop(),this._containerScrollLeft=n.scrollLeft(),s.fn.setOptions.call(this,t);var r=!1!==this.options.scrollable;if(this.restore(),void 0!==t.title&&this.title(t.title),this.wrapper.removeClass(et[i]),this._dimensions(),this._position(),this._resizable(),this._draggable(),this._actions(),void 0!==t.modal){var o=!1!==this.options.visible;this._enableDocumentScrolling(),this._overlay(t.modal&&o)}this.element.css(W,r?"":"hidden")},events:[z,P,H,N,"minimize","maximize",R,V,O,"resize",M,B,L,"kendoKeydown",U],options:{name:"Window",animation:{open:{effects:{zoom:{direction:"in"},fade:{direction:"in"}},duration:350},close:{effects:{zoom:{direction:"out",properties:{scale:.7}},fade:{direction:"out"}},duration:350,hide:!0}},title:"",actions:["Close"],autoFocus:!0,modal:!1,size:"auto",resizable:!0,draggable:!0,minWidth:90,minHeight:50,maxWidth:1/0,maxHeight:1/0,pinned:!1,scrollable:!0,position:{},content:null,visible:null,height:null,width:null,appendTo:"body",isMaximized:!1,isMinimized:!1},_closable:function(){return e.inArray("close",e.map(this.options.actions,function(e){return e.toLowerCase()}))>-1},_keydownContent:function(e){var t=n.keys;e.keyCode==t.ESC&&this._closable()&&(e.stopPropagation(),this._close(!1))},_keydown:function(e){var t,i,s,a,r,o,l=this.options,d=n.keys,h=e.keyCode,u=this.wrapper,c=l.isMaximized,p=l.isMinimized;h==d.ESC&&this._closable()&&(e.stopPropagation(),this._close(!1)),e.target!=e.currentTarget||this._closing||(e.altKey&&82==h&&this.refresh(),e.altKey&&80==h&&(this.options.pinned?this.unpin():this.pin()),e.altKey&&h==d.UP?p?(this.restore(),this.wrapper.trigger("focus")):c||(this.maximize(),this.wrapper.trigger("focus")):e.altKey&&h==d.DOWN&&(p||c?c&&(this.restore(),this.wrapper.trigger("focus")):(this.minimize(),this.wrapper.trigger("focus"))),t=n.getOffset(u),this.containment&&!this._isPinned&&(t=this.options.position),!l.draggable||e.ctrlKey||e.altKey||c||(this._updateBoundaries(),h==d.UP?(t.top=es(t.top-10,this.minTop,this.maxTop),i=u.css("top",t.top)):h==d.DOWN?(t.top=es(t.top+10,this.minTop,this.maxTop),i=u.css("top",t.top)):h==d.LEFT?(t.left=es(t.left-10,this.minLeft,this.maxLeft),i=u.css("left",t.left)):h==d.RIGHT&&(t.left=es(t.left+10,this.minLeft,this.maxLeft),i=u.css("left",t.left))),l.resizable&&e.ctrlKey&&!c&&!p&&(h==d.UP?(i=!0,a=u.outerHeight()-10):h==d.DOWN&&(i=!0,a=this.containment&&!this._isPinned?Math.min(u.outerHeight()+10,this.containment.height-t.top-en(u,"padding-top")-en(u,"borderBottomWidth")-en(u,"borderTopWidth")):u.outerHeight()+10),h==d.LEFT?(i=!0,s=u.outerWidth()-10):h==d.RIGHT&&(i=!0,s=this.containment&&!this._isPinned?Math.min(u.outerWidth()+10,this.containment.width-t.left-en(u,"borderLeftWidth")-en(u,"borderRightWidth")):u.outerWidth()+10),i&&(r=es(s,l.minWidth,l.maxWidth),o=es(a,l.minHeight,l.maxHeight),isNaN(r)||(u.outerWidth(r),this.options.width=r+"px"),isNaN(o)||(u.outerHeight(o),this.options.height=o+"px"),this.resize())),i&&e.preventDefault())},_overlay:function(t){var i=this.containment?this.containment.children(y):this.appendTo.children(y),n=this.wrapper,s=parseInt(n.css(G),10)-1;return i.length||(i=e("<div class='k-overlay' />")),i.insertBefore(n[0]).css({zIndex:s,display:t?"block":"none"}),this.options.modal.preventScroll&&!this.containment&&this._stopDocumentScrolling(),i},_actionForIcon:function(e){return({"k-i-close":"_close","k-i-window-maximize":"maximize","k-i-window-minimize":"minimize","k-i-window-restore":"restore","k-i-refresh":"refresh","k-i-pin":"pin","k-i-unpin":"unpin"})[/\bk-i(-\w+)+\b/.exec(e[0].className)[0]]},_windowActionHandler:function(t){if(!this._closing){var i=e(t.target).closest(".k-window-action").find(".k-icon"),n=this._actionForIcon(i);return n?(t.preventDefault(),this[n](),!1):void 0}},_modals:function(){for(var t,i=this,n=e(v+F),s=[],a=0;a<n.length;a+=1)(t=i._object(e(n[a])))&&t.options&&t.options.modal&&t.options.visible&&t.options.appendTo===i.options.appendTo&&(!t.containment||i.containment&&t.containment[0]===i.containment[0])&&s.push(t.wrapper[0]);return s.sort(function(e,t){return e.style.zIndex-t.style.zIndex}),i=null,e(s)},_object:function(e){var i=e.children(k);return n.widgetInstance(i)||t},center:function(){var t,i,n=this.options.position,s=this.wrapper,a=e(window),r=0,o=0;return this.options.isMaximized||(this.options.pinned&&!this._isPinned&&this.pin(),this.options.pinned||(r=a.scrollTop(),o=a.scrollLeft()),this.containment&&!this.options.pinned?(t=this.minTop+(this.maxTop-this.minTop)/2,i=this.minLeft+(this.maxLeft-this.minLeft)/2):(this._scrollIsAppended=!0,i=o+Math.max(0,(a.width()-s.outerWidth())/2),t=r+Math.max(0,(a.height()-s.outerHeight()-en(s,"paddingTop"))/2)),s.css({left:i,top:t}),n.top=t,n.left=i),this},title:function(t){var s,a=!0,r=this.wrapper,o=r.children(b),l=o.children(_);return arguments.length?(e.isPlainObject(t)?(s=void 0!==t.text?t.text:"",a=!1!==t.encoded):s=t,!1===s?(r.addClass("k-window-titleless"),r.css("padding-top",0),o.remove()):o.length?l.html(a?n.htmlEncode(s):s):(r.prepend(i.titlebar({title:a?n.htmlEncode(s):s})),this._actions(),o=r.children(b)),this.options.title=s,this):l.html()},content:function(e,t){var i=this.wrapper.children(k),s=i.children(".km-scroll-container");return i=s[0]?s:i,ei(e)?(this.angular("cleanup",function(){return{elements:i.children()}}),n.destroy(this.element.children()),i.empty().html(e),this.angular("compile",function(){for(var e=[],n=i.length;--n>=0;)e.push({dataItem:t});return{elements:i.children(),data:e}}),this):i.html()},open:function(){var t,i,s=this,a=s.wrapper,r=s.options,o=this._animationOptions("open"),l=a.children(k),d=this.containment&&!s._isPinned?this.containment:e(document);if(!s.trigger(z)){if(s._closing&&a.kendoStop(!0,!0),s._closing=!1,s.toFront(),r.autoFocus&&s.wrapper.trigger("focus"),r.visible=!0,r.modal){if(i=!!s._modals().length,(t=s._overlay(i)).kendoStop(!0,!0),o.duration&&n.effects.Fade&&!i){var h=n.fx(t).fadeIn();h.duration(o.duration||0),h.endValue(.5),h.play()}else t.css("opacity",.5);t.show(),e(window).on("focus"+g,function(){a.data("isFront")&&!e(document.activeElement).closest(a).length&&s.wrapper.trigger("focus")})}a.is(F)||(l.css(W,E),s.wrapper.find(Q).addClass("k-button-flat"),a.addClass(D).kendoStop().kendoAnimate({effects:o.effects,duration:o.duration,complete:this._activate.bind(this)}))}return r.isMaximized&&(s._containerScrollTop=d.scrollTop(),s._containerScrollLeft=d.scrollLeft(),s._stopDocumentScrolling()),this.options.pinned&&!this._isPinned&&this.pin(),s},_activate:function(){var e=!1!==this.options.scrollable;this.options.autoFocus&&this.wrapper.trigger("focus"),this.element.css(W,e?"":"hidden"),n.resize(this.element.children()),this.trigger(P)},_removeOverlay:function(i){var s=this._modals(),a=this.options,r=a.modal&&!s.length,o=this._animationOptions("close");if(r){if(!i&&o.duration&&n.effects.Fade){var l=n.fx(a.modal?this._overlay(!0):e(t)).fadeOut();l.duration(o.duration||0),l.startValue(.5),l.play()}else this._overlay(!1).remove();a.modal.preventScroll&&this._enableDocumentScrolling()}else s.length&&(this._object(s.last())._overlay(!0),a.modal.preventScroll&&this._stopDocumentScrolling())},_close:function(t){var i,n=this.wrapper,s=this.options,a=this._animationOptions("open"),r=this._animationOptions("close"),o=this.containment&&!this._isPinned?this.containment:e(document);this._closing||(i=this.trigger(N,{userTriggered:!t}),this._closing=!i,n.is(F)&&!i&&(s.visible=!1,e(v).each(function(t,i){var s=e(i).children(k);i!=n&&s.find("> ."+x).length>0&&s.children(y).remove()}),this._removeOverlay(),this.wrapper.find(Q).removeClass("k-button-flat"),n.kendoStop().kendoAnimate({effects:r.effects||a.effects,reverse:!0===r.reverse,duration:r.duration,complete:this._deactivate.bind(this)}),e(window).off(g)),this.options.isMaximized&&(this._enableDocumentScrolling(),this._containerScrollTop&&this._containerScrollTop>0&&o.scrollTop(this._containerScrollTop),this._containerScrollLeft&&this._containerScrollLeft>0&&o.scrollLeft(this._containerScrollLeft)),this.options.iframe&&this.wrapper.trigger("blur"))},_deactivate:function(){if(this.wrapper.removeClass(D).hide().css("opacity",""),this.trigger(H),this.options.modal){var e=this._object(this._modals().last());e&&e.toFront()}},close:function(){return this._close(!0),this},_actionable:function(t){return e(t).is(Q+","+Q+" .k-icon, :input, a, .k-input, .k-icon, [role='gridcell'], .k-input-value-text")},_shouldFocus:function(t){var i=l(),n=this.wrapper;return this.options.autoFocus&&!e(i).is(n)&&!this._actionable(t)&&(!n.find(i).length||!n.find(t).length)},toFront:function(t,n){var s=this,a=s.wrapper,r=a[0],o=s.containment&&!s._isPinned,l=this._animationOptions("open"),d=+a.css(G),h=d,u=t&&t.target||null;if(e(v).each(function(t,n){var s=e(n),o=s.css(G),l=s.children(k);isNaN(o)||(d=Math.max(+o,d)),a.data("isFront",n==r),n!=r&&l.find("."+x).length&&!l.find(y).length&&l.append(i.overlay)}),(!a[0].style.zIndex||h<d)&&a.css(G,d+2),s.element.find("> .k-overlay").remove(),s._shouldFocus(u)){n||setTimeout(function(){s.wrapper.focus()},l?l.duration:0);var c=o?s.containment.scrollTop():e(window).scrollTop(),p=parseInt(a.position().top,10);!s.options.pinned&&p>0&&p<c&&(c>0?e(window).scrollTop(p):a.css("top",c))}return a=null,s},toggleMaximization:function(){return this._closing?this:this[this.options.isMaximized?"restore":"maximize"]()},restore:function(){var t=this.options,i=t.minHeight,n=this.restoreOptions,s=this.containment&&!this._isPinned?this.containment:e(document);return(t.isMaximized||t.isMinimized)&&(i&&i!=1/0&&this.wrapper.css("min-height",i),n&&!t.isMaximized&&(n.height=es(n.height,this.options.minHeight,this.options.maxHeight),t.position.top+parseInt(n.height,10)>this.maxTop&&(t.position.top=es(t.position.top,this.minTop,this.maxTop-parseInt(n.height,10)),u(n,{left:t.position.left,top:t.position.top}))),this.wrapper.css({position:t.pinned?"fixed":"absolute",left:n.left,top:n.top,width:n.width,height:n.height}).removeClass(I).find(".k-window-content,.k-resize-handle").show().end().find(".k-window-titlebar .k-i-window-restore").parent().remove().end().end().find(q).parent().show().end().end().find(Y).parent().show(),t.isMaximized?this.wrapper.find(".k-i-window-maximize").parent().trigger("focus"):t.isMinimized&&this.wrapper.find(".k-i-window-minimize").parent().trigger("focus"),this.options.width=n.width,this.options.height=n.height,this.options.modal.preventScroll||this._enableDocumentScrolling(),this._containerScrollTop&&this._containerScrollTop>0&&s.scrollTop(this._containerScrollTop),this._containerScrollLeft&&this._containerScrollLeft>0&&s.scrollLeft(this._containerScrollLeft),t.isMaximized=t.isMinimized=!1,this.wrapper.removeAttr("aria-labelled-by"),this.resize(),this.trigger(V)),this},_sizingAction:function(e,t){var n=this.wrapper,s=n[0].style,a=this.options;return a.isMaximized||a.isMinimized||(this.restoreOptions={width:s.width,height:s.height},n.children(w).hide().end().children(b).find(q).parent().hide().eq(0).before(i.action({name:"window-restore"})),t.call(this),this.wrapper.children(b).find(Y).parent().toggle("maximize"!==e),this.trigger(e),n.find(".k-i-window-restore").parent().trigger("focus")),this},maximize:function(){return this._sizingAction("maximize",function(){var t=this.wrapper,i=this.containment&&!this._isPinned,n=t.position(),s=e(document);u(this.restoreOptions,{left:n.left+(i?this.containment.scrollLeft():0),top:n.top+(i?this.containment.scrollTop():0)}),this._containerScrollTop=i?this.containment.scrollTop():s.scrollTop(),this._containerScrollLeft=i?this.containment.scrollLeft():s.scrollLeft(),this._stopDocumentScrolling(),t.css({top:i?this.containment.scrollTop():0,left:i?this.containment.scrollLeft():0,position:i?"absolute":"fixed"}).addClass(I),this.options.isMaximized=!0,this._onDocumentResize()}),this},_stopDocumentScrolling:function(){var t=this.containment;if(t&&!this._isPinned)return this._storeOverflowRule(t),t.css(W,E),void this.wrapper.css({maxWidth:t.innerWidth(),maxHeight:t.innerHeight()});var i=e("body");this._storeOverflowRule(i),i.css(W,E);var n=e("html");this._storeOverflowRule(n),n.css(W,E)},_enableDocumentScrolling:function(){var t=this.containment;if(t&&!this._isPinned)return this._restoreOverflowRule(t),void this.wrapper.css({maxWidth:t.width,maxHeight:t.height});this._restoreOverflowRule(e(document.body)),this._restoreOverflowRule(e("html"))},_storeOverflowRule:function(e){if(!this._isOverflowStored(e)){var t=e.get(0).style.overflow;"string"==typeof t&&e.data(j,t)}},_isOverflowStored:function(e){return"string"==typeof e.data(j)},_restoreOverflowRule:function(e){var i=e.data(j);null!==i&&i!==t?(e.css(W,i),e.removeData(j)):e.css(W,"")},isMaximized:function(){return this.options.isMaximized},minimize:function(){return this._sizingAction("minimize",function(){this.wrapper.css({height:"",minHeight:""}),this.element.hide(),this.options.isMinimized=!0}),this.wrapper.attr("aria-labelled-by",this.element.attr("aria-labelled-by")),this._updateBoundaries(),this},isMinimized:function(){return this.options.isMinimized},pin:function(){var t=e(window),i=this.wrapper,n=this.options,s=n.position,a=this.containment?er(i[0]).top+en(this.containment,"borderTopWidth"):en(i,"top"),r=this.containment?er(i[0]).left+en(this.containment,"borderLeftWidth"):en(i,"left");this.options.isMaximized||(s.top=a,s.left=r,!this._scrollIsAppended||this.containment&&"fixed"===this.containment.css("position")||(s.top-=t.scrollTop(),s.left-=t.scrollLeft(),this._scrollIsAppended=!1),i.css(u(s,{position:"fixed"})),i.children(b).find(K).addClass("k-i-unpin").removeClass("k-i-pin"),this._isPinned=!0,this.options.pinned=!0,this.containment&&(n.maxWidth=n.maxHeight=1/0,i.css({maxWidth:"",maxHeight:""})))},unpin:function(){var t=e(window),i=this.wrapper,n=this.options,s=this.options.position,a=this.containment,r=parseInt(i.css("top"),10)+t.scrollTop(),o=parseInt(i.css("left"),10)+t.scrollLeft();this.options.isMaximized||(this._isPinned=!1,this._scrollIsAppended=!0,this.options.pinned=!1,a&&(this._updateBoundaries(),n.maxWidth=Math.min(a.width,n.maxWidth),n.maxHeight=Math.min(a.height-en(i,"padding-top"),n.maxHeight),i.css({maxWidth:n.maxWidth,maxHeight:n.maxHeight}),r=r<a.position.top?this.minTop:r>a.position.top+a.height?this.maxTop:r+a.scrollTop()-(a.position.top+en(a,"border-top-width")),o=o<a.position.left?this.minLeft:o>a.position.left+a.width?this.maxLeft:o+a.scrollLeft()-(a.position.left+en(a,"border-left-width"))),s.top=es(r,this.minTop,this.maxTop),s.left=es(o,this.minLeft,this.maxLeft),i.css(u(s,{position:""})),i.children(b).find($).addClass("k-i-pin").removeClass("k-i-unpin"))},_onDocumentResize:function(){var t,i,s=this.wrapper,a=e(window),r=n.support.zoomLevel(),o="content-box"==s.css("box-sizing");if(this.options.isMaximized){var l=o?en(s,"border-left-width")+en(s,"border-right-width"):0,d=o?en(s,"border-top-width")+en(s,"border-bottom-width"):0,h=o?en(s,"padding-top"):0;this.containment&&!this._isPinned?(t=this.containment.innerWidth()-l,i=this.containment.innerHeight()-(d+h)):(t=a.width()/r-l,i=a.height()/r-(d+h)),s.css({width:t,height:i}),this.options.width=t,this.options.height=i,this.resize()}},refresh:function(t){var n,s,a,r=this.options,l=e(this.element);return o(t)||(t={url:t}),t=u(r.content,t),s=ei(r.iframe)?r.iframe:t.iframe,(a=t.url)?(ei(s)||(s=!ee(a)),s?((n=l.find("."+x)[0])?n.src=a||n.src:l.html(i.contentFrame(u({},r,{content:t}))),l.find("."+x).off("load"+m).on("load"+m,this._triggerRefresh.bind(this))):this._ajaxRequest(t)):(t.template&&this.content(p(t.template)({})),this.trigger(R)),l.toggleClass("k-window-iframecontent",!!s),this},_triggerRefresh:function(){this.trigger(R)},_ajaxComplete:function(){clearTimeout(this._loadingIconTimeout),this.wrapper.find(X).removeClass(C)},_ajaxError:function(e,t){this.trigger(U,{status:t,xhr:e})},_ajaxSuccess:function(e){return function(t){var i=t;e&&(i=p(e)(t||{})),this.content(i,t),this.element.prop("scrollTop",0),this.trigger(R)}},_showLoading:function(){this.wrapper.find(X).addClass(C)},_ajaxRequest:function(t){this._loadingIconTimeout=setTimeout(this._showLoading.bind(this),100),e.ajax(u({type:"GET",dataType:"html",cache:!1,error:this._ajaxError.bind(this),complete:this._ajaxComplete.bind(this),success:this._ajaxSuccess(t.template).bind(this)},t))},_destroy:function(){this.resizing&&this.resizing.destroy(),this.dragging&&this.dragging.destroy(),this.wrapper.off(m).children(k).off(m).end().find(".k-resize-handle,.k-window-titlebar").off(m),e(window).off("resize"+m+this._marker),e(window).off(g),e(window).off(m),clearTimeout(this._loadingIconTimeout),s.fn.destroy.call(this),this.unbind(t),n.destroy(this.wrapper)},destroy:function(){this._destroy(),this.options.modal&&this._removeOverlay(!0),this.wrapper.empty().remove(),this.wrapper=this.appendTo=this.element=e()},_createWindow:function(){var t,s,a=this.element,r=this.options,o=n.support.isRtl(a);!1===r.scrollable&&a.css("overflow","hidden"),s=e(i.wrapper(r)),t=a.find("iframe:not(.k-content-frame)").map(function(){var e=this.getAttribute("src");return this.src="",e}),s.toggleClass("k-rtl",o).attr("tabindex",0).append(a).find("iframe:not(.k-content-frame)").each(function(e){this.src=t[e]}),this.containment?this.containment.prepend(s):this.appendTo&&s.appendTo(this.appendTo),s.find(".k-window-title").css(o?"left":"right",d(s.find(".k-window-actions"))+10),a.css("visibility","").show(),a.find("[data-role=editor]").each(function(){var t=e(this).data("kendoEditor");t&&t.refresh()}),s=a=null}});function el(e){this.owner=e,this._preventDragging=!1,this._draggable=new r(e.wrapper,{filter:">.k-resize-handle",group:e.wrapper.id+"-resizing",dragstart:this.dragstart.bind(this),drag:this.drag.bind(this),dragend:this.dragend.bind(this)}),this._draggable.userEvents.bind("press",this.addOverlay.bind(this)),this._draggable.userEvents.bind("release",this.removeOverlay.bind(this))}function ed(e,t){this.owner=e,this._preventDragging=!1,this._draggable=new r(e.wrapper,{filter:t,group:e.wrapper.id+"-moving",dragstart:this.dragstart.bind(this),drag:this.drag.bind(this),dragend:this.dragend.bind(this),dragcancel:this.dragcancel.bind(this)}),this._draggable.userEvents.stopPropagation=!1}i={wrapper:p("<div class='k-widget k-window'></div>"),action:p("<a role='button' href='\\#' class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button k-window-action' aria-label='#= name #'><span class='k-button-icon k-icon k-i-#= name.toLowerCase() #'></span></a>"),titlebar:p("<div class='k-window-titlebar k-hstack'><span class='k-window-title'>#= title #</span><div class='k-window-actions k-hstack'></div></div>"),overlay:"<div class='k-overlay'></div>",contentFrame:p("<iframe frameborder='0' title='#= title #' class='k-content-frame' src='#= content.url #'>This page requires frames in order to show content</iframe>"),resizeHandle:p("<div aria-hidden='true' class='k-resize-handle k-resize-#= data #'></div>")},el.prototype={addOverlay:function(){this.owner.wrapper.append(i.overlay)},removeOverlay:function(){this.owner.wrapper.find(y).remove()},dragstart:function(t){var i=this.owner,s=i.wrapper;if(this._preventDragging=i.trigger(O),!this._preventDragging){this.elementPadding=parseInt(s.css("padding-top"),10),this.initialPosition=n.getOffset(s,"position"),this.resizeDirection=t.currentTarget.prop("className").replace("k-resize-handle k-resize-",""),this.initialSize={width:s.outerWidth(),height:s.outerHeight()},i._updateBoundaries(),this.containerOffset=i.containment?i.containment.position:n.getOffset(i.appendTo);var a=s.offsetParent();if(a.is("html"))this.containerOffset.top=this.containerOffset.left=0;else{var r=a.css("margin-top"),o=a.css("margin-left");if(!Z.test(r)||!Z.test(o)){var l=er(s[0]),d=l.left-this.containerOffset.left-this.initialPosition.left,h=l.top-this.containerOffset.top-this.initialPosition.top;this._relativeElMarginLeft=d>1?d:0,this._relativeElMarginTop=h>1?h:0,this.initialPosition.left+=this._relativeElMarginLeft,this.initialPosition.top+=this._relativeElMarginTop}}s.children(w).not(t.currentTarget).hide(),e(f).css(A,t.currentTarget.css(A))}},drag:function(t){if(!this._preventDragging){var i,s,a,r,o=this.owner,l=o.wrapper,d=o.options,h=d.position,u=this.resizeDirection,c=this.containerOffset,p=this.initialPosition,f=this.initialSize,m=o.containment&&!o._isPinned,g=n.support.isRtl(o.containment),v=m&&g&&o.containment.innerWidth()>o.containment.width?n.support.scrollbar():0,_=m?{top:o.containment.scrollTop(),left:o.containment.scrollLeft()}:{top:0,left:0},b=Math.max(t.x.location,0),k=Math.max(t.y.location,0);u.indexOf("e")>=0?(i=o.containment&&b-f.width>=o.maxLeft-_.left+c.left+v?o.maxLeft+v-p.left+f.width-_.left:b-p.left-c.left,l.outerWidth(es(i,d.minWidth,d.maxWidth))):u.indexOf("w")>=0&&(i=es((r=p.left+f.width+c.left)-b,d.minWidth,d.maxWidth),h.left=r-i-c.left-v-(this._relativeElMarginLeft||0)+_.left,o.containment&&h.left<=o.minLeft&&(h.left=o.minLeft,i=es(r-v-h.left-c.left+_.left,d.minWidth,d.maxWidth)),l.css({left:h.left,width:i}));var w=k;o.options.pinned&&(w-=e(window).scrollTop()),u.indexOf("s")>=0?(s=w-p.top-this.elementPadding-c.top,w-f.height-this.elementPadding>=o.maxTop+c.top-_.top&&(s=o.maxTop-p.top+f.height-_.top),l.outerHeight(es(s,d.minHeight,d.maxHeight))):u.indexOf("n")>=0&&(s=es((a=p.top+f.height+c.top)-w,d.minHeight,d.maxHeight),h.top=a-s-c.top-(this._relativeElMarginTop||0)+_.top,h.top<=o.minTop&&o.containment&&(h.top=o.minTop,s=es(a-h.top-c.top+_.top,d.minHeight,d.maxHeight)),l.css({top:h.top,height:s})),i&&(o.options.width=i+"px"),s&&(o.options.height=s+"px"),o.resize()}},dragend:function(t){if(!this._preventDragging){var i=this.owner,n=i.wrapper;return n.children(w).not(t.currentTarget).show(),e(f).css(A,""),i.touchScroller&&i.touchScroller.reset(),27==t.keyCode&&n.css(this.initialPosition).css(this.initialSize),i.trigger(M),!1}},destroy:function(){this._draggable&&this._draggable.destroy(),this._draggable=this.owner=null}},ed.prototype={dragstart:function(t){var s=this.owner,a=s.options.draggable,r=s.element,o=r.find(".k-window-actions"),l=n.getOffset(s.appendTo);this._preventDragging=s.trigger(B)||!a,this._preventDragging||s.isMaximized()||(s.initialWindowPosition=n.getOffset(s.wrapper,"position"),s.initialPointerPosition={left:s.options.position.left,top:s.options.position.top},s.startPosition={left:t.x.client-s.initialWindowPosition.left,top:t.y.client-s.initialWindowPosition.top},s._updateBoundaries(),s.containment||(o.length>0?s.minLeft=d(o)+parseInt(o.css("right"),10)-d(r):s.minLeft=20-d(r),s.minLeft-=l.left,s.minTop=-l.top),e(i.overlay).appendTo(s.wrapper).css({opacity:0}),s.wrapper.children(w).hide(),e(f).css(A,t.currentTarget.css(A)))},drag:function(t){var i,s,a=this.owner,r=a.options.position,o=a.options.draggable.axis;this._preventDragging||a.isMaximized()||(o&&"x"!==o.toLowerCase()||(i=t.x.client-a.startPosition.left,a.containment&&!a._isPinned&&(i+=a.containment.scrollLeft()),r.left=es(i,a.minLeft,a.maxLeft)),o&&"y"!==o.toLowerCase()||(s=t.y.client-a.startPosition.top,a.containment&&!a._isPinned&&(s+=a.containment.scrollTop()),r.top=es(s,a.minTop,a.maxTop)),n.support.transforms?e(a.wrapper).css("transform","translate("+(r.left-a.initialPointerPosition.left)+"px, "+(r.top-a.initialPointerPosition.top)+"px)"):e(a.wrapper).css(r))},_finishDrag:function(){var t=this.owner;t.wrapper.children(w).toggle(!t.options.isMinimized).end().find(y).remove(),e(f).css(A,"")},dragcancel:function(e){this._preventDragging||(this._finishDrag(),e.currentTarget.closest(v).css(this.owner.initialWindowPosition))},dragend:function(){var t=this.owner;if(!this._preventDragging&&!t.isMaximized())return e(t.wrapper).css(t.options.position).css("transform",""),this._finishDrag(),t.trigger(L),!1},destroy:function(){this._draggable&&this._draggable.destroy(),this._draggable=this.owner=null}},n.ui.plugin(eo)}(window.kendo.jQuery),window.kendo=window.kendo||{};var uJ=kendo.Class,uZ=kendo.support,u0={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},u1=uZ.browser,u2=function(e){var t=Object.keys(u0);t.push("transparent");var i=RegExp("^("+t.join("|")+")(\\W|$)","i");return u2=function(e){return i.exec(e)},i.exec(e)},u3=uJ.extend({init:function(){},toHSV:function(){return this},toRGB:function(){return this},toHex:function(e){return this.toBytes().toHex(e)},toBytes:function(){return this},toCss:function(e){return"#"+this.toHex(e)},toCssRgba:function(){var e=this.toBytes();return"rgba("+e.r+", "+e.g+", "+e.b+", "+parseFloat(Number(this.a).toFixed(3))+")"},toDisplay:function(){return u1.msie&&u1.version<9?this.toCss():this.toCssRgba()},equals:function(e){return e===this||null!=e&&this.toCssRgba()===ct(e).toCssRgba()},diff:function(e){if(null===e)return NaN;var t=this.toBytes(),i=e.toBytes();return Math.sqrt(Math.pow(.3*(t.r-i.r),2)+Math.pow(.59*(t.g-i.g),2)+Math.pow(.11*(t.b-i.b),2))},clone:function(){var e=this.toBytes();return e===this&&(e=new u6(e.r,e.g,e.b,e.a)),e}}),u9=u3.extend({init:function(e,t,i,n){u3.fn.init.call(this),this.r=e,this.g=t,this.b=i,this.a=n},toHSV:function(){var e,t,i=this.r,n=this.g,s=this.b,a=Math.max(i,n,s),r=a-Math.min(i,n,s);return 0===r?new u8(0,0,a,this.a):(0!==a?(t=r/a,(e=(i===a?(n-s)/r:n===a?2+(s-i)/r:4+(i-n)/r)*60)<0&&(e+=360)):(t=0,e=-1),new u8(e,t,a,this.a))},toHSL:function(){var e,t,i=this.r,n=this.g,s=this.b,a=Math.max(i,n,s),r=Math.min(i,n,s),o=(a+r)/2;if(a===r)e=t=0;else{var l=a-r;switch(t=o>.5?l/(2-a-r):l/(a+r),a){case i:e=(n-s)/l+(n<s?6:0);break;case n:e=(s-i)/l+2;break;case s:e=(i-n)/l+4}}return new u4(60*e,100*t,100*o,this.a)},toBytes:function(){return new u6(255*this.r,255*this.g,255*this.b,this.a)}}),u6=u9.extend({init:function(e,t,i,n){u9.fn.init.call(this,Math.round(e),Math.round(t),Math.round(i),n)},toRGB:function(){return new u9(this.r/255,this.g/255,this.b/255,this.a)},toHSV:function(){return this.toRGB().toHSV()},toHSL:function(){return this.toRGB().toHSL()},toHex:function(e){var t=u5(this.r,2)+u5(this.g,2)+u5(this.b,2);return e&&e.alpha&&(t+=u5(Math.round(255*this.a),2)),t},toBytes:function(){return this}});function u5(e,t,i){void 0===i&&(i="0");for(var n=e.toString(16);t>n.length;)n=i+n;return n}var u8=u3.extend({init:function(e,t,i,n){u3.fn.init.call(this),this.h=e,this.s=t,this.v=i,this.a=n},toRGB:function(){var e,t,i,n=this.h,s=this.s,a=this.v;if(0===s)e=t=i=a;else{var r=Math.floor(n/=60),o=n-r,l=a*(1-s),d=a*(1-s*o),h=a*(1-s*(1-o));switch(r){case 0:e=a,t=h,i=l;break;case 1:e=d,t=a,i=l;break;case 2:e=l,t=a,i=h;break;case 3:e=l,t=d,i=a;break;case 4:e=h,t=l,i=a;break;default:e=a,t=l,i=d}}return new u9(e,t,i,this.a)},toHSL:function(){return this.toRGB().toHSL()},toBytes:function(){return this.toRGB().toBytes()}}),u4=u3.extend({init:function(e,t,i,n){u3.fn.init.call(this),this.h=e,this.s=t,this.l=i,this.a=n},toRGB:function(){var e,t,i,n=this.h/360,s=this.s/100,a=this.l/100;if(0===s)e=t=i=a;else{var r=a<.5?a*(1+s):a+s-a*s,o=2*a-r;e=u7(o,r,n+1/3),t=u7(o,r,n),i=u7(o,r,n-1/3)}return new u9(e,t,i,this.a)},toHSV:function(){return this.toRGB().toHSV()},toBytes:function(){return this.toRGB().toBytes()}});function u7(e,t,i){var n=i;return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function ce(e){return parseFloat(parseFloat(parseInt(e,16)/255).toFixed(3))}function ct(e,t){if(null==e||"none"===e)return null;if(e instanceof u3)return e;var i,n,s=e.toLowerCase();if(i=u2(s))return(s="transparent"===i[1]?new u9(1,1,1,0):ct(u0[i[1]],t)).match=[i[1]],s;if((i=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\b/i.exec(s))?n=new u6(parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),1):(i=/^#?([0-9a-f])([0-9a-f])([0-9a-f])\b/i.exec(s))?n=new u6(parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16),1):(i=/^#?([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])\b/i.exec(s))?n=new u6(parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16),ce(i[4]+i[4])):(i=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\b/i.exec(s))?n=new u6(parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),ce(i[4])):(i=/^rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/.exec(s))?n=new u6(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),1):(i=/^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9.]+)\s*\)/.exec(s))?n=new u6(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),parseFloat(i[4])):(i=/^rgb\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*\)/.exec(s))?n=new u9(parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])/100,1):(i=/^rgba\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9.]+)\s*\)/.exec(s))&&(n=new u9(parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])/100,parseFloat(i[4]))),n)n.match=i;else if(!t)throw Error("Cannot parse color: "+s);return n}var ci=uJ.extend({init:function(e){if(1==arguments.length)for(var t=ci.formats,i=this.resolveColor(e),n=0;n<t.length;n++){var s=t[n].re,a=t[n].process,r=s.exec(i);if(r){var o=a(r);this.r=o[0],this.g=o[1],this.b=o[2]}}else this.r=arguments[0],this.g=arguments[1],this.b=arguments[2];this.r=this.normalizeByte(this.r),this.g=this.normalizeByte(this.g),this.b=this.normalizeByte(this.b)},toHex:function(){var e=this.padDigit,t=this.r.toString(16),i=this.g.toString(16),n=this.b.toString(16);return"#"+e(t)+e(i)+e(n)},resolveColor:function(e){var t=e||"black";return"#"===t.charAt(0)&&(t=t.substr(1,6)),t=(t=t.replace(/ /g,"")).toLowerCase(),t=ci.namedColors[t]||t},normalizeByte:function(e){return e<0||isNaN(e)?0:e>255?255:e},padDigit:function(e){return 1===e.length?"0"+e:e},brightness:function(e){var t=Math.round;return this.r=t(this.normalizeByte(this.r*e)),this.g=t(this.normalizeByte(this.g*e)),this.b=t(this.normalizeByte(this.b*e)),this},percBrightness:function(){return Math.sqrt(.241*this.r*this.r+.691*this.g*this.g+.068*this.b*this.b)},isDark:function(){return 180>this.percBrightness()}});ci.fromBytes=function(e,t,i,n){return new u6(e,t,i,null!=n?n:1)},ci.fromRGB=function(e,t,i,n){return new u9(e,t,i,null!=n?n:1)},ci.fromHSV=function(e,t,i,n){return new u8(e,t,i,null!=n?n:1)},ci.fromHSL=function(e,t,i,n){return new u4(e,t,i,null!=n?n:1)},ci.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],ci.namedColors=u0,kendo.deepExtend(kendo,{parseColor:ct,namedColors:u0,Color:ci}),function(e,t){var i=window.kendo,n=i.ui.Widget,s=i.ui.Draggable,a=i._outerWidth,r=i._outerHeight,o=e.extend,l=i.format,d=i.parseFloat,h=Array.isArray,u=Math,c=i.support,p=c.pointers,f=c.msPointers,m="change",g="slide",v=".slider",_="touchstart"+v+" mousedown"+v,b=p?"pointerdown"+v:f?"MSPointerDown"+v:_,k="touchend"+v+" mouseup"+v,w=p?"pointerup":f?"MSPointerUp"+v:k,y="moveSelection",x="keydown"+v,C="click"+v,T="mouseover"+v,S="focus"+v,I="blur"+v,D=".k-draghandle",F=".k-tick",E="k-disabled",A="disabled",z="tabindex",P=i.getTouches,H="aria-valuetext",N="aria-valuenow",R=n.extend({init:function(e,t){if(n.fn.init.call(this,e,t),t=this.options,this._isHorizontal="horizontal"==t.orientation,this._isRtl=this._isHorizontal&&i.support.isRtl(e),this._position=this._isHorizontal?"left":"bottom",this._sizeFn=this._isHorizontal?"width":"height",this._outerSize=this._isHorizontal?a:r,t.tooltip.format=t.tooltip.enabled&&t.tooltip.format||"{0}",t.smallStep<=0)throw Error("Kendo UI Slider smallStep must be a positive number.");this._createHtml(),this._trackDiv=this.wrapper.find(".k-slider-track"),this._maxSelection=this._trackDiv[this._sizeFn](),this._sliderItemsInit(),this._reset(),this._tabindex(this.wrapper.find(D)),this[t.enabled?"enable":"disable"]();var s=i.support.isRtl(this.wrapper)?-1:1;this._keyMap={37:M(-1*s*t.smallStep),40:M(-t.smallStep),39:M(1*s*t.smallStep),38:M(+t.smallStep),35:B(t.max),36:B(t.min),33:M(+t.largeStep),34:M(-t.largeStep)},this._ariaLabel(this.wrapper.find(D)),i.notify(this)},events:[m,g],options:{enabled:!0,min:0,max:10,smallStep:1,largeStep:5,orientation:"horizontal",tickPlacement:"both",tooltip:{enabled:!0,format:"{0}"}},_distance:function(){return V(this.options.max-this.options.min)},_resize:function(){this.wrapper.find(".k-slider-items").remove(),this._maxSelection=this._trackDiv[this._sizeFn](),this._sliderItemsInit(),this._refresh(),this.options.enabled&&this.enable(!0)},_sliderItemsInit:function(){var t=this.options,i=(this._maxSelection-2)/((t.max-t.min)/t.smallStep),n=this._calculateItemsWidth(u.floor(j(this._distance())/j(t.smallStep)));"none"!=t.tickPlacement&&i>=2&&(e(this.element).parent().find(".k-slider-items").remove(),this._trackDiv.before(function(e,t){var i,n="<ul class='k-reset k-slider-items' role='presentation'>",s=u.floor(V(t/e.smallStep))+1;for(i=0;i<s;i++)n+="<li class='k-tick'></li>";return n+"</ul>"}(t,this._distance())),this._setItemsTitle()),this._calculateSteps(n),"none"!=t.tickPlacement&&i>=2&&t.largeStep>=t.smallStep&&(this._setItemsLargeTick(),this.wrapper.find(F).first().addClass("k-first"),this.wrapper.find(F).last().addClass("k-last"))},getSize:function(){return i.dimensions(this.wrapper)},_setItemsTitle:function(){for(var t=this.options,i=this.wrapper.find(F),n=t.min,s=i.length,a=0;a<=s;a+=1)e(i[a]).attr("title",l(t.tooltip.format,V(n))),n+=t.smallStep},_setItemsLargeTick:function(){var t,i=this.options,n=this.wrapper.find(F),s=0;if(j(i.largeStep)%j(i.smallStep)==0||this._distance()/i.largeStep>=3)for(this._isHorizontal||this._isRtl||(n=e.makeArray(n).reverse()),s=0;s<n.length;s++){t=e(n[s]);var a=V(j(this._values[s]-this.options.min));a%j(i.smallStep)==0&&a%j(i.largeStep)==0&&(t.addClass("k-tick-large").html("<span class='k-label'>"+t.attr("title")+"</span>"),0!==s&&s!==n.length-1&&t.css("line-height",t[this._sizeFn]()+"px"))}},_calculateItemsWidth:function(e){var t,i,n,s=this.options,a=parseFloat(this._trackDiv.css(this._sizeFn))+1,r=this._distance(),o=j(r)/j(s.smallStep),l=a/j(r);for(o-e>0&&(a-=j(r)%j(s.smallStep)*l),t=a/e,i=[],n=0;n<e-1;n++)i[n]=t;return i[e-1]=i[e]=t/2,this._roundWidths(i)},_roundWidths:function(e){var t,i=0,n=e.length;for(t=0;t<n;t++)i+=e[t]-u.floor(e[t]),e[t]=u.floor(e[t]);return i=u.round(i),this._addAdditionalSize(i,e)},_addAdditionalSize:function(e,t){if(0===e)return t;var i,n=parseFloat(t.length-1)/parseFloat(1==e?e:e-1);for(i=0;i<e;i++)t[parseInt(u.round(n*i),10)]+=1;return t},_calculateSteps:function(e){var t,i=this.options,n=i.min,s=0,a=this._distance(),r=u.ceil(j(a)/j(i.smallStep)),o=1;if(r+=j(a)/j(i.smallStep)%1==0?1:0,e.splice(0,0,2*e[r-2]),e.splice(r-1,1,2*e.pop()),this._pixelSteps=[s],this._values=[n],0!==r){for(;o<r;)s+=(e[o-1]+e[o])/2,this._pixelSteps[o]=s,n+=i.smallStep,this._values[o]=V(n),o++;t=j(a)%j(i.smallStep)==0?r-1:r,this._pixelSteps[t]=this._maxSelection,this._values[t]=i.max,this._isRtl&&(this._pixelSteps.reverse(),this._values.reverse())}},_getValueFromPosition:function(e,t){var i,n=this.options,s=u.max(n.smallStep*(this._maxSelection/this._distance()),0),a=0,r=s/2;if(this._isHorizontal?(a=e-t.startPoint,this._isRtl&&(a=this._maxSelection-a)):a=t.startPoint-e,this._maxSelection-(parseInt(this._maxSelection%s,10)-3)/2<a)return n.max;for(i=0;i<this._pixelSteps.length;i++)if(u.abs(this._pixelSteps[i]-a)-1<=r)return V(this._values[i])},_getFormattedValue:function(e,t){var n,s,a,r="",o=this.options.tooltip;return h(e)?(s=e[0],a=e[1]):t&&t.type&&(s=t.selectionStart,a=t.selectionEnd),t&&(n=t.tooltipTemplate),!n&&o.template&&(n=i.template(o.template)),h(e)||t&&t.type?r=n?n({selectionStart:s,selectionEnd:a}):(s=l(o.format,s))+" - "+(a=l(o.format,a)):(t&&(t.val=e),r=n?n({value:e}):l(o.format,e)),r},_getDraggableArea:function(){var e=i.getOffset(this._trackDiv);return{startPoint:this._isHorizontal?e.left:e.top+this._maxSelection,endPoint:this._isHorizontal?e.left+this._maxSelection:e.top}},_createHtml:function(){var e,i,n,s,a,r,o,l,d,h,u,c,p,f=this.element,m=this.options,g=f.find("input");2==g.length?(g.eq(0).prop("value",L(m.selectionStart)),g.eq(1).prop("value",L(m.selectionEnd))):f.prop("value",L(m.value)),this.wrapper=f.wrap((e=this._isHorizontal,i=m.style?m.style:f.attr("style"),n=f.attr("class")?" "+f.attr("class"):"",s="","bottomRight"==m.tickPlacement?s=" k-slider-bottomright":"topLeft"==m.tickPlacement&&(s=" k-slider-topleft"),"<div class='k-widget k-slider"+(e?" k-slider-horizontal":" k-slider-vertical")+n+"'"+(i=i?" style='"+i+"'":"")+"><div class='k-slider-track-wrap"+s+"'></div></div>")).hide().parents(".k-slider"),m.showButtons&&this.wrapper.find(".k-slider-track-wrap").after(O(m,"increase",this._isHorizontal,this._isRtl)).before(O(m,"decrease",this._isHorizontal,this._isRtl)),f.before((a=this._isHorizontal,h=2==(d=f.is("input")?1:2)?m.leftDragHandleTitle:m.dragHandleTitle,u=m.value,c=m.selectionStart,p=m.selectionEnd,1===d?null!==(r=f.val())&&void 0!==r&&"null"!==r&&(null!=u||(u=r)):(o=f.find("input").eq(0).val(),l=f.find("input").eq(1).val(),null!==o&&void 0!==o&&"null"!==o&&(null!==c&&c!==t||(c=o)),null!==l&&l!==t&&"null"!==l&&(null!==p&&p!==t||(p=l))),"<div class='k-slider-track'><div class='k-slider-selection'><!-- --></div><span tabindex='0' class='k-draghandle' title='"+h+"' role='slider' "+(!1===a?"aria-orientation='vertical' ":"")+"aria-valuemin='"+m.min+"' aria-valuemax='"+m.max+"' aria-valuenow='"+(d>1?c||m.min:u||m.min)+"'></span>"+(d>1?"<span tabindex='0' class='k-draghandle' title='"+m.rightDragHandleTitle+"'role='slider' "+(!1===a?"aria-orientation='vertical' ":"")+"aria-valuemin='"+m.min+"' aria-valuemax='"+m.max+"' aria-valuenow='"+(p||m.max)+"'></span>":"")+"</div>"))},_focus:function(t){var i=t.target,n=this.value(),s=this._drag;s||(i==this.wrapper.find(D).eq(0)[0]?(s=this._firstHandleDrag,this._activeHandle=0):(s=this._lastHandleDrag,this._activeHandle=1),n=n[this._activeHandle]),e(i).addClass("k-focus k-selected"),s&&(this._activeHandleDrag=s,s.selectionStart=this.options.selectionStart,s.selectionEnd=this.options.selectionEnd,s._updateTooltip(n))},_focusWithMouse:function(t){t=e(t);var i=this,n=t.is(D)?t.index():0;window.setTimeout(function(){i.wrapper.find(D)[2==n?1:0].focus()},1),i._setTooltipTimeout()},_blur:function(t){var i=this._activeHandleDrag;e(t.target).removeClass("k-focus k-selected"),i&&(i._removeTooltip(),delete this._activeHandleDrag,delete this._activeHandle)},_setTooltipTimeout:function(){var e=this;e._tooltipTimeout=window.setTimeout(function(){var t=e._drag||e._activeHandleDrag;t&&t._removeTooltip()},300)},_clearTooltipTimeout:function(){window.clearTimeout(this._tooltipTimeout);var e=this._drag||this._activeHandleDrag;e&&e.tooltipDiv&&e.tooltipDiv.stop(!0,!1).css("opacity",1)},_reset:function(){var t=this.element,i=t.attr("form"),n=i?e("#"+i):t.closest("form");n[0]&&(this._form=n.on("reset",this._formResetHandler.bind(this)))},min:function(e){if(!e)return this.options.min;this.setOptions({min:e})},max:function(e){if(!e)return this.options.max;this.setOptions({max:e})},setOptions:function(e){n.fn.setOptions.call(this,e),this._sliderItemsInit(),this._refresh()},destroy:function(){this._form&&this._form.off("reset",this._formResetHandler),n.fn.destroy.call(this)}});function O(e,t,i){var n="";return n=i?"increase"===t?"k-i-arrow-e":"k-i-arrow-w":"increase"==t?"k-i-arrow-n":"k-i-arrow-s","<a role='button' class='k-button k-button-md k-rounded-full k-button-solid k-button-solid-base k-icon-button k-button-"+t+"' title='"+e[t+"ButtonTitle"]+"' aria-label='"+e[t+"ButtonTitle"]+"'><span class='k-button-icon k-icon "+n+"'></span></a>"}function M(e){return function(t){return t+e}}function B(e){return function(){return e}}function L(e){return(e+"").replace(".",i.cultures.current.numberFormat["."])}function V(e){var t,i,n,s;return n=(e=parseFloat(e,10)).toString(),s=0,(n=n.split("."))[1]&&(s=n[1].length),t=s>10?10:s,i=u.pow(10,t||0),u.round(e*i)/i}function U(e,i){var n=d(e.getAttribute(i));return null===n&&(n=t),n}function W(e){return void 0!==e}function j(e){return 1e4*e}var G=R.extend({init:function(i,n){var s;i.type="text",n=o({},{value:U(i,"value"),min:U(i,"min"),max:U(i,"max"),smallStep:U(i,"step")},n),i=e(i),n&&n.enabled===t&&(n.enabled=!i.is("[disabled]")),R.fn.init.call(this,i,n),W((n=this.options).value)&&null!==n.value||(n.value=n.min,i.prop("value",L(n.min))),n.value=u.max(u.min(n.value,n.max),n.min),s=this.wrapper.find(D),this._selection=new G.Selection(s,this,n),this._drag=new G.Drag(s,"",this,n),this._refreshAriaAttr(n.value)},options:{name:"Slider",showButtons:!0,increaseButtonTitle:"Increase",decreaseButtonTitle:"Decrease",dragHandleTitle:"drag",tooltip:{format:"{0:#,#.##}"},value:null},enable:function(t){var n,s,a=this,r=a.options;if(a.disable(),!1!==t){if(a.wrapper.removeClass(E),a.wrapper.find("input").prop(A,!1),n=function(t){var i=P(t)[0];if(i){var n=a._isHorizontal?i.location.pageX:i.location.pageY,s=a._getDraggableArea(),r=e(t.target);r.hasClass("k-draghandle")?r.addClass("k-focus k-selected"):(a._update(a._getValueFromPosition(n,s)),a._focusWithMouse(t.target),a._drag.dragstart(t),t.preventDefault())}},a.wrapper.find(".k-tick, .k-slider-track").on(b,n).end().on(b,function(){e(document.documentElement).one("selectstart",i.preventDefault)}).on(w,function(){a._drag._end()}),a.wrapper.find(D).attr(z,0).on(k,function(){a._setTooltipTimeout()}).on(C,function(e){a._focusWithMouse(e.target),e.preventDefault()}).on(S,a._focus.bind(a)).on(I,a._blur.bind(a)),s=function(e){var t=a._nextValueByIndex(a._valueIndex+1*e);a._setValueInRange(t),a._drag._updateTooltip(t)},r.showButtons){var o=(function(e,t){this._clearTooltipTimeout(),(1===e.which||c.touch&&0===e.which)&&(s(t),this.timeout=setTimeout((function(){this.timer=setInterval(function(){s(t)},60)}).bind(this),200))}).bind(a);a.wrapper.find(".k-button").on(k,(function(e){this._clearTimer(),a._focusWithMouse(e.target)}).bind(a)).on(T,function(t){e(t.currentTarget).addClass("k-hover")}).on("mouseout"+v,(function(t){e(t.currentTarget).removeClass("k-hover"),this._clearTimer()}).bind(a)).on(_,function(t){var i=e(t.target).closest(".k-button").is(".k-button-increase")?1:-1;o(t,i)}).on("click",i.preventDefault)}a.wrapper.find(D).off(x,!1).on(x,this._keydown.bind(a)),r.enabled=!0}},disable:function(){this.wrapper.addClass(E),e(this.element).prop(A,A),this.wrapper.find(".k-button").off(_).on(_,function(t){t.preventDefault(),e(this).addClass("k-active")}).off(k).on(k,function(t){t.preventDefault(),e(this).removeClass("k-active")}).off("mouseleave"+v).on("mouseleave"+v,i.preventDefault).off(T).on(T,i.preventDefault),this.wrapper.find(".k-tick, .k-slider-track").off(b).off(w),this.wrapper.find(D).attr(z,-1).off(k).off(x).off(C).off(S).off(I),this.options.enabled=!1},_update:function(e){var t=this.value()!=e;this.value(e),t&&this.trigger(m,{value:this.options.value})},value:function(e){var t=this.options;if(isNaN(e=V(e)))return t.value;e>=t.min&&e<=t.max&&t.value!=e&&(this.element.prop("value",L(e)),t.value=e,this._refreshAriaAttr(e),this._refresh())},_refresh:function(){this.trigger(y,{value:this.options.value})},_refreshAriaAttr:function(e){var t,i=this._drag;t=i&&i._tooltipDiv?i._tooltipDiv.text():this._getFormattedValue(e,null),this.wrapper.find(D).attr(N,e).attr(H,t)},_clearTimer:function(){clearTimeout(this.timeout),clearInterval(this.timer)},_keydown:function(e){e.keyCode in this._keyMap&&(this._clearTooltipTimeout(),this._setValueInRange(this._keyMap[e.keyCode](this.options.value)),this._drag._updateTooltip(this.value()),e.preventDefault())},_setValueInRange:function(e){var t=this.options;isNaN(e=V(e))?this._update(t.min):(e=u.max(u.min(e,t.max),t.min),this._update(e))},_nextValueByIndex:function(e){var t=this._values.length;return this._isRtl&&(e=t-1-e),this._values[u.max(0,u.min(e,t-1))]},_formResetHandler:function(){var e=this,t=e.options.min;setTimeout(function(){var i=e.element[0].value;e.value(""===i||isNaN(i)?t:i)})},destroy:function(){R.fn.destroy.call(this),this.wrapper.off(v).find(".k-button").off(v).end().find(D).off(v).end().find(".k-tick, .k-slider-track").off(v).end(),this._drag.draggable.destroy(),this._drag._removeTooltip(!0)}});G.Selection=function(e,t,i){function n(n){var s=n-i.min,a=t._valueIndex=u.ceil(V(s/i.smallStep)),r=parseInt(t._pixelSteps[a],10),o=t._trackDiv.find(".k-slider-selection"),l=t._isRtl?2:0;o[t._sizeFn](t._isRtl?t._maxSelection-r:r),e.css(t._position,r-l)}n(i.value),t.bind([g,y],function(e){n(parseFloat(e.value,10))}),t.bind(m,function(e){n(parseFloat(e.sender.value(),10))})},G.Drag=function(e,t,i,n){this.owner=i,this.options=n,this.element=e,this.type=t,this.draggable=new s(e,{distance:0,dragstart:this._dragstart.bind(this),drag:this.drag.bind(this),dragend:this.dragend.bind(this),dragcancel:this.dragcancel.bind(this)}),e.click(!1),e.on("dragstart",function(e){e.preventDefault()})},G.Drag.prototype={dragstart:function(e){this.owner._activeDragHandle=this,this.draggable.userEvents.cancel(),this._dragstart(e),this.dragend()},_dragstart:function(t){var i=this.owner,n=this.options;n.enabled?(this.owner._activeDragHandle=this,i.element.off(T),i.wrapper.find(".k-focus").removeClass("k-focus k-selected"),this.element.addClass("k-focus k-selected"),e(document.documentElement).css("cursor","pointer"),this.draggableArea=i._getDraggableArea(),this.step=u.max(n.smallStep*(i._maxSelection/i._distance()),0),this.type?(this.selectionStart=n.selectionStart,this.selectionEnd=n.selectionEnd,i._setZIndex(this.type)):this.oldVal=this.val=n.value,this._removeTooltip(!0),this._createTooltip()):t.preventDefault()},_createTooltip:function(){var t,n=this.owner,s=this.options.tooltip,a="",r=e(window);s.enabled&&(s.template&&(this.tooltipTemplate=i.template(s.template)),e(".k-slider-tooltip").remove(),this.tooltipDiv=e("<div class='k-tooltip k-slider-tooltip'><!-- --></div>").appendTo(document.body),a=n._getFormattedValue(this.val||n.value(),this),this.type||(t="k-callout-"+(n._isHorizontal?"s":"e"),this.tooltipInnerDiv="<div class='k-callout "+t+"'><!-- --></div>",a+=this.tooltipInnerDiv),this.tooltipDiv.html(a),this._scrollOffset={top:r.scrollTop(),left:i.scrollLeft(r)},this.moveTooltip())},drag:function(e){var t,i=this.owner,n=e.x.location,s=e.y.location,a=this.draggableArea.startPoint,r=this.draggableArea.endPoint;e.preventDefault(),i._isHorizontal?i._isRtl?this.val=this.constrainValue(n,a,r,n<r):this.val=this.constrainValue(n,a,r,n>=r):this.val=this.constrainValue(s,r,a,s<=r),this.oldVal!=this.val&&(this.oldVal=this.val,this.type?("firstHandle"==this.type?this.val<this.selectionEnd?this.selectionStart=this.val:this.selectionStart=this.selectionEnd=this.val:this.val>this.selectionStart?this.selectionEnd=this.val:this.selectionStart=this.selectionEnd=this.val,t={values:[this.selectionStart,this.selectionEnd],value:[this.selectionStart,this.selectionEnd]}):t={value:this.val},i.trigger(g,t)),this._updateTooltip(this.val)},_updateTooltip:function(e){var t="";this.options.tooltip.enabled&&(this.tooltipDiv||this._createTooltip(),t=this.owner._getFormattedValue(V(e),this),this.type||(t+=this.tooltipInnerDiv),this.tooltipDiv.html(t),this.moveTooltip())},dragcancel:function(){return this.owner._refresh(),e(document.documentElement).css("cursor",""),this._end()},dragend:function(){var t=this.owner;return e(document.documentElement).css("cursor",""),this.type?t._update(this.selectionStart,this.selectionEnd):(t._update(this.val),this.draggable.userEvents._disposeAll()),this.draggable.userEvents.cancel(),this._end()},_end:function(){var e=this.owner;return e._focusWithMouse(this.element),e.element.on(T),!1},_removeTooltip:function(t){var i=this,n=i.owner;i.tooltipDiv&&n.options.tooltip.enabled&&n.options.enabled&&(t?(i.tooltipDiv.remove(),i.tooltipDiv=null):i.tooltipDiv.fadeOut("slow",function(){e(this).remove(),i.tooltipDiv=null}))},moveTooltip:function(){var t,n,s,o,l=this.owner,d=0,h=0,u=this.element,c=i.getOffset(u),p=e(window),f=this.tooltipDiv.find(".k-callout"),m=a(this.tooltipDiv),g=r(this.tooltipDiv);this.type?(t=l.wrapper.find(D),c=i.getOffset(t.eq(0)),n=i.getOffset(t.eq(1)),l._isHorizontal?(d=n.top,h=c.left+(n.left-c.left)/2):(d=c.top+(n.top-c.top)/2,h=n.left),o=a(t.eq(0))+16):(d=c.top,h=c.left,o=a(u)+16),l._isHorizontal?(h-=parseInt((m-l._outerSize(u))/2,10),d-=g+8+(f.length?f.height():0)):(d-=parseInt((g-l._outerSize(u))/2,10),h-=m+8+(f.length?f.width():0)),l._isHorizontal?(d+=s=this._flip(d,g,o,r(p)+this._scrollOffset.top),h+=this._fit(h,m,a(p)+this._scrollOffset.left)):(s=this._flip(h,m,o,a(p)+this._scrollOffset.left),d+=this._fit(d,g,r(p)+this._scrollOffset.top),h+=s),s>0&&f&&(f.removeClass(),f.addClass("k-callout k-callout-"+(l._isHorizontal?"n":"w"))),this.tooltipDiv.css({top:d,left:h})},_fit:function(e,t,i){var n=0;return e+t>i&&(n=i-(e+t)),e<0&&(n=-e),n},_flip:function(e,t,i,n){var s=0;return e+t>n&&(s+=-(i+t)),e+s<0&&(s+=i+t),s},constrainValue:function(e,t,i,n){return t<e&&e<i?this.owner._getValueFromPosition(e,this.draggableArea):n?this.options.max:this.options.min}},i.ui.plugin(G);var q=R.extend({init:function(i,n){var s=e(i).find("input"),a=s.eq(0)[0],r=s.eq(1)[0];a.type="text",r.type="text",n&&n.showButtons&&(window.console&&window.console.warn("showbuttons option is not supported for the range slider, ignoring"),n.showButtons=!1),(n=o({},{selectionStart:U(a,"value"),min:U(a,"min"),max:U(a,"max"),smallStep:U(a,"step")},{selectionEnd:U(r,"value"),min:U(r,"min"),max:U(r,"max"),smallStep:U(r,"step")},n))&&n.enabled===t&&(n.enabled=!s.is("[disabled]")),R.fn.init.call(this,i,n),W((n=this.options).selectionStart)&&null!==n.selectionStart||(n.selectionStart=n.min,s.eq(0).prop("value",L(n.min))),W(n.selectionEnd)&&null!==n.selectionEnd||(n.selectionEnd=n.max,s.eq(1).prop("value",L(n.max)));var l=this.wrapper.find(D);this._selection=new q.Selection(l,this,n),this._firstHandleDrag=new G.Drag(l.eq(0),"firstHandle",this,n),this._lastHandleDrag=new G.Drag(l.eq(1),"lastHandle",this,n),this._refreshAriaAttr(n.selectionStart,n.selectionEnd)},options:{name:"RangeSlider",leftDragHandleTitle:"drag",rightDragHandleTitle:"drag",tooltip:{format:"{0:#,#.##}"},selectionStart:null,selectionEnd:null},enable:function(t){var n,s=this,a=s.options;s.disable(),!1!==t&&(s.wrapper.removeClass(E),s.wrapper.find("input").prop(A,!1),n=function(t){var i=P(t)[0];if(i){var n,r,o,l=s._isHorizontal?i.location.pageX:i.location.pageY,d=s._getDraggableArea(),h=s._getValueFromPosition(l,d),u=e(t.target);if(u.hasClass("k-draghandle"))return s.wrapper.find(".k-focus").removeClass("k-focus k-selected"),void u.addClass("k-focus k-selected");h<a.selectionStart?(n=h,r=a.selectionEnd,o=s._firstHandleDrag):h>s.selectionEnd?(n=a.selectionStart,r=h,o=s._lastHandleDrag):h-a.selectionStart<=a.selectionEnd-h?(n=h,r=a.selectionEnd,o=s._firstHandleDrag):(n=a.selectionStart,r=h,o=s._lastHandleDrag),o.dragstart(t),s._setValueInRange(n,r),s._focusWithMouse(o.element)}},s.wrapper.find(".k-tick, .k-slider-track").on(b,n).end().on(b,function(){e(document.documentElement).one("selectstart",i.preventDefault)}).on(w,function(){s._activeDragHandle&&s._activeDragHandle._end()}),s.wrapper.find(D).attr(z,0).on(k,function(){s._setTooltipTimeout()}).on(C,function(e){s._focusWithMouse(e.target),e.preventDefault()}).on(S,s._focus.bind(s)).on(I,s._blur.bind(s)),s.wrapper.find(D).off(x,i.preventDefault).eq(0).on(x,(function(e){this._keydown(e,"firstHandle")}).bind(s)).end().eq(1).on(x,(function(e){this._keydown(e,"lastHandle")}).bind(s)),s.options.enabled=!0)},disable:function(){this.wrapper.addClass(E),this.wrapper.find("input").prop(A,A),this.wrapper.find(".k-tick, .k-slider-track").off(b).off(w),this.wrapper.find(D).attr(z,-1).off(k).off(x).off(C).off(S).off(I),this.options.enabled=!1},_keydown:function(e,t){var i,n,s,a=this.options.selectionStart,r=this.options.selectionEnd;e.keyCode in this._keyMap&&(this._clearTooltipTimeout(),"firstHandle"==t?(s=this._activeHandleDrag=this._firstHandleDrag,(a=this._keyMap[e.keyCode](a))>r&&(r=a)):(s=this._activeHandleDrag=this._lastHandleDrag,a>(r=this._keyMap[e.keyCode](r))&&(a=r)),this._setValueInRange(V(a),V(r)),i=Math.max(a,this.options.selectionStart),n=Math.min(r,this.options.selectionEnd),s.selectionEnd=Math.max(n,this.options.selectionStart),s.selectionStart=Math.min(i,this.options.selectionEnd),s._updateTooltip(this.value()[this._activeHandle]),e.preventDefault())},_update:function(e,t){var i=this.value(),n=i[0]!=e||i[1]!=t;this.value([e,t]),n&&this.trigger(m,{values:[e,t],value:[e,t]})},value:function(e){return e&&e.length?this._value(e[0],e[1]):this._value()},_value:function(e,t){var i=this.options,n=i.selectionStart,s=i.selectionEnd;if(isNaN(e)&&isNaN(t))return[n,s];e=V(e),t=V(t),e>=i.min&&e<=i.max&&t>=i.min&&t<=i.max&&e<=t&&(n==e&&s==t||(this.element.find("input").eq(0).prop("value",L(e)).end().eq(1).prop("value",L(t)),i.selectionStart=e,i.selectionEnd=t,this._refresh(),this._refreshAriaAttr(e,t)))},values:function(e,t){return h(e)?this._value(e[0],e[1]):this._value(e,t)},_refresh:function(){var e=this.options;this.trigger(y,{values:[e.selectionStart,e.selectionEnd],value:[e.selectionStart,e.selectionEnd]}),e.selectionStart==e.max&&e.selectionEnd==e.max&&this._setZIndex("firstHandle")},_refreshAriaAttr:function(e,t){var i,n=this.wrapper.find(D),s=this._activeHandleDrag;i=this._getFormattedValue([e,t],s),n.eq(0).attr(N,e),n.eq(1).attr(N,t),n.attr(H,i)},_setValueInRange:function(e,t){var i=this.options;e=u.max(u.min(e,i.max),i.min),t=u.max(u.min(t,i.max),i.min),e==i.max&&t==i.max&&this._setZIndex("firstHandle"),this._update(u.min(e,t),u.max(e,t))},_setZIndex:function(t){this.wrapper.find(D).each(function(i){e(this).css("z-index","firstHandle"==t?1-i:i)})},_formResetHandler:function(){var e=this,t=e.options;setTimeout(function(){var i=e.element.find("input"),n=i[0].value,s=i[1].value;e.values(""===n||isNaN(n)?t.min:n,""===s||isNaN(s)?t.max:s)})},destroy:function(){R.fn.destroy.call(this),this.wrapper.off(v).find(".k-tick, .k-slider-track").off(v).end().find(D).off(v),this._firstHandleDrag.draggable.destroy(),this._lastHandleDrag.draggable.destroy()}});q.Selection=function(e,t,i){function n(n){var s,a,r,o=(n=n||[])[0]-i.min,l=n[1]-i.min,d=u.ceil(V(o/i.smallStep)),h=u.ceil(V(l/i.smallStep)),c=t._pixelSteps[d],p=t._pixelSteps[h],f=t._isRtl?2:0;e.eq(0).css(t._position,c-f).end().eq(1).css(t._position,p-f),r=t._trackDiv.find(".k-slider-selection"),s=u.abs(c-p),r[t._sizeFn](s),t._isRtl?(a=u.max(c,p),r.css("right",t._maxSelection-a-1)):(a=u.min(c,p),r.css(t._position,a-1))}n(t.value()),t.bind([m,g,y],function(e){n(e.values)})},i.ui.plugin(q)}(window.kendo.jQuery),window.kendo.jQuery,eJ=(eX=window.kendo).ui.Widget,eZ=eX.ui,e0=eJ.extend({init:function(e,t){eJ.fn.init.call(this,e,t),this._content(),this._appearance(),eX.notify(this)},destroy:function(){eJ.fn.destroy.call(this)},options:{name:"Badge",cutoutBorder:!1,data:{},fillMode:"solid",icon:"",max:1/0,position:"inline",align:"",rounded:"medium",roundings:{small:"sm",medium:"md",large:"lg",full:"full"},sizes:{small:"sm",medium:"md",large:"lg"},size:"medium",template:null,text:"",themeColor:"secondary",visible:!0,_classNames:[]},_content:function(){var e=this.options.text,t=this.options.template,i=this.options.data,n=this.options.icon;if(null!==t)return this._text=e,this._template=eX.template(t).bind(this),void this.element.html(this._template(i));""===n?""===e?this.text(this.element.html()):this.text(e):this.icon(n)},_appearance:function(){this._themeColor=this.options.themeColor,this._shape=this.options.shape,this._sizes=this.options.sizes,this._size=this.options.size,this._fillMode=this.options.fillMode,this._rounded=this.options.rounded,this._roundings=this.options.roundings,this._cutoutBorder=this.options.cutoutBorder,this._align=this.options.align,this._position=this.options.position,this._visible=this.options.visible,this._updateClassNames()},_updateClassNames:function(){var e=this,t=["k-badge"],i=e.options._classNames,n=e._themeColor,s=e._shape,a=e._sizes,r=e._size,o=a[r]===eQ?r:a[r],l=e._fillMode,d=e._rounded,h=e._roundings,u=h[d]===eQ?d:h[d],c=e._cutoutBorder,p=e._align,f=e._position,m=e._visible;e.element.removeClass(function(t,n){0===n.indexOf("k-")&&-1===i.indexOf(n)&&e.element.removeClass(n)}),"string"==typeof l&&""!==l&&t.push("k-badge-"+l),"string"==typeof n&&""!==n&&t.push("k-badge-"+l+"-"+n),"string"==typeof r&&""!==r&&t.push("k-badge-"+o),"string"==typeof d&&""!==d&&t.push("k-rounded-"+u),"string"==typeof s&&""!==s&&t.push("k-badge-"+s),"boolean"==typeof c&&!0===c&&t.push("k-badge-border-cutout"),"string"==typeof f&&""!==f&&t.push("k-badge-"+f),"string"==typeof f&&""!==f&&"inline"!==f&&"string"==typeof p&&2==p.split(" ").length&&t.push("k-"+p.replace(" ","-")),!1===m&&t.push("k-hidden"),e.element.addClass(t.join(" "))},setOptions:function(e){var t=this;t.element.removeClass(function(e,i){i.indexOf("k-")>=0&&t.element.removeClass(i)}),eJ.fn.setOptions.call(t,e),t._content(),t._appearance()},text:function(e){var t=this.options.max;if(0==arguments.length||e===eQ)return this._text;this._text=e,!0!==e&&!1!==e&&null!==e?"string"!=typeof e?"number"!=typeof e?"object"==typeof e&&"toString"in e&&this.element.html(e.toString()):e>t?this.element.html(t+"+"):this.element.html(e):this.element.html(e):this.element.html("")},icon:function(e){var t;return 0==arguments.length||e===eQ?this._icon:(this._icon=e,t=0===e.indexOf("<svg")?eX.template("<span class='k-badge-icon k-svg-icon'>#= icon #</span>"):eX.template("<span class='k-badge-icon k-icon k-i-#= icon #'></span>"),void this.element.html(t({icon:e})))},themeColor:function(e){if(0==arguments.length||e===eQ)return this._themeColor;this._themeColor=e,this._updateClassNames()},rounded:function(e){if(0==arguments.length||e===eQ)return this._rounded;this._rounded=e,this._updateClassNames()},hide:function(){this._visible=!1,this._updateClassNames()},show:function(){this._visible=!0,this._updateClassNames()}}),eZ.plugin(e0),e1=window.kendo.jQuery,e9=(e3=window.kendo).ui.Widget,e6=e3.html,e5=e3.ui,e8=e3.keys,e4="click",e7=e3.support.mousedown,te=e3.support.mouseup,tt=".kendoButton",ti="disabled",tn="k-focus",ts="k-active",e3.setDefaults("button",{icon:"",iconClass:"",spriteCssClass:"",imageUrl:"",badge:null}),!1===(ta=e9.extend({init:function(e,t){e9.fn.init.call(this,e,t),e=this.wrapper=this.element,t=this.options,e6.renderButton(e,e1.extend({},t)),e.attr("role","button"),t.enable=t.enable&&t.enabled&&!e.attr(ti),this.enable(t.enable),t.enable&&this._tabindex(),this._badge(),e.on(e4+tt,this._click.bind(this)).on("focus"+tt,this._focus.bind(this)).on("blur"+tt,this._blur.bind(this)).on("keydown"+tt,this._keydown.bind(this)).on("keyup"+tt,this._removeActive.bind(this)).on(e7+tt,this._addActive.bind(this)).on(te+tt+" mouseout"+tt,this._removeActive.bind(this)),e3.notify(this)},destroy:function(){this.wrapper.off(tt),this.badge&&this.badge.destroy(),e9.fn.destroy.call(this)},events:[e4],options:{name:"Button",enable:!0,enabled:!0,icon:"",iconClass:"",spriteCssClass:"",imageUrl:"",badge:null,size:"medium",shape:"rectangle",rounded:"medium",fillMode:"solid",themeColor:"base"},_isNativeButton:function(){return"button"==this.element.prop("tagName").toLowerCase()},_click:function(e){this.options.enable&&this.trigger(e4,{event:e})&&e.preventDefault()},_focus:function(){this.options.enable&&this.element.addClass(tn)},_blur:function(){var e=this;e.element.removeClass(tn),setTimeout(function(){e.element.removeClass(ts)})},_keydown:function(e){e.keyCode!=e8.ENTER&&e.keyCode!=e8.SPACEBAR||(this._addActive(),this._isNativeButton()||(e.keyCode==e8.SPACEBAR&&e.preventDefault(),this._click(e)))},_removeActive:function(){this.element.removeClass(ts)},_addActive:function(){this.options.enable&&this.element.addClass(ts)},enable:function(e){var t=this.element;void 0===e&&(e=!0),e=!!e,this.options.enable=e,t.toggleClass("k-disabled",!e).attr("aria-disabled",!e).attr(ti,!e),e&&this._tabindex();try{t.trigger("blur")}catch(e){}},_badge:function(){var e,t=this.options.badge;null!==t&&t!==e2&&(t.constructor!==Object&&(t={text:t}),t.position!==e2&&""!==t.position||(t.position="edge",t.align!==e2&&""!==t.align||(t.align="top end")),t._classNames=["k-button-badge"],this.element.addClass("k-badge-container"),e=e1("<span />").appendTo(this.element),this.badge=new e5.Badge(e,t))}})).fn.hasOwnProperty("defaults")&&Object.defineProperty(ta.fn,"defaults",{get:function(){return e3.defaults.button}}),e3.cssProperties.registerPrefix("Button","k-button-"),e3.cssProperties.registerValues("Button",[{prop:"fillMode",values:e3.cssProperties.fillModeValues.concat(["link"])},{prop:"rounded",values:e3.cssProperties.roundedValues.concat([["full","full"]])}]),e3.ui.plugin(ta),function(e,t){var i=window.kendo,n=i.Observable,s=i.data.ObservableObject,a=i.data.ObservableArray,r={}.toString,o={},l=i.Class,d="value",h="source",u="events",c="checked",p=!0,f="change";!function(){var e=document.createElement("a");try{delete e.test}catch(e){p=!1}}();var m=n.extend({init:function(e,t){var i=this;n.fn.init.call(i),i.source=e[0],i.parents=e,i.path=t,i.dependencies={},i.dependencies[t]=!0,i.observable=i.source instanceof n,i._access=function(e){i.dependencies[e.field]=!0},i.observable&&(i._change=function(e){i.change(e)},i.source.bind(f,i._change))},_parents:function(){var t=this.parents,i=this.get();if(i&&"function"==typeof i.parent){var n=i.parent();0>e.inArray(n,t)&&(t=[n].concat(t))}return t},change:function(e){var t,i,n=e.field;if("this"===this.path)this.trigger(f,e);else for(t in this.dependencies)if(0===t.indexOf(n)&&(!(i=t.charAt(n.length))||"."===i||"["===i)){this.trigger(f,e);break}},start:function(e){e.bind("get",this._access)},stop:function(e){e.unbind("get",this._access)},get:function(){var e=this.source,i=0,n=this.path,a=e;if(!this.observable)return a;for(this.start(this.source),a=e.get(n);a===t&&e;)(e=this.parents[++i])instanceof s&&(a=e.get(n));if(a===t)for(e=this.source;a===t&&e;)(e=e.parent())instanceof s&&(a=e.get(n));return"function"==typeof a&&((i=n.lastIndexOf("."))>0&&(e=e.get(n.substring(0,i))),this.start(e),a=e!==this.source?a.call(e,this.source):a.call(e),this.stop(e)),e&&e!==this.source&&(this.currentSource=e,e.unbind(f,this._change).bind(f,this._change)),this.stop(this.source),a},set:function(e){var t=this.currentSource||this.source,n=i.getter(this.path)(t);"function"==typeof n?t!==this.source?n.call(t,this.source,e):n.call(t,e):t.set(this.path,e)},destroy:function(){this.observable&&(this.source.unbind(f,this._change),this.currentSource&&this.currentSource.unbind(f,this._change)),this.unbind()}}),g=m.extend({get:function(){var e,t=this.source,i=this.path,n=0;for(e=t.get(i);!e&&t;)(t=this.parents[++n])instanceof s&&(e=t.get(i));if(e)return e.bind(t)}}),v=m.extend({init:function(e,t,i){m.fn.init.call(this,e,t),this.template=i},render:function(e){var t;return this.start(this.source),t=i.render(this.template,e),this.stop(this.source),t}}),_=l.extend({init:function(e,t,i){this.element=e,this.bindings=t,this.options=i},bind:function(e,t){var i=this;(e=t?e[t]:e).bind(f,function(e){i.refresh(t||e)}),i.refresh(t)},destroy:function(){}}),b=_.extend({dataType:function(){return(this.element.getAttribute("data-"+i.ns+"type")||this.element.type||"text").toLowerCase()},parsedValue:function(){return this._parseValue(this.element.value,this.dataType())},_parseValue:function(e,t){return"date"==t?e=i.parseDate(e,"yyyy-MM-dd"):"datetime-local"==t?e=i.parseDate(e,["yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm"]):"number"==t?e=i.parseFloat(e):"boolean"==t&&(e=e.toLowerCase(),e=null!==i.parseFloat(e)?!!i.parseFloat(e):"true"===e.toLowerCase()),e}});function k(t,n,s){return _.extend({init:function(e,t,i){_.fn.init.call(this,e.element[0],t,i),this.widget=e,this._dataBinding=this.dataBinding.bind(this),this._dataBound=this.dataBound.bind(this),this._itemChange=this.itemChange.bind(this)},itemChange:function(e){I(e.item[0],e.data,this._ns(e.ns),[e.data].concat(this.bindings[t]._parents()))},dataBinding:function(e){var t,i,n=this.widget,s=e.removedItems||n.items();for(t=0,i=s.length;t<i;t++)E(s[t],!1)},_ns:function(t){t=t||i.ui;var n=[i.ui,i.dataviz.ui,i.mobile.ui];return n.splice(e.inArray(t,n),1),n.unshift(t),i.rolesFromNamespaces(n)},dataBound:function(e){var s,a,r,o,l=this.widget,d=e.addedItems||l.items(),h=l[n],u=i.data.HierarchicalDataSource;if(!(u&&h instanceof u)&&d.length)for(r=e.addedDataItems||h.flatView(),o=this.bindings[t]._parents(),s=0,a=r.length;s<a;s++)d[s]&&I(d[s],r[s],this._ns(e.ns),[r[s]].concat(o))},refresh:function(e){var a,r,o,l=this.widget;(e=e||{}).action||(this.destroy(),l.bind("dataBinding",this._dataBinding),l.bind("dataBound",this._dataBound),l.bind("itemChange",this._itemChange),a=this.bindings[t].get(),l[n]instanceof i.data.DataSource&&l[n]!=a&&(a instanceof i.data.DataSource?l[s](a):a&&a._dataSource?l[s](a._dataSource):(r=i.ui.Select&&l instanceof i.ui.Select,o=i.ui.MultiSelect&&l instanceof i.ui.MultiSelect,i.ui.DropDownTree&&l instanceof i.ui.DropDownTree?l.treeview[n].data(a):l[n].data(a),this.bindings.value&&(r||o)&&l.value(z(this.bindings.value.get(),l.options.dataValueField)))))},destroy:function(){var e=this.widget;e.unbind("dataBinding",this._dataBinding),e.unbind("dataBound",this._dataBound),e.unbind("itemChange",this._itemChange)}})}o.attr=_.extend({refresh:function(e){this.element.setAttribute(e,this.bindings.attr[e].get())}}),o.css=_.extend({init:function(e,t,i){_.fn.init.call(this,e,t,i),this.classes={}},refresh:function(t){var i=e(this.element),n=this.bindings.css[t];(this.classes[t]=n.get())?i.addClass(t):i.removeClass(t)}}),o.style=_.extend({refresh:function(e){this.element.style[e]=this.bindings.style[e].get()||""}}),o.enabled=_.extend({refresh:function(){this.bindings.enabled.get()?this.element.removeAttribute("disabled"):this.element.setAttribute("disabled","disabled")}}),o.readonly=_.extend({refresh:function(){this.bindings.readonly.get()?this.element.setAttribute("readonly","readonly"):this.element.removeAttribute("readonly")}}),o.disabled=_.extend({refresh:function(){this.bindings.disabled.get()?this.element.setAttribute("disabled","disabled"):this.element.removeAttribute("disabled")}}),o.events=_.extend({init:function(e,t,i){_.fn.init.call(this,e,t,i),this.handlers={}},refresh:function(t){var i=e(this.element),n=this.bindings.events[t],s=this.handlers[t];s&&i.off(t,s),s=this.handlers[t]=n.get(),i.on(t,n.source,s)},destroy:function(){var t,i=e(this.element);for(t in this.handlers)i.off(t,this.handlers[t])}}),o.text=_.extend({refresh:function(){var t=this.bindings.text.get(),n=this.element.getAttribute("data-"+i.ns+"format")||"";null==t&&(t=""),e(this.element).text(i.toString(t,n))}}),o.visible=_.extend({refresh:function(){this.bindings.visible.get()?this.element.style.display="":this.element.style.display="none"}}),o.invisible=_.extend({refresh:function(){this.bindings.invisible.get()?this.element.style.display="none":this.element.style.display=""}}),o.html=_.extend({refresh:function(){this.element.innerHTML=this.bindings.html.get()}}),o.value=b.extend({init:function(t,i,n){b.fn.init.call(this,t,i,n),this._change=this.change.bind(this),this.eventName=n.valueUpdate||f,e(this.element).on(this.eventName,this._change),this._initChange=!1},change:function(){this._initChange=this.eventName!=f,this.bindings.value.set(this.parsedValue()),this._initChange=!1},refresh:function(){if(!this._initChange){var e=this.bindings.value.get();null==e&&(e="");var t=this.dataType();"date"==t?e=i.toString(e,"yyyy-MM-dd"):"datetime-local"==t&&(e=i.toString(e,"yyyy-MM-ddTHH:mm:ss")),this.element.value=e}this._initChange=!1},destroy:function(){e(this.element).off(this.eventName,this._change)}}),o.source=_.extend({init:function(e,t,n){_.fn.init.call(this,e,t,n);var s=this.bindings.source.get();s instanceof i.data.DataSource&&!1!==n.autoBind&&s.fetch()},refresh:function(e){var t=this.bindings.source.get();t instanceof a||t instanceof i.data.DataSource?"add"==(e=e||{}).action?this.add(e.index,e.items):"remove"==e.action?this.remove(e.index,e.items):"itemchange"!=e.action&&this.render():this.render()},container:function(){var e=this.element;return"table"==e.nodeName.toLowerCase()&&(e.tBodies[0]||e.appendChild(document.createElement("tbody")),e=e.tBodies[0]),e},template:function(){var e=this.options,t=e.template,n=this.container().nodeName.toLowerCase();return t||(t="select"==n?e.valueField||e.textField?i.format('<option value="#:{0}#">#:{1}#</option>',e.valueField||e.textField,e.textField||e.valueField):"<option>#:data#</option>":"tbody"==n?"<tr><td>#:data#</td></tr>":"ul"==n||"ol"==n?"<li>#:data#</li>":"#:data#",t=i.template(t)),t},add:function(t,n){var s,a,r,o,l=this.container(),d=l.cloneNode(!1),h=l.children[t];if(e(d).html(i.render(this.template(),n)),d.children.length)for(s=this.bindings.source._parents(),a=0,r=n.length;a<r;a++)o=d.children[0],l.insertBefore(o,h||null),I(o,n[a],this.options.roles,[n[a]].concat(s))},remove:function(e,t){var i,n=this.container();for(i=0;i<t.length;i++){var s=n.children[e];E(s,!0),s.parentNode==n&&n.removeChild(s)}},render:function(){var t,n,s,o=this.bindings.source.get(),l=this.container(),d=this.template();if(null!=o){if(o instanceof i.data.DataSource&&(o=o.view()),o instanceof a||"[object Array]"===r.call(o)||(o=[o]),this.bindings.template){if(A(l,!0),e(l).html(this.bindings.template.render(o)),l.children.length)for(t=this.bindings.source._parents(),n=0,s=o.length;n<s;n++)I(l.children[n],o[n],this.options.roles,[o[n]].concat(t))}else e(l).html(i.render(d,o))}}}),o.input={checked:b.extend({init:function(t,i,n){b.fn.init.call(this,t,i,n),this._change=this.change.bind(this),e(this.element).change(this._change)},change:function(){var e=this.element,t=this.value();if("radio"==e.type)t=this.parsedValue(),this.bindings.checked.set(t);else if("checkbox"==e.type){var i,n=this.bindings.checked.get();if(n instanceof a){if((t=this.parsedValue())instanceof Date){for(var s=0;s<n.length;s++)if(n[s]instanceof Date&&+n[s]==+t){i=s;break}}else i=n.indexOf(t);i>-1?n.splice(i,1):n.push(t)}else this.bindings.checked.set(t)}},refresh:function(){var e=this.bindings.checked.get(),t=e,n=this.dataType(),s=this.element;if("checkbox"==s.type){if(t instanceof a){var r=-1;if((e=this.parsedValue())instanceof Date){for(var o=0;o<t.length;o++)if(t[o]instanceof Date&&+t[o]==+e){r=o;break}}else r=t.indexOf(e);s.checked=r>=0}else s.checked=t}else"radio"==s.type&&("date"==n?e=i.toString(e,"yyyy-MM-dd"):"datetime-local"==n&&(e=i.toString(e,"yyyy-MM-ddTHH:mm:ss")),null!=e&&s.value===e.toString()?s.checked=!0:s.checked=!1)},value:function(){var e=this.element,t=e.value;return"checkbox"==e.type&&(t=e.checked),t},destroy:function(){e(this.element).off(f,this._change)}})},o.select={source:o.source.extend({refresh:function(n){var s=this.bindings.source.get();if(s instanceof a||s instanceof i.data.DataSource){if("add"==(n=n||{}).action)this.add(n.index,n.items);else if("remove"==n.action)this.remove(n.index,n.items);else if(("itemchange"==n.action||n.action===t)&&(this.render(),this.bindings.value&&this.bindings.value)){var r=z(this.bindings.value.get(),e(this.element).data("valueField"));null===r?this.element.selectedIndex=-1:this.element.value=r}}else this.render()}}),value:b.extend({init:function(t,i,n){b.fn.init.call(this,t,i,n),this._change=this.change.bind(this),e(this.element).change(this._change)},parsedValue:function(){var e,t,i,n,s=this.dataType(),a=[];for(i=0,n=this.element.options.length;i<n;i++)(t=this.element.options[i]).selected&&(e=(e=t.attributes.value)&&e.specified?t.value:t.text,a.push(this._parseValue(e,s)));return a},change:function(){var e,n,r,o,l,d,h=[],u=this.element,c=this.options.valueField||this.options.textField,p=this.options.valuePrimitive;for(l=0,d=u.options.length;l<d;l++)(n=u.options[l]).selected&&(o=(o=n.attributes.value)&&o.specified?n.value:n.text,c?h.push(o):h.push(this._parseValue(o,this.dataType())));if(c){for((e=this.bindings.source.get())instanceof i.data.DataSource&&(e=e.view()),r=0;r<h.length;r++)for(l=0,d=e.length;l<d;l++)if(String(e[l].get(c))===h[r]){h[r]=e[l];break}}(o=this.bindings.value.get())instanceof a?o.splice.apply(o,[0,o.length].concat(h)):p||!(o instanceof s||null===o||o===t)&&c?this.bindings.value.set(h[0].get(c)):this.bindings.value.set(h[0])},refresh:function(){var e,t,n=this.element,r=n.options,o=this.bindings.value.get(),l=o,d=this.options.valueField||this.options.textField,h=this.dataType();l instanceof a||(l=new a([o])),n.selectedIndex=-1;for(var u=0;u<l.length;u++)for(o=l[u],d&&o instanceof s&&(o=o.get(d)),"date"==h?o=i.toString(l[u],"yyyy-MM-dd"):"datetime-local"==h&&(o=i.toString(l[u],"yyyy-MM-ddTHH:mm:ss")),e=0;e<r.length;e++)""===(t=r[e].value)&&""!==o&&(t=r[e].text),null!=o&&t==o.toString()&&(r[e].selected=!0)},destroy:function(){e(this.element).off(f,this._change)}})},o.widget={events:_.extend({init:function(e,t,i){_.fn.init.call(this,e.element[0],t,i),this.widget=e,this.handlers={}},refresh:function(e){var t=this.bindings.events[e],i=this.handlers[e];i&&this.widget.unbind(e,i),i=t.get(),this.handlers[e]=function(e){e.data=t.source,i(e),e.data===t.source&&delete e.data},this.widget.bind(e,this.handlers[e])},destroy:function(){var e;for(e in this.handlers)this.widget.unbind(e,this.handlers[e])}}),checked:_.extend({init:function(e,t,i){_.fn.init.call(this,e.element[0],t,i),this.widget=e,this._change=this.change.bind(this),this.widget.bind(f,this._change)},change:function(){this.bindings.checked.set(this.value())},refresh:function(){"radio"===this.element.type?this.widget.check(this.bindings.checked.get().toString()===this.value()):this.widget.check(!0===this.bindings.checked.get())},value:function(){var e=this.element,t=e.value;return"on"!=t&&"off"!=t&&"checkbox"!=this.element.type||(t=e.checked),t},destroy:function(){this.widget.unbind(f,this._change)}}),start:_.extend({init:function(e,t,i){_.fn.init.call(this,e.element[0],t,i),this._change=this.change.bind(this),this.widget=e,this.widget.bind(f,this._change)},change:function(){this.bindings.start.set(this.widget.range().start)},refresh:function(){var e=this.bindings.start.get(),t=this.widget._range?this.widget._range.end:null;this.widget.range({start:e,end:t})},destroy:function(){this.widget.unbind(f,this._change)}}),end:_.extend({init:function(e,t,i){_.fn.init.call(this,e.element[0],t,i),this._change=this.change.bind(this),this.widget=e,this.widget.bind(f,this._change)},change:function(){this.bindings.end.set(this.widget.range().end)},refresh:function(){var e=this.bindings.end.get(),t=this.widget._range?this.widget._range.start:null;this.widget.range({start:t,end:e})},destroy:function(){this.widget.unbind(f,this._change)}}),visible:_.extend({init:function(e,t,i){_.fn.init.call(this,e.element[0],t,i),this.widget=e},refresh:function(){var e=this.bindings.visible.get();this.widget.wrapper[0].style.display=e?"":"none"}}),invisible:_.extend({init:function(e,t,i){_.fn.init.call(this,e.element[0],t,i),this.widget=e},refresh:function(){var e=this.bindings.invisible.get();this.widget.wrapper[0].style.display=e?"none":""}}),floatingLabel:_.extend({init:function(e,t,i){_.fn.init.call(this,e.element[0],t,i),e.floatingLabel&&e.floatingLabel.refresh()}}),enabled:_.extend({init:function(e,t,i){_.fn.init.call(this,e.element[0],t,i),this.widget=e},refresh:function(){this.widget.enable&&this.widget.enable(this.bindings.enabled.get())}}),disabled:_.extend({init:function(e,t,i){_.fn.init.call(this,e.element[0],t,i),this.widget=e},refresh:function(){this.widget.enable&&this.widget.enable(!this.bindings.disabled.get())}}),source:k("source","dataSource","setDataSource"),value:_.extend({init:function(e,t,i){_.fn.init.call(this,e.element[0],t,i),this.widget=e,this._change=this.change.bind(this),this.widget.first(f,this._change);var n=this.bindings.value.get();this._valueIsObservableObject=!i.valuePrimitive&&(null==n||n instanceof s),this._valueIsObservableArray=n instanceof a,this._initChange=!1},_source:function(){var e;return this.widget.dataItem&&(e=this.widget.dataItem())&&e instanceof s?[e]:(this.bindings.source&&(e=this.bindings.source.get()),(!e||e instanceof i.data.DataSource)&&(e=this.widget.dataSource.flatView()),e)},change:function(){var e,t,i,n,s,a,o,l=this.widget.value(),d=this.options.dataValueField||this.options.dataTextField,h="[object Array]"===r.call(l),u=this._valueIsObservableObject,c=[];if(this._initChange=!0,d){if(""===l&&(u||this.options.valuePrimitive))l=null;else{for(o=this._source(),h&&(t=l.length,c=l.slice(0)),s=0,a=o.length;s<a;s++)if(n=(i=o[s]).get(d),h){for(e=0;e<t;e++)if(n==c[e]){c[e]=i;break}}else if(n==l){l=u?i:n;break}c[0]&&(l=this._valueIsObservableArray?c:u||!d?c[0]:c[0].get(d))}}this.bindings.value.set(l),this._initChange=!1},refresh:function(){if(!this._initChange){var e,i=this.widget,n=i.options,r=n.dataTextField,o=n.dataValueField||r,l=this.bindings.value.get(),d=n.text||"",h=0,u=[];if(l===t&&(l=null),o){if(l instanceof a){for(e=l.length;h<e;h++)u[h]=l[h].get(o);l=u}else l instanceof s&&(d=l.get(r),l=l.get(o))}!1!==n.autoBind||n.cascadeFrom||!i.listView||i.listView.bound()?i.value(l):(r!==o||d||(d=l),!d&&(l||0===l)&&n.valuePrimitive?i.value(l):i._preselect(l,d))}this._initChange=!1},destroy:function(){this.widget.unbind(f,this._change)}}),dropdowntree:{value:_.extend({init:function(e,t,i){_.fn.init.call(this,e.element[0],t,i),this.widget=e,this._change=this.change.bind(this),this.widget.first(f,this._change),this._initChange=!1},change:function(){var e=this.bindings.value.get(),i=this.options.valuePrimitive,n=this.widget.treeview.select(),s=this.widget._isMultipleSelection()?this.widget._getAllChecked():this.widget.treeview.dataItem(n)||this.widget.value(),r=i||!1===this.widget.options.autoBind?this.widget.value():s,o=this.options.dataValueField||this.options.dataTextField;if(r=r.slice?r.slice(0):r,this._initChange=!0,e instanceof a){for(var l,d,h,u=[],c=r.length,p=0,f=0,m=e[p];m!==t;){for(h=!1,f=0;f<c;f++)if(i?r[f]==m:(d=(d=r[f]).get?d.get(o):d)==(m.get?m.get(o):m)){r.splice(f,1),c-=1,h=!0;break}h?p+=1:(u.push(m),w(e,p,1),l=p),m=e[p]}w(e,e.length,0,r),u.length&&e.trigger("change",{action:"remove",items:u,index:l}),r.length&&e.trigger("change",{action:"add",items:r,index:e.length-1})}else this.bindings.value.set(r);this._initChange=!1},refresh:function(){if(!this._initChange){var e,t,i=this.options,n=this.widget,r=i.dataValueField||i.dataTextField,o=this.bindings.value.get(),l=o,d=0,h=[];if(r){if(o instanceof a){for(e=o.length;d<e;d++)t=o[d],h[d]=t.get?t.get(r):t;o=h}else o instanceof s&&(o=o.get(r))}!1===i.autoBind&&!0!==i.valuePrimitive?n._preselect(l,o):n.value(o)}},destroy:function(){this.widget.unbind(f,this._change)}})},gantt:{dependencies:k("dependencies","dependencies","setDependenciesDataSource")},multiselect:{value:_.extend({init:function(e,t,i){_.fn.init.call(this,e.element[0],t,i),this.widget=e,this._change=this.change.bind(this),this.widget.first(f,this._change),this._initChange=!1},change:function(){var e=this.bindings.value.get(),i=this.options.valuePrimitive,n=i?this.widget.value():this.widget.dataItems(),s=this.options.dataValueField||this.options.dataTextField;if(n=n.slice(0),this._initChange=!0,e instanceof a){for(var r,o,l,d=[],h=n.length,u=0,c=0,p=e[u];p!==t;){for(l=!1,c=0;c<h;c++)if(i?n[c]==p:(o=(o=n[c]).get?o.get(s):o)==(p.get?p.get(s):p)){n.splice(c,1),h-=1,l=!0;break}l?u+=1:(d.push(p),w(e,u,1),r=u),p=e[u]}w(e,e.length,0,n),d.length&&e.trigger("change",{action:"remove",items:d,index:r}),n.length&&e.trigger("change",{action:"add",items:n,index:e.length-1})}else this.bindings.value.set(n);this._initChange=!1},refresh:function(){if(!this._initChange){var e,i,n=this.options,r=this.widget,o=n.dataValueField||n.dataTextField,l=this.bindings.value.get(),d=l,h=0,u=[];if(l===t&&(l=null),o){if(l instanceof a){for(e=l.length;h<e;h++)i=l[h],u[h]=i.get?i.get(o):i;l=u}else l instanceof s&&(l=l.get(o))}!1!==n.autoBind||!0===n.valuePrimitive||r._isBound()?r.value(l):r._preselect(d,l)}},destroy:function(){this.widget.unbind(f,this._change)}})},scheduler:{source:k("source","dataSource","setDataSource").extend({dataBound:function(e){var t,i,n,s,a=this.widget,r=e.addedItems||a.items();if(r.length)for(n=e.addedDataItems||a.dataItems(),s=this.bindings.source._parents(),t=0,i=n.length;t<i;t++)I(r[t],n[t],this._ns(e.ns),[n[t]].concat(s))}})},grid:{source:k("source","dataSource","setDataSource").extend({dataBound:function(e){var t,i,n,s,a=this.widget,r=e.addedItems||a.items();if(r.length)for(s=e.addedDataItems||a.dataItems(),n=this.bindings.source._parents(),t=0,i=s.length;t<i;t++)I(r[t],s[t],this._ns(e.ns),[s[t]].concat(n))}})},badge:{text:_.extend({init:function(e,t,i){_.fn.init.call(this,e.element[0],t,i),this.widget=e},refresh:function(){var e=this.bindings.text.get();null==e&&(e=""),this.widget.text(e)}})}};var w=function(e,t,i,n){i=i||0;var s,a=(n=n||[]).length,r=e.length,o=[].slice.call(e,t+i),l=o.length;if(a){for(a=t+a,s=0;t<a;t++)e[t]=n[s],s++;e.length=a}else if(i)for(e.length=t,i+=t;t<i;)delete e[--i];if(l){for(l=t+l,s=0;t<l;t++)e[t]=o[s],s++;e.length=l}for(t=e.length;t<r;)delete e[t],t++},y=l.extend({init:function(e,t){this.target=e,this.options=t,this.toDestroy=[]},bind:function(e){var t,i,n,s,a,r,o=this instanceof x,l=this.binders();for(t in e)t==d?i=!0:t==h?n=!0:t!=u||o?t==c?a=!0:"css"==t?r=!0:this.applyBinding(t,e,l):s=!0;n&&this.applyBinding(h,e,l),i&&this.applyBinding(d,e,l),a&&this.applyBinding(c,e,l),s&&!o&&this.applyBinding(u,e,l),r&&!o&&this.applyBinding("css",e,l),o&&this.target&&this.target.floatingLabel&&this.applyBinding("floatingLabel",e,l)},binders:function(){return o[this.target.nodeName.toLowerCase()]||{}},applyBinding:function(e,t,i){var n,s=i[e]||o[e],a=this.toDestroy,r=t[e];if(s){if(s=new s(this.target,t,this.options),a.push(s),r instanceof m)s.bind(r),a.push(r);else for(n in r)s.bind(r,n),a.push(r[n])}else if("template"!==e)throw Error("The "+e+" binding is not supported by the "+this.target.nodeName.toLowerCase()+" element")},destroy:function(){var e,t,i=this.toDestroy;for(e=0,t=i.length;e<t;e++)i[e].destroy()}}),x=y.extend({binders:function(){return o.widget[this.target.options.name.toLowerCase()]||{}},applyBinding:function(e,t,i){var n,s=i[e]||o.widget[e],a=this.toDestroy,r=t[e];if(!s)throw Error("The "+e+" binding is not supported by the "+this.target.options.name+" widget");if(s=new s(this.target,t,this.target.options),a.push(s),r instanceof m)s.bind(r),a.push(r);else for(n in r)s.bind(r,n),a.push(r[n])}}),C=/[A-Za-z0-9_\-]+:(\{([^}]*)\}|[^,}]+)/g,T=/\s/g;function S(e,t,i){var n,s={};for(n in e)s[n]=new i(t,e[n]);return s}function I(e,t,n,s){if(e&&!e.getAttribute("data-"+i.ns+"stop")){var a,r,o,l=e.getAttribute("data-"+i.ns+"role"),d=e.getAttribute("data-"+i.ns+"bind"),h=[],u=!0,c={};s=s||[t],(l||d)&&F(e,!1),l&&(o=function(e,t){var n=i.initWidget(e,{},t);if(n)return new x(n)}(e,n)),d&&(d=function e(t){var i,n,s,a,r,o,l,d={};for(i=0,n=(l=t.match(C)).length;i<n;i++)a=(s=l[i]).indexOf(":"),r=s.substring(0,a),"{"==(o=s.substring(a+1)).charAt(0)&&(o=e(o)),d[r]=o;return d}(d.replace(T,"")),o||((c=i.parseOptions(e,{textField:"",valueField:"",template:"",valueUpdate:f,valuePrimitive:!1,autoBind:!0},t)).roles=n,o=new y(e,c)),o.source=t,r=S(d,s,m),c.template&&(r.template=new v(s,"",c.template)),r.click&&(d.events=d.events||{},d.events.click=d.click,r.click.destroy(),delete r.click),r.source&&(u=!1),d.attr&&(r.attr=S(d.attr,s,m)),d.style&&(r.style=S(d.style,s,m)),d.events&&(r.events=S(d.events,s,g)),d.css&&(r.css=S(d.css,s,m)),o.bind(r)),o&&(e.kendoBindingTarget=o);var p=e.children;if(u&&p&&!e.getAttribute("data-"+i.ns+"stop")){for(a=0;a<p.length;a++)h[a]=p[a];for(a=0;a<h.length;a++)I(h[a],t,n,s)}}}function D(t,n){var s,a,r,o=i.rolesFromNamespaces([].slice.call(arguments,2));for(n=i.observable(n),s=0,a=(t=e(t)).length;s<a;s++)1===(r=t[s]).nodeType&&I(r,n,o)}function F(t,n){var s=t.kendoBindingTarget;if(s&&(s.destroy(),p?delete t.kendoBindingTarget:t.removeAttribute?t.removeAttribute("kendoBindingTarget"):t.kendoBindingTarget=null),n){var a=i.widgetInstance(e(t));a&&"function"==typeof a.destroy&&a.destroy()}}function E(e,t){F(e,t),A(e,t)}function A(e,t){var i=e.children;if(i)for(var n=0,s=i.length;n<s;n++)E(i[n],t)}function z(e,t){var i,n,r=[],o=0;if(!t)return e;if(e instanceof a){for(i=e.length;o<i;o++)n=e[o],r[o]=n.get?n.get(t):n[t];e=r}else e instanceof s&&(e=e.get(t));return e}i.unbind=function(t){var i,n;for(i=0,n=(t=e(t)).length;i<n;i++)E(t[i],!1)},i.bind=D,i.data.binders=o,i.data.Binder=_,i.notify=function(e,t){var i=e.element,n=i[0].kendoBindingTarget;n&&D(i,n.source,t)},i.observable=function(e){return e instanceof s||(e=new s(e)),e},i.observableHierarchy=function(e){var t=i.data.HierarchicalDataSource.create(e);return t.fetch(),function e(t){var i,n;for(i=0;i<t.length;i++)t[i]._initChildren(),(n=t[i].children).fetch(),t[i].items=n.data(),e(t[i].items)}(t.data()),t._data._dataSource=t,t._data}}(window.kendo.jQuery),tr=window.kendo.jQuery,td=(tl=window.kendo).ui.Widget,th=tl.ui,tu=tr.isPlainObject,tc=".kendoTextBox",tp="change",tf="disabled",tm="readonly",tg="k-input-inner",tv="k-focus",t_="k-disabled",tb="k-no-click",tk="aria-disabled",tw=td.extend({init:function(e,t){td.fn.init.call(this,e,t),t=tr.extend(!0,{},t),this.options.value=t.value||this.element.val(),this.options.readonly=void 0!==t.readonly?t.readonly:!!this.element.attr("readonly"),this.options.enable=t.enable!==to?t.enable:!this.element.attr("disabled"),this.options.placeholder=t.placeholder||this.element.attr("placeholder"),this.value(this.options.value),this._wrapper(),this._label(),this._editable({readonly:this.options.readonly,disable:!this.options.enable}),this.element.addClass(tg).attr("placeholder",this.options.placeholder).attr("autocomplete","off"),tl.notify(this),this._applyCssClasses()},events:[tp],options:{name:"TextBox",value:"",readonly:!1,enable:!0,placeholder:"",label:null,rounded:"medium",size:"medium",fillMode:"solid"},value:function(e){if(e===to)return this._value;this._value=e,this.element.val(e),this.floatingLabel&&this.floatingLabel.refresh()},readonly:function(e){this._editable({readonly:e===to||e,disable:!1}),this.floatingLabel&&this.floatingLabel.readonly(e===to||e)},enable:function(e){this._editable({readonly:!1,disable:!(e=e===to||e)}),this.floatingLabel&&this.floatingLabel.enable(e=e===to||e)},focus:function(){this.element[0].focus()},destroy:function(){this.floatingLabel&&this.floatingLabel.destroy(),this.element.off(tc),this.element[0].style.width="",this.element.removeClass(tg),td.fn.destroy.call(this)},setOptions:function(e){this.destroy(),this._inputLabel&&(this._inputLabel.remove(),this._inputLabel=null),this._floatingLabelContainer?(this.floatingLabel.destroy(),this.floatingLabel=null,this.element.unwrap(),this.element.unwrap(),this._floatingLabelContainer=null):this.element.unwrap(),tl.deepExtend(this.options,e),this.init(this.element,this.options)},_editable:function(e){var t=this.element,i=this.wrapper,n=e.disable,s=e.readonly;t.off(tc),s||n?(t.attr(tf,n).attr(tm,s).attr(tk,n),i.toggleClass(t_,n).toggleClass(tb,s)):(t.prop(tf,!1).prop(tm,!1).attr(tk,!1),i.removeClass(t_).removeClass(tb),t.on("focusin"+tc,this._focusin.bind(this)),t.on("focusout"+tc,this._focusout.bind(this)),t.on("change"+tc,this._change.bind(this)))},_label:function(){var e,t,i=this.element,n=this.options,s=i.attr("id");null!==n.label&&(e=!!tu(n.label)&&n.label.floating,t=tu(n.label)?n.label.content:n.label,e&&(this._floatingLabelContainer=this.wrapper.wrap("<span></span>").parent(),this.floatingLabel=new tl.ui.FloatingLabel(this._floatingLabelContainer,{widget:this})),tl.isFunction(t)&&(t=t.call(this)),t||(t=""),s||(s=n.name+"_"+tl.guid(),i.attr("id",s)),this._inputLabel=tr("<label class='k-label k-input-label' for='"+s+"'>"+t+"</label>'").insertBefore(this.wrapper))},_focusin:function(){this.wrapper.addClass(tv)},_focusout:function(){this.wrapper.removeClass(tv)},_change:function(e){var t=this.element.val();this._value=t,this.trigger(tp,{value:t,originalEvent:e})},_wrapper:function(){var e,t=this.element,i=t[0];(e=t.wrap("<span class='k-input k-textbox'></span>").parent())[0].style.cssText=i.style.cssText,i.style.width="100%",this.wrapper=e.addClass(i.className).removeClass("input-validation-error")}}),tl.cssProperties.registerPrefix("TextBox","k-input-"),tl.cssProperties.registerValues("TextBox",[{prop:"rounded",values:tl.cssProperties.roundedValues.concat([["full","full"]])}]),th.plugin(tw),function(e,t){var i=window.kendo,n=i.caret,s=i.keys,a=i.html,r=i.ui,o=r.Widget,l=i._activeElement,d=i._extractFormat,h=i.parseFloat,u=i.support.placeholder,c=i.getCulture,p="change",f="disabled",m="readonly",g="k-input-inner",v="spin",_=".kendoNumericTextBox",b="mouseenter"+_+" mouseleave.kendoNumericTextBox",k="k-focus",w="k-hover",y="focus",x="k-selected",C="k-disabled",T="k-invalid",S="aria-disabled",I=/^(-)?(\d*)$/,D=e.isPlainObject,F=e.extend,E=o.extend({init:function(t,n){var s,a,r,l,h,u=this,c=n&&void 0!==n.step;o.fn.init.call(u,t,n),n=u.options,t=u.element.on("focusout"+_,u._focusout.bind(u)).attr("role","spinbutton"),n.placeholder=n.placeholder||t.attr("placeholder"),s=u.min(t.attr("min")),a=u.max(t.attr("max")),r=u._parse(t.attr("step")),null===n.min&&null!==s&&(n.min=s),null===n.max&&null!==a&&(n.max=a),c||null===r||(n.step=r),u._initialOptions=F({},n),h=t.attr("type"),u._reset(),u._wrapper(),u._arrows(),u._validation(),u._input(),i.support.mobileOS?u._text.on("touchend"+_+" "+y+_,function(){i.support.browser.edge?u._text.one(y+_,function(){u._focusin()}):u._focusin(),u.selectValue()}):u._text.on(y+_,u._click.bind(u)),t.attr("aria-valuemin",null!==n.min?n.min*n.factor:n.min).attr("aria-valuemax",null!==n.max?n.max*n.factor:n.max),n.format=d(n.format),null==(l=n.value)&&(l="number"==h?parseFloat(t.val()):t.val()),u.value(l),!n.enable||t.is("[disabled]")||e(u.element).parents("fieldset").is(":disabled")?u.enable(!1):u.readonly(t.is("[readonly]")),u.angular("compile",function(){return{elements:u._text.get()}}),u._label(),u._ariaLabel(u._text),u._applyCssClasses(),i.notify(u)},options:{name:"NumericTextBox",decimals:null,enable:!0,restrictDecimals:!1,min:null,max:null,value:null,step:1,round:!0,culture:"",format:"n",spinners:!0,placeholder:"",selectOnFocus:!1,factor:1,upArrowText:"Increase value",downArrowText:"Decrease value",label:null,size:"medium",fillMode:"solid",rounded:"medium"},events:[p,v],_editable:function(e){var t=this,i=t.element,n=e.disable,s=e.readonly,a=t._text.add(i),r=t.wrapper.off(b);t._toggleText(!0),t._upArrowEventHandler.unbind("press"),t._downArrowEventHandler.unbind("press"),i.off("keydown"+_).off("keyup"+_).off("input"+_).off("paste"+_),t._inputLabel&&t._inputLabel.off(_),s||n?(r.addClass(n?C:"").removeClass(n?"":C),a.attr(f,n).attr(m,s).attr(S,n)):(r.removeClass(C).on(b,t._toggleHover),a.prop(f,!1).prop(m,!1).attr(S,!1),t._upArrowEventHandler.bind("press",function(e){e.preventDefault(),t._spin(1),t._upArrow.addClass(x)}),t._downArrowEventHandler.bind("press",function(e){e.preventDefault(),t._spin(-1),t._downArrow.addClass(x)}),t.element.on("keydown"+_,t._keydown.bind(t)).on("keyup"+_,t._keyup.bind(t)).on("paste"+_,t._paste.bind(t)).on("input"+_,t._inputHandler.bind(t)),t._inputLabel&&t._inputLabel.on("click"+_,t.focus.bind(t)))},readonly:function(e){this._editable({readonly:void 0===e||e,disable:!1}),this.floatingLabel&&this.floatingLabel.readonly(void 0===e||e)},enable:function(e){this._editable({readonly:!1,disable:!(e=e===t||e)}),this.floatingLabel&&this.floatingLabel.enable(e=e===t||e)},setOptions:function(e){o.fn.setOptions.call(this,e),this.wrapper.toggleClass("k-expand-padding",!this.options.spinners),this._text.prop("placeholder",this.options.placeholder),this._placeholder(this.options.placeholder),this.element.attr({"aria-valuemin":null!==this.options.min?this.options.min*this.options.factor:this.options.min,"aria-valuemax":null!==this.options.max?this.options.max*this.options.factor:this.options.max}),this.options.format=d(this.options.format),this._upArrowEventHandler.destroy(),this._upArrowEventHandler=null,this._downArrowEventHandler.destroy(),this._downArrowEventHandler=null,this._arrowsWrap.remove(),this._arrows(),this._applyCssClasses(),this._inputLabel&&(this._inputLabel.off(_),this._inputLabel.remove(),this.floatingLabel&&(this.floatingLabel.destroy(),this._floatingLabelContainer&&this.wrapper.unwrap())),this._label(),this._editable({readonly:this.options.readonly,disable:!this.options.enable}),e.value!==t&&this.value(e.value)},destroy:function(){this._inputLabel&&(this._inputLabel.off(_),this.floatingLabel&&this.floatingLabel.destroy()),this.element.add(this._text).add(this._upArrow).add(this._downArrow).off(_),this._upArrowEventHandler.destroy(),this._downArrowEventHandler.destroy(),this._form&&this._form.off("reset",this._resetHandler),o.fn.destroy.call(this)},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},step:function(e){return this._option("step",e)},value:function(e){if(e===t)return this._value;(e=this._parse(e))===this._adjust(e)&&(this._update(e),this._old=this._value,this.floatingLabel&&this.floatingLabel.refresh())},focus:function(){this._focusin()},_adjust:function(e){var t=this.options,i=t.min,n=t.max;return null===e||(null!==i&&e<i?e=i:null!==n&&e>n&&(e=n)),e},_arrows:function(){var t,n=this,s=function(){clearTimeout(n._spinning),t.removeClass(x)},a=n.options,r=a.spinners;(t=n.element.siblings(".k-icon-button"))[0]||(t=e(A("increase",a.upArrowText,a)+A("decrease",a.downArrowText,a)).appendTo(n.wrapper),n._arrowsWrap=t.wrapAll('<span class="k-input-spinner k-spin-button"/>').parent()),r||(t.parent().toggle(r),n.wrapper.addClass("k-expand-padding")),n._upArrow=t.eq(0),n._upArrowEventHandler=new i.UserEvents(n._upArrow,{release:s}),n._downArrow=t.eq(1),n._downArrowEventHandler=new i.UserEvents(n._downArrow,{release:s})},_validation:function(){var t=this.element;this._validationIcon=e("<span class='k-input-validation-icon k-icon k-i-warning k-hidden'></span>").insertAfter(t)},_blur:function(){this._toggleText(!0),this._change(this.element.val())},_click:function(e){var t=this;clearTimeout(t._focusing),t._focusing=setTimeout(function(){var i,s,a,r=e.target,o=n(r)[0],l=r.value.substring(0,o),d=t._format(t.options.format),h=d[","],u=0;h&&(s=RegExp("\\"+h,"g"),a=RegExp("(-)?("+d.symbol+")?([\\d\\"+h+"]+)(\\"+d["."]+")?(\\d+)?")),a&&(i=a.exec(l)),i&&(u=i[0].replace(s,"").length,-1!=l.indexOf("(")&&t._value<0&&u++),t._focusin(),n(t.element[0],u),t.selectValue()})},selectValue:function(){this.options.selectOnFocus&&this.element[0].select()},_getFactorValue:function(e){var t=this.options.factor;return t&&1!==t&&null!==(e=i.parseFloat(e))&&(e/=t),e},_change:function(e){e=this._getFactorValue(e),this._update(e),e=this._value,this._old!=e&&(this._old=e,this._typing||this.element.trigger(p),this.trigger(p)),this._typing=!1},_culture:function(e){return e||c(this.options.culture)},_focusin:function(){this.wrapper.addClass(k),this._toggleText(!1),this.element[0].focus()},_focusout:function(){clearTimeout(this._focusing),this.wrapper.removeClass(k).removeClass(w),this._blur(),this._removeInvalidState()},_format:function(e,t){var i=this._culture(t).numberFormat;return(e=e.toLowerCase()).indexOf("c")>-1?i=i.currency:e.indexOf("p")>-1&&(i=i.percent),i},_input:function(){var t,n=this.options,s=this.element.addClass(g).show()[0],a=s.accessKey;(t=this.wrapper.find("."+g).first()).length<2&&(t=e('<input type="text"/>').attr(i.attr("validate"),!1).insertBefore(s));try{s.setAttribute("type","text")}catch(e){s.type="text"}t[0].title=s.title,t[0].tabIndex=s.tabIndex,t[0].style.cssText=s.style.cssText,t.prop("placeholder",n.placeholder),a&&(t.attr("accesskey",a),s.accessKey=""),this._text=t.addClass(s.className).attr({role:"spinbutton","aria-valuemin":null!==n.min?n.min*n.factor:n.min,"aria-valuemax":null!==n.max?n.max*n.factor:n.max,autocomplete:"off"})},_keydown:function(e){var t=e.keyCode;t===s.NUMPAD_DOT&&(this._numPadDot=!0),t!=s.DOWN?t!=s.UP?t!=s.ENTER?(t!=s.TAB&&(this._typing=!0),this._cachedCaret=n(this.element)):this._change(this.element.val()):this._step(1):this._step(-1)},_keyup:function(){this._removeInvalidState()},_inputHandler:function(){var e=this.element,t=e.val(),i=this.options.min,s=this._format(this.options.format),a=s["."],r=null!==i&&i>=0&&"-"===t.charAt(0);this._numPadDot&&"."!==a&&(t=t.replace(".",a),this.element.val(t),this._numPadDot=!1),this._isPasted&&this._parse(t)&&(t=this._parse(t).toString().replace(".",s["."])),this._numericRegex(s).test(t)&&!r?this._oldText=t:(this._blinkInvalidState(),this.element.val(this._oldText),this._cachedCaret&&(n(e,this._cachedCaret[0]),this._cachedCaret=null)),this._isPasted=!1},_blinkInvalidState:function(){this._addInvalidState(),clearTimeout(this._invalidStateTimeout),this._invalidStateTimeout=setTimeout(this._removeInvalidState.bind(this),100)},_addInvalidState:function(){this.wrapper.addClass(T),this._validationIcon.removeClass("k-hidden")},_removeInvalidState:function(){this.wrapper.removeClass(T),this._validationIcon.addClass("k-hidden"),this._invalidStateTimeout=null},_numericRegex:function(e){var t=e["."],i=this.options.decimals,n="*";return"."===t&&(t="\\"+t),null===i&&(i=e.decimals),0===i&&this.options.restrictDecimals?I:(this.options.restrictDecimals&&(n="{0,"+i+"}"),this._separator!==t&&(this._separator=t,this._floatRegExp=RegExp("^(-)?(((\\d+("+t+"\\d"+n+")?)|("+t+"\\d"+n+")))?$")),this._floatRegExp)},_paste:function(e){var t=this,i=e.target,n=i.value,s=t._format(t.options.format);t._isPasted=!0,setTimeout(function(){var e=t._parse(i.value);null===e?t._update(n):(i.value=e.toString().replace(".",s["."]),t._adjust(e)===e&&t._numericRegex(s).test(i.value)||(n=t._getFactorValue(i.value),t._update(n)))})},_option:function(e,i){var n=this.element,s=this.options;if(i===t)return s[e];((i=this._parse(i))||"step"!==e)&&(s[e]=i,n.add(this._text).attr("aria-value"+e,i),n.attr(e,i))},_spin:function(e,t){var i=this;t=t||500,clearTimeout(i._spinning),i._spinning=setTimeout(function(){i._spin(e,50)},t),i._step(e)},_step:function(e){var t=this.element,i=this._value,n=this._parse(t.val())||0,s=this.options.decimals||2;l()!=t[0]&&this._focusin(),this.options.factor&&n&&(n/=this.options.factor),n=+(n+this.options.step*e).toFixed(s),n=this._adjust(n),this._update(n),this._typing=!1,i!==n&&this.trigger(v)},_toggleHover:function(t){e(t.currentTarget).toggleClass(w,"mouseenter"===t.type)},_toggleText:function(e){this._text.toggle(e),e?this._text.removeAttr("aria-hidden"):this._text.attr("aria-hidden","true"),this.element.toggle(!e)},_parse:function(e,t){return h(e,this._culture(t),this.options.format)},_round:function(e,t){return(this.options.round?i._round:function(e,t){var i=parseFloat(e,10).toString().split(".");return i[1]&&(i[1]=i[1].substring(0,t)),i.join(".")})(e,t)},_update:function(e){var t,n,s=this.options,a=s.factor,r=s.format,o=s.decimals,l=this._culture(),d=this._format(r,l);null===o&&(o=d.decimals),(n=null!==(e=this._parse(e,l)))&&(e=parseFloat(this._round(e,o),10)),this._value=e=this._adjust(e),this._placeholder(i.toString(e,r,l)),n?(a&&(e=parseFloat(this._round(e*a,o),10)),-1!==(e=e.toString()).indexOf("e")&&(e=this._round(+e,o)),t=e,e=e.replace(".",d["."])):(e=null,t=null),this.element.val(e),this._oldText=e,this.element.add(this._text).attr("aria-valuenow",t)},_placeholder:function(e){var t=this._text;t.val(e),u||e||t.val(this.options.placeholder),t.attr("title",this.element.attr("title")||t.val())},_label:function(){var n,s,a=this.element,r=this.options,o=a.attr("id");null!==r.label&&(n=!!D(r.label)&&r.label.floating,s=D(r.label)?r.label.content:r.label,n&&(this._floatingLabelContainer=this.wrapper.wrap("<span></span>").parent(),this.floatingLabel=new i.ui.FloatingLabel(this._floatingLabelContainer,{widget:this})),i.isFunction(s)&&(s=s.call(this)),s||(s=""),o||(o=r.name+"_"+i.guid(),a.attr("id",o)),this._inputLabel=e("<label class='k-label k-input-label' for='"+o+"'>"+s+"</label>'").insertBefore(this.wrapper),this.element.attr("disabled")===t&&this.element.attr("readonly")===t&&this._inputLabel.on("click"+_,this.focus.bind(this)))},_wrapper:function(){var e,t=this.element,i=t[0];(e=t.parents(".k-numerictextbox")).is("span.k-numerictextbox")||(e=t.hide().wrap("<span/>").parent()),e[0].style.cssText=i.style.cssText,i.style.width="",this.wrapper=e.addClass("k-numerictextbox k-input").addClass(i.className).removeClass("input-validation-error").css("display","")},_reset:function(){var t=this,i=t.element,n=i.attr("form"),s=n?e("#"+n):i.closest("form");s[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(i[0].value),t.max(t._initialOptions.max),t.min(t._initialOptions.min)})},t._form=s.on("reset",t._resetHandler))}});function A(e,t,i){return a.renderButton('<button role="button" tabindex="-1" unselectable="on" class="k-spinner-'+("increase"===e?"increase":"decrease")+'" aria-label="'+t+'" title="'+t+'"></button>',F({},i,{icon:"increase"===e?"arrow-n":"arrow-s",shape:null,rounded:null}))}i.cssProperties.registerPrefix("NumericTextBox","k-input-"),i.cssProperties.registerValues("NumericTextBox",[{prop:"rounded",values:i.cssProperties.roundedValues.concat([["full","full"]])}]),r.plugin(E)}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.ui,s=n.Widget,a=i.parseColor,r=i.ui.Popup.TabKeyTrap,o=e.extend,l=".kendoColorTools",d="keydown"+l;function h(e,t,i){((i=a(i))&&!i.equals(e.color())||i!==e.color())&&("change"==t&&(e._value=i,e._updateInput(e._value)),i&&1!=i.a?i=i.toCssRgba():i&&(i=i.toCss()),e.trigger(t,{value:i}))}o(n,{colorpicker:{ColorSelector:s.extend({init:function(e,t){s.fn.init.call(this,e,t),e=this.element,t=this.options,e.is("input")?(this._initialValue(),this._preventDefaultLabelClick()):this._value=a(t.value),this._tabIndex=e.attr("tabIndex")||0,t._standalone&&(this._triggerSelect=this._triggerChange)},options:{name:"ColorSelector",ARIATemplate:'Current selected color is #=data || "none"#',value:null,_standalone:!0},events:["change","select","forceSelect","cancel"],color:function(e){return e!==t&&(this._value=a(e),this.element.is("input")&&this._updateInput(this._value),this._updateUI(this._value)),this._value},value:function(e){return(e=this.color(e))&&(e=this.options.opacity?e.toCssRgba():e.toCss()),e||null},enable:function(e){0==arguments.length&&(e=!0),this.element.is("input")&&this.element.attr("disabled",!e),this.wrapper.toggleClass("k-disabled",!e),this._onEnable(e)},_attachFocusEvents:function(){this.wrapper.on(d,this._navKeydown.bind(this)).on("focusout"+l,this._navFocusout.bind(this))},_initialValue:function(){var e=this.element,t=this.options.value||e.attr("value");t&&(this._value=a(t,!0)),this.element.val(t)},_innerTabindex:function(e){this.wrapper.find(".k-draghandle, .k-button, .k-input-inner").attr("tabindex",e)},_isInputTypeColor:function(){var e=this.element[0];return/^input$/i.test(e.tagName)&&/^color$/i.test(e.type)},_navFocusout:function(){var e=this,t=e.wrapper[0];setTimeout(function(){t.contains(document.activeElement)||e._releaseInnerFocus()})},_navKeydown:function(e){var n=this.wrapper;e.keyCode===i.keys.ENTER&&n.attr("tabindex")?(e.preventDefault(),this._trapInnerFocus()):e.keyCode===i.keys.ESC&&n.attr("tabindex")===t&&(this._releaseInnerFocus(),this.wrapper.trigger("focus"))},_releaseInnerFocus:function(){this._tabKeyTrap.removeTrap(),this.wrapper.attr("tabindex",this._tabIndex),this._innerTabindex(-1)},_select:function(e,t){var i=this._value;e=this.color(e),t||((!e||i&&e.equals(i))&&(null!==e||e===i)?this._standalone||this.trigger("cancel"):(this.element.trigger("change"),this.trigger("change",{value:this.value()})))},_navigation:function(){var e=this.value();e&&e.indexOf("rgba")>-1&&(e=e.replace("rgba","RGBA")),this.options._otOfPicker?(this._innerTabindex(-1),this._attachFocusEvents(),this._tabKeyTrap=new r(this.wrapper),this._ariaTemplate=i.template(this.options.ARIATemplate),this.wrapper.attr({"aria-label":this._ariaTemplate(e||""),tabindex:this._tabIndex})):(this.wrapper.removeAttr("tabindex"),this.wrapper.removeAttr("aria-label"),this.wrapper.removeAttr("role"),this.wrapper.removeAttr("aria-keyshortcuts"))},_trapInnerFocus:function(){this._innerTabindex(0),this.wrapper.removeAttr("tabindex"),this.wrapper.find(".k-hsv-draghandle").trigger("focus"),this._tabKeyTrap.trap()},_triggerSelect:function(e){h(this,"select",e)},_triggerChange:function(e){h(this,"change",e)},destroy:function(){this.element&&this.element.off(l),this.wrapper&&(this.wrapper.off(d),this.wrapper.off(l).find("*").off(l),this.wrapper=null),s.fn.destroy.call(this)},_preventDefaultLabelClick:function(){var e=this.element,t=e.closest("label"),i=e.attr("id");i&&(t=t.add('label[for="'+i+'"]')),t.on("click",function(e){e.preventDefault()})},_updateUI:e.noop,_updateInput:function(e){var t,n="";e&&(n=this._isInputTypeColor()||1==e.a?e.toCss():e.toCssRgba(),this.element.val(n)),this.options._otOfPicker&&(this._ariaTemplate||(this._ariaTemplate=i.template(this.options.ARIATemplate)),(t=this.value())&&t.indexOf("rgba")>-1&&(t=t.replace("rgba","RGBA")),this.wrapper.attr("aria-label",this._ariaTemplate(t||"")))},_selectOnHide:function(){return null},_cancel:function(){this.trigger("cancel")}})}})}(window.kendo.jQuery),function(e,t){var i=kendo.ui.colorpicker,n=e.extend,s=kendo.Color,a=kendo.parseColor;function r(e,t){var i,n;return(Math.max(i=o(l(e,t)),n=o(l(t,{r:0,g:0,b:0,a:1})))+.05)/(Math.min(i,n)+.05)}function o(e){var t=[e.r,e.g,e.b].map(function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)});return .2126*t[0]+.7152*t[1]+.0722*t[2]}function l(e,t){var i=d(e.r,0,255),n=d(e.g,0,255),s=d(e.b,0,255),a=d(e.a,0,1);return{r:Math.round((1-a)*d(t.r,0,255)+a*i),g:Math.round((1-a)*d(t.g,0,255)+a*n),b:Math.round((1-a)*d(t.b,0,255)+a*s)}}function d(e,t,i){return null==e||isNaN(e)||e<=t?t:e>=i?i:e}function h(e,t){if(0===e.length)return"";var i=e.reduce(function(e,i,n,s){return 0===n?kendo.format("M {0},{1}",i[0],i[1]):kendo.format("{0} {1}",e,t(i,n,s))},"");return kendo.format('<path d="{0}" fill="none" stroke="white" stroke-width="1"/>',i)}n(i,{contrastToolUtils:{getContrastFromTwoRGBAs:r,renderSvgCurveLine:function(e,t,i){var o,l=function(o,h,u,c,p){var f,m,g,v,_,b=(u+c)/2,k=r(a((m=d((f=n({},t,{s:h/e.width,v:1-b/e.height})).h,0,359.9),g=d(f.s,0,1),v=d(f.v,0,1),_=d(f.a,0,1),s.fromHSV(m,g,v,_).toCssRgba())).toBytes(),a(i).toBytes());return u+.5>c?k<o+1&&k>o-1?b:null:p(k,o)?l(o,h,u,c-(c-u)/2,p):l(o,h,u+(c-u)/2,c,p)},u=function(e,t){return e>t},c=function(e,t){return e<t},p=function(t,i,n){for(var s=[],a=0;a<=e.width;a+=e.width/i){var r=l(t,a,0,e.height,n?c:u);null!==r&&s.push([a,r])}return s},f=(o=function(e,t,i,n){var s,a,r,o,l=(s=t||e,{length:Math.sqrt(Math.pow(r=(a=i||e)[0]-s[0],2)+Math.pow(o=a[1]-s[1],2)),angle:Math.atan2(o,r)}),d=l.angle+(n?Math.PI:0),h=.1*l.length;return[e[0]+Math.cos(d)*h,e[1]+Math.sin(d)*h]},function(e,t,i){var n=o(i[t-1],i[t-2],e),s=o(e,i[t-1],i[t+1],!0);return kendo.format("C {0},{1} {2},{3} {4},{5}",n[0],n[1],s[0],s[1],e[0],e[1])});return'<svg xmlns="http://www.w3.org/2000/svg" style="position: absolute; overflow: visible; pointer-events: none; left: 0px; top: 0px; z-index: 3;" >'+(h(p(4.5,16,!1),f)+h(p(4.5,16,!0),f)+h(p(7,16,!1),f)+h(p(7,16,!0),f))+"</svg>"}}})}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.ui,s=i.Observable,a=i.parseColor,r=e.extend,o=i.Color,l=i.keys,d="#ffffff",h="#000000",u="keydown.kendoColorTools",c=n.colorpicker.ColorSelector,p=n.colorpicker.contrastToolUtils;function f(e){e.preventDefault()}var m=s.extend({init:function(e,t){this.element=e,this.options=t,this._viewModel=i.observable({switchMode:this.switchMode.bind(this),keydown:this.keydown.bind(this),mode:function(e){return e===this.get("format")},format:t.format,formats:t.formats,rgb:null,hex:function(){return null!==this.get("rgb")&&this.get("rgb").toCss({alpha:t.opacity})}}),this._changeHandler=this.change.bind(this),this._viewModel.bind("change",this._changeHandler),this._render(),this.element.on(u,this.keydown.bind(this)),s.fn.init.call(this)},_template:i.template('# if (options.formats && options.formats.length > 1) { #<div class="k-vstack"><button class="k-colorgradient-toggle-mode" data-#:ns#role="button" data-#:ns#icon="arrows-kpi" data data-#:ns#bind="click: switchMode" data-#:ns#fill-mode="flat" data-#:ns#size="#: options.size #" title="#: options.messages.toggleFormat #"></button></div># } ## if (options.formats && options.formats.indexOf("hex") >= 0) { #<div class="k-vstack k-flex-1" data-#:ns#bind="visible: mode(\'hex\')"><input type="text" data-#:ns#bind="value: hex" data-#:ns#role="textbox" data-#:ns#size="#: options.size #" tabindex="#:options.tabindex#"  aria-label="#: options.messages.hex #"/><label class="k-colorgradient-input-label">HEX</label></div># } ## if (options.formats && options.formats.indexOf("rgb") >= 0) { #<div  class="k-vstack" data-#:ns#bind="visible: mode(\'rgb\')"><input tabindex="#:options.tabindex#" data-#:ns#bind="value: rgb.r" data-#:ns#role="numerictextbox" data-#:ns#size="#: options.size #" data-#:ns#max="255" data-#:ns#min="0" data-#:ns#decimals="0" data-#:ns#spinners="false" data-#:ns#format="n0"  aria-label="#: options.messages.red #" /><label class="k-colorgradient-input-label">R</label></div><div  class="k-vstack" data-#:ns#bind="visible: mode(\'rgb\')"><input tabindex="#:options.tabindex#" data-#:ns#bind="value: rgb.g" data-#:ns#role="numerictextbox" data-#:ns#size="#: options.size #" data-#:ns#max="255" data-#:ns#min="0" data-#:ns#decimals="0" data-#:ns#spinners="false" data-#:ns#format="n0"  aria-label="#: options.messages.green #" /><label class="k-colorgradient-input-label">G</label></div><div  class="k-vstack" data-#:ns#bind="visible: mode(\'rgb\')"><input tabindex="#:options.tabindex#" data-#:ns#bind="value: rgb.b" data-#:ns#role="numerictextbox" data-#:ns#size="#: options.size #" data-#:ns#max="255" data-#:ns#min="0" data-#:ns#decimals="0" data-#:ns#spinners="false" data-#:ns#format="n0"  aria-label="#: options.messages.blue #"/><label class="k-colorgradient-input-label">B</label></div>#if(options.opacity){#<div  class="k-vstack" data-#:ns#bind="visible: mode(\'rgb\')"><input tabindex="#:options.tabindex#" data-#:ns#bind="value: rgb.a" data-#:ns#role="numerictextbox" data-#:ns#size="#: options.size #" data-#:ns#step="0.1" data-#:ns#max="1" data-#:ns#min="0" data-#:ns#decimals="1" data-#:ns#spinners="false" data-#:ns#format="n1"  aria-label="#: options.messages.alpha #" /><label class="k-colorgradient-input-label">A</label></div># } ## } #'),destroy:function(){this._viewModel.unbind("change",this._changeHandler),i.unbind(this.element),i.destroy(this.element),this.element.off(u),delete this._viewModel,delete this._changeHandler},change:function(e){e.field.indexOf("rgb")>=0?(this._color=this._tryParseColor(this._viewModel.rgb.toCssRgba()),this._viewModel.set("hex",this._color.toCss({alpha:this.options.opacity}))):"hex"===e.field&&(this._color=this._tryParseColor(e.sender[e.field]),this._viewModel.set("rgb",this._color)),this._preventChangeEvent||this.trigger("change",{value:this._color})},keydown:function(t){var i=e(t.target).data("kendoTextBox");t.keyCode===l.ENTER&&e(t.target).is("input")&&(i&&i._change&&i._change(),this.trigger("change",{value:this._color}),this.trigger("select",{value:this._color}))},reset:function(){this._preventChangeEvent=!0,this._viewModel.set("rgb",a(h)),delete this._preventChangeEvent},switchMode:function(){var e=this._viewModel,t=e.format,i=e.formats.indexOf(t)+1;i=i>=e.formats.length?0:i,this._preventChangeEvent=!0,this._viewModel.set("format",e.formats[i]),delete this._preventChangeEvent},value:function(e){this._color=e&&e.toBytes()||a(h),this._preventChangeEvent=!0,this._viewModel.set("rgb",this._color),delete this._preventChangeEvent},_render:function(){this.element.append(this._template({ns:i.ns,guid:i.guid(),options:this.options})).parent(),i.bind(this.element,this._viewModel),this.element.attr("data-"+i.ns+"stop","stop")},_tryParseColor:function(e){try{e=a(e)||this._color}catch(t){e=this._color}return e}}),g=c.extend({init:function(t,n){var s;c.fn.init.call(this,t,n),(n=this.options=i.deepExtend({},this.options,n)).messages.previewInput&&(n.messages.hex=n.messages.previewInput),n.messages=n.messages?e.extend(this.options.messages,n.messages):this.options.messages,t=this.element,this._wrapper(),this._sliders(),this._hsvArea(),s=this._value,this._gradientInputs(),this._updateUI(s),this._navigation()},options:{name:"ColorGradient",opacity:!1,hsvDragARIATemplate:'Color well with two-dimensional slider for selecting saturation and value. Selected color is #=data || "none"#',input:!0,format:"hex",formats:["rgb","hex"],contrastTool:!1,size:"medium",messages:{contrastRatio:"Contrast ratio:",fail:"Fail",pass:"Pass",hex:"HEX",toggleFormat:"Toggle format",red:"Red channel",green:"Green channel",blue:"Blue channel",alpha:"Alpha channel"},_otOfPicker:!0},_template:i.template('<div class="k-colorgradient-canvas k-hstack"><div class="k-hsv-rectangle"><div class="k-hsv-gradient"></div><div role="slider" aria-orientation="undefined" class="k-hsv-draghandle k-draghandle"></div></div><div class="k-hsv-controls k-hstack"><input class="k-hue-slider k-colorgradient-slider" /># if (opacity) { #<input class="k-alpha-slider k-colorgradient-slider" /># } #</div></div># if (input) { #<div class="k-colorgradient-inputs k-hstack"></div># } ## if (contrastTool) { #<div class="k-colorgradient-color-contrast k-vbox"></div># } #'),focus:function(){this._hsvHandle.focus()},setBackgroundColor:function(t){this.options.contrastTool&&(this.options.contrastTool=e.isPlainObject(this.options.contrastTool)?r({},this.options.contrastTool,{backgroundColor:t}):{backgroundColor:t},this._updateColorContrast(this.color()||a(d)))},_getHSV:function(e,t,i,n){var s=this._hsvRect,r=s.width(),l=s.height(),d=this._hsvHandle.position();return r&&l?(null==e&&(e=this._hueSlider.value()),null==t&&(t=d.left/r),null==i&&(i=1-d.top/l),null==n&&(n=this._opacitySlider?this._opacitySlider.value()/100:1),o.fromHSV(e,t,i,n)):this.color()?this.color().toHSV():a(h)},_gradientInputs:function(){var e=this,t=e.options;e._colorgradientInputs.length&&(e._colorInput=new m(e._colorgradientInputs,r({},t,{tabindex:0})),e._colorInput.bind("change",function(t){e._updateUI(t.value,!0)}),e._colorInput.bind("select",function(t){var i=a(t.value);e._select(i),e.trigger("forceSelect",{value:e.value()})}))},_hsvArea:function(){var e,t=this,n=t.wrapper.find(".k-hsv-rectangle"),s=n.find(".k-draghandle").attr("tabIndex",0).on(u,(e=t._hsvKeydown,function(){return e.apply(t,arguments)})),a=this.value();function r(e,i){var n,s,a=this.offset,r=e-a.left,o=i-a.top,l=this.width,d=this.height;n=(r=r<0?0:r>l?l:r)/l,s=1-(o=o<0?0:o>d?d:o)/d,t._svChange(n,s)}a&&a.indexOf("rgba")>-1&&(a=a.replace("rgba","RGBA")),this._hsvDragAriaTemplate||(this._hsvDragAriaTemplate=i.template(this.options.hsvDragARIATemplate)),s.attr("aria-label",this._hsvDragAriaTemplate(a||"")),t._hsvEvents=new i.UserEvents(n,{global:!0,press:function(e){this.offset=i.getOffset(n),this.width=n.width(),this.height=n.height(),s.focus(),r.call(this,e.x.location,e.y.location)},start:function(){n.addClass("k-dragging"),s.focus()},move:function(e){e.preventDefault(),r.call(this,e.x.location,e.y.location)},end:function(){n.removeClass("k-dragging")}}),t._hsvRect=n,t._hsvHandle=s},_hsvKeydown:function(e){var t=this;function i(i,n){var s=t._getHSV();s[i]+=n*(e.shiftKey?.01:.05),s[i]<0&&(s[i]=0),s[i]>1&&(s[i]=1),t._updateUI(s),f(e)}function n(i){var n=t._getHSV();n.h+=i*(e.shiftKey?1:5),n.h<0&&(n.h=0),n.h>359&&(n.h=359),t._updateUI(n),f(e)}switch(e.keyCode){case l.LEFT:e.ctrlKey?n(-1):i("s",-1);break;case l.RIGHT:e.ctrlKey?n(1):i("s",1);break;case l.UP:i(e.ctrlKey&&t._opacitySlider?"a":"v",1);break;case l.DOWN:i(e.ctrlKey&&t._opacitySlider?"a":"v",-1);break;case l.ENTER:t._select(t._getHSV());break;case l.F2:t._colorInput.element.find("input").trigger("focus").select();break;case l.ESC:t._cancel()}},_onEnable:function(e){var t=this.wrapper;this._hueSlider.enable(e),this._opacitySlider&&this._opacitySlider.enable(e),t.find("input").attr("disabled",!e),this.options._standalone&&(e?t.removeAttr("aria-disabled"):t.attr("aria-disabled",!0))},_reset:function(){this._colorInput&&this._colorInput.reset(),this._resetHsv(),this._resetColorContrast()},_resetColorContrast:function(){var e=this.options.contrastTool;this._contrastTool.length&&this._updateColorContrast(e.backgroundColor?a(e.backgroundColor):a(d))},_resetHsv:function(){var e=a(h);this._updateHsv(e)},_sliders:function(){var e=this,t=e.wrapper,i=t.find(".k-hue-slider"),n=t.find(".k-alpha-slider");function s(t){e._updateUI(e._getHSV(t.value,null,null,null))}function a(t){e._updateUI(e._getHSV(null,null,null,t.value/100))}i.attr("aria-label","hue"),e._hueSlider=i.kendoSlider({min:0,max:360,tickPlacement:"none",showButtons:!1,orientation:"vertical",slide:s,change:s}).data("kendoSlider"),n.attr("aria-label","opacity"),e._opacitySlider=n.kendoSlider({min:0,max:100,tickPlacement:"none",showButtons:!1,orientation:"vertical",slide:a,change:a}).data("kendoSlider")},_svChange:function(e,t){var i=this._getHSV(null,e,t,null);this._updateUI(i)},_updateColorContrast:function(e){var t=this.options.contrastTool,n=t.backgroundColor?a(t.backgroundColor):a(d),s=p.getContrastFromTwoRGBAs(a(e.toCssRgba()),n),r=i.template('<div class="k-contrast-ratio"><span class="k-contrast-ratio-text">#:messages.contrastRatio# #:kendo.toString(ratio, "n2")#</span><span class="k-contrast-validation k-text-success">#if (ratio > 4.5) {#<span class="k-icon k-i-check"></span>#}##if (ratio > 7) {#<span class="k-icon k-i-check"></span>#}#</span></div>'),o=i.template('<div><span>#:level#: #:limit# </span>#if (ratio > limit) {#<span class="k-contrast-validation k-text-success">#:messages.pass# <span class="k-icon k-i-check"></span></span>#} else {#<span class="k-contrast-validation k-text-error">#:messages.fail# <span class="k-icon k-i-close"></span></span>#}#</div>'),l="";l+=r({messages:this.options.messages,ratio:s})+o({messages:this.options.messages,ratio:s,limit:4.5,level:"AA"})+o({messages:this.options.messages,ratio:s,limit:7,level:"AAA"}),this._contrastTool.find(".k-contrast-ratio, div").remove(),this._contrastTool.append(l),this._updateContrastSvg(n)},_updateContrastSvg:function(t){var i,n=this._hsvRect,s="k-color-contrast-svg",a={width:n.width(),height:n.height()};a.width&&a.height&&(i=e(p.renderSvgCurveLine(a,this._getHSV(),t)).addClass(s),n.find("."+s).remove(),n.append(i))},_updateHsv:function(e){var t=this._hsvRect;e=e.toHSV(),this._hsvHandle.css({left:e.s*t.width()+"px",top:(1-e.v)*t.height()+"px"}),this._hueElements.css("background-color",o.fromHSV(e.h,1,1,1).toCss()),this._hueSlider.value(e.h),this._opacitySlider&&(this._opacitySlider.wrapper.find(".k-slider-track").css("background","linear-gradient(to top, transparent, "+o.fromHSV(e.h,1,1,1).toCss()),this._opacitySlider.value(100*e.a)),this._updateHsvAria(e.s,e.v)},_updateHsvAria:function(e,t){var i=this.value();i&&i.indexOf("rgba")>-1&&(i=i.replace("rgba","RGBA")),this._hsvHandle.attr({"aria-label":this._hsvDragAriaTemplate(i||""),"aria-valuenow":Math.round(100*e),"aria-valuetext":"saturation: "+Math.round(100*e)+"%, value: "+Math.round(100*t)+"%"})},_updateUI:function(e,t){e?(!t&&this._colorInput&&this._colorInput.value(e),this._triggerSelect(e),this._updateHsv(e),this._contrastTool.length&&this._updateColorContrast(e)):this._reset()},_wrapper:function(){var t,i=this.options;(t=this.element.is("input")?this.element.addClass("k-hidden").wrap("<div>").parent():this.element).addClass("k-colorgradient").attr({role:"textbox","aria-keyshortcuts":"Enter"}).append(this._template(i)),this._hueElements=e(".k-hsv-rectangle, .k-alpha-slider .k-slider-track",t),this._colorgradientInputs=e(".k-colorgradient-inputs",t),this._contrastTool=e(".k-colorgradient-color-contrast",t),this.wrapper=t},destroy:function(){this._hsvEvents.destroy(),this._hueSlider.destroy(),this._opacitySlider&&this._opacitySlider.destroy(),this._colorInput&&this._colorInput.destroy(),this._hueSlider=this._opacitySlider=this._hsvRect=this._hsvHandle=this._hueElements=this._selectedColor=this._colorAsText=this._contrastTool=null,c.fn.destroy.call(this)}});n.plugin(g)}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.ui,s=i.parseColor,a=i.keys,r="background-color",o="k-selected",l="k-focus",d="k-colorpalette-tile",h=n.colorpicker.ColorSelector;function u(e){e.preventDefault()}function c(e,t){return function(){return e.apply(t,arguments)}}var p=h.extend({init:function(e,t){h.fn.init.call(this,e,t),this._tabIndex=this.element.attr("tabindex")||0,this._wrapper(),t=this.options,this._selectedID=(t.ariaId||i.guid())+"_selected",this._ariaTemplate=i.template(this.options.ARIATemplate),this._value&&(this._updateUI(this._value),this.wrapper.find(".k-focus").removeClass(l)),this.wrapper.attr("aria-label",this._ariaTemplate(this.value()||"")),this._attachEvents()},focus:function(){this.wrapper&&!this.wrapper.is("[unselectable='on']")&&this.wrapper.trigger("focus")},options:{name:"ColorPalette",columns:10,tileSize:null,palette:"basic"},_attachEvents:function(){var e=this;e.wrapper.on("click.kendoColorTools","."+d,function(t){e._select(t.currentTarget)}).on("keydown.kendoColorTools",c(e._keydown,e)).on("blur.kendoColorTools",function(){e.wrapper.find("."+d).removeClass(l)}).on("focus.kendoColorTools",c(e._focus,e))},_colors:function(){var t=this.options,i=t.palette||"basic";return"websafe"==i?(i="FFFFFF,FFCCFF,FF99FF,FF66FF,FF33FF,FF00FF,CCFFFF,CCCCFF,CC99FF,CC66FF,CC33FF,CC00FF,99FFFF,99CCFF,9999FF,9966FF,9933FF,9900FF,FFFFCC,FFCCCC,FF99CC,FF66CC,FF33CC,FF00CC,CCFFCC,CCCCCC,CC99CC,CC66CC,CC33CC,CC00CC,99FFCC,99CCCC,9999CC,9966CC,9933CC,9900CC,FFFF99,FFCC99,FF9999,FF6699,FF3399,FF0099,CCFF99,CCCC99,CC9999,CC6699,CC3399,CC0099,99FF99,99CC99,999999,996699,993399,990099,FFFF66,FFCC66,FF9966,FF6666,FF3366,FF0066,CCFF66,CCCC66,CC9966,CC6666,CC3366,CC0066,99FF66,99CC66,999966,996666,993366,990066,FFFF33,FFCC33,FF9933,FF6633,FF3333,FF0033,CCFF33,CCCC33,CC9933,CC6633,CC3333,CC0033,99FF33,99CC33,999933,996633,993333,990033,FFFF00,FFCC00,FF9900,FF6600,FF3300,FF0000,CCFF00,CCCC00,CC9900,CC6600,CC3300,CC0000,99FF00,99CC00,999900,996600,993300,990000,66FFFF,66CCFF,6699FF,6666FF,6633FF,6600FF,33FFFF,33CCFF,3399FF,3366FF,3333FF,3300FF,00FFFF,00CCFF,0099FF,0066FF,0033FF,0000FF,66FFCC,66CCCC,6699CC,6666CC,6633CC,6600CC,33FFCC,33CCCC,3399CC,3366CC,3333CC,3300CC,00FFCC,00CCCC,0099CC,0066CC,0033CC,0000CC,66FF99,66CC99,669999,666699,663399,660099,33FF99,33CC99,339999,336699,333399,330099,00FF99,00CC99,009999,006699,003399,000099,66FF66,66CC66,669966,666666,663366,660066,33FF66,33CC66,339966,336666,333366,330066,00FF66,00CC66,009966,006666,003366,000066,66FF33,66CC33,669933,666633,663333,660033,33FF33,33CC33,339933,336633,333333,330033,00FF33,00CC33,009933,006633,003333,000033,66FF00,66CC00,669900,666600,663300,660000,33FF00,33CC00,339900,336600,333300,330000,00FF00,00CC00,009900,006600,003300,000000",t.columns=18):"basic"==i&&(i="000000,7f7f7f,880015,ed1c24,ff7f27,fff200,22b14c,00a2e8,3f48cc,a349a4,ffffff,c3c3c3,b97a57,ffaec9,ffc90e,efe4b0,b5e61d,99d9ea,7092be,c8bfe7"),"string"==typeof i&&(i=i.split(",")),Array.isArray(i)&&(i=e.map(i,function(e){return s(e)})),i},_current:function(t){this.wrapper.find("."+d).removeClass(l).removeAttr("id"),e(t).addClass(l).attr("id",this._selectedID),this.wrapper.removeAttr("aria-activedescendant").attr("aria-activedescendant",this._selectedID)},_focus:function(){var e=this.wrapper;0===e.find("#"+this._selectedID).length&&this._current(e.find("."+d).first())},_keydown:function(e){var t,i,n=this.wrapper.find("."+d),s=n.filter(".k-focus").get(0)||n.filter(".k-selected").get(0),r=e.keyCode;if(s&&(i=Array.prototype.indexOf.call(s.parentNode.children,s)),r==a.LEFT)t=s?s.previousSibling:n[n.length-1];else if(r==a.RIGHT)t=s?s.nextSibling:n[0];else if(r==a.DOWN)t=s?s.parentNode.nextSibling?s.parentNode.nextSibling.children[i]:null:n[0];else if(r==a.UP)t=s?s.parentNode.previousSibling?s.parentNode.previousSibling.children[i]:null:n.get[n.length-1];else if(r==a.ENTER){if(u(e),s)return this._select(s),void this.trigger("forceSelect",{value:this.value()})}else r==a.ESC&&this._cancel();t&&1!==t.nodeType&&(t=null),t&&(u(e),this._current(t))},_onEnable:function(e){this.options._standalone&&(e?(this.wrapper.attr("tabindex",this._tabIndex),this.wrapper.removeAttr("aria-disabled")):(this.wrapper.removeAttr("tabindex"),this.wrapper.attr("aria-disabled",!0)))},_select:function(t){var i=this.wrapper.find("."+d);t=e(t),h.fn._select.call(this,t.css(r)),i.removeClass(o).removeAttr("aria-selected"),t.addClass(o).attr("aria-selected",!0)},_template:i.template('<div class="k-colorpalette-table-wrap"><table class="k-colorpalette-table k-palette" role="presentation"><tr role="row"># for (var i = 0; i < colors.length; ++i) { ## var selected = colors[i].equals(value); ## if (i && i % columns == 0) { # </tr><tr role="row"> # } #<td role="gridcell" unselectable="on" style="background-color:#= colors[i].toCss() #"#= selected ? " aria-selected=true" : "" # #=(id && i === 0) ? "id=\\""+id+"\\" " : "" # class="k-colorpalette-tile#= selected ? " k-selected" : "" #" aria-label="#= colors[i].toCss() #"></td># } #</tr></table></div>'),_tileSize:function(){var e,t,i=this.options.tileSize;if(i){if(/number|string/.test(typeof i))e=t=parseFloat(i);else{if("object"!=typeof i)throw Error("Unsupported value for the 'tileSize' argument");e=parseFloat(i.width),t=parseFloat(i.height)}this.wrapper.find("."+d).css({width:e,height:t})}},_updateUI:function(t){var i=null,n=this.wrapper.find("."+d);this.wrapper.find("."+d).each(function(){var n=s(e(this).css(r));if(n&&n.equals(t))return i=this,!1}),this._current(i),n.removeClass(o),i&&(e(i).addClass(o),this.wrapper.attr("aria-label",this._ariaTemplate(this.value()||"")))},_wrapper:function(){var t,i=this.options,n=this._colors();(t=this.element.is("input")?this.element.addClass("k-hidden").wrap("<div>").parent():this.element).addClass("k-colorpalette").attr("role","grid").append(e(this._template({colors:n,columns:i.columns,tileSize:i.tileSize,value:this._value,id:i.ariaId}))).attr("tabindex",this._tabIndex),this.wrapper=t,this._tileSize()}});n.plugin(p)}(window.kendo.jQuery),ty=window.kendo.jQuery,tC=(tx=window.kendo).ui,tT=tx.html,tS=tx.Color,tI=ty.extend,tD="background-color",tE="click"+(tF=".kendoColorTools"),tA=tC.colorpicker.ColorSelector,tz=tx.keys,tP="k-no-color",tH="k-selected",tN=".k-color-preview-mask",tR="aria-pressed",tO="aria-disabled",tM={gradient:tC.ColorGradient,palette:tC.ColorPalette},tB=tA.extend({init:function(e,t){t&&!1===t.autoupdate&&(t._standalone=!1),tA.fn.init.call(this,e,t),t=this.options=tx.deepExtend({},this.options,t),e=this.element,this._wrapper();var i=this.color();this._changeView(t.view),this._setViewSize(),i?(this._updateUI(i),this._previousColor.children(tN).css(tD,i.toDisplay()),this._selectedColor.children(tN).css(tD,i.toDisplay())):(this._selectedColor.addClass(tP),this._previousColor.addClass(tP)),this._attachEvents(),this._navigation()},destroy:function(){tA.fn.destroy.call(this),this._view&&(this._view.destroy(),this._viewsContainer.empty()),this.element.off(tF),this._selectedColor=this._previousColor=this._viewsContainer=this._view=null},options:{name:"FlatColorPicker",opacity:!1,buttons:!1,input:!0,preview:!0,clearButton:!1,format:"hex",formats:["rgb","hex"],view:"gradient",views:["gradient","palette"],palette:null,autoupdate:!0,backgroundColor:null,columns:10,tileSize:24,messages:{apply:"Apply",cancel:"Cancel",noColor:"no color",clearColor:"Clear color",previewInput:null,contrastRatio:"Contrast ratio:",fail:"Fail",pass:"Pass",hex:"HEX",toggleFormat:"Toggle format",red:"Red",green:"Green",blue:"Blue",alpha:"Alpha",gradient:"Gradient view",palette:"Palette view"},size:"medium",_otOfPicker:!0},setBackgroundColor:function(e){this._view&&this._view.setBackgroundColor&&this._view.setBackgroundColor(e)},_attachEvents:function(){var e,t=this;t.wrapper.on("keydown.kendoColorTools",(e=t._keydown,function(){return e.apply(t,arguments)})).on(tE,".k-coloreditor-reset",function(){t._clearColor=!0,t._updateUI(null),t._view.value(null)}).on(tE,".k-coloreditor-apply",function(){t._clearColor?t._select(null):t._select(t._view.color())}).on(tE,".k-coloreditor-cancel",function(){delete t._clearColor,t._updateUI(t.color()),t._cancel()}).on(tE,".k-button[data-view]",function(e){var i=ty(e.target).closest("[data-view]");i.is("."+tH)||(t.wrapper.find(".k-button[data-view]").removeClass(tH).attr(tR,!1),i.addClass(tH).attr(tR,!0),t._changeView(i.data("view")))})},_select:function(e){tA.fn._select.call(this,e),this._updatePreviousColor(e)},_updatePreviousColor:function(e){e?(this._previousColor.removeClass(tP),this._previousColor.children(tN).css(tD,e.toDisplay())):(this._previousColor.addClass(tP),this._previousColor.children(tN).css(tD,""))},_changeView:function(e){var t,i,n=this,s=ty.extend({},n.options),a=tM[e];n._view&&n._view._colorInput&&(n.options.format=n._view._colorInput._viewModel.format),n.options.view=e,delete s.name,delete s.change,delete s.select,delete s.cancel,delete s._standalone,n._view&&(t=n._view.color(),n._view.destroy(),n._viewsContainer.empty()),t&&(t=t.toHSV(),i=tS.fromHSV(n._cachedHue||0,t.s,t.v,t.a),n._cachedHue=t.toHSV().h,t=t.equals(i)?i:t),s._otOfPicker=!1,a&&(n._view=new tM[e](ty("<div></div>").appendTo(n._viewsContainer),s),n._view.value(t),n._view.bind("change",function(e){delete n._clearColor,n._updateUI(e.sender.color(),!0)}),n._view.bind("forceSelect",function(e){delete n._clearColor,n._select(e.sender.color())}))},_onEnable:function(e){this._view&&this._view._onEnable(e),this.options._standalone&&(e?this.wrapper.removeAttr(tO):this.wrapper.attr(tO,!0))},focus:function(){this._view&&this._view.focus()},_updateUI:function(e,t){e&&e.toDisplay?(this._selectedColor.removeClass(tP),this._selectedColor.children(tN).css(tD,e.toDisplay())):(this._selectedColor.addClass(tP),this._selectedColor.children(tN).css(tD,"")),this._triggerSelect(e),this.options.autoupdate&&this._updatePreviousColor(e),t||this._view.value(e)},_setViewSize:function(){var e=this.wrapper[0],t=parseInt(this.options.tileSize.width||this.options.tileSize,10),i=parseInt(this.options.tileSize.width||this.options.tileSize,10),n=this.options.columns;e.style.setProperty("--kendo-color-preview-columns",n),e.style.setProperty("--kendo-color-preview-width",t+"px"),e.style.setProperty("--kendo-color-preview-height",i+"px")},_keydown:function(e){e.keyCode==tz.ESC&&this._cancel()},_template:function(){var e=this.options,t=tI({},e,{fillMode:"flat",themeColor:"base",rounded:"medium"});return tx.template('<div class="k-coloreditor-header k-hstack"># if (views && views.length > 1) { #<div class="k-coloreditor-header-actions k-hstack"><div role="group" class="k-button-group k-button-group-flat">'+tT.renderButton('<button aria-pressed="false" data-view="gradient" title="#:messages.gradient#"></button>',tI({icon:"color-canvas"},t))+tT.renderButton('<button aria-pressed="false" data-view="palette" title="#:messages.palette#"></button>',tI({icon:"palette"},t))+'</div></div># } #<div class="k-spacer"></div><div class="k-coloreditor-header-actions k-hstack"># if (clearButton) { #'+tT.renderButton('<button class="k-coloreditor-reset" title="#:messages.clearColor#"></button>',tI({icon:"reset-color"},t))+'# } ## if (preview) { #<div class="k-coloreditor-preview k-vstack"><span class="k-coloreditor-preview-color k-color-preview"><span class="k-color-preview-mask"></span></span><span class="k-coloreditor-current-color k-color-preview"><span class="k-color-preview-mask"></span></span></div># } #</div></div><div class="k-coloreditor-views k-vstack"></div># if (buttons) { #<div class="k-coloreditor-footer k-actions k-hstack k-justify-content-end">'+tT.renderButton('<button class="k-coloreditor-cancel" title="#:messages.cancel#">#: messages.cancel #</button>',tI({},t,{fillMode:"solid"}))+tT.renderButton('<button class="k-coloreditor-apply" title="#:messages.apply#">#: messages.apply #</button>',tI({},t,{fillMode:"solid",themeColor:"primary"}))+"</div># } #")(e)},_wrapper:function(){var e,t=this.options;(e=this.element.is("input")?this.element.addClass("k-hidden").wrap("<div>").parent():this.element).addClass("k-flatcolorpicker k-coloreditor").attr({role:"textbox","aria-keyshortcuts":"Enter"}).append(this._template()),this._selectedColor=ty(".k-coloreditor-preview-color",e),this._previousColor=ty(".k-coloreditor-current-color",e),this._viewsContainer=ty(".k-coloreditor-views",e),e.find(".k-button[data-view="+t.view+"]").addClass(tH).attr(tR,!0),this.wrapper=e}}),tC.plugin(tB),function(e,t){var i=window.kendo,n=i.ui,s=n.Widget,a=i.Color,r=i.parseColor,o=i.keys,l=".kendoColorTools",d="click"+l,h="keydown"+l,u=n.colorpicker.ColorSelector,c=n.FlatColorPicker,p=s.extend({init:function(t,n){var a=this;n&&n.palette&&!n.view&&(n.view="palette"),s.fn.init.call(a,t,n),n=a.options=i.deepExtend({},a.options,n);var o=(t=a.element).attr("value")||t.val();o=r(o||n.value,!0),a._value=n.value=o;var l=i.html.renderButton('<button class="k-input-button" unselectable="on" aria-label="select" tabindex="-1"></button>',e.extend({},a.options,{icon:"arrow-s"})),d=a._inputWrapper=a.wrapper=e(a._template(e.extend({},a.options,{_buttonHtml:l})));a._applyCssClasses(),t.hide().after(d),t.is("input")&&(t.appendTo(d),a._preventDefaultLabelClick()),a._tabIndex=t.attr("tabIndex")||0,a.enable(!t.attr("disabled"));var h=t.attr("accesskey");h&&(t.attr("accesskey",null),d.attr("accesskey",h)),a.bind("activate",function(e){e.isDefaultPrevented()||a.toggle()}),a._updateUI(o)},destroy:function(){this.wrapper.off(l).find("*").off(l),this._popup&&(this._selector.destroy(),this._popup.destroy()),this._selector=this._popup=this.wrapper=null,s.fn.destroy.call(this)},enable:function(e){var t=this,i=t.wrapper,n=i.find(".k-input-button");0==arguments.length&&(e=!0),t.element.attr("disabled",!e),i.attr("aria-disabled",!e),n.off(l).on("mousedown"+l,f),i.addClass("k-disabled").removeAttr("tabIndex").add("*",i).off(l),e?i.removeClass("k-disabled").attr("tabIndex",t._tabIndex).on("mouseenter"+l,function(){i.addClass("k-hover")}).on("mouseleave"+l,function(){i.removeClass("k-hover")}).on("focus"+l,function(){i.addClass("k-focus")}).on("blur"+l,function(){i.removeClass("k-focus")}).on(h,m(t._keydown,t)).on(d,".k-input-button",m(t.toggle,t)).on(d,".k-input-inner",function(){t.trigger("activate")}):t.close()},_template:i.template('<span role="textbox" aria-haspopup="true" class="k-colorpicker k-picker k-icon-picker"><span  class="k-input-inner"><span class="k-value-icon k-color-preview #: toolIcon ? "k-icon-color-preview" : "" #"># if (toolIcon) { #<span class="k-color-preview-icon k-icon #= toolIcon #"></span># } #<span class="k-color-preview-mask"></span></span></span >#= _buttonHtml #</span>'),options:{name:"ColorPicker",closeOnSelect:!1,contrastTool:!1,palette:null,columns:10,toolIcon:null,value:null,messages:{apply:"Apply",cancel:"Cancel",noColor:"no color",clearColor:"Clear color",previewInput:null,contrastRatio:"Contrast ratio:",fail:"Fail",pass:"Pass",hex:"HEX",toggleFormat:"Toggle format",red:"Red",green:"Green",blue:"Blue",alpha:"Alpha",gradient:"Gradient view",palette:"Palette view"},opacity:!1,buttons:!0,preview:!0,clearButton:!1,input:!0,format:"hex",formats:["rgb","hex"],view:"gradient",views:["gradient","palette"],backgroundColor:null,ARIATemplate:'Current selected color is #=data || "none"#',size:"medium",rounded:"medium",fillMode:"solid"},events:["activate","change","select","open","close"],open:function(){this.element.prop("disabled")||this._getPopup().open()},close:function(){var e=this._selector&&this._selector.options||{};e._closing=!0,this._getPopup().close(),delete e._closing},toggle:function(){this.element.prop("disabled")||this._getPopup().toggle()},setBackgroundColor:function(e){var t=this,i=function(){t._selector.setBackgroundColor(e)};t.options.contrastTool.backgroundColor=e,t._selector&&t._popup&&t._popup.visible()?t._selector.setBackgroundColor(e):t._popup&&(t._popup.unbind("activate",i),t._popup.bind("activate",i))},_noColorIcon:function(){return this.wrapper.find(".k-color-preview")},color:u.fn.color,value:u.fn.value,_select:u.fn._select,_triggerSelect:u.fn._triggerSelect,_isInputTypeColor:u.fn._isInputTypeColor,_preventDefaultLabelClick:function(){var e=this,t=e.element,i=t.closest("label"),n=t.attr("id");n&&(i=i.add('label[for="'+n+'"]')),i.on("click",function(t){e.open(),t.preventDefault()})},_updateUI:function(e,t){this._updateInput(e),this._triggerSelect(e),this.wrapper.find(".k-color-preview-mask").css("background-color",e?e.toDisplay():""),this._noColorIcon().toggleClass("k-no-color",!e),this._selector&&!t&&this._selector.value(e)},_updateInput:function(e){var t="";e&&(t=this._isInputTypeColor()||1==e.a?e.toCss():e.toCssRgba(),this.element.val(t)),this._ariaTemplate||(this._ariaTemplate=i.template(this.options.ARIATemplate)),this.wrapper.attr("aria-label",this._ariaTemplate(t))},_keydown:function(e){var t=e.keyCode;this._getPopup().visible()?(t==o.ESC?this._selector._cancel():this._selector._keydown(e),f(e)):t!=o.ENTER&&t!=o.DOWN||(this.open(),f(e))},_getPopup:function(){var t=this,n=t._popup;if(!n){var s=t.options;s.autoupdate=!0!==s.buttons,delete s.select,delete s.change,delete s.cancel,s._otOfPicker=!1;var o=i.guid(),l=e('<div id="'+o+'" class="k-colorpicker-popup"></div>').appendTo(document.body),d=t._selector=new c(e("<div></div>").appendTo(l),s);t.wrapper.attr("aria-owns",o),t._popup=n=l.kendoPopup({anchor:t.wrapper,adjustSize:{width:5,height:0}}).data("kendoPopup"),d.bind({select:function(e){t._updateUI(r(e.value),!0)},change:function(e){t.options.buttons?t._select(d.color()):t._updateUI(r(e.value),!0),(t.options.buttons||"palette"===t._selector.options.view&&t.options.closeOnSelect)&&t.close()},cancel:function(){t.close()}}),n.bind({close:function(i){if(t.trigger("close"))i.preventDefault();else{t.wrapper.removeClass("k-focus");var n=d.color();t.options.buttons?t._select(t.color()):t._select(n),(n=t.color())&&n.h&&(t._cachedHue=n.h),event&&event instanceof MouseEvent&&0===e(event.target).parents(".k-colorpicker-popup").length||setTimeout(function(){t.wrapper&&!t.wrapper.is("[unselectable='on']")&&t.wrapper.trigger("focus")},0)}},open:function(e){t.trigger("open")?e.preventDefault():t.wrapper.addClass("k-focus")},activate:function(){var e,i=t.color();i&&(i=i.toHSV(),e=a.fromHSV(t._cachedHue||0,i.s,i.v,i.a),i=i.equals(e)?e:i),d.value(i),d.focus(),t.wrapper.addClass("k-focus")}})}return n}});function f(e){e.preventDefault()}function m(e,t){return function(){return e.apply(t,arguments)}}n.plugin(p),i.cssProperties.registerPrefix("ColorPicker","k-picker-"),i.cssProperties.registerValues("ColorPicker",[{prop:"rounded",values:i.cssProperties.roundedValues.concat([["full","full"]])}])}(window.kendo.jQuery),tL=window.kendo.jQuery,tW=(tU=(tV=window.kendo).ui).Widget,tj="change",tG="disabled",tq="checked",tK=tW.extend({init:function(e,t){tW.fn.init.call(this,e,t),this._wrapper(),this._initSettings(),this._attachEvents(),tV.notify(this,tV.ui)},events:[tj],options:{name:"ToggleInputBase"},NS:".kendoToggleInputBase",RENDER_INPUT:tL.noop,check:function(e){var t=this.element[0];if(void 0===e)return t.checked;t.checked!==e&&(this.options.checked=t.checked=e),e?this.element.attr(tq,tq):this.element.prop(tq,!1)},destroy:function(){tW.fn.destroy.call(this),this.wrapper.off(this.NS)},enable:function(e){var t=this.element;void 0===e&&(e=!0),this.options.enabled=e,e?t.prop(tG,!1):t.attr(tG,tG)},toggle:function(){this.check(!this.element[0].checked)},_attachEvents:function(){this.element.on(tj+this.NS,this._change.bind(this))},_change:function(){var e=this.element[0].checked;this.trigger(tj,{checked:e})},_initSettings:function(){var e=this.element[0],t=this.options;null===t.checked&&(t.checked=e.checked),this.check(t.checked),t.enabled=t.enabled&&!this.element.attr(tG),this.enable(t.enabled)},_wrapper:function(){var e=this.options;(0,this.RENDER_INPUT)(this.element,tL.extend({},e)),this.element.removeClass("input-validation-error"),this.wrapper=this.element}}),tU.plugin(tK),t$=window.kendo.jQuery,tZ=(tJ=(tX=(tQ=window.kendo).html.HTMLBase).extend({init:function(e,t){tX.fn.init.call(this,e,t),this._wrapper(),this._addClasses()},options:{label:null,labelPosition:"after",labelId:null,encoded:!0},_wrapper:function(){var e=this.element[0],t=this.options,i=e.id;this.wrapper=this.element.addClass(t.inputClass).prop("type",t.type),!i&&t.label&&(e.id=i=tQ.guid()),t.label&&(this.labelEl=t$("<label for='"+i+"' class='"+t.labelClass+"'>"),t.encoded?this.labelEl.text(t.label):this.labelEl.html(t.label),t.labelId&&this.labelEl.attr("id",t.labelId),t.optional&&this.labelEl.append("<span class='"+t.optionalClass+"'>"+t.optionalText+"</span>"),this.element[t.labelPosition](this.labelEl))},html:function(){var e="after"===this.options.labelPosition,t=tX.fn.html.call(this);return this.labelEl?e?t+this.labelEl[0].outerHTML:this.labelEl[0].outerHTML+t:t}})).extend({init:function(e,t){tJ.fn.init.call(this,e,t),this._addClasses()},options:{name:"HTMLCheckBox",inputClass:"k-checkbox",labelClass:"k-checkbox-label",optionalClass:"k-label-optional",optionalText:"(Optional)",type:"checkbox",rounded:"medium",size:"medium",stylingOptions:["size","rounded"]}}),t0=tJ.extend({init:function(e,t){tJ.fn.init.call(this,e,t),this._addClasses()},options:{name:"HTMLRadioButton",inputClass:"k-radio",labelClass:"k-radio-label",optionalClass:"k-label-optional",optionalText:"(Optional)",type:"radio",size:"medium",stylingOptions:["size"]}}),t$.extend(tQ.html,{renderCheckBox:function(e,t){return(arguments[0]===tY||t$.isPlainObject(arguments[0]))&&(t=e,e=t$("<input />")),new tZ(e,t).html()},renderRadioButton:function(e,t){return(arguments[0]===tY||t$.isPlainObject(arguments[0]))&&(t=e,e=t$("<input />")),new t0(e,t).html()},HTMLInput:tJ,HTMLCheckBox:tZ,HTMLRadioButton:t0}),tQ.cssProperties.registerPrefix("HTMLCheckBox","k-checkbox-"),tQ.cssProperties.registerValues("HTMLCheckBox",[{prop:"rounded",values:tQ.cssProperties.roundedValues.concat([["full","full"]])}]),tQ.cssProperties.registerPrefix("HTMLRadioButton","k-radio-"),window.kendo.jQuery,t3=(t2=(t1=window.kendo).ui).ToggleInputBase.extend({options:{name:"CheckBox",checked:null,enabled:!0,encoded:!0,label:null,rounded:"medium",size:"medium"},RENDER_INPUT:t1.html.renderCheckBox,NS:".kendoCheckBox",value:function(e){return"string"==typeof e&&(e="true"===e),this.check.apply(this,[e])}}),t1.cssProperties.registerPrefix("CheckBox","k-checkbox-"),t1.cssProperties.registerValues("CheckBox",[{prop:"rounded",values:t1.cssProperties.roundedValues.concat([["full","full"]])}]),t2.plugin(t3),function(e,t){var i=window.kendo,n=i.ui.Widget,s=".kendoValidator",a="k-invalid-msg",r=RegExp(a,"i"),o="k-invalid",l="k-valid",d="k-validation-summary",h="k-text-error",u="aria-invalid",c=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/i,p=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,f=":input:not(:button,[type=submit],[type=reset],[disabled],[readonly])",m=":checkbox:not([disabled],[readonly])",g="[type=number],[type=range]",v="blur",_="name",b="form",k="novalidate",w="validate",y="change",x="validateInput",C=function(e,t){return"string"==typeof t&&(t=RegExp("^(?:"+t+")$")),t.test(e)},T=function(e,t,i){var n=e.val();return!e.filter(t).length||""===n||C(n,i)},S=function(e,t){return!!e.length&&null!=e[0].attributes[t]};function I(t){return e.parseHTML?e(e.parseHTML(t)):e(t)}function D(e,t){return!!e&&"string"==typeof e.nodeName&&"LABEL"===e.nodeName&&"string"==typeof e.getAttribute("for")&&"string"==typeof t.getAttribute("id")&&e.getAttribute("for")===t.getAttribute("id")}i.ui.validator||(i.ui.validator={rules:{},messages:{},allowSubmit:e.noop,validateOnInit:e.noop});var F=n.extend({init:function(t,s){var a=function(t){var n,s=i.ui.validator.ruleResolvers||{},a={};for(n in s)e.extend(!0,a,s[n].resolve(t));return a}(t),r="["+i.attr("validate")+"!=false]";(s=s||{}).rules=e.extend({},i.ui.validator.rules,a.rules,s.rules),s.messages=e.extend({},i.ui.validator.messages,a.messages,s.messages),n.fn.init.call(this,t,s),this._errorTemplate=i.template(this.options.errorTemplate),this._summaryTemplate=i.template(this.options.validationSummary.template||'<ul>#for(var i = 0; i < errors.length; i += 1){#<li><a data-field="#=errors[i].field#" href="\\#">#= errors[i].message #</a></li># } #</ul>'),this.element.is(b)&&this.element.attr(k,k),this._inputSelector=f+r,this._checkboxSelector=m+r,this._errors={},this._attachEvents(),this._isValidated=!1,this._validateOnInit()&&this.validate()},events:[w,y,x],options:{name:"Validator",errorTemplate:'<span class="k-form-error">#= message #</span>',messages:{required:"{0} is required",pattern:"{0} is not valid",min:"{0} should be greater than or equal to {1}",max:"{0} should be smaller than or equal to {1}",step:"{0} is not valid",email:"{0} is not valid email",url:"{0} is not valid URL",date:"{0} is not valid date",dateCompare:"End date should be greater than or equal to the start date",captcha:"The text you entered doesn't match the image."},rules:{required:function(e){var t=!e.attr("name")&&!e.is(":checked"),i=e.attr("name"),n=i&&i.indexOf("'")>-1?'"':"'",s=e.attr("name")&&!this.element.find("input[name="+n+e.attr("name")+n+"]:checked").length,a=e.filter("[type=checkbox]").length&&(t||s),r=e.filter("[type=radio]").length&&!this.element.find("input[name="+n+e.attr("name")+n+"]:checked").length,o=e.val();return!(S(e,"required")&&(!o||""===o||0===o.length||a||r))},pattern:function(e){return!e.filter("[type=text],[type=email],[type=url],[type=tel],[type=search],[type=password]").filter("[pattern]").length||""===e.val()||C(e.val(),e.attr("pattern"))},min:function(e){return!e.filter(g+",["+i.attr("type")+"=number]").filter("[min]").length||""===e.val()||(parseFloat(e.attr("min"))||0)<=i.parseFloat(e.val())},max:function(e){return!e.filter(g+",["+i.attr("type")+"=number]").filter("[max]").length||""===e.val()||(parseFloat(e.attr("max"))||0)>=i.parseFloat(e.val())},step:function(e){if(e.filter(g+",["+i.attr("type")+"=number]").filter("[step]").length&&""!==e.val()){var t,n,s=parseFloat(e.attr("min"))||0,a=parseFloat(e.attr("step"))||1,r=parseFloat(e.val()),o=(t=((t=a)+"").split(".")).length>1?t[1].length:0;return o?Math.floor((r-s)*(n=Math.pow(10,o)))%(a*n)/Math.pow(100,o)==0:(r-s)%a==0}return!0},email:function(e){return T(e,"[type=email],["+i.attr("type")+"=email]",c)},url:function(e){return T(e,"[type=url],["+i.attr("type")+"=url]",p)},date:function(e){return!e.filter("[type^=date],["+i.attr("type")+"=date]").length||""===e.val()||null!==i.parseDate(e.val(),e.attr(i.attr("format")))},captcha:function(e){if(e.filter("["+i.attr("role")+"=captcha]").length){var t=this,n=i.widgetInstance(e),s=function(e){return null!=e};if(e.data("captcha_validating")||s(n.isValid())||!n.getCaptchaId()||(e.data("captcha_validating",!0),t._validating=!0,n.validate().done(function(){t._validating=!1,t._checkElement(e)}).fail(function(e){t._validating=!1,e.error&&"handler_not_defined"===e.error&&window.console.warn("Captcha's validationHandler is not defined! You should either define a proper validation endpoint or declare a callback function to ensure the required behavior.")})),s(n.isValid()))return e.removeData("captcha_validating"),n.isValid()}return!0}},validateOnBlur:!0,validationSummary:!1},_allowSubmit:function(){return i.ui.validator.allowSubmit(this.element,this.errors())},_validateOnInit:function(){return i.ui.validator.validateOnInit(this.element)},destroy:function(){n.fn.destroy.call(this),this.element.off(s),this.validationSummary&&(this.validationSummary.off(s),this.validationSummary=null)},value:function(){return!!this._isValidated&&0===this.errors().length},_submit:function(e){return!(!this.validate()&&!this._allowSubmit()||this._validating)||(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!1)},_checkElement:function(e){var t=this.value();this.validateInput(e),this.value()!==t&&this.trigger(y)},_attachEvents:function(){var t=this;t.element.is(b)&&t.element.on("submit"+s,t._submit.bind(t)),t.options.validateOnBlur&&(t.element.is(f)?(t.element.on(v+s,function(){t._checkElement(t.element)}),t.element.is(m)&&t.element.on("click"+s,function(){t._checkElement(t.element)})):(t.element.on(v+s,t._inputSelector,function(){t._checkElement(e(this))}),t.element.on("click"+s,t._checkboxSelector,function(){t._checkElement(e(this))})))},validate:function(){var e,t,i,n=!1,s=this.value();if(this._errors={},this.element.is(f))n=this.validateInput(this.element);else{var a=!1;for(t=0,i=(e=this.element.find(this._inputSelector)).length;t<i;t++)this.validateInput(e.eq(t))||(a=!0);n=!a}return this.options.validationSummary&&!s&&this.showValidationSummary(),this.trigger(w,{valid:n,errors:this.errors()}),s!==n&&this.trigger(y),n},validateInput:function(t){t=e(t),this._isValidated=!0;var n,s=this._errorTemplate,a=this._checkValidity(t),r=a.valid,d=t.attr(_)||"",c=this._findMessageContainer(d).add(t.next(".k-invalid-msg").filter(function(){var t=e(this);return!t.filter("["+i.attr("for")+"]").length||t.attr(i.attr("for"))===d})).addClass("k-hidden"),p=r?"":this._extractMessage(t,a.key),f=r?"":I(s({message:p.replace(/&amp/g,"&amp;").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">"),field:d})),m=!t.attr(u),g=t.is(".k-input-inner"),v=t.parent(".k-input");if(t.removeAttr(u),t.hasClass("k-hidden")&&(n=i.widgetInstance(t.closest(".k-signature"))),r||t.data("captcha_validating"))delete this._errors[d];else{this._errors[d]=p;var b=c.attr("id");if(this._decorateMessageContainer(f,d),b&&f.attr("id",b),0!==c.length)c.replaceWith(f);else{n=n||i.widgetInstance(t);var k=t.parent().get(0),w=t.next().get(0),y=t.prev().get(0);!n&&t.is("[type=radio]")&&(n=i.widgetInstance(t.closest(".k-radio-list"))),!n&&t.is("[type=checkbox]")&&(n=i.widgetInstance(t.closest(".k-checkbox-list"))),n&&n.wrapper&&(n.element!==n.wrapper||"Signature"==n.options.name)?f.insertAfter(n.wrapper):k&&"LABEL"===k.nodeName?f.insertAfter(k):w&&D(w,t[0])?f.insertAfter(w):y&&D(y,t[0])?f.insertAfter(t):g&&v.length?f.insertAfter(v):f.insertAfter(t)}f.removeClass("k-hidden"),t.attr(u,!0)}if(m!==r&&this.trigger(x,{valid:r,input:t,error:p,field:d}),(n=n&&"Signature"==n.options.name?n:i.widgetInstance(t))&&(n._inputWrapper||n.wrapper)||(t.toggleClass(o,!r),t.toggleClass(l,r)),n){var C=n._inputWrapper||n.wrapper,T=n._inputLabel;C&&(C.toggleClass(o,!r),C.toggleClass(l,r)),T&&T.toggleClass(h,!r)}if(m!==r){var S=f?f.attr("id"):c.attr("id");this._associateMessageContainer(t,S),this.options.validationSummary&&this.options.validateOnBlur&&this.showValidationSummary()}return r},hideMessages:function(){var e="."+a,t=this.element;this._disassociateMessageContainers(),t.is(f)?t.next(e).addClass("k-hidden"):t.find(e).addClass("k-hidden")},reset:function(){var e=this.element.find(".k-invalid"),t=this.element.find(".k-text-error");this._errors=[],this.hideMessages(),this.hideValidationSummary(),e.removeAttr(u),e.removeClass(o),t.removeClass(h)},_findMessageContainer:function(t){for(var n,s=i.ui.validator.messageLocators,a=e(),o=0,l=this.element.length;o<l;o++)a=a.add(function(t,n){for(var s,a=e(),o=0,l=t.length;o<l;o++)s=t[o],r.test(s.className)&&s.getAttribute(i.attr("for"))===n&&(a=a.add(s));return a}(this.element[o].getElementsByTagName("*"),t));for(n in s)a=a.add(s[n].locate(this.element,t));return a},_decorateMessageContainer:function(e,t){var n,s=i.ui.validator.messageLocators;for(n in e.addClass(a).attr(i.attr("for"),t||""),e.attr("id")||e.attr("id",t+"-error"),s)s[n].decorate(e,t)},_extractMessage:function(e,t){var n,s=this.options.messages[t],a=e.attr(_);return i.ui.Validator.prototype.options.messages[t]||(n=i.isFunction(s)?s(e):s),s=i.isFunction(s)?s(e):s,i.format(e.attr(i.attr(t+"-msg"))||e.attr("validationMessage")||n||s||e.attr("title")||"",a,e.attr(t)||e.attr(i.attr(t)))},_checkValidity:function(e){var t,i=this.options.rules;for(t in i)if(!i[t].call(this,e))return{valid:!1,key:t};return{valid:!0}},errors:function(){var e,t=[],i=this._errors;for(e in i)t.push(i[e]);return t},setOptions:function(e){e.validationSummary&&this.hideValidationSummary(),i.deepExtend(this.options,e),this.destroy(),this.init(this.element,this.options),this._setEvents(this.options)},_getInputNames:function(){for(var t=this.element.find(this._inputSelector),i=[],n=0,s=t.length;n<s;n++){var a=e(t[n]);S(a,_)&&(-1===i.indexOf(a.attr(_))||0===a.closest(".k-checkbox-list").length&&0===a.closest(".k-radio-list").length)&&i.push(a.attr(_))}return i},_associateMessageContainer:function(e,t){var n=i.getWidgetFocusableElement(e);n&&t&&i.toggleAttribute(n,"aria-describedby",t)},_disassociateMessageContainers:function(){for(var t,i,n=this.element.find(".k-invalid").addBack(),s=0;s<n.length;s+=1)(t=e(n[s])).is("input")&&(i=this._findMessageContainer(t.attr(_)).add(t.next("."+a)).attr("id"),this._associateMessageContainer(t,i))},_errorsByName:function(){for(var e=this._getInputNames(),t=[],i=0;i<e.length;i+=1){var n=e[i];this._errors[n]&&t.push({field:n,message:this._errors[n]})}return t},_renderSummary:function(){var t,i=this.options.validationSummary,n=this.element.prev();return(t=i.container?e(i.container):n&&n.hasClass(d)?n:e("<div />").insertBefore(this.element)).addClass([d,"k-messagebox k-messagebox-error"].join(" ")),t.attr("role","alert"),t.on("click"+s,this._summaryClick.bind(this)),t},_summaryClick:function(t){t.preventDefault();var n,s=e(t.target),a=this.element.find("[name='"+s.data("field")+"']");a.length&&(n=i.getWidgetFocusableElement(a))&&n.trigger("focus")},showValidationSummary:function(){var e,t=this.validationSummary,i=this._errorsByName();t||(t=this.validationSummary=this._renderSummary()),e=I(this._summaryTemplate({errors:i})),t.html(e),t.toggleClass("k-hidden",!i.length)},hideValidationSummary:function(){var e=this.validationSummary;e&&e.addClass("k-hidden")}});i.ui.plugin(F)}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.ui,s=n.Widget,a=e.extend,r=i.isFunction,o=e.isPlainObject,l=e.inArray,d=/("|\%|'|\[|\]|\$|\.|\,|\:|\;|\+|\*|\&|\!|\#|\(|\)|<|>|\=|\?|\@|\^|\{|\}|\~|\/|\||`)/g,h="change",u="equalSet",c=["url","email","number","date","boolean"];function p(e){return(e=null!=e?e:"").type||i.type(e)||"string"}function f(e){var t,n,s=(e.model.fields||e.model)[e.field],a=p(s),d=s?s.validation:{},h=s?s.attributes:{},u=i.attr("type"),f=i.attr("bind"),m={id:e.id||e.field,name:e.field,title:e.title?e.title:e.field};for(t in d){if(n=d[t],l(t,c)>=0)m[u]=t;else if(!r(n)){var g=i.getCulture();if("number"==typeof n&&g.name.length){var v=g.numberFormat,_=n.toString().replace(".",v["."]);m[t]=_}else m[t]=o(n)?n.value||t:n}m[i.attr(t+"-msg")]=n.message,m.autocomplete="off"}for(var b in h)m[b]=h[b];return l(a,c)>=0&&(m[u]=a),m[f]=("boolean"===a?"checked:":"value:")+e.field,m}function m(e,t){var i=e.attr("id");return i&&(t.id=i,e.removeAttr("id")),t}var g=["AutoComplete","CheckBox","CheckBoxGroup","ColorGradient","ColorPicker","ColorPalette","ComboBox","DateInput","DatePicker","DateTimePicker","DropDownTree","Editor","FlatColorPicker","MaskedTextBox","MultiColumnComboBox","MultiSelect","NumericTextBox","RadioGroup","Rating","Slider","Switch","TimePicker","DropDownList","TextBox","TextArea","Captcha","Signature"],v={number:function(t,i){var n=f(i);n=m(t,n),e('<input type="number"/>').attr(n).appendTo(t)},date:function(t,i){var n=f(i);n=m(t,n),e('<input type="date"/>').attr(n).appendTo(t)},string:function(t,i){var n=f(i);n=m(t,n),e('<input type="text" />').attr(n).appendTo(t)},boolean:function(t,i){var n=f(i);n=m(t,n),e('<input type="checkbox" />').attr(n).appendTo(t)},values:function(t,i){var n=f(i),s=i.values,a=e("<select />");for(var r in n=m(t,n),s)e('<option value="'+s[r].value+'">'+s[r].text+"</option>").appendTo(a);a.attr(n).appendTo(t)}};function _(e,t){var i,n,s=e&&e.validation||{};for(i in s)o(n=s[i])&&n.value&&(n=n.value),r(n)&&(t[i]=n)}function b(t,i,n){n&&n.shouldRenderHidden&&(t.val(!0),i.append(e("<input type='hidden' name='"+n.field+"' value='false' data-skip='true' data-validate='false'/>")))}var k=s.extend({init:function(e,t){t.target&&(t.$angular=t.target.options.$angular,t.target.pane&&(this._isMobile=!0)),s.fn.init.call(this,e,t),this._validateProxy=this._validate.bind(this),this.refresh()},events:[h],options:{name:"Editable",editors:{hidden:function(t,i){var n=f(i);e('<input type="hidden"/>').attr(n).appendTo(t)},number:function(t,n){var s=f(n);e('<input type="text"/>').attr(s).appendTo(t).kendoNumericTextBox({format:n.format}),e("<span "+i.attr("for")+'="'+n.field+'" class="k-invalid-msg k-hidden"/>').appendTo(t)},date:function(t,n){var s=f(n),a=n.format;a&&(a=i._extractFormat(a)),s[i.attr("format")]=a,e('<input type="text"/>').attr(s).appendTo(t).kendoDatePicker({format:n.format}),e("<span "+i.attr("for")+'="'+n.field+'" class="k-invalid-msg k-hidden"/>').appendTo(t)},string:function(t,i){var n=f(i);e('<input type="text"/>').attr(n).appendTo(t).kendoTextBox()},boolean:function(t,i){var n=f(i);b(e('<input type="checkbox" />').attr(n).kendoCheckBox().appendTo(t),t,i)},values:function(t,n){var s=f(n),a=i.stringify(function(e){var t,i,n,s,a,r;if(e&&e.length)for(r=[],t=0,i=e.length;t<i;t++)a=(n=e[t]).text||n.value||n,s=null==n.value?n.text||n:n.value,r[t]={text:a,value:s};return r}(n.values));e("<select "+i.attr("text-field")+'="text"'+i.attr("value-field")+'="value"'+i.attr("source")+"='"+(a?a.replace(/\'/g,"&apos;"):a)+"'"+i.attr("role")+'="dropdownlist"/>').attr(s).appendTo(t),e("<span "+i.attr("for")+'="'+n.field+'" class="k-invalid-msg  k-hidden"/>').appendTo(t)},kendoEditor:function(t,i){var n=f(i),s=i.editor,a="kendo"+s,r=i.editorOptions;b(e(function(e,t){if(e.length)return"DropDownTree"===e&&t&&t.checkboxes||"MultiSelect"===e?"<select />":"RadioGroup"===e||"CheckBoxGroup"===e?"<ul />":"Signature"===e?"<div></div>":"Editor"===e||"TextArea"===e?"<textarea />":"<input />"}(s,r)).attr(n).appendTo(t)[a](r),t,i)}},mobileEditors:v,clearContainer:!0,validateOnBlur:!0,validationSummary:!1,errorTemplate:'<div class="k-tooltip k-tooltip-error k-validator-tooltip"><span class="k-tooltip-icon k-icon k-i-warning"></span><span class="k-tooltip-content">#= message #</span><span class="k-callout k-callout-n"></span></div>',skipFocus:!1},editor:function(t,n){var s=this._isMobile?v:this.options.editors,r=o(t),l=r?t.field:t,h=this.options.model||{},u=r&&t.values?"values":p(n),c=r&&"string"==typeof t.editor&&"hidden"===t.editor,f=r&&!c&&t.editor,m=r&&-1!==e.inArray(t.editor,g),_=f?t.editor:s[c?"hidden":u],b=this.element.find("["+i.attr("container-for")+"="+l.replace(d,"\\$1")+"]");_=_||s.string,m?_=s.kendoEditor:f&&"string"==typeof t.editor&&(_=function(e){e.append(t.editor)}),_(b=b.length?b:this.element,a(!0,{},r?t:{field:l},{model:h}))},_validate:function(t){var n,s=t.value,a=this._validationEventInProgress,r={},o=i.attr("bind"),l=t.field.replace(d,"\\$1"),u=RegExp("(value|checked)\\s*:\\s*"+l+"\\s*(,|$)");r[t.field]=t.value,(n=e(":input["+o+'*="'+l+'"]',this.element).filter("["+i.attr("validate")+"!='false']").filter(function(){return u.test(e(this).attr(o))})).length>1&&(n=n.filter(function(){var t=e(this);return!t.is(":radio")||t.val()==s}));try{this._validationEventInProgress=!0,(!this.validatable.validateInput(n)||!a&&this.trigger(h,{values:r}))&&t.preventDefault()}finally{this._validationEventInProgress=!1}},end:function(){return this.validatable.validate()},destroy:function(){var e=this;e.angular("cleanup",function(){return{elements:e.element}}),s.fn.destroy.call(e),e.options.model.unbind("set",e._validateProxy),e.options.model.unbind(u,e._validateProxy),i.unbind(e.element),e.validatable&&e.validatable.destroy(),i.destroy(e.element),e.element.removeData("kendoValidator"),e.element.is("["+i.attr("role")+"=editable]")&&e.element.removeAttr(i.attr("role"))},refresh:function(){var t,n,s,a,r,l,d=this.options.fields||[],h=this.options.clearContainer?this.element.empty():this.element,c=this.options.model||{},p={};for(Array.isArray(d)||(d=[d]),t=0,n=d.length;t<n;t++)a=o(s=d[t])?s.field:s,_(r=(c.fields||c)[a],p),this.editor(s,r);if(this.options.target&&this.angular("compile",function(){return{elements:h,data:h.map(function(){return{dataItem:c}})}}),!n)for(a in l=c.fields||c)_(l[a],p);(function(t){t.find(":input:not(:button, .k-combobox .k-input, .k-checkbox-list .k-checkbox, .k-radio-list .k-radio, ["+i.attr("role")+"=listbox], ["+i.attr("role")+"=upload], ["+i.attr("skip")+"], [type=file])").each(function(){var t=i.attr("bind"),n=this.getAttribute(t)||"",s="checkbox"===this.type||"radio"===this.type?"checked:":"value:",a=this.getAttribute("name")===k.antiForgeryTokenName,r=this.name;-1===n.indexOf(s)&&r&&!a&&(n+=(n.length?",":"")+s+r,e(this).attr(t,n))})})(h),this.validatable&&this.validatable.destroy(),i.bind(h,this.options.model),this.options.validateOnBlur&&(this.options.model.unbind("set",this._validateProxy).bind("set",this._validateProxy),this.options.model.unbind(u,this._validateProxy).bind(u,this._validateProxy)),this.validatable=new i.ui.Validator(h,{validateOnBlur:this.options.validateOnBlur,validationSummary:this.options.validationSummary,errorTemplate:this.options.errorTemplate||void 0,rules:p}),this.options.skipFocus||h.find(":kendoFocusable").eq(0).trigger("focus")}});k.antiForgeryTokenName="__RequestVerificationToken",n.plugin(k)}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.ui,s=n.Widget,a=i.keys,r=i.template,o=".k-i-arrow-end-left",l=".k-i-arrow-end-right",d=".k-i-arrow-60-left",h=".k-i-arrow-60-right",u="k-pager-md k-pager-sm",c=":kendoFocusable:not([tabindex='-1'])",p="change",f=".kendoPager",m="click",g=Number.MAX_VALUE,v=!1,_=i.template('<a href="\\#" role="button" title="#=text#" aria-label="#=text#" class="k-link k-pager-nav #= wrapClassName #"><span class="k-icon #= className #"></span></a>');function b(e){return e.template({idx:e.idx,text:e.text,ns:i.ns,numeric:e.numeric,title:e.title||"",tabindex:e.navigatable?0:-1,navigatable:e.navigatable})}function k(e,t,i,n){return e({idx:t,text:i||t,selected:n||!1})}function w(e,t,i,n){return _({className:e.substring(1),text:t,wrapClassName:i||"",id:n||""})}function y(e,t,n,s){e.find(t).parent().attr(i.attr("page"),n).attr("tabindex",s?-1:0).attr("aria-disabled",s).toggleClass("k-disabled",s)}function x(e,t){y(e,d,Math.max(1,t-1),t<=1)}function C(e,t,i){y(e,h,Math.min(i,t+1),t>=i)}var T=s.extend({init:function(t,n){if(s.fn.init.call(this,t,n),n=this.options,this._createDataSource(n),this.linkTemplate=i.template(this.options.linkTemplate),this.selectTemplate=i.template(this.options.selectTemplate),this.numericSelectItemTemplate=i.template(this.options.numericSelectItemTemplate),a=this.page(),r=this.totalPages(),this._refreshHandler=this.refresh.bind(this),this.dataSource.bind(p,this._refreshHandler),this.downEvent=i.applyEventMap("down",i.guid()),v=i.support.isRtl(t),n.navigatable&&(this._id=this.element.attr("id")||i.guid()),this._template(),n.previousNext&&(this.element.find(o).length||(this.element.append(w(o,n.messages.first,"k-pager-first",this._id)),y(this.element,o,1,a<=1)),this.element.find(d).length||(this.element.append(w(d,n.messages.previous,null,this._id)),x(this.element,a))),n.numeric&&(this._numericWrap||(this._numericWrap=this.element.find(".k-pager-numbers-wrap"),0===this._numericWrap.length&&(this._numericWrap=e("<div class='k-pager-numbers-wrap' />").appendTo(this.element))),this._numericSelect||(this._numericSelect=this._numericWrap.find(".k-dropdown"),0===this._numericSelect.length&&(this._numericSelect=e("<select aria-label='"+this.options.messages.numbersSelectLabel+"' class='k-dropdown k-picker k-dropdown-list' />").appendTo(this._numericWrap))),this.list||(this.list=this._numericWrap.find(".k-pager-numbers"),0===this.list.length&&(this.list=e('<ul class="k-pager-numbers" />').appendTo(this._numericWrap))),n.dataSource&&!n.dataSource.total()&&(this._numericSelect.empty().append("<option value='0' />"),this.list.empty().append(this.selectTemplate({text:0,tabindex:n.navigatalbe?0:-1,navigatable:n.navigatable,title:i.format(n.messages.pageButtonLabel,0)})))),n.input&&(this.element.find(".k-pager-input").length||this.element.append('<span class="k-pager-input k-label">'+n.messages.page+'<span class="k-textbox k-input k-input-md k-rounded-md k-input-solid"><input class="k-input-inner" /></span>'+i.format(n.messages.of,r)+"</span>"),this.element.on("keydown"+f,".k-pager-input input",this._keydown.bind(this))),n.previousNext&&(this.element.find(h).length||(this.element.append(w(h,n.messages.next,null,this._id)),C(this.element,a,r)),this.element.find(l).length||(this.element.append(w(l,n.messages.last,"k-pager-last",this._id)),y(this.element,l,r,a>=r))),n.pageSizes){if(!this.element.find(".k-pager-sizes").length){var a,r,u,c=n.pageSizes.length?n.pageSizes:["all",5,10,20],g=e.map(c,function(e){return e.toLowerCase&&"all"===e.toLowerCase()?"<option value='all'>"+n.messages.allPages+"</option>":"<option>"+e+"</option>"});e('<span class="k-pager-sizes k-label"><select></select>'+n.messages.itemsPerPage+"</span>").appendTo(this.element).find("select").html(g.join("")).end().appendTo(this.element)}this.element.find(".k-pager-sizes select").val(this.pageSize()),i.ui.DropDownList&&this.element.find(".k-pager-sizes select").show().attr("aria-label",n.messages.pageSizeDropDownLabel).kendoDropDownList(),this.element.on(p+f,".k-pager-sizes select",this._change.bind(this))}n.refresh&&(this.element.find(".k-pager-refresh").length||this.element.append('<a role="button" href="#" class="k-pager-refresh k-link" title="'+n.messages.refresh+'" aria-label="'+n.messages.refresh+'"><span class="k-icon k-i-reload"></span></a>'),this.element.on(m+f,".k-pager-refresh",this._refreshClick.bind(this))),n.info&&(this.element.find(".k-pager-info").length||this.element.append('<span class="k-pager-info k-label" />')),this.element.on(m+f,"a",this._click.bind(this)).on(p+f,"select.k-dropdown",this._numericSelectChange.bind(this)).addClass("k-pager-wrap k-widget k-floatwrap"),n.autoBind&&this.refresh(),this._resizeHandler=this.resize.bind(this,!0),e(window).on("resize"+f,this._resizeHandler),(u=this._getWidthSizeClass(this.element.outerWidth()))&&this.element.addClass(u),this._navigatable(),i.notify(this)},destroy:function(){s.fn.destroy.call(this),this.element.off(f),this.dataSource.unbind(p,this._refreshHandler),this._refreshHandler=null,e(window).off("resize"+f,this._resizeHandler),i.destroy(this.element),this.element=this.list=null},events:[p],options:{name:"Pager",ARIATemplate:"Page navigation, page #=page# of #=totalPages#",selectTemplate:'<li><span role="button" aria-current="page" tabindex="#=tabindex#" aria-label="#=title#" class="k-link k-selected">#=text#</span></li>',linkTemplate:'<li><a role="button" tabindex="#=tabindex#" href="\\#" class="k-link" data-#=ns#page="#=idx#" #if (title !== "") {# title="#=title#" #}#>#=text#</a></li>',numericSelectItemTemplate:'<option value="#= idx #" #if (selected) {# selected="selected" #}#>#= text #</option>',buttonCount:10,autoBind:!0,numeric:!0,info:!0,input:!1,previousNext:!0,pageSizes:!1,refresh:!1,responsive:!0,navigatable:!1,messages:{allPages:"All",display:"{0} - {1} of {2} items",empty:"No items to display",page:"Page",of:"of {0}",itemsPerPage:"items per page",pageButtonLabel:"Page {0}",pageSizeDropDownLabel:"Page sizes drop down",numbersSelectLabel:"Page select",first:"Go to the first page",previous:"Go to the previous page",next:"Go to the next page",last:"Go to the last page",refresh:"Refresh",morePages:"More pages"}},setDataSource:function(e){this.dataSource.unbind(p,this._refreshHandler),this.dataSource=this.options.dataSource=e,e.bind(p,this._refreshHandler),this.options.autoBind&&e.fetch()},_aria:function(){this.element.attr({role:"application","aria-roledescription":"pager","aria-keyshortcuts":"Enter ArrowRight ArrowLeft"})},_resize:function(e){if(e.width){var t=this._getWidthSizeClass(e.width),i=this.element;t?i.hasClass(t)||(i.removeClass(u),i.addClass(t)):i.removeClass(u)}},_createDataSource:function(e){this.dataSource=i.data.DataSource.create(e.dataSource)},refresh:function(t){var n,s,a,r=1,d=this.page(),h="",u="",c=this.options,p=this.pageSize(),f=this._collapsedTotal(),m=this.dataSource._isGroupPaged()?this.dataSource.groupsTotal(!0):this.dataSource.total(),v=this.totalPages(),_=this.linkTemplate,w=c.navigatable,T=this.numericSelectItemTemplate,S=c.buttonCount;if(!t||"itemchange"!=t.action){if(c.numeric){for(d>S&&(r=0==(a=d%S)?d-S+1:d-a+1),s=Math.min(r+S-1,v),r>1&&(h+=b({template:_,navigatable:w,idx:r-1,text:"...",numeric:!1,title:c.messages.morePages}),u+=k(T,r-1,c.messages.morePages)),n=r;n<=s;n++)h+=b({template:n==d?this.selectTemplate:_,navigatable:w,idx:n,text:n,numeric:!0,title:i.format(c.messages.pageButtonLabel,n)}),u+=k(T,n,n,n==d);s<v&&(h+=b({template:_,navigatable:w,idx:n,text:"...",numeric:T,title:c.messages.morePages}),u+=k(T,n,c.messages.morePages)),""===h&&(h=this.selectTemplate({text:0,tabindex:w?0:-1,navigatable:w,title:i.format(c.messages.pageButtonLabel,0)}),u=e("<option value='0' />")),this.list.html(h),this._numericSelect.html(u)}if(c.info&&(h=m>0?i.format(c.messages.display,this.dataSource.options.endless?1:Math.min((d-1)*(this.dataSource.pageSize()||0)+1,f),Math.min(d*p,f),m):c.messages.empty,this.element.find(".k-pager-info").html(h)),c.input&&this.element.find(".k-pager-input").html(this.options.messages.page+'<span class="k-textbox k-input k-input-md k-rounded-md k-input-solid"><input class="k-input-inner" aria-label="'+this.options.messages.page+" "+d+'"></span>'+i.format(c.messages.of,v)).find("input").val(d).attr("disabled",m<1).attr("aria-disabled",m<1).toggleClass("k-disabled",m<1),c.previousNext&&(y(this.element,o,1,d<=1),x(this.element,d),C(this.element,d,v),y(this.element,l,v,d>=v)),c.pageSizes){var I=p;this.element.find(".k-pager-sizes option[value='all']").length>0&&(p===this.dataSource.total()||p==g)&&(p="all",I=c.messages.allPages),this.element.find(".k-pager-sizes select").val(p).filter("["+i.attr("role")+"=dropdownlist]").kendoDropDownList("value",p).kendoDropDownList("text",I)}this._restoreFocus(r,s,v),this._excludeChildrenFromTab(),this._updateAria()}},_excludeChildrenFromTab:function(){var t=i._activeElement();!this.options.navigatable||t!==this.element[0]&&e.contains(this.element[0],t)||this.element.find(c).attr("tabindex",-1)},_restoreFocus:function(e,t,i){this.options.navigatable&&(this._focusSelected&&(this.element.find(".k-selected").trigger("focus"),this._focusSelected=null),null!==this._focusMore&&(t<i&&this._focusMore&&this.list.find("li").last().find("a").trigger("focus"),!this._focusMore&&e>1&&this.list.find("li").first().find("a").trigger("focus"),this._focusMore=null))},_restoreTabIndexes:function(){this.element.find("[tabindex='-1']:not(.k-disabled)").attr("tabindex",0)},_collapsedTotal:function(){return this.dataSource.total()},_keydown:function(e){if(e.keyCode===i.keys.ENTER){var t=this.element.find(".k-pager-input").find("input"),n=parseInt(t.val(),10);(isNaN(n)||n<1||n>this.totalPages())&&(n=this.page()),t.val(n),this.page(n)}},_refreshClick:function(e){e.preventDefault(),this.dataSource.read()},_change:function(e){var t=e.currentTarget.value,i=parseInt(t,10),n=this.dataSource;isNaN(i)?"all"==(t+"").toLowerCase()&&(n._pageSize=void 0,n._take=void 0,n._skip=0,n.fetch()):n.pageSize(i)},_template:function(){this._ariaTemplate=r(this.options.ARIATemplate).bind(this)},_updateAria:function(){this.options.navigatable&&this.element.attr("aria-label",this._ariaTemplate({page:this.page(),totalPages:this.totalPages()}))},_navigatable:function(){var e=this;e.options.navigatable&&(e._aria(),e.element.attr("id",e._id),e._template(),e._updateAria(),e._tabindex(e.element),e.element.on("keydown"+f,e,e._keyDown.bind(e)),e.element.on("focusout"+f,function(){e.element.removeClass("k-focus")}),e.element.on("focusin"+f,function(t){e.element.addClass("k-focus"),t.target===e.element[0]?e.element.find(c).attr("tabindex",-1):e.element.removeClass("k-focus")}))},_keyDown:function(t){var i,n,s=e(t.target),r=!1;s[0]===this.element[0]&&t.keyCode==a.ENTER&&(this._restoreTabIndexes(),this.element.find(c).first().trigger("focus"),r=!0),s[0]!==this.element[0]&&t.keyCode==a.ESC&&(this.element.trigger("focus"),r=!0),s[0]===this.element[0]&&t.keyCode==a.HOME&&(this.page(1),r=!0),s[0]===this.element[0]&&t.keyCode==a.END&&(this.page(this.totalPages()),r=!0),s[0]!==this.element[0]||t.keyCode!=(v?a.LEFT:a.RIGHT)&&t.keyCode!=a.PAGEDOWN||(this.page(this.page()+1),r=!0),s[0]!==this.element[0]||t.keyCode!=(v?a.RIGHT:a.LEFT)&&t.keyCode!=a.PAGEUP||(this.page(this.page()-1||1),r=!0),s[0]!==this.element[0]&&t.keyCode==a.TAB&&(n=(i=this.element.find(c)).index(s),t.shiftKey?n-1<0?i.last().trigger("focus"):i.eq(n-1).trigger("focus"):n+1<i.length?i.eq(n+1).trigger("focus"):i.first().trigger("focus"),r=!0),r&&(t.preventDefault(),t.stopPropagation())},_numericSelectChange:function(e){var t=e.currentTarget,i=parseInt(t.value,10);t.blur(),this.page(i)},_click:function(t){var n=e(t.currentTarget);t.preventDefault(),this.options.navigatable&&(n.attr("title")==this.options.messages.morePages?this._focusMore=n.parent().index():n.hasClass("k-pager-refresh")||n.hasClass("k-pager-nav")||(this._focusSelected=!0)),n.is(".k-disabled")||this.page(parseInt(n.attr(i.attr("page")),10))},totalPages:function(){return Math.ceil((this.dataSource.total()||0)/(this.pageSize()||1))},pageSize:function(){return this.dataSource.pageSize()||this.dataSource.total()},page:function(e){if(!e)return this.dataSource.total()>0?this.dataSource.page():0;this.trigger("pageChange",{index:e})||(this.dataSource.page(e),this.trigger(p,{index:e}))},_getWidthSizeClass:function(e){var t=u.split(" ");return this.options.responsive?e<=480?t[1]:e<=600?t[0]:null:null}});n.plugin(T)}(window.kendo.jQuery),t9=window.kendo.jQuery,t5=window.kendo,t8="change",t4="cancel",t7="dataBound",ie="dataBinding",it=t5.ui.Widget,ii=t5.keys,is="> *:not(.k-loading-mask)",ia="progress",ir="error",io="k-focus",il="k-selected",id="k-edit-item",ih="k-listview-pager",iu="k-listview-item",ic="role",ip="aria-label",im="aria-multiselectable",ig="aria-activedescendant",iv="edit",i_="remove",ib="save",ik="touchstart",iw=".kendoListView",iy=t5._activeElement,ix=t5.ui.progress,iC=t5.data.DataSource,iT=t5.ui.DataBoundWidget.extend({init:function(e,t){t=Array.isArray(t)?{dataSource:t}:t,it.fn.init.call(this,e,t),t=this.options,this.wrapper=e=this.element,e[0].id?this._itemId=e[0].id+"_lv_active":this._itemId=t5.guid()+"_lv_active",this._element(),this._layout(),this._dataSource(),this._setContentHeight(),this._templates(),this._navigatable(),this._selectable(),this._pageable(),this._crudHandlers(),this._scrollable(),this.options.autoBind&&this.dataSource.fetch(),t5.notify(this)},events:[t8,t4,ie,t7,iv,i_,ib,"kendoKeydown"],options:{name:"ListView",ariaLabel:null,autoBind:!0,selectable:!1,navigatable:!1,pageable:!1,height:null,template:"",altTemplate:"",editTemplate:"",contentTemplate:"<div data-content='true' />",contentElement:"div",bordered:!0,borders:"",layout:"",flex:{direction:"row",wrap:"nowrap"},grid:{},scrollable:!1},setOptions:function(e){it.fn.setOptions.call(this,e),this._layout(),this._templates(),this.selectable&&(this.selectable.destroy(),this.selectable=null),this._selectable()},_templates:function(){var e=this.options;this.template=t5.template(e.template||""),this.altTemplate=t5.template(e.altTemplate||e.template),this.editTemplate=t5.template(e.editTemplate||"")},_item:function(e){return this.content.children()[e]()},items:function(){return this.content.children(":not(.k-loading-mask)")},dataItem:function(e){var t=t5.attr("uid"),i=t9(e).closest("["+t+"]").attr(t);return this.dataSource.getByUid(i)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&e.fetch(),"endless"===this.options.scrollable&&this._bindScrollable()},_unbindDataSource:function(){this.dataSource.unbind(t8,this._refreshHandler).unbind(ia,this._progressHandler).unbind(ir,this._errorHandler)},_dataSource:function(){var e=this.options.pageable,t=this.options.dataSource;t9.isPlainObject(e)&&void 0!==e.pageSize&&(t.pageSize=e.pageSize),this.dataSource&&this._refreshHandler?this._unbindDataSource():(this._refreshHandler=this.refresh.bind(this),this._progressHandler=this._progress.bind(this),this._errorHandler=this._error.bind(this)),this.dataSource=iC.create(t).bind(t8,this._refreshHandler).bind(ia,this._progressHandler).bind(ir,this._errorHandler)},_progress:function(e){var t=this.wrapper;e&&this.content.height()&&(t=this.content),ix(t,e,{opacity:!0})},_error:function(){ix(this.content,!1)},_element:function(){var e=this.options,t=e.height;this.element.addClass("k-widget k-listview"),e.contentElement?this.content=t9(document.createElement(e.contentElement)).appendTo(this.element):this.content=this.element,t&&this.element.css("height",t)},_layout:function(){var e=this.options,t=e.flex,i=e.grid,n=this.element,s=["k-widget","k-listview"],a=this.content,r=["k-listview-content"];n.add(a).removeClass(function(e,t){if(t.indexOf("k-")>=0)return!0}),!0===e.bordered&&s.push("k-listview-bordered"),"string"==typeof e.borders&&""!==e.borders&&s.push("k-listview-borders-"+e.borders),"string"==typeof e.contentPadding&&""!==e.contentPadding&&r.push("k-listview-content-padding-"+e.contentPadding),"string"==typeof e.layout&&""!==e.layout&&r.push("k-d-"+e.layout),"flex"===e.layout&&"object"==typeof t&&("string"==typeof t.direction&&""!==t.direction&&r.push("k-flex-"+t.direction),"string"==typeof t.wrap&&""!==t.wrap&&r.push("k-flex-"+t.wrap)),"grid"===e.layout&&"object"==typeof i&&("number"==typeof i.cols?a.css("grid-template-columns","repeat("+i.cols+", 1fr)"):"string"==typeof i.cols&&a.css("grid-template-columns",i.cols),"number"==typeof i.rows?a.css("grid-template-rows","repeat("+i.rows+", "+(i.rowHeight!==t6?i.rowHeight:"1fr")+")"):"string"==typeof i.rows&&a.css("grid-template-rows",i.rows),("number"==typeof i.gutter||"string"==typeof i.gutter)&&a.css("grid-gap",i.gutter)),this.element.addClass(s.join(" ")),this.content.addClass(r.join(" "))},_setContentHeight:function(){var e;this.options.scrollable&&this.wrapper.is(":visible")&&(e=this.wrapper.innerHeight(),this.content.height(e))},refresh:function(e){var t,i,n,s,a,r=this.dataSource.view(),o="",l=this.template,d=this.altTemplate,h=this.options.selectable?"option":"listitem",u=iy(),c=this._endlessFetchInProgress,p=c?this._skipRerenderItemsCount:0,f=this.options.scrollable;if("itemchange"!==(e=e||{}).action){if(!this.trigger(ie,{action:e.action||"rebind",items:e.items,index:e.index})){for(this._angularItems("cleanup"),c||this._destroyEditable(),s=p,a=r.length;s<a;s++)o+=s%2?d(r[s]):l(r[s]);for(c?this.content.append(o):this.content.html(o),i=this.items().not(".k-loading-mask"),this._ariaAttributes(r.length),s=p,a=r.length;s<a;s++)(n=i.eq(s)).addClass(iu),n.attr(t5.attr("uid"),r[s].uid).attr(ic,h),this.options.selectable&&n.attr("aria-selected","false"),this.options.pageable&&(n.attr("aria-setsize",this.dataSource.total()),n.attr("aria-posinset",this.dataSource.indexOf(this.dataItem(n))+1));this.content[0]===u&&this.options.navigatable&&(this._focusNext?this.current(this.current().next()):f||this.current(i.eq(0))),this.element.attr(ig)&&0===this.element.find("#"+this.element.attr(ig)).length&&this.element.removeAttr(ig),this._setContentHeight(),this._angularItems("compile"),this._progress(!1),this._endlessFetchInProgress=null,this.trigger(t7,{action:e.action||"rebind",items:e.items,index:e.index})}}else this._hasBindingTarget()||this.editable||(t=e.items[0],(n=this.items().filter("["+t5.attr("uid")+"="+t.uid+"]")).length>0&&(s=n.index(),this.angular("cleanup",function(){return{elements:[n]}}),n.replaceWith(l(t)),(n=this.items().eq(s)).attr(t5.attr("uid"),t.uid),this.angular("compile",function(){return{elements:[n],data:[{dataItem:t}]}}),this.trigger("itemChange",{item:n,data:t})))},_ariaAttributes:function(e){var t=this.content,i=this.options.selectable;this._ariaLabelValue=this._ariaLabelValue||this.options.ariaLabel,0===e?(t.removeAttr(ic),t.removeAttr(im),t.attr(ip)&&(this._ariaLabelValue=t.attr(ip),t.removeAttr(ip))):(t.attr(ic,i?"listbox":"list"),i&&t5.ui.Selectable.parseOptions(i).multiple&&t.attr(im,!0),this._ariaLabelValue&&t.attr(ip,this._ariaLabelValue))},_pageable:function(){var e,t,i=this.options.pageable,n=this.options.navigatable;i&&((e=this.wrapper.find("."+ih)).length||(e=t9("<div />").addClass(ih)),"top"===i.position?e.addClass(t5.format("{0}-{1}",ih,i.position)).prependTo(this.wrapper):e.appendTo(this.wrapper),this.pager&&this.pager.destroy(),"object"==typeof i&&i instanceof t5.ui.Pager?this.pager=i:(e=i.pagerId?t9("#"+i.pagerId):e,t=t9.extend({},i,{dataSource:this.dataSource,navigatable:n,pagerId:null}),this.pager=new t5.ui.Pager(e,t)))},_selectable:function(){var e,t,i=this,n=i.options.selectable,s=i.options.navigatable;n&&(e=t5.ui.Selectable.parseOptions(n).multiple,i.selectable=new t5.ui.Selectable(i.element,{aria:!0,multiple:e,filter:i.options.contentElement?".k-listview-content "+is:is,change:function(){i.trigger(t8)}}),s&&i.element.on("keydown"+iw,function(n){if(t9(n.target).is(i.element)&&n.keyCode===ii.SPACEBAR){if(t=i.current(),n.target==n.currentTarget&&n.preventDefault(),e){if(n.ctrlKey){if(t&&t.hasClass(il))return t.removeClass(il),void i.trigger(t8)}else i.selectable.clear()}else i.selectable.clear();i.selectable.value(t),i.trigger(t8)}}))},_scrollable:function(){var e=this.options.scrollable;e&&(this.content.css({"overflow-y":"scroll",position:"relative","-webkit-overflow-scrolling":"touch"}),"endless"===e&&this._bindScrollable())},_bindScrollable:function(){var e=this,t=e._endlessPageSize=e.dataSource.options.pageSize;e.content.off("scroll"+iw).on("scroll"+iw,function(){this.scrollTop+this.clientHeight-this.scrollHeight>=-15&&!e._endlessFetchInProgress&&e._endlessPageSize<e.dataSource.total()&&(e._skipRerenderItemsCount=e._endlessPageSize,e._endlessPageSize=e._skipRerenderItemsCount+t,e.dataSource.options.endless=!0,e._endlessFetchInProgress=!0,e.dataSource.pageSize(e._endlessPageSize))})},current:function(e){var t=this.element,i=this._current,n=this._itemId;if(e===t6)return i;i&&i[0]&&(i[0].id===n&&i.removeAttr("id"),i.removeClass(io),t.removeAttr(ig)),e&&e[0]&&(n=e[0].id||n,this._scrollTo(e[0]),t.attr(ig,n),e.addClass(io).attr("id",n)),this._current=e},_scrollTo:function(e){var t,i=this.content,n=!1,s="scroll";"auto"===i.css("overflow")||i.css("overflow")===s||i.css("overflow-y")===s?t=i[0]:(t=window,n=!0);var a=function(i,a){var r=n?t9(e).offset()[i.toLowerCase()]:e["offset"+i],o=e["client"+a],l=t9(t)[s+i](),d=t9(t)[a.toLowerCase()]();r+o>l+d?t9(t)[s+i](r+o-d):r<l&&t9(t)[s+i](r)};a("Top","Height"),a("Left","Width")},_navigatable:function(){var e=this,t=e.options.navigatable,i=e.element,n=e.content;t&&(e._tabindex(),i.on("focus"+iw,function(){var t=e._current;t&&t.is(":visible")||(t=e._item("first")),e.current(t)}).on("focusout"+iw,function(){e._current&&e._current.removeClass(io)}).on("keydown"+iw,e,function(t){var i,s=t.keyCode,a=e.current(),r=t9(t.target),o=!r.is(":button, textarea, a, a > .t-icon, input"),l=r.is(":text, :password"),d=t5.preventDefault,h=n.find("."+id),u=iy(),c=e.options.scrollable;if(!(r.hasClass(ih)||!o&&!l&&s!==ii.ESC||l&&s!==ii.ESC&&s!==ii.ENTER)&&(s!==ii.UP&&s!==ii.LEFT||(a&&a[0]&&(a=a.prev()),a&&a[0]?e.current(a):c||e.current(e._item("last")),d(t)),s!==ii.DOWN&&s!==ii.RIGHT||(c?"endless"!==e.options.scrollable||a.next().length?(a=a.next())&&a[0]&&e.current(a):(e.content[0].scrollTop=e.content[0].scrollHeight,e._focusNext=!0):(a=a.next(),e.current(a&&a[0]?a:e._item("first"))),d(t)),s===ii.PAGEUP&&(e.current(null),e.dataSource.page(e.dataSource.page()-1),d(t)),s===ii.PAGEDOWN&&(e.current(null),e.dataSource.page(e.dataSource.page()+1),d(t)),s===ii.HOME&&(e.current(e._item("first")),d(t)),s===ii.END&&(e.current(e._item("last")),d(t)),s===ii.ENTER&&(0!==h.length&&(o||l)?(i=e.items().index(h),u&&u.blur(),e.save(),e.one("dataBound",function(){e.element.trigger("focus"),e.current(e.items().eq(i))})):""!==e.options.editTemplate&&e.edit(a)),s===ii.ESC)){if(0===(h=n.find("."+id)).length)return;i=e.items().index(h),e.cancel(),e.element.trigger("focus"),e.current(e.items().eq(i))}}),i.on("mousedown"+iw+" "+ik+iw,e.options.contentElement?".k-listview-content "+is:is,(function(t){e.current(t9(t.currentTarget)),t9(t.target).is(":button, a, :input, a > .k-icon, textarea")||t5.focusElement(i)}).bind(e)))},clearSelection:function(){this.selectable.clear()},select:function(e){var t=this.selectable;return(e=t9(e)).length?(t.options.multiple||(t.clear(),e=e.first()),void t.value(e)):t.value()},_destroyEditable:function(){this.editable&&(this.editable.destroy(),delete this.editable)},_modelFromElement:function(e){var t=e.attr(t5.attr("uid"));return this.dataSource.getByUid(t)},_closeEditable:function(){var e,t,i,n=this.editable,s=this.options.selectable?"option":"listitem",a=this.template;return n&&(n.element.index()%2&&(a=this.altTemplate),this.angular("cleanup",function(){return{elements:[n.element]}}),e=this._modelFromElement(n.element),this._destroyEditable(),i=n.element.index(),n.element.replaceWith(a(e)),(t=this.items().eq(i)).addClass(iu),t.attr(t5.attr("uid"),e.uid),t.attr(ic,s),this._hasBindingTarget()&&t5.bind(t,e),this.angular("compile",function(){return{elements:[t],data:[{dataItem:e}]}})),!0},edit:function(e){var t,i,n=this._modelFromElement(e),s=n.uid;this.cancel(),i=(e=this.items().filter("["+t5.attr("uid")+"="+s+"]")).index(),e.replaceWith(this.editTemplate(n)),t=this.items().eq(i).addClass(id).attr(t5.attr("uid"),n.uid),this.editable=t.kendoEditable({model:n,clearContainer:!1,errorTemplate:!1,target:this}).data("kendoEditable"),this.trigger(iv,{model:n,item:t})},save:function(){var e,t=this.editable;if(t){var i=t.element;e=this._modelFromElement(i),t.end()&&!this.trigger(ib,{model:e,item:i})&&(this._closeEditable(),this.dataSource.sync())}},remove:function(e){var t=this.dataSource,i=this._modelFromElement(e);this.editable&&(t.cancelChanges(this._modelFromElement(this.editable.element)),this._closeEditable()),this.trigger(i_,{model:i,item:e})||(e.attr("id")===this.element.attr(ig)&&this.element.removeAttr(ig),e.hide(),t.remove(i),t.sync())},add:function(){var e,t=this.dataSource,i=t.indexOf((t.view()||[])[0]);i<0&&(i=0),this.cancel(),e=t.insert(i,{}),this.edit(this.element.find("[data-uid='"+e.uid+"']"))},cancel:function(){var e=this.dataSource;if(this.editable){var t=this.editable.element,i=this._modelFromElement(t);this.trigger(t4,{model:i,container:t})||(e.cancelChanges(i),this._closeEditable())}},_crudHandlers:function(){var e=this,t=ik+iw,i="click"+iw;e.content.on(t+" "+i,".k-edit-button",function(t){t.preventDefault();var i=t9(this).closest("["+t5.attr("uid")+"]");setTimeout(function(){e.edit(i)})}),e.content.on(t+" "+i,".k-delete-button",function(t){t.preventDefault();var i=t9(this).closest("["+t5.attr("uid")+"]");setTimeout(function(){e.remove(i)})}),e.content.on(i,".k-update-button",function(t){e.save(),t.preventDefault()}),e.content.on(i,".k-cancel-button",function(t){e.cancel(),t.preventDefault()})},destroy:function(){it.fn.destroy.call(this),this._unbindDataSource(),this._destroyEditable(),this.element.off(iw),this.content.off(iw),this._endlessFetchInProgress=this._endlessPageSize=this._skipRerenderItemsCount=this._focusNext=null,this.pager&&this.pager.destroy(),t5.destroy(this.element)}}),t5.ui.plugin(iT),function(e,t){var i=window.kendo,n=i.ui.Widget,s=i.antiForgeryTokens,a=i.logToConsole,o=/\.([^\.]+)$/,l=".kendoUpload",d="select",h="upload",u="success",c="error",p="complete",f="cancel",m="clear",g="pause",v="resume",_="progress",b="remove",k="invalidMaxFileSize",w="invalidMinFileSize",y="invalidFileExtension",x="k-focus",C="tabindex",T="k-i-warning",S=n.extend({init:function(e,t){n.fn.init.call(this,e,t),this.name=e.name,this.multiple=this.options.multiple,this.directory=this.options.directory,this.localization=this.options.localization;var s=this.element;this.wrapper=s.closest(".k-upload"),0===this.wrapper.length&&(this.wrapper=this._wrapInput(s)),this._activeInput(s),this.toggle(this.options.enabled);var a=this._ns=l+"-"+i.guid();s.closest("form").on("submit"+a,this._onParentFormSubmit.bind(this)).on("reset"+a,this._onParentFormReset.bind(this)),this._initUploadModule(),this._toggleDropZone(),this.wrapper.on("click",".k-upload-action",this._onFileAction.bind(this)).on("click",".k-clear-selected",this._onClearSelected.bind(this)).on("click",".k-upload-selected",this._onUploadSelected.bind(this)).on("keydown",this._onKeyDown.bind(this)).on("focusout",this._focusout.bind(this)),this.element.val()&&this._onInputChange({target:this.element})},events:[d,h,u,c,p,f,m,_,b,g,v],options:{name:"Upload",enabled:!0,multiple:!0,directory:!1,showFileList:!0,template:"",files:[],async:{autoRetryAfter:0,bufferChunkSize:1e7,maxAutoRetries:1,removeVerb:"POST",autoUpload:!0,withCredentials:!0,accept:"*/*; q=0.5, application/json",useArrayBuffer:!1},localization:{select:"Select files...",cancel:"Cancel",retry:"Retry",remove:"Remove",pause:"Pause",resume:"Resume",clearSelectedFiles:"Clear",uploadSelectedFiles:"Upload",dropFilesHere:"Drop files here to upload",invalidFiles:"Invalid file(s). Please check file upload requirements.",statusUploading:"uploading",statusUploaded:"uploaded",statusWarning:"warning",statusFailed:"failed",headerStatusUploading:"Uploading...",headerStatusPaused:"Paused",headerStatusUploaded:"Done",uploadSuccess:"File(s) uploaded successfully.",uploadFail:"File(s) failed to upload.",invalidMaxFileSize:"File size too large.",invalidMinFileSize:"File size too small.",invalidFileExtension:"File type not allowed."},validation:{allowedExtensions:[],maxFileSize:0,minFileSize:0},dropZone:""},_initUploadModule:function(){var e=this.options;if(e.async.saveUrl){this._module=this._supportsFormData()?new F(this):new D(this),this._async=!0;var t=e.files;t.length>0&&this._renderInitialFiles(t)}else this._module=new I(this)},setOptions:function(t){var i=this.element;e(this.options.dropZone).off(this._ns),n.fn.setOptions.call(this,t),this.multiple=this.options.multiple,this.directory=this.options.directory,i.attr("multiple",!!this._supportsMultiple()&&this.multiple),this.directory&&(i.attr("webkitdirectory",this.directory),i.attr("directory",this.directory)),this.toggle(this.options.enabled),this._initUploadModule(),this._toggleDropZone()},enable:function(e){e=void 0===e||e,this.toggle(e)},disable:function(){this.toggle(!1)},toggle:function(e){e=void 0===e?e:!e,this.wrapper.toggleClass("k-disabled",e),this.element.prop("disabled",e)},focus:function(){this.element.trigger("focus")},destroy:function(){var t=e(this.options.dropZone);e(document).add(e(".k-dropzone",this.wrapper)).add(this.wrapper.closest("form")).off(this._ns),t.length>0&&t.off(this._ns),e(this.element).off(l),n.fn.destroy.call(this)},pause:function(t){this._module.onPause({target:e(t,this.wrapper)});var i=t.find(".k-i-pause-sm");i.removeClass("k-i-pause-sm").addClass("k-i-play-sm").attr("title",this.localization.resume),e(i).parent().attr("aria-label",this.localization.resume)},resume:function(t){this._module.onResume({target:e(t,this.wrapper)});var i=t.find(".k-i-play-sm");i.removeClass("k-i-play-sm").addClass("k-i-pause-sm").attr("title",this.localization.pause),e(i).parent().attr("aria-label",this.localization.pause)},upload:function(){this._module.onSaveSelected()},getFiles:function(){for(var t,i=[],n=this.wrapper.find(".k-file"),s=0;s<n.length;s++)if(t=e(n[s]).data("fileNames"))for(var a=0;a<t.length;a++)i.push(t[a]);return i},clearAllFiles:function(){var e=this;e.wrapper.find(".k-file").each(function(t,i){e._removeFileByDomElement(i,!1)})},removeAllFiles:function(){var e=this;e.wrapper.find(".k-file").each(function(t,i){e._removeFileByDomElement(i,!0)})},removeFileByUid:function(e){this._removeFileByUid(e,!0)},clearFileByUid:function(e){this._removeFileByUid(e,!1)},_removeFileByUid:function(t,n){var s;"string"==typeof t&&(s=e(".k-file["+i.attr("uid")+'="'+t+'"]',this.wrapper)).length>0&&this._removeFileByDomElement(s,n)},clearFile:function(e){this._removeFile(e,!1)},removeFile:function(e){this._removeFile(e,!0)},_removeFile:function(t,i){var n=this,s=n.wrapper.find(".k-file");"function"==typeof t&&s.each(function(s,a){t(e(a).data("fileNames"))&&n._removeFileByDomElement(a,i)})},_removeFileByDomElement:function(t,i){var n={target:e(t,this.wrapper)};this.options.async.saveUrl?(e(t).hasClass("k-file-progress")?this._module.onCancel(n):this._module.onRemove(n,{},i),0===e(".k-file",this.wrapper).length?this._hideHeaderUploadstatus():this._updateHeaderUploadStatus()):this._module.onRemove(n,{},i)},_addInput:function(t){if(t[0].nodeType){var i=t.clone().val("");i.insertAfter(this.element).data("kendo"+this.options.prefix+this.options.name,this),e(this.element).hide().attr(C,"-1").removeAttr("id").off(l),this._activeInput(i),this.element.trigger("focus")}},_activeInput:function(t){var i=this.wrapper;this.element=t,this.directory&&(t.attr("webkitdirectory",this.directory),t.attr("directory",this.directory)),t.attr("multiple",!!this._supportsMultiple()&&this.multiple).attr("autocomplete","off").on("click"+l,function(e){i.hasClass("k-disabled")&&e.preventDefault()}).on("focus"+l,function(){e(this).parent().addClass(x)}).on("blur"+l,function(){e(this).parent().removeClass(x)}).on("change"+l,this._onInputChange.bind(this))},_adjustFocusState:function(e,t){e.removeClass(x),e.attr(C,-1),t.addClass(x),t.attr(C,0)},_arrowKeyNavigation:function(e,t,n){var s,a=i.keys;t===a.DOWN?(e.preventDefault(),e.stopPropagation(),s=this.wrapper.find(".k-upload-files .k-file").first(),n.length>0&&(n.hasClass("k-upload-action")&&(n.removeClass(x),n=n.closest(".k-file")),s=n.next()),this._adjustFocusState(n,s),s&&0!==s.length||(s=this.wrapper.find(".k-clear-selected"))):t===a.UP?(e.preventDefault(),e.stopPropagation(),s=this.wrapper.find(".k-upload-files .k-file:last"),n.length>0&&(n.hasClass("k-upload-action")&&(n.removeClass(x),n=n.closest(".k-file")),s=n.prev()),this._adjustFocusState(n,s)):t===a.RIGHT?(n.hasClass("k-upload-action")?(s=n.next(".k-upload-action"))&&0!==s.length||(s=n.parent().find(".k-upload-action:first")):n.length>0&&(s=n.find(".k-upload-action:first")),s&&s.length>0&&(n.removeClass(x),s.addClass(x))):t===a.LEFT&&(n.hasClass("k-upload-action")?(s=n.prev(".k-upload-action"))&&0!==s.length||(s=n.parent().find(".k-upload-action:last")):n.length>0&&(s=n.find(".k-upload-action:last")),s&&s.length>0&&(n.removeClass(x),s.addClass(x))),s&&0!==s.length||t!==a.UP&&t!==a.DOWN||(s=this.element),s&&s.length>0&&(this._preventFocusRemove=!0,s.trigger("focus"))},_asyncCommandKeyNavigation:function(t,n,s){var a=i.keys,r=e(n,this.wrapper);if(this._retryClicked=!1,t===a.ESC&&n.find(".k-i-cancel").length>0)this.trigger(f,s),this._module.onCancel({target:r}),this._checkAllComplete(),this._updateHeaderUploadStatus(),this._preventFocusRemove=!0,this.element.trigger("focus");else if(t===a.SPACEBAR)n.find(".k-i-pause-sm").length>0?(this.trigger(g,s),this.pause(n),this._updateHeaderUploadStatus()):n.find(".k-i-play-sm").length>0&&(this.trigger(v,s),this.resume(n));else if(t===a.ENTER&&!n.is(".k-file-progress, .k-file-success, .k-file-invalid")){if(this.options.async.chunkSize&&!this.options.async.concurrent&&e(".k-file-progress",this.wrapper).length>0)return;e(".k-i-warning",n).remove(),e(".k-progressbar",n).finish().show(),this._module.metaData[r.data("uid")]||this._module.prepareChunk(r),this._module.onRetry({target:r}),this._retryClicked=!0}},_commandKeyNavigation:function(t,n){var s=i.keys,a=n.data("fileNames"),r=this._filesContainValidationErrors(a),o={files:a,headers:{}};t===s.DELETE?this.trigger(b,o)||(this._module.onRemove({target:e(n,this.wrapper)},o,!r),this._preventFocusRemove=!0,this.element.trigger("focus")):t===s.TAB?(n.removeClass(x),n.attr(C,-1)):this.options.async.saveUrl&&this._asyncCommandKeyNavigation(t,n,o)},_focusout:function(){var e=this.wrapper.find(".k-upload-files .k-file.k-focus");this._preventFocusRemove?this._preventFocusRemove=!1:(e.removeClass(x),e.attr(C,-1))},_onKeyDown:function(e){var t=this.wrapper.find(".k-upload-files .k-file.k-focus,.k-upload-action.k-focus"),n=i.keys,s=[n.DELETE,n.ESC,n.ENTER,n.SPACEBAR,n.TAB],a=e.keyCode;a===n.DOWN||a===n.UP||a===n.LEFT||a===n.RIGHT?this._arrowKeyNavigation(e,a,t):t.length>0&&t.hasClass("k-file")&&s.indexOf(a)>-1&&!this.wrapper.hasClass("k-disabled")&&(a===n.SPACEBAR&&(e.preventDefault(),e.stopPropagation()),this._commandKeyNavigation(a,t))},_onInputChange:function(t){var i=e(t.target),n=H(this._inputFiles(i),this._isAsyncNonBatch());N(n,this.options.validation),this.trigger(d,{files:n})?(this._addInput(i),i.remove()):this._module.onSelect({target:i},n)},_readDirectory:function(t){var i=new e.Deferred,n=t.createReader(),s=[],a=function(){n.readEntries(function(e){e.length?(s=s.concat(e),a()):i.resolve(s)},i.reject)};return a(),i.promise()},_readFile:function(e){var t=this,i=e.fullPath;e.file(function(e){e.relativePath=i.slice(1),t.droppedFolderFiles.push(e),t.droppedFolderCounter--,0===t.droppedFolderCounter&&setTimeout(function(){0===t.droppedFolderCounter&&t.droppedFolderFiles.length&&(t._proceedDroppedItems(t.droppedFolderFiles),t.droppedFolderFiles=[])},0)},function(){a("File error.")})},_traverseFileTree:function(e,t){var i=this;t||i.droppedFolderCounter--,this._readDirectory(e).then(function(e){i.droppedFolderCounter+=e.length;for(var t=0;t<e.length;t++)e[t].isFile?i._readFile(e[t]):e[t].isDirectory&&i._traverseFileTree(e[t])})},_onDrop:function(e){var t,i=e.originalEvent.dataTransfer,n=i.files;if(V(e),this.options.directoryDrop&&i.items){t=i.items.length,this.droppedFolderCounter=0,this.droppedFolderFiles=[];for(var s=0;s<t;s++)if(i.items[s].webkitGetAsEntry){var a=i.items[s].webkitGetAsEntry();a.isDirectory?this._traverseFileTree(a,!0):a.isFile&&this.droppedFolderFiles.push(i.files[s])}else this._proceedDroppedItems(n)}else this._proceedDroppedItems(n)},_proceedDroppedItems:function(t){var i=H(z(t),this._isAsyncNonBatch());t.length>0&&!this.wrapper.hasClass("k-disabled")&&(!this.multiple&&i.length>1&&i.splice(1,i.length-1),N(i,this.options.validation),this.trigger(d,{files:i})||this._module.onSelect({target:e(".k-dropzone",this.wrapper)},i))},_filesContainValidationErrors:function(t){var i=!1;return e(t).each(function(e,t){if(t.validationErrors&&t.validationErrors.length>0)return i=!0,!1}),i},_isAsyncNonBatch:function(){return this._async&&!this.options.async.batch||!1},_renderInitialFiles:function(e){var t=0;for(e=H(e,!0),t=0;t<e.length;t++){var i=e[t],n=this._enqueueFile(i.name,{fileNames:[i]});n.addClass("k-file-success").data("files",[e[t]]),this._supportsRemove()&&this._fileAction(n,b)}},_prepareTemplateData:function(e,t){var i=t.fileNames,n={},s=0,a=0;for(a=0;a<i.length;a++)s+=i[a].size;return n.name=e,n.size=s,n.files=t.fileNames,n},_prepareDefaultSingleFileEntryTemplate:function(t){var n=t.fileNames[0],s=R(t.fileNames),a=i.getFileGroup(n.extension,!0),r=n.validationErrors,o="";return r&&r.length>0?o+="<li class='k-file k-file-invalid'><div class='k-progressbar k-hidden'><span class='k-progress'></span></div><span class='k-file-invalid-group-wrapper'><span class='k-file-group k-icon k-i-"+a+"'></span><span class='k-file-state'></span></span><span class='k-file-name-size-wrapper'><span class='k-file-name k-file-name-invalid' title='"+n.name+"'>"+n.name+"</span><span class='k-file-validation-message !k-text-error'>"+this.localization[r[0]]+"</span></span>":o+="<li class='k-file'><div class='k-progressbar k-hidden'><span class='k-progress'></span></div><span class='k-file-group-wrapper'><span class='k-file-group k-icon k-i-"+a+"'></span><span class='k-file-state'></span></span><span class='k-file-name-size-wrapper'><span class='k-file-name' title='"+n.name+"'>"+n.name+"</span><span class='k-file-size'>"+s+"</span></span>",e(o+="<strong class='k-upload-status'></strong>")},_prepareDefaultMultipleFileEntriesTemplate:function(t){var i,n,s=t.fileNames,a=this._filesContainValidationErrors(s),r=R(s),o="";for(o+=(a?"<li class='k-file k-file-invalid'><div class='k-progressbar k-hidden'><span class='k-progress'></span></div><span class='k-multiple-files-invalid-group-wrapper'><span class='k-file-group k-icon k-i-files'></span>":"<li class='k-file'><div class='k-progressbar k-hidden'><span class='k-progress'></span></div><span class='k-multiple-files-group-wrapper'><span class='k-file-group k-icon k-i-files'></span>")+"<span class='k-file-state'></span></span>",s.sort(function(e,t){return e.validationErrors?-1:t.validationErrors?1:0}),o+="<span class='k-multiple-files-wrapper'>",i=0;i<s.length;i++){var l=R([n=s[i]]);o+="<span class='k-file-name-size-wrapper'>",n.validationErrors&&n.validationErrors.length>0?o+="<span class='k-file-name k-file-name-invalid' title='"+n.name+"'>"+n.name+"</span>":o+="<span class='k-file-name' title='"+n.name+"'>"+n.name+"</span>",o+="<span class='k-file-size'>"+l+"</span></span>"}return e(o+=(a?"<span class='k-file-validation-message !k-text-error'>"+this.localization.invalidFiles+"</span>":"<span class='k-file-information'>Total: "+s.length+" files, "+r+"</span>")+"</span><strong class='k-upload-status'></strong>")},_enqueueFile:function(t,n){var s,a,r,o,l=n.fileNames[0].uid,d=e(".k-upload-files",this.wrapper),h=this.options.template;return 0===d.length&&(d=e("<ul class='k-upload-files k-reset'></ul>").appendTo(this.wrapper),this.options.showFileList||d.hide(),this.wrapper.removeClass("k-upload-empty")),s=e(".k-file",d),h?(r=this._prepareTemplateData(t,n),(a=e("<li class='k-file'>"+(h=i.template(h))(r)+"</li>")).find(".k-upload-action").addClass("k-button k-icon-button k-button-md k-rounded-md k-button-flat k-button-flat-base"),this.angular("compile",function(){return{elements:a,data:[r]}})):a=1===n.fileNames.length?this._prepareDefaultSingleFileEntryTemplate(n):this._prepareDefaultMultipleFileEntriesTemplate(n),a.attr(i.attr("uid"),l).appendTo(d).data(n),this._async||e(".k-progress",a).width("100%"),!this.multiple&&s.length>0&&(o={files:s.data("fileNames"),headers:{}},this.trigger(b,o)||this._module.onRemove({target:e(s,this.wrapper)},o)),a},_removeFileEntry:function(t){var i,n,s,a=t.closest(".k-upload-files");t.remove(),i=e(".k-file",a),n=e(".k-file-success, .k-file-error",a),s=e(".k-file-invalid",a),n.length!==i.length&&s.length!==i.length||this._hideActionButtons(),0===i.length?(a.remove(),this.wrapper.addClass("k-upload-empty"),this._hideHeaderUploadstatus()):this._updateHeaderUploadStatus()},_fileAction:function(e,t,i){var n,s={remove:"k-i-x",cancel:"k-i-cancel",retry:"k-i-retry",pause:"k-i-pause-sm"},a={remove:"k-i-close",cancel:"k-i-cancel",retry:"k-i-reload-sm",pause:"k-i-pause-sm"};s.hasOwnProperty(t)&&(i||this._clearFileAction(e),this.options.template?(n=e.find(".k-upload-action").first()).find(".k-icon").length?n.next(".k-upload-action").length&&n.next(".k-upload-action").addClass("k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button").append("<span class='k-button-icon k-icon "+a[t]+" "+s[t]+"' title='"+this.localization[t]+"'aria-label='"+this.localization[t]+"'></span>").show():n.addClass("k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button").append("<span class='k-button-icon k-icon "+a[t]+" "+s[t]+"' title='"+this.localization[t]+"'aria-label='"+this.localization[t]+"'></span>").show():(i||e.find(".k-upload-status .k-upload-action").remove(),e.find(".k-upload-status").append(this._renderAction(s[t],this.localization[t],a[t]))))},_fileState:function(t,i){var n=this.localization,s={uploading:{text:n.statusUploading},uploaded:{text:n.statusUploaded},failed:{text:n.statusFailed}}[i];s&&e("span.k-file-state",t).text(s.text)},_renderAction:function(t,i,n){return""!==t?e("<button type='button' class='k-button k-icon-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-upload-action' aria-label='"+i+"' tabindex='-1'><span class='k-button-icon k-icon "+n+" "+t+"' title='"+i+"'></span></button>").on("focus",function(){e(this).addClass(x)}).on("blur",function(){e(this).removeClass(x)}):e("<button type='button' class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base'><span class=\"k-button-text\">"+i+"</span></button>")},_clearFileAction:function(t){e(".k-upload-action",t).empty().hide()},_onFileAction:function(t){if(!this.wrapper.hasClass("k-disabled")){var i=e(t.target).closest(".k-upload-action"),n=i.find(".k-icon"),s=i.closest(".k-file"),a=s.data("fileNames"),r=this._filesContainValidationErrors(a),o={files:a,headers:{}};this._retryClicked=!1,n.hasClass("k-i-x")?this.trigger(b,o)||(this._module.onRemove({target:e(s,this.wrapper)},o,!r),this.element.trigger("focus")):n.hasClass("k-i-cancel")?(this.trigger(f,o),this._module.onCancel({target:e(s,this.wrapper)}),this._checkAllComplete(),this._updateHeaderUploadStatus(),this.element.trigger("focus")):n.hasClass("k-i-pause-sm")?(this.trigger(g,o),this.pause(s),this._updateHeaderUploadStatus()):n.hasClass("k-i-play-sm")?(this.trigger(v,o),this.resume(s)):n.hasClass("k-i-retry")&&(e(".k-i-warning",s).remove(),e(".k-progressbar",s).finish().show(),this._module.onRetry({target:e(s,this.wrapper)}),this._retryClicked=!0),s.addClass(x)}return!1},_onUploadSelected:function(){return this.wrapper.hasClass("k-disabled")||this._module.onSaveSelected(),!1},_onClearSelected:function(){return this.wrapper.hasClass("k-disabled")||this.trigger(m,{})||this.clearAllFiles(),!1},_onFileProgress:function(t,i){i>100&&(i=100),e(".k-progressbar",t.target).removeClass("k-hidden"),this.options.template||(0===e(".k-upload-pct",t.target).length&&e(".k-upload-status",t.target).prepend("<span class='k-upload-pct'></span>"),100!==i?e(".k-upload-pct",t.target).text(i+"%"):e(".k-upload-pct",t.target).remove()),e(".k-progress",t.target).width(i+"%"),this.trigger(_,{files:j(t).data("fileNames"),percentComplete:i})},_onUploadSuccess:function(e,t,i){var n=j(e),s=n.data("fileNames"),a=n.find(".k-file-information"),r=n.find(".k-file-size");this.trigger(u,{files:n.data("fileNames"),response:t,operation:"upload",XMLHttpRequest:i})?this._setUploadErrorState(n):(this._fileState(n,"uploaded"),n.removeClass("k-file-progress").addClass("k-file-success"),a.length>0?a.addClass("k-hidden").after('<span class="k-file-validation-message !k-text-success">'+s.length+" "+this.localization.uploadSuccess+"</span>"):r.length>0&&r.addClass("k-hidden").after('<span class="k-file-validation-message !k-text-success">'+this.localization.uploadSuccess+"</span>"),this._updateHeaderUploadStatus(),this._supportsRemove()?this._fileAction(n,b):this._clearFileAction(n)),this._hideUploadProgress(n),this._checkAllComplete()},_onUploadError:function(e,t){var i=this._module,n=j(e),s=n.data("uid");this._setUploadErrorState(n),this.trigger(c,{operation:"upload",files:n.data("fileNames"),XMLHttpRequest:t}),a("Server response: "+t.responseText),this.options.async.chunkSize?i._decreasePosition&&i._decreasePosition(s):this._hideUploadProgress(n),this._checkAllComplete(),this.options.async.autoRetryAfter&&this._autoRetryAfter(n)},_autoRetryAfter:function(e){var t=this,i=this._module.retries;i&&(i[e.data("uid")]||(i[e.data("uid")]=1),i[e.data("uid")]<=this.options.async.maxAutoRetries&&(i[e.data("uid")]++,setTimeout(function(){t._module.performUpload(e)},this.options.async.autoRetryAfter)))},_setUploadErrorState:function(t){var i,n=t.data("fileNames"),s=t.find(".k-file-information"),a=t.find(".k-file-size");this._fileState(t,"failed"),t.removeClass("k-file-progress").addClass("k-file-error"),s.length>0?s.addClass("k-hidden").after('<span class="k-file-validation-message !k-text-error">'+n.length+" "+this.localization.uploadFail+"</span>"):a.length>0&&a.addClass("k-hidden").after('<span class="k-file-validation-message !k-text-error">'+this.localization.uploadFail+"</span>"),this._updateUploadProgress(t),(i=e(".k-upload-pct",t)).length>0&&i.remove(),this._updateHeaderUploadStatus(),this._fileAction(t,"retry"),this._fileAction(t,b,!0),this._retryClicked&&t.trigger("focus")},_updateUploadProgress:function(t){if(this.options.async.chunkSize){var i=t.data("uid");if(this._module.metaData){var n=this._module.metaData[i];if(n){var s=n.totalChunks?Math.round(n.chunkIndex/n.totalChunks*100):100;this._onFileProgress({target:e(t,this.wrapper)},s)}}}else e(".k-progress",t).width("100%")},_hideUploadProgress:function(t){e(".k-progressbar",t).delay(1e3).fadeOut(2e3,function(){e(this).find(".k-progress").css("width","0%")})},_showActionButtons:function(){var t=e(".k-action-buttons",this.wrapper),i=e(".k-upload-selected",this.wrapper),n=e(".k-clear-selected",this.wrapper);0===i.length&&(i=this._renderAction("",this.localization.uploadSelectedFiles).addClass("k-upload-selected").addClass("k-button-solid-primary").removeClass("k-button-solid-base"),n=this._renderAction("",this.localization.clearSelectedFiles).addClass("k-clear-selected")),t.length||(t=e("<div />").addClass("k-action-buttons").append(n,i)),this.wrapper.append(t)},_hideActionButtons:function(){e(".k-action-buttons",this.wrapper).remove()},_showHeaderUploadStatus:function(t){var i=this.localization,n=e(".k-dropzone",this.wrapper),s=e(".k-upload-status-total",this.wrapper);0!==s.length&&s.remove(),e(".k-dropzone-hint",this.wrapper).addClass("k-hidden"),s='<strong class="k-upload-status k-upload-status-total"><span class="k-icon"></span></strong>',t?(s=e(s).append(i.headerStatusUploading)).find(".k-icon").addClass("k-i-upload"):(s=e(s).append(i.headerStatusUploaded)).find(".k-icon").addClass(T),n.length>0?n.append(s):e(".k-upload-button",this.wrapper).after(s)},_updateHeaderUploadStatus:function(){var t,i,n=e(".k-upload-status-total",this.wrapper),s=e(".k-file",this.wrapper).not(".k-file-success, .k-file-error, .k-file-invalid"),a=e(".k-file-invalid",this.wrapper),r=e(".k-file-error",this.wrapper),o=e(".k-file",this.wrapper).find(".k-i-play-sm");!o.length||o.length!==s.length&&this.options.async.concurrent?(0===s.length||a.length>0||r.length>0)&&(t=e(".k-file.k-file-error, .k-file.k-file-invalid",this.wrapper),n=e(".k-upload-status-total",this.wrapper),i=e(".k-icon",n).removeClass().addClass("k-icon").addClass(0!==t.length?T:"k-i-check"),n.html(i).append(this.localization.headerStatusUploaded)):(i=e(".k-icon",n).removeClass().addClass("k-icon").addClass("k-i-pause-sm"),n.html(i).append(this.localization.headerStatusPaused))},_hideHeaderUploadstatus:function(){var t=this.options.dropZone;e(".k-upload-status-total",this.wrapper).remove(),""===t&&e(".k-dropzone-hint",this.wrapper).removeClass("k-hidden")},_onParentFormSubmit:function(){var t=this.element;if(void 0!==this._module.onAbort&&this._module.onAbort(),!t.value){var i=e(t);i.attr("disabled","disabled"),window.setTimeout(function(){i.prop("disabled",!1)},0)}},_onParentFormReset:function(){e(".k-upload-files",this.wrapper).remove()},_supportsFormData:function(){return"undefined"!=typeof FormData},_supportsMultiple:function(){var e=this._userAgent().indexOf("Windows")>-1;return!(i.support.browser.opera||i.support.browser.safari&&e)},_supportsDrop:function(){var e=this._userAgent().toLowerCase();return!(!/chrome/.test(e)&&/safari/.test(e)&&/windows/.test(e))&&this._supportsFormData()&&this.options.async.saveUrl},_userAgent:function(){return navigator.userAgent},_setupDropZone:function(){var t=this._ns,i=e(".k-dropzone",this.wrapper).on("dragenter"+t,V).on("dragover"+t,function(e){e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="copy"),e.preventDefault()}).on("drop"+t,this._onDrop.bind(this));i.find(".k-dropzone-hint").length||i.append(e("<em class='k-dropzone-hint'>"+this.localization.dropFilesHere+"</em>")),U(i,t,function(){i.closest(".k-upload").hasClass("k-disabled")||i.addClass("k-dropzone-hovered")},function(){i.removeClass("k-dropzone-hovered")}),this._bindDocumentDragEventWrappers(i)},_setupCustomDropZone:function(){var t=this,i=e(t.options.dropZone);t.wrapper.find(".k-dropzone-hint").length?e(".k-dropzone-hint",t.wrapper).addClass("k-hidden"):e(".k-dropzone",t.wrapper).append(e("<em class='k-dropzone-hint k-hidden'>"+t.localization.dropFilesHere+"</em>"));var n=t._ns;i.on("dragenter"+n,V).on("dragover"+n,function(e){e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="copy"),e.preventDefault()}).on("drop"+n,t._onDrop.bind(t)),U(i,n,function(n){t.wrapper.hasClass("k-disabled")||(i.removeClass("k-dropzone-hovered"),i.addClass("k-dropzone-hovered"),e(n.target).addClass("k-dropzone-hovered"))},function(){i.removeClass("k-dropzone-hovered"),i.find(".k-dropzone-hovered").removeClass("k-dropzone-hovered")}),t._bindDocumentDragEventWrappers(i)},_bindDocumentDragEventWrappers:function(t){var i=this,n=i._ns;U(e(document),n,function(){i.wrapper.hasClass("k-disabled")||(t.addClass("k-dropzone-active"),t.closest(".k-upload").removeClass("k-upload-empty"),t.find(".k-dropzone-hint").removeClass("k-hidden"))},function(){t.removeClass("k-dropzone-active"),t.find(".k-dropzone-hint").addClass("k-hidden"),0===e("li.k-file",t.closest(".k-upload")).length&&t.closest(".k-upload").addClass("k-upload-empty")})},_toggleDropZone:function(){var t=this.options.dropZone;this._supportsDrop()&&(e(t).off(this._ns),e(".k-dropzone",this.wrapper).off(this._ns),""!==t?this._setupCustomDropZone():this._setupDropZone())},_supportsRemove:function(){return!!this.options.async.removeUrl},_submitRemove:function(t,i,n,a){var o=this.options.async.removeField||"fileNames",l=e.extend(i.data,s());l[o]=t,r.ajax({type:this.options.async.removeVerb,dataType:"json",dataFilter:L,url:this.options.async.removeUrl,traditional:!0,data:l,headers:i.headers,success:n,error:a,xhrFields:{withCredentials:this.options.async.withCredentials}})},_wrapInput:function(t){var i=this.options,n=!!t.attr("id")&&e("[for='"+t.attr("id")+"']").length>0;return t.wrap("<div class='k-widget k-upload'><div class='k-dropzone'><div class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-upload-button'></div></div></div>"),i.async.saveUrl?t.closest(".k-upload").addClass("k-upload-async"):t.closest(".k-upload").addClass("k-upload-sync"),t.closest(".k-upload").addClass("k-upload-empty"),t.closest(".k-button").append("<span>"+this.localization.select+"</span>"),n||t.attr("aria-label")||t.attr("aria-label",this.localization.select),t.closest(".k-upload")},_checkAllComplete:function(){0===e(".k-file.k-file-progress",this.wrapper).length&&this.trigger(p)},_inputFiles:function(e){return A(e)}}),I=function(e){this.name="syncUploadModule",this.element=e.wrapper,this.upload=e,this.element.closest("form").attr("enctype","multipart/form-data").attr("encoding","multipart/form-data")};I.prototype={onSelect:function(t,i){var n=this.upload,s=e(t.target),a=n._filesContainValidationErrors(i);n._addInput(s);var r={fileNames:i};a?s.remove():r.relatedInput=s;var o=n._enqueueFile(E(s),r);a&&n._hideUploadProgress(o),n._fileAction(o,b)},onRemove:function(e){var t=j(e),i=t.data("relatedInput");i&&i.remove(),this.upload._removeFileEntry(t)}};var D=function(e){this.name="iframeUploadModule",this.element=e.wrapper,this.upload=e,this.iframes=[]};S._frameId=0,D.prototype={onSelect:function(t,i){var n=this.upload,s=e(t.target),a=n._filesContainValidationErrors(i),r=this.prepareUpload(s,i,a);n.options.async.autoUpload?a?(n._fileAction(r,b),n._showHeaderUploadStatus(!1)):this.performUpload(r):(n._fileAction(r,b),a?n._updateHeaderUploadStatus():n._showActionButtons()),a&&n._hideUploadProgress(r)},prepareUpload:function(t,i,n){var s,a,r,o,l=this.upload,d=e(l.element),h=l.options.async.saveField||t.attr("name");return l._addInput(t),t.attr("name",h),n?(t.remove(),a={fileNames:i}):(r=this.createFrame(l.name+"_"+S._frameId++),this.registerFrame(r),o=this.createForm(l.options.async.saveUrl,r.attr("name")).append(d),a={frame:r,relatedInput:d,fileNames:i}),s=l._enqueueFile(E(t),a),r&&r.data({form:o,file:s}),s},performUpload:function(t){var i={files:t.data("fileNames")},n=t.data("frame"),a=this.upload,r=t.find(".k-file-validation-message"),o=t.find(".k-file-information"),l=t.find(".k-file-size");if(a.trigger(h,i))a._removeFileEntry(n.data("file")),this.cleanupFrame(n),this.unregisterFrame(n);else{a._hideActionButtons(),a._showHeaderUploadStatus(!0),n.appendTo(document.body);var d=n.data("form").attr("action",a.options.async.saveUrl).appendTo(document.body);for(var u in i.data=e.extend({},i.data,s()),i.data){var c=d.find("input[name='"+u+"']");0===c.length&&(c=e("<input>",{type:"hidden",name:u}).prependTo(d)),c.val(i.data[u])}a._fileAction(t,f),a._fileState(t,"uploading"),e(t).removeClass("k-file-error").addClass("k-file-progress"),r.length>0&&r.remove(),o.length>0?o.removeClass("k-hidden"):l.length>0&&l.removeClass("k-hidden"),n.one("load",this.onIframeLoad.bind(this)),d[0].submit()}},onSaveSelected:function(){var t=this,i=t.upload;e(".k-file",this.element).each(function(){var n=e(this),s=W(n),a=i._filesContainValidationErrors(n.data("fileNames"));s||a||t.performUpload(n)})},onIframeLoad:function(t){var i,n=e(t.target);try{i=n.contents().text()}catch(e){i="Error trying to get server response: "+e}this.processResponse(n,i)},processResponse:function(t,i){var n=t.data("file"),s=this,a={responseText:i};B(i,function(i){e.extend(a,{statusText:"OK",status:"200"}),s.upload._onFileProgress({target:e(n,s.upload.wrapper)},100),s.upload._onUploadSuccess({target:e(n,s.upload.wrapper)},i,a),s.cleanupFrame(t),s.unregisterFrame(t)},function(){e.extend(a,{statusText:"error",status:"500"}),s.upload._onUploadError({target:e(n,s.upload.wrapper)},a)})},onCancel:function(t){var i=e(t.target).data("frame");this.stopFrameSubmit(i),this.cleanupFrame(i),this.unregisterFrame(i),this.upload._removeFileEntry(i.data("file"))},onRetry:function(e){var t=j(e);this.performUpload(t)},onRemove:function(e,t,i){var n=this.upload,s=j(e),a=s.data("frame");a?(this.unregisterFrame(a),n._removeFileEntry(s),this.cleanupFrame(a)):s.hasClass("k-file-success")?M(s,n,t,i):n._removeFileEntry(s)},onAbort:function(){var t=this.element,i=this;e.each(this.iframes,function(){e("input",this.data("form")).appendTo(t),i.stopFrameSubmit(this[0]),this.data("form").remove(),this.remove()}),this.iframes=[]},createFrame:function(t){return e("<iframe name='"+t+"' id='"+t+"' style='display:none;' />")},createForm:function(t,i){return e("<form enctype='multipart/form-data' method='POST' action='"+t+"' target='"+i+"'/>")},stopFrameSubmit:function(e){void 0!==e.stop?e.stop():e.document&&e.document.execCommand("Stop")},registerFrame:function(e){this.iframes.push(e)},unregisterFrame:function(t){this.iframes=e.grep(this.iframes,function(e){return e.attr("name")!=t.attr("name")})},cleanupFrame:function(e){var t=e.data("form");e.data("file").data("frame",null),setTimeout(function(){t.remove(),e.remove()},1)}};var F=function(e){this.name="formDataUploadModule",this.element=e.wrapper,this.upload=e,this.position={},this.metaData={},this.cancelled={},this.resume={},this.paused={},this.retries={}};function E(t){return e.map(A(t),function(e){return e.name}).join(", ")}function A(e){var t,i,n=e[0];return n.files?z(n.files):[{name:-1!=(i=(t=n.value).lastIndexOf("\\"))?t.substr(i+1):t,extension:P(n.value),size:null}]}function z(t){return e.map(t,function(e){var t;return t=e.name||e.fileName,{name:i.htmlEncode(t),extension:P(t),size:"number"==typeof e.size?e.size:e.fileSize,rawFile:e}})}function P(e){var t=e.match(o);return t?t[0]:""}function H(t,n){var s=i.guid();return e.map(t,function(e){return e.uid=n?i.guid():s,e})}function N(t,i){for(var n,s,a,r=(a=i.allowedExtensions,e.map(a,function(e){return("."===e.substring(0,1)?e:"."+e).toLowerCase()})),o=i.maxFileSize,l=i.minFileSize,d=0;d<t.length;d++)n=t[d],r.length>0&&0>r.indexOf(n.extension.toLowerCase())&&(n.validationErrors=n.validationErrors||[],-1===e.inArray(y,n.validationErrors)&&n.validationErrors.push(y)),s=t[d],0!==l&&s.size<l&&(s.validationErrors=s.validationErrors||[],-1===e.inArray(w,s.validationErrors)&&s.validationErrors.push(w)),0!==o&&s.size>o&&(s.validationErrors=s.validationErrors||[],-1===e.inArray(k,s.validationErrors)&&s.validationErrors.push(k))}function R(e){var t=0;if("number"!=typeof e[0].size)return"";for(var i=0;i<e.length;i++)e[i].size&&(t+=e[i].size);return(t/=1024)<1024?t.toFixed(2)+" KB":(t/1024).toFixed(2)+" MB"}function O(t){return!t.multiple&&e(".k-file",t.wrapper).length>1}function M(t,i,n,s){if(i._supportsRemove()){var r=t.data("fileNames"),o=e.map(r,function(e){return e.name});!1!==s?i._submitRemove(o,n,function(e,n,s){i.trigger(u,{operation:"remove",files:r,response:e,XMLHttpRequest:s})||i._removeFileEntry(t)},function(e){O(i)&&i._removeFileEntry(t),i.trigger(c,{operation:"remove",files:r,XMLHttpRequest:e}),a("Server response: "+e.responseText)}):i._removeFileEntry(t)}else!O(i)&&s||i._removeFileEntry(t)}function B(e,t,i){var n=!1,s="";try{s=JSON.parse(L(e)),n=!0}catch(e){i()}n&&t(s)}function L(e){return void 0!==e&&""!==e||(e="{}"),e}function V(e){e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="copy"),e.stopPropagation(),e.preventDefault()}function U(e,t,i,n){var s,a;e.on("dragenter"+t,function(e){i(e),a=new Date,s||(s=setInterval(function(){new Date-a>100&&(n(),clearInterval(s),s=null)},100))}).on("dragover"+t,function(){a=new Date})}function W(e){return e.is(".k-file-progress, .k-file-success, .k-file-error")}function j(t){return e(t.target).closest(".k-file")}F.prototype={onSelect:function(t,i){var n,s,a=this.upload,r=this,o=e(t.target),l=this.prepareUpload(o,i);e.each(l,function(t){n=a._filesContainValidationErrors(e(this.data("fileNames"))),a.options.async.autoUpload?n?(a._fileAction(this,b),a._showHeaderUploadStatus(!1)):a.options.async.chunkSize?(r.prepareChunk(this),s=this.prev(),(a.options.async.concurrent||0===t&&!s.length||0===t&&s.hasClass("k-file-success"))&&r.performUpload(this)):r.performUpload(this):(a._fileAction(this,b),n?a._updateHeaderUploadStatus():(a._showActionButtons(),this.addClass("k-toupload"))),n&&a._hideUploadProgress(this)})},prepareUpload:function(t,i){var n=this.enqueueFiles(i);return t.is("input")&&(e.each(n,function(){e(this).data("relatedInput",t)}),t.data("relatedFileEntries",n),this.upload._addInput(t)),n},enqueueFiles:function(t){var i,n,s,a,r=this.upload,o=t.length,l=[];if(!0===r.options.async.batch)i=e.map(t,function(e){return e.name}).join(", "),(r.directory||r.options.directoryDrop)&&e(t).each(function(){(this.rawFile.webkitRelativePath||this.rawFile.relativePath)&&(this.name=this.rawFile.webkitRelativePath||this.rawFile.relativePath)}),(a=r._enqueueFile(i,{fileNames:t})).data("files",t),l.push(a);else for(n=0;n<o;n++)i=(s=t[n]).name,(r.directory||r.options.directoryDrop)&&(s.rawFile.webkitRelativePath||s.rawFile.relativePath)&&(s.name=s.rawFile.webkitRelativePath||s.rawFile.relativePath),(a=r._enqueueFile(i,{fileNames:[s]})).data("files",[s]),l.push(a);return l},performUpload:function(t){var i,n=this.upload,a=this.createFormData(),r=this.createXHR(),o={files:t.data("fileNames"),XMLHttpRequest:r},l=t.find(".k-file-validation-message"),d=t.find(".k-file-information"),u=t.find(".k-file-size");if(n.trigger(h,o))this.removeFileEntry(t);else{if(0===t.find(".k-i-cancel").length&&(n.options.async.chunkSize&&n._fileAction(t,g),n._fileAction(t,f,n.options.async.chunkSize)),n.wrapper.find(".k-toupload").length||n._hideActionButtons(),n._showHeaderUploadStatus(!0),o.formData)a=o.formData;else{for(var c in o.data=e.extend({},o.data,s()),o.data)a.append(c,o.data[c]);(i=t.data("files"))&&this.populateFormData(a,i)}n._fileState(t,"uploading"),e(t).removeClass("k-file-error").addClass("k-file-progress"),l.length>0&&l.remove(),d.length>0?d.removeClass("k-hidden"):u.length>0&&u.removeClass("k-hidden"),n.options.async.useArrayBuffer&&window.FileReader?this._readFile(n.options.async.saveUrl,a,t,r):this.postFormData(n.options.async.saveUrl,a,t,r)}},_readFile:function(t,i,n,s){var a=this,r=a.upload,o=n.data("files")[0],l=new FileReader;l.onload=function(l){try{a.fileArrayBuffer?a.fileArrayBuffer=a._appendBuffer(a.fileArrayBuffer,l.target.result):a.fileArrayBuffer=l.target.result}catch(t){return void r._onUploadError({target:e(n,r.wrapper)},s)}a.position[o.uid]>o.size?(a.postFormData(r.options.async.saveUrl,a.fileArrayBuffer,n,s),a.fileArrayBuffer=null):a._readFile(t,i,n,s)},l.onerror=function(){r._onUploadError({target:e(n,r.wrapper)},s)},l.readAsArrayBuffer(a._getCurrentChunk(o.rawFile,o.uid))},_appendBuffer:function(e,t){var i=new Uint8Array(e.byteLength+t.byteLength);return i.set(new Uint8Array(e),0),i.set(new Uint8Array(t),e.byteLength),i.buffer},onSaveSelected:function(){var t=this,i=t.upload;e(".k-toupload",this.element).filter(function(){var t=e(this),n=W(t),s=i._filesContainValidationErrors(t.data("fileNames"));return!n&&!s}).each(function(n){var s=e(this),a=s.prev();s.removeClass("k-toupload"),i.options.async.chunkSize?(t.prepareChunk(s),(i.options.async.concurrent||0===n&&!a.length||0===n&&a.hasClass("k-file-success")||a.hasClass("k-file-error"))&&t.performUpload(s)):t.performUpload(s)})},onCancel:function(e){var t=j(e);this.upload.options.async.chunkSize&&(this.cancelled[t.data("uid")]=!0),this.stopUploadRequest(t),this.removeFileEntry(t)},onPause:function(e){var t=j(e).data("uid"),i=this.upload.options.async;i.chunkSize&&(this.retries[t]=i.maxAutoRetries+1,this.paused[t]=!0,this.resume[t]=!1)},onResume:function(e){var t=j(e),i=t.data("uid");this.upload.options.async.chunkSize&&(delete this.paused[i],this.resume[i]=!0,this.retries[t.data("uid")]=1,this._increaseChunkIndex(i),this.performUpload(t))},onRetry:function(e){var t=j(e),i=this.upload.options.async;i.chunkSize&&(this.retries[t.data("uid")]=i.maxAutoRetries+1,delete this.paused[t.data("uid")]),this.performUpload(t)},onRemove:function(e,t,i){var n=this.upload,s=j(e),a=this.upload.options.async;a.chunkSize&&(this.retries[s.data("uid")]=a.maxAutoRetries+1),s.hasClass("k-file-success")?M(s,n,t,i):this.removeFileEntry(s)},createXHR:function(){return new XMLHttpRequest},postFormData:function(e,t,i,n){var s=this;i.data("request",n),n.addEventListener("load",function(e){s.onRequestSuccess.call(s,e,i)},!1),n.addEventListener(c,function(e){s.onRequestError.call(s,e,i)},!1),n.upload.addEventListener("progress",function(e){s.onRequestProgress.call(s,e,i)},!1),n.open("POST",e,!0),n.withCredentials=this.upload.options.async.withCredentials;var a=this.upload.options.async.accept;a&&n.setRequestHeader("Accept",a),n.send(t)},createFormData:function(){return new FormData},populateFormData:function(e,t){var i,n,s,a=t.length,r=this.upload;if(r.options.async.chunkSize){s=t[0].uid,i=this._getCurrentChunk(t[0].rawFile,s),e.append(r.options.async.saveField||r.name,i);var o=JSON.stringify(this.metaData[s]);e.append("metadata",o)}else for(n=0;n<a;n++)e.append(r.options.async.saveField||r.name,t[n].rawFile);return e},onRequestSuccess:function(t,i){var n=t.target,s=this;function a(){s.upload._onUploadError({target:e(i,s.upload.wrapper)},n)}n.status>=200&&n.status<=299?B(n.responseText,function(t){var a=s.upload.options.async.batch,r=s.upload.options.async.chunkSize,o=s.upload.options.async.concurrent,l=t.fileUid;s.paused[l]||s.cancelled[l]||(delete s.retries[l],!r||a||t.uploaded?!r||a||o||!i.next().length||i.next().hasClass("k-toupload")?(s.upload._onFileProgress({target:e(i,s.upload.wrapper)},100),s.upload._onUploadSuccess({target:e(i,s.upload.wrapper)},t,n),s.cleanupFileEntry(i)):(s.upload._onFileProgress({target:e(i,s.upload.wrapper)},100),s._resetChunkIndex(l),s.upload._onUploadSuccess({target:e(i,s.upload.wrapper)},t,n),s.performUpload(i.next())):(s._increaseChunkIndex(l),s.performUpload(i)))},a):a()},onRequestError:function(t,i){var n=t.target;this.upload._onUploadError({target:e(i,this.upload.wrapper)},n)},cleanupFileEntry:function(t){var i=t.data("relatedInput"),n=!0;i&&(e.each(i.data("relatedFileEntries")||[],function(){this.parent().length>0&&this[0]!=t[0]&&(n=n&&this.hasClass("k-file-success"))}),n&&i.remove())},removeFileEntry:function(e){var t=this.upload.options.async.chunkSize,i=this.upload.options.async.concurrent,n=this.upload.wrapper.find(".k-upload-selected").length>0;this.cleanupFileEntry(e),!t||i||n||e.next().length&&this.performUpload(e.next()),this.upload._removeFileEntry(e)},onRequestProgress:function(t,i){var n,s=Math.round(100*t.loaded/t.total),a=i.data("uid");this.upload.options.async.chunkSize&&(s=(n=this.metaData[a])&&n.totalChunks?Math.round(n.chunkIndex/n.totalChunks*100):100),this.upload._onFileProgress({target:e(i,this.upload.wrapper)},s)},stopUploadRequest:function(e){e.data("request")&&e.data("request").abort()},prepareChunk:function(e){var t=e.data("files")[0],i=t.rawFile,n=t.uid,s=this.upload.options.async.chunkSize;this.position[n]=0,this.metaData[n]={chunkIndex:0,contentType:i.type,fileName:i.name,relativePath:t.name,totalFileSize:i.size,totalChunks:Math.ceil(i.size/s),uploadUid:n}},_decreaseChunkIndex:function(e){this.metaData[e].chunkIndex--},_increaseChunkIndex:function(e){this.metaData[e].chunkIndex++},_resetChunkIndex:function(e){this.metaData[e].chunkIndex=0},_decreasePosition:function(e){this.position[e]-=this.upload.options.async.chunkSize},_getCurrentChunk:function(e,t){var i,n=this.position[t],s=this.upload.options.async,a=s.chunkSize||s.bufferChunkSize;return this.position[t]||(this.position[t]=0),this.position[t]+=a,(i=this._getChunker(e))?e[i](n,this.position[t]):e},_getChunker:function(e){return e.slice?"slice":e.mozSlice?"mozSlice":e.webkitSlice?"webkitSlice":null}},i.ui.plugin(S)}(window.kendo.jQuery),iS=window.kendo.jQuery,iF=(iD=window.kendo).ui.Widget,iE=iS.extend,iA=iS.isPlainObject,iz=".kendoBreadcrumb",iP="aria-hidden",iH="click",iN="blur",iR="keydown",iO="change",iM={widget:"k-widget k-breadcrumb",overlay:"k-breadcrumb-container",textbox:"k-input-inner",textboxWrapper:"k-textbox k-input k-input-md k-rounded-md k-input-solid",item:"k-breadcrumb-item",delimiter:"k-breadcrumb-delimiter-icon",rootItem:"k-breadcrumb-root-item",rootLink:"k-breadcrumb-root-link",overflowIcon:"k-breadcrumb-overflow-icon",focused:"k-focus",hidden:"k-hidden",inputWrapper:"k-breadcrumb-input-container"},iB=iF.extend({init:function(e,t){var i=this;t=t||{},iF.fn.init.call(i,e,t),i._wrapper(),t.editable&&(i._editable(),i._tabindex()),i.wrapper.on(iH+iz,"a:not(.k-disabled)",i._click.bind(i)),t.value||t.bindToLocation||!t.items?i._value():t.items&&i.items(t.items),i._resizeHandler=iD.onResize(function(){i.resize(!0)})},options:{editable:!1,navigational:!1,bindToLocation:!1,items:null,name:"Breadcrumb",gap:0,rootIcon:"home",delimiterIcon:"arrow-chevron-right",messages:{rootTitle:"Go to root"}},events:[iO,iH],destroy:function(){iF.fn.destroy.call(this),iD.unbindResize(this._resizeHandler),this.wrapper.add(this.wrapper.find("input")).add(this.wrapper.find("a")).off(iz)},items:function(e){if(void 0===e)return this.options.items;this.options.items=e,this._segments=e,this.refresh()},_update:function(e){e!==this.value()&&(this._generateSegments(e),this.refresh(),this.trigger(iO,{sender:this,value:e}))},_generateSegments:function(e){var t,i,n=this.options.items;if(i=this._split(e),n){this._segments=[];for(var s=0;s<i.length;s++)""!==(t=this._path(n.slice(0,s+1)))&&e.indexOf(t)>-1&&n[s]&&n[s].text===i[s]?this._segments.push(n[s]):this._segments.push(i[s])}else this.options.items=this._segments=i},_click:function(e){var t=this.options,i=iS(e.target).closest("."+iM.item),n=i.prevAll().addBack(),s=this._getItems(n),a=this._path(s),r=this._segments[i.index()];t.navigational||e.preventDefault(),this.trigger(iH,{sender:this,originalEvent:e,isRoot:"rootitem"===r.type,item:r})||this._update(a)},_getItems:function(e){var t=this;return iS.map(e,function(e){return t._segments[iS(e).index()]||e.innerText})},_edit:function(){var e=this.input;this.oldValue=this.value(),this.inputWrapper.css("height",this.wrapper.height()),this.overlay.hide(),this.input.val(this.value()),this.input.attr(iP,!1),this.inputWrapper.show(),setTimeout(function(){e.select()})},_blur:function(e){var t=this.input,i=this.inputWrapper,n=this.wrapper,s=this.overlay,a=t.val().replace(/\/{2,}/g,"/");s.is(":visible")||(e&&(a=this.oldValue),t.attr(iP,!0),i.hide(),s.show(),t.val(""),this._update(a),n.removeClass(iM.focused))},_keydown:function(e){var t=this,i=e.keyCode,n=i===iD.keys.ENTER,s=i===iD.keys.ESC;(n||s)&&(t._blur(s),setTimeout(function(){t.overlay.find("a").first().trigger("focus")}))},isNavigational:function(e){var t=e.hasClass(iM.textbox)||e.closest("."+iM.item);return e[0]!==this.wrapper[0]&&t&&!e.hasClass("k-breadcrumb-last-item")},_wrapperKeydown:function(e){var t=iS(e.target),i=this.isNavigational(t);e.keyCode!==iD.keys.ENTER||i||this._edit()},_wrapperClick:function(e){var t=iS(e.target);this.isNavigational(t)||this._edit()},_wrapperFocus:function(e){iS(e.target).addClass(iM.focused)},_wrapperBlur:function(e){iS(e.target).removeClass(iM.focused)},_wrapper:function(){var e=this.element,t=e.is("input"),i=iS('<div class="'+iM.inputWrapper+'"><span class="'+iM.textboxWrapper+'"></span></div>');this.wrapper=t?e.wrap(iS("<nav />")).parent():e,t?(this.element.wrap(i).addClass(iM.textbox),this.inputWrapper=this.wrapper.find("."+iM.inputWrapper).hide()):this.inputWrapper=this.wrapper.append(i).find("."+iM.inputWrapper).hide(),this.wrapper.addClass(iM.widget),this.wrapper.attr("aria-label","Breadcrumb"),this.overlay=this.wrapper.append(iS("<ol />").addClass(iM.overlay)).find("."+iM.overlay)},_editable:function(){var e=this.element.is("input");this.input=e?this.element:iS("<input />"),this.inputWrapper.find("."+iM.textboxWrapper.split(" ")[0]).append(this.input),this.input.addClass(iM.textbox).attr(iP,!0),this.input.on(iN+iz,this._blur.bind(this,!1)).on(iR+iz,this._keydown.bind(this)),this.wrapper.on("focus"+iz,this._wrapperFocus.bind(this)).on(iN+iz,this._wrapperBlur.bind(this)).on(iR+iz,this._wrapperKeydown.bind(this)).on(iH+iz,this._wrapperClick.bind(this))},_value:function(){var e=this.options;e.value?this.value(e.value):e.bindToLocation?this.value(window.location.href.replace(/http(s?):\/\//,"").replace(/\/$/,"")):this.value("")},_split:function(e){return e.split("/").filter(function(e,t){return!(t>0&&""===e)})},isRtl:function(){return iD.support.isRtl(this.wrapper)},refresh:function(){var e,t,i,n,s=this.options,a=s.messages,r=this.options.delimiterIcon,o="",l="",d=""===this.value(),h=this._segments;for("arrow-chevron-right"==r&&this.isRtl()&&(r="arrow-chevron-left"),t=0,i=h.length;t<i;t++)e=h[t],n=t===h.length-1,e!==iI&&(o?l+=e.text||e||"":l="/","string"==typeof e?(e={type:o?"item":"rootitem",href:s.navigational?l:"#",text:e,showIcon:!o,showText:!!o,icon:o?"":s.rootIcon,itemClass:o?"":"k-breadcrumb-root-item",linkClass:o?"":iM.rootLink,delimiterIcon:r,renderDelimiter:!n&&!d,lastSegment:n,iconClass:""},this._segments.splice(t,1,e)):iA(e)&&(e=iE({},e,{type:e.type?e.type.toLowerCase():"item"}),"rootitem"===(e=iE({},e,{text:e.text||"",title:e.text||"",icon:e.icon||("rootitem"===e.type?s.rootIcon:""),iconClass:e.iconClass||"",lastSegment:n,renderDelimiter:!n&&h.length>1,href:s.navigational?e.href:"#",delimiterIcon:r,itemClass:e.itemClass||"",linkClass:e.linkClass||"",showIcon:e.showIcon===iI?"rootitem"===e.type&&"item"!==e.type:e.showIcon,showText:e.showText===iI?"item"===e.type&&"rootitem"!==e.type:e.showText})).type&&(e.itemClass+=" k-breadcrumb-root-item",e.linkClass+=" "+iM.rootLink)),"rootitem"===e.type&&""===e.text&&(e.title=a.rootTitle),l+=l.match(/\/$/)?"":"/",o+=iD.template(this.itemTemplate)(e));this.overlay.empty().append(iS(o)),this.resize(!0)},itemTemplate:'<li class="k-breadcrumb-item #:itemClass# #if(lastSegment){#k-breadcrumb-last-item#}#"><a href="#:href#" class="#:linkClass# #if(type !== "rootitem"){# k-breadcrumb-link#}##if(showText && showIcon){# k-breadcrumb-icontext-link#}##if(showIcon && !showText){# k-breadcrumb-icon-link#}##if(lastSegment && type !== "rootitem"){# k-disabled#}#"#if(lastSegment){# aria-current="page"#}##if(lastSegment && type !== "rootitem"){# aria-disabled="true" #}#title="#:text || title#">#if(showIcon) {#<span class="#if(icon){#k-icon k-i-#:icon##}# #:iconClass#"></span>#}##if(showText) {##:text##}#</a>#if(renderDelimiter) {#<span class="k-breadcrumb-delimiter-icon k-icon k-i-#:delimiterIcon#" aria-hidden="true"></span>#}##if(type === "rootitem" && renderDelimiter) {#<span class="k-breadcrumb-delimiter-icon k-hidden k-icon k-i-#:delimiterIcon#" aria-hidden="true"></span>#}#</li>',_displayOverflowIcons:function(e){var t=this.wrapper.find("."+iM.rootItem);e?t.find("."+iM.delimiter).addClass(iM.overflowIcon).removeClass(iM.hidden):t.find("."+iM.overflowIcon).removeClass(iM.overflowIcon).last().addClass(iM.hidden)},_shrinkItems:function(){var e,t=this.wrapper,i=this.overlay,n=this.overlay.find("."+iM.item+":visible:not(.k-breadcrumb-root-item)"),s=t.width()-this.options.gap;if(1!=n.length){for(var a=0;a<n.length;a+=1)if(e=iS(n[a]),iD._outerWidth(i)>=s){if(a==n.length-1)break;e.hide(),this._displayOverflowIcons(!0)}}},_showItem:function(e,t,i){return!!(e.length&&i>t+iD._outerWidth(e,!0))&&(e.show(),!0)},_stretchItems:function(){var e,t,i=this.wrapper,n=this.overlay,s=this.overlay.find("."+iM.item+":hidden:not(.k-breadcrumb-root-item)"),a=i.width()-this.options.gap;s.length||this._displayOverflowIcons(!1);for(var r=s.length-1;r>=0&&(e=iS(s[r]),!((t=iD._outerWidth(n))>a)&&this._showItem(e,t,a));r--);},_resize:function(){this._shrinkItems(),this._stretchItems()},getSize:function(){return iD.dimensions(this.wrapper)},value:function(e){return e!==iI?(this._generateSegments(e),void this.refresh()):this._path(this._segments)},_path:function(e){return iS.map(e,function(e){var t=iA(e)?e.text:e;return"/"===t?"":t}).join("/")}}),iD.ui.plugin(iB),function(e,t){var i=window.kendo,n=i.ui.Widget,s=e.isPlainObject,a=e.extend,r=i.support.placeholder,o=i.isFunction,l=/(^\/|\/$)/g,d="change",h="apply",u="error",c="click",p=".kendoFileBrowser",f=".kendoSearchBox",m="name",g="type",v={field:g,dir:"asc"},_=i.template('<div class="k-listview-item k-listview-item-empty"><span class="k-file-preview"><span class="k-file-icon k-icon k-i-none"></span></span><span class="k-file-name">${text}</span></div>');function b(e,t){return void 0!==e&&e.match(/\/$/)||(e=(e||"")+"/"),e+t}function k(e){if(!e)return"";var t=" bytes";return e>=1073741824?(t=" GB",e/=1073741824):e>=1048576?(t=" MB",e/=1048576):e>=1024&&(t=" KB",e/=1024),Math.round(100*e)/100+t}a(!0,i.data,{schemas:{filebrowser:{data:function(e){return e.items||e||[]},model:{id:"name",fields:{name:"name",size:"size",type:"type"}}}}}),a(!0,i.data,{transports:{filebrowser:i.data.RemoteTransport.extend({init:function(t){i.data.RemoteTransport.fn.init.call(this,e.extend(!0,{},this.options,t))},_call:function(t,n){n.data=e.extend({},n.data,{path:this.options.path()}),o(this.options[t])?this.options[t].call(this,n):i.data.RemoteTransport.fn[t].call(this,n)},read:function(e){this._call("read",e)},create:function(e){this._call("create",e)},destroy:function(e){this._call("destroy",e)},update:function(){},options:{read:{type:"POST"},update:{type:"POST"},create:{type:"POST"},destroy:{type:"POST"}}})}});var w=n.extend({init:function(e,t){t=t||{},n.fn.init.call(this,e,t),this.element.addClass("k-filebrowser"),this.element.on(c+p,".k-filebrowser-toolbar button:not(.k-disabled):has(.k-i-close)",this._deleteClick.bind(this)).on(c+p,".k-filebrowser-toolbar button:not(.k-disabled):has(.k-i-folder-add)",this._addClick.bind(this)).on("keydown"+p,".k-listview-item.k-selected input",this._directoryKeyDown.bind(this)).on("blur"+p,".k-listview-item.k-selected input",this._directoryBlur.bind(this)),this._dataSource(),this.refresh(),this.path(this.options.path)},options:{name:"FileBrowser",messages:{uploadFile:"Upload",orderBy:"Arrange by",orderByName:"Name",orderBySize:"Size",directoryNotFound:"A directory with this name was not found.",emptyFolder:"Empty Folder",deleteFile:'Are you sure you want to delete "{0}"?',invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',dropFilesHere:"drop file here to upload",search:"Search"},transport:{},path:"/",fileTypes:"*.*"},events:[u,d,h],destroy:function(){n.fn.destroy.call(this),this.dataSource.unbind(u,this._errorHandler),this.element.add(this.list).add(this.toolbar).off(p),i.destroy(this.element)},value:function(){var e,t=this._selectedItem(),n=this.options.transport.fileUrl;if(t&&"f"===t.get(g))return e=b(this.path(),t.get(m)).replace(l,""),n&&(e=o(n)?n(e):i.format(n,encodeURIComponent(e))),e},_selectedItem:function(){var e=this.listView.select();if(e.length)return this.dataSource.getByUid(e.attr(i.attr("uid")))},_toolbar:function(){var t=this,n=i.template('<div class="k-widget k-filebrowser-toolbar k-toolbar k-floatwrap"># if (showCreate) { #<button type="button" class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button"><span class="k-i-button-icon k-icon k-i-folder-add"></span></button># } ## if (showUpload) { # <div class="k-widget k-upload"><div class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-upload-button"><span class="k-button-icon k-icon k-i-plus"></span><span class="k-button-text">#=messages.uploadFile#</span><input type="file" name="file" /></div></div># } ## if (showDelete) { #<button type="button" class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-disabled"><span class="k-button-icon k-icon k-i-close"></span></button># } #<div class="k-tiles-arrange"><label>#=messages.orderBy#: <select></select></label></div><span class="k-toolbar-spacer"></span><input data-role="searchbox" /></div>'),s=t.options.messages,a=[{text:s.orderByName,value:"name"},{text:s.orderBySize,value:"size"}];t.toolbar=e(n({messages:s,showUpload:t.options.transport.uploadUrl,showCreate:t.options.transport.create,showDelete:t.options.transport.destroy})).appendTo(t.element).find(".k-upload input").kendoUpload({multiple:!1,localization:{dropFilesHere:s.dropFilesHere},async:{saveUrl:t.options.transport.uploadUrl,autoUpload:!0},upload:t._fileUpload.bind(t),error:function(e){t._error({xhr:e.XMLHttpRequest,status:"error"})}}).end(),t.upload=t.toolbar.find(".k-upload input").data("kendoUpload"),t.arrangeBy=t.toolbar.find(".k-tiles-arrange select").kendoDropDownList({dataSource:a,dataTextField:"text",dataValueField:"value",change:function(){t.orderBy(this.value())}}).data("kendoDropDownList"),t.searchBox=t.toolbar.find("input[data-role='searchbox']").kendoSearchBox({label:t.options.messages.search,change:function(){t.search(this.value())}}).data("kendoSearchBox"),t._attachDropzoneEvents()},_attachDropzoneEvents:function(){var t,i,n,s,a;this.options.transport.uploadUrl&&(t=e(document.documentElement),i=this._dropEnter.bind(this),n=this._dropLeave.bind(this),t.on("dragenter"+p,function(){i(),a=new Date,s||(s=setInterval(function(){new Date-a>100&&(n(),clearInterval(s),s=null)},100))}).on("dragover"+p,function(){a=new Date}),this._scrollHandler=this._positionDropzone.bind(this))},_dropEnter:function(){this._positionDropzone(),e(document).on("scroll"+p,this._scrollHandler)},_dropLeave:function(){this._removeDropzone(),e(document).off("scroll"+p,this._scrollHandler)},_positionDropzone:function(){var e=this.element,t=e.offset();this.toolbar.find(".k-dropzone").addClass("k-filebrowser-dropzone").offset(t).css({width:e[0].clientWidth,height:e[0].clientHeight,lineHeight:e[0].clientHeight+"px"})},_removeDropzone:function(){this.toolbar.find(".k-dropzone").removeClass("k-filebrowser-dropzone").css({width:"",height:"",lineHeight:"",top:"",left:""})},_deleteClick:function(){var e=this.listView.select(),t=i.format(this.options.messages.deleteFile,e.find(".k-file-name").text());e.length&&this._showMessage(t,"confirm")&&this.listView.remove(e)},_addClick:function(){this.createDirectory()},_getFieldName:function(e){var t;return s(t=this.dataSource.reader.model.fields[e])?t.from||t.field||e:t},_fileUpload:function(e){var t,n=this,s=n.options,a=s.fileTypes,r=RegExp(("("+a.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),o=e.files[0].name,l=e.files[0].size,d="size";r.test(o)?(e.data={path:n.path()},(t=n._createFile(o,l))?n.upload.one("success",function(e){var s=n._insertFileToList(t);s._override&&(s.set(m,e.response[n._getFieldName(m)]),s.set(d,e.response[n._getFieldName(d)]),n.listView.dataSource.pushUpdate(s)),n._tiles=n.listView.items().filter("["+i.attr("type")+"=f]")}):e.preventDefault()):(e.preventDefault(),n._showMessage(i.format(s.messages.invalidFileType,o,a)))},_findFile:function(e){var t,i,n,s=this.dataSource.data();for(e=e.toLowerCase(),t=0,n=s.length;t<n;t++)if("f"===s[t].get("type")&&s[t].get("name").toLowerCase()===e){i=s[t];break}return i},_createFile:function(e,t){var n={},s=this._findFile(e);return s?this._showMessage(i.format(this.options.messages.overwriteFile,e),"confirm")?(s._override=!0,s):null:(n.type="f",n.name=e,n.size=t,n)},_insertFileToList:function(e){var t;if(e._override)return e;for(var i=this.dataSource,n=i.view(),s=0,a=n.length;s<a;s++)if("f"===n[s].get(g)){t=s;break}return i.insert(++t,e)},createDirectory:function(){var e,t,n=this,s=0,a=n.dataSource.data(),r=n._nameDirectory(),o=new n.dataSource.reader.model;for(e=0,t=a.length;e<t;e++)"d"===a[e].get(g)&&(s=e);o.set(g,"d"),o.set(m,r),n.listView.one("dataBound",function(){var e=n.listView.items().filter("["+i.attr("uid")+"="+o.uid+"]");e.length&&this.edit(e),this.element.scrollTop(e.attr("offsetTop")-this.element[0].offsetHeight),setTimeout(function(){n.listView.element.find(".k-edit-item input").select()})}).one("save",function(e){var t=e.model.get(m);t?e.model.set(m,n._nameExists(t,o.uid)?n._nameDirectory():t):e.model.set(m,r)}),n.dataSource.insert(++s,o)},_directoryKeyDown:function(e){13==e.keyCode&&e.currentTarget.blur()},_directoryBlur:function(){this.listView.save()},_nameExists:function(e,t){var i,n,s=this.dataSource.data();for(i=0,n=s.length;i<n;i++)if("d"===s[i].get("type")&&s[i].get("name").toLowerCase()===e.toLowerCase()&&s[i].uid!==t)return!0;return!1},_nameDirectory:function(){var t,i,n,s="New folder",a=this.dataSource.data(),r=[];for(i=0,n=a.length;i<n;i++)"d"===a[i].get("type")&&a[i].get(m).toLowerCase().indexOf(s.toLowerCase())>-1&&r.push(a[i].get(m));if(e.inArray(s,r)>-1){i=2;do t=s+" ("+i+")",i++;while(e.inArray(t,r)>-1);s=t}return s},orderBy:function(e){this.dataSource.sort([{field:g,dir:"asc"},{field:e,dir:"asc"}])},search:function(e){this.dataSource.filter({field:m,operator:"contains",value:e})},_content:function(){var t=this;t.list=e('<div class="k-filemanager-listview" />').appendTo(t.element).on("dblclick"+p,".k-listview-item",t._dblClick.bind(t)),t.listView=new i.ui.ListView(t.list,{layout:"flex",flex:{direction:"row",wrap:"wrap"},dataSource:t.dataSource,template:t._itemTmpl(),editTemplate:t._editTmpl(),selectable:!0,autoBind:!1,dataBinding:function(e){t.toolbar.find(".k-i-close").parent().addClass("k-disabled"),"remove"!==e.action&&"sync"!==e.action||(e.preventDefault(),i.ui.progress(t.listView.content,!1))},dataBound:function(){t.dataSource.view().length?t._tiles=this.items().filter("["+i.attr("type")+"=f]"):this.content.append(_({text:t.options.messages.emptyFolder}))},change:t._listViewChange.bind(t)})},_dblClick:function(t){var n=e(t.currentTarget);if(n.hasClass("k-edit-item")&&this._directoryBlur(),n.filter("["+i.attr("type")+"=d]").length){var s=this.dataSource.getByUid(n.attr(i.attr("uid")));s&&(this.path(b(this.path(),s.get(m))),this.breadcrumbs.value("/"+this.path()))}else n.filter("["+i.attr("type")+"=f]").length&&this.trigger(h)},_listViewChange:function(){var e=this._selectedItem();e&&(this.toolbar.find(".k-i-close").parent().removeClass("k-disabled"),this.trigger(d,{selected:e}))},_dataSource:function(){var e=this.options,t=e.transport,n=a({},v),r={type:t.type||"filebrowser",sort:[n,{field:m,dir:"asc"}]};s(t)&&(t.path=this.path.bind(this),r.transport=t),s(e.schema)?r.schema=e.schema:t.type&&s(i.data.schemas[t.type])&&i.data.schemas[t.type],this.dataSource&&this._errorHandler?this.dataSource.unbind(u,this._errorHandler):this._errorHandler=this._error.bind(this),this.dataSource=i.data.DataSource.create(r).bind(u,this._errorHandler)},_navigation:function(){var t=this,i=e('<div class="k-floatwrap"><nav></nav></div>').appendTo(this.element);t.breadcrumbs=i.find("nav").first().kendoBreadcrumb({editable:!0,gap:50,value:t.options.path||"/",change:function(){t.path(this.value())}}).data("kendoBreadcrumb")},_error:function(e){var t;if(!this.trigger(u,e)){t=e.xhr.status,"error"==e.status?"404"==t?this._showMessage(this.options.messages.directoryNotFound):"0"!=t&&this._showMessage("Error! The requested URL returned "+t+" - "+e.xhr.statusText):"timeout"==t&&this._showMessage("Error! Server timeout.");var i=this.dataSource;i.hasChanges()&&i.cancelChanges()}},_showMessage:function(e,t){return window[t||"alert"](e)},refresh:function(){this._navigation(),this._toolbar(),this._content()},_editTmpl:function(){var e='<div class="k-listview-item k-selected" '+i.attr("uid")+'="#=uid#" ';return e+=i.attr("type")+'="${type}">#if(type == "d") { #<div class="k-file-preview"><span class="k-file-icon k-icon k-i-folder"></span></div>#}else{#<div class="k-file-preview"><span class="k-file-icon k-icon k-i-loading"></span></div>#}##if(type == "d") { #<span class="k-file-name"><span class="k-textbox k-input k-input-md k-rounded-md k-input-solid"><input class="k-input-inner" '+i.attr("bind")+'="value:name"/></span></span>#}#</div>',i.template(e).bind({sizeFormatter:k})},_itemTmpl:function(){var e='<div class="k-listview-item" '+i.attr("uid")+'="#=uid#" ';return e+=i.attr("type")+'="${type}">#if(type == "d") { #<div class="k-file-preview"><span class="k-file-icon k-icon k-i-folder"></span></div>#}else{#<div class="k-file-preview"><span class="k-file-icon k-icon k-i-file"></span></div>#}#<span class="k-file-name">${name}</span>#if(type == "f") { # <span class="k-file-size">${this.sizeFormatter(size)}</span> #}#</div>',i.template(e).bind({sizeFormatter:k})},path:function(e){var t=this._path||"";return void 0!==e?(this._path=e.replace(l,"")+"/",void this.dataSource.read({path:this._path})):(t&&(t=t.replace(l,"")),"/"===t||""===t?"":t+"/")}}),y=n.extend({init:function(e,t){t=t||{},n.fn.init.call(this,e,t),r&&this.element.attr("placeholder",this.options.label),this._wrapper(),this.element.on("keydown"+f,this._keydown.bind(this)).on("change"+f,this._updateValue.bind(this)),this.wrapper.on(c+f,"a",this._click.bind(this)),r||this.element.on("focus"+f,this._focus.bind(this)).on("blur"+f,this._blur.bind(this))},options:{name:"SearchBox",label:"Search",value:""},events:[d],destroy:function(){this.wrapper.add(this.element).add(this.label).off(f),n.fn.destroy.call(this)},_keydown:function(e){13===e.keyCode&&this._updateValue()},_click:function(e){e.preventDefault(),this._updateValue()},_updateValue:function(){var e=this.element.val();e!==this.value()&&(this.value(e),this.trigger(d))},_blur:function(){this._updateValue(),this._toggleLabel()},_toggleLabel:function(){r||this.label.toggle(!this.element.val())},_focus:function(){this.label.hide()},_wrapper:function(){var t=this.element,i=t.parents(".k-search-wrap");t[0].style.width="",t.addClass("k-input-inner"),i.length||(i=t.wrap(e('<div class="k-widget k-search-wrap"><span class="k-textbox k-input k-input-md k-rounded-md k-input-solid"></span></div>')).parents(".k-search-wrap"),r||e('<label style="display:block">'+this.options.label+"</label>").insertBefore(t),e('<span class="k-input-suffix"><a href="#" class="k-icon k-i-zoom k-search"/></span>').appendTo(i.find(".k-textbox"))),this.wrapper=i,this.label=i.find(">label")},value:function(e){return void 0!==e?(this.options.value=e,this.element.val(e),void this._toggleLabel()):this.options.value}});i.ui.plugin(w),i.ui.plugin(y)}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.ui.FileBrowser,s=e.isPlainObject,a=e.extend,r=i.isFunction,o=/(^\/|\/$)/g,l="error",d=".kendoImageBrowser",h="name",u="type",c={field:u,dir:"asc"},p=i.template('<div class="k-listview-item k-listview-item-empty"><span class="k-file-preview"><span class="k-file-icon k-icon k-i-none"></span></span><span class="k-file-name">${text}</span></div>');function f(e){if(!e)return"";var t=" bytes";return e>=1073741824?(t=" GB",e/=1073741824):e>=1048576?(t=" MB",e/=1048576):e>=1024&&(t=" KB",e/=1024),Math.round(100*e)/100+t}a(!0,i.data,{schemas:{imagebrowser:{data:function(e){return e.items||e||[]},model:{id:"name",fields:{name:"name",size:"size",type:"type"}}}}}),a(!0,i.data,{transports:{imagebrowser:i.data.RemoteTransport.extend({init:function(t){i.data.RemoteTransport.fn.init.call(this,e.extend(!0,{},this.options,t))},_call:function(t,n){n.data=e.extend({},n.data,{path:this.options.path()}),r(this.options[t])?this.options[t].call(this,n):i.data.RemoteTransport.fn[t].call(this,n)},read:function(e){this._call("read",e)},create:function(e){this._call("create",e)},destroy:function(e){this._call("destroy",e)},update:function(){},options:{read:{type:"POST"},update:{type:"POST"},create:{type:"POST"},destroy:{type:"POST"}}})}});var m=n.extend({init:function(e,t){t=t||{},n.fn.init.call(this,e,t),this.element.addClass("k-imagebrowser")},options:{name:"ImageBrowser",fileTypes:"*.png,*.gif,*.jpg,*.jpeg"},value:function(){var e,t,n,s=this._selectedItem(),a=this.options.transport.imageUrl;if(s&&"f"===s.get(u))return n=(e=this.path(),t=s.get(h),void 0!==e&&e.match(/\/$/)||(e=(e||"")+"/"),e+t).replace(o,""),a&&(n=r(a)?a(n):i.format(a,encodeURIComponent(n))),n},_fileUpload:function(e){var t,n=this,s=n.options,a=s.fileTypes,r=RegExp(("("+a.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),o=e.files[0].name,l=e.files[0].size,d="size";r.test(o)?(e.data={path:n.path()},(t=n._createFile(o,l))?(t._uploading=!0,n.upload.one("error",function(){t=void 0}),n.upload.one("success",function(e){if(t){delete t._uploading;var s=n._insertFileToList(t);s.set(h,e.response[n._getFieldName(h)]),s.set(d,e.response[n._getFieldName(d)]),n._tiles=n.listView.items().filter("["+i.attr("type")+"=f]"),n._scroll()}})):e.preventDefault()):(e.preventDefault(),n._showMessage(i.format(s.messages.invalidFileType,o,a)))},_content:function(){var t=this;t.list=e('<div class="k-filemanager-listview" />').appendTo(t.element).on("dblclick"+d,".k-listview-item",t._dblClick.bind(t)),t.listView=new i.ui.ListView(t.list,{layout:"flex",flex:{direction:"row",wrap:"wrap"},dataSource:t.dataSource,template:t._itemTmpl(),editTemplate:t._editTmpl(),selectable:!0,autoBind:!1,dataBinding:function(e){t.toolbar.find(".k-i-close").parent().addClass("k-disabled"),"remove"!==e.action&&"sync"!==e.action||(e.preventDefault(),i.ui.progress(t.listView.content,!1))},dataBound:function(){t.dataSource.view().length?(t._tiles=this.items().filter("["+i.attr("type")+"=f]"),t._scroll()):this.content.append(p({text:t.options.messages.emptyFolder}))},change:t._listViewChange.bind(t)}),t.listView.content.on("scroll"+d,t._scroll.bind(t))},_dataSource:function(){var e=this.options,t=e.transport,n=a({},c),r={type:t.type||"imagebrowser",sort:[n,{field:h,dir:"asc"}]};s(t)&&(t.path=this.path.bind(this),r.transport=t),s(e.schema)?r.schema=e.schema:t.type&&s(i.data.schemas[t.type])&&i.data.schemas[t.type],this.dataSource&&this._errorHandler?this.dataSource.unbind(l,this._errorHandler):this._errorHandler=this._error.bind(this),this.dataSource=i.data.DataSource.create(r).bind(l,this._errorHandler)},_loadImage:function(t){var n=e(t),s=this.dataSource.getByUid(n.attr(i.attr("uid"))),a=s.get(h),o=this.options.transport.thumbnailUrl,l=e("<img />",{alt:a}),u="?";s._uploading||(l.hide().on("load"+d,function(){e(this).prev().remove().end().addClass("k-image k-file-image").fadeIn()}),n.find(".k-i-loading").after(l),r(o)?o=o(this.path(),encodeURIComponent(a)):(o.indexOf("?")>=0&&(u="&"),o=o+u+"path="+encodeURIComponent(this.path()+a),s._override&&(o+="&_="+(new Date).getTime(),delete s._override)),l.attr("src",o),t.loaded=!0)},_scroll:function(){var t=this;t.options.transport&&t.options.transport.thumbnailUrl&&(clearTimeout(t._timeout),t._timeout=setTimeout(function(){var n=i._outerHeight(t.listView.content),s=t.listView.content.scrollTop(),a=s+n;t._tiles.each(function(){var i=this.offsetTop-e(this).height(),n=i+this.offsetHeight;if((i>=s&&i<a||n>=s&&n<a)&&t._loadImage(this),i>a)return!1}),t._tiles=t._tiles.filter(function(){return!this.loaded})},250))},_itemTmpl:function(){var e='<div class="k-listview-item" '+i.attr("uid")+'="#=uid#" ';return e+=i.attr("type")+'="${type}">#if(type == "d") { #<div class="k-file-preview"><span class="k-file-icon k-icon k-i-folder"></span></div>#}else{#',this.options.transport&&this.options.transport.thumbnailUrl?e+='<div class="k-file-preview"><span class="k-file-icon k-icon k-i-loading"></span></div>':e+='<div class="k-file-preview"><span class="k-file-icon k-icon k-i-file"></span></div>',e+='#}#<span class="k-file-name">${name}</span>#if(type == "f") { # <span class="k-file-size">${this.sizeFormatter(size)}</span> #}#</div>',i.template(e).bind({sizeFormatter:f})}});i.ui.plugin(m)}(window.kendo.jQuery),function(e){var t=e.Observable.extend({init:function(t){e.Observable.fn.init.call(this,t),this.clear()},events:["undo","redo"],push:function(e){this.stack=this.stack.slice(0,this.currentCommandIndex+1),this.currentCommandIndex=this.stack.push(e)-1},undo:function(){if(this.canUndo()){var e=this.stack[this.currentCommandIndex--];e.undo(),this.trigger("undo",{command:e})}},redo:function(){if(this.canRedo()){var e=this.stack[++this.currentCommandIndex];e.redo(),this.trigger("redo",{command:e})}},clear:function(){this.stack=[],this.currentCommandIndex=-1},canUndo:function(){return this.currentCommandIndex>=0},canRedo:function(){return this.currentCommandIndex!=this.stack.length-1}});e.deepExtend(e,{util:{UndoRedoStack:t}})}(kendo),iL=window.kendo.jQuery,iW=(iU=window.kendo).Class,ij=iU.ui.Widget,iG=iU.support.mobileOS,iq=iU.support.browser,iK=iL.extend,i$=iU.deepExtend,iY=iU.keys,iQ="select",iX="select.k-select-overlay",iJ=iW.extend({init:function(e){this.options=e},getHtml:function(){var e=this.options;return iU.template(e.template,{useWithBlock:!1})(e)}}),iZ={editorWrapperTemplate:'<table cellspacing="0" cellpadding="0" class="k-widget k-editor" role="presentation"><tbody><tr role="presentation"><td class="k-editor-toolbar-wrap" role="presentation"><ul class="k-toolbar k-editor-toolbar" role="toolbar"></ul></td></tr><tr><td class="k-editable-area k-editor-content"></td></tr></tbody></table>',buttonTemplate:'# var iconCssClass = "k-icon k-i-" + kendo.toHyphens(data.cssClass.replace("k-", ""));## var dataPopup = data.popup ? "data-popup" : "";#<button type="button" tabindex="0" role="button" class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-tool" #= dataPopup # title="#= data.title #" aria-label="#= data.title #"><span class="#= iconCssClass #"></span><span class="k-tool-text k-button-text">#= data.title #</span></button>',iconTextButtonTemplate:'# var iconCssClass = "k-icon k-i-" + kendo.toHyphens(data.cssClass.replace("k-", ""));## var dataPopup = data.popup ? "data-popup" : "";#<button type="button" tabindex="0" role="button" class="k-i-import k-button k-button-md k-rounded-md k-button-solid k-button-solid-base" #= dataPopup # title="#= data.title #" aria-label="#= data.title #"><span class="k-button-icon #= iconCssClass #"></span><span class="k-button-text">#= data.title #</span></button>',tableWizardButtonTemplate:'# var iconCssClass = "k-icon k-i-" + kendo.toHyphens(data.cssClass.replace("k-", ""));## var dataPopup = data.popup ? "data-popup" : "";#<button type="button" tabindex="0" role="button" class="k-tool k-button k-button-md k-rounded-md k-button-solid k-button-solid-base" #= dataPopup # title="#= data.title #" aria-label="#= data.title #"><span class="#= iconCssClass #"></span><span class="k-tool-text">#= data.title #</span></button>',colorPickerTemplate:'<input class="k-colorpicker k-icon k-i-#= data.cssClass.replace("k-", "") #" />',comboBoxTemplate:'<select title="#= data.title #" aria-label="#= data.title #" class="#= data.cssClass #"></select>',dropDownListTemplate:'<span class="k-editor-dropdown"><select title="#= data.title #" aria-label="#= data.title #" class="#= data.cssClass #"></select></span>',separatorTemplate:'<span class="k-separator"></span>',overflowAnchorTemplate:'<button type="button" tabindex="0" role="button" class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-tool k-overflow-anchor" data-popup title="#= data.title #" aria-label="#= data.title #" aria-haspopup="true" aria-expanded="false"><span class="k-icon k-i-more-vertical k-button-icon"></span></button>',formatByName:function(e,t){for(var i=0;i<t.length;i++)if(iL.inArray(e,t[i].tags)>=0)return t[i]},getToolCssClass:function(e){return({superscript:"sup-script",subscript:"sub-script",justifyLeft:"align-left",justifyCenter:"align-center",justifyRight:"align-right",justifyFull:"align-justify",insertUnorderedList:"list-unordered",insertOrderedList:"list-ordered",insertUpperRomanList:"list-roman-upper",insertLowerRomanList:"list-roman-lower",import:"import",indent:"indent-increase",outdent:"indent-decrease",createLink:"link-horizontal",unlink:"unlink-horizontal",insertImage:"image",insertFile:"file-add",viewHtml:"html",foreColor:"foreground-color",backColor:"paint",createTable:"table-insert",addColumnLeft:"table-column-insert-left",addColumnRight:"table-column-insert-right",addRowAbove:"table-row-insert-above",addRowBelow:"table-row-insert-below",deleteRow:"table-row-delete",deleteColumn:"table-column-delete",mergeCellsHorizontally:"cells-merge-horizontally",mergeCellsVertically:"cells-merge-vertically",splitCellHorizontally:"cell-split-horizontally",splitCellVertically:"cell-split-vertically",tableWizard:"table-properties",tableWizardInsert:"table-wizard",tableAlignLeft:"table-position-left",tableAlignCenter:"table-position-center",tableAlignRight:"table-position-right",cleanFormatting:"clear-css",copyFormat:"copy-format",applyFormat:"apply-format"})[e]||e},registerTool:function(e,t){var i=t.options;i&&i.template&&(i.template.options.cssClass="k-"+iZ.getToolCssClass(e)),t.name||(t.options.name=e,t.name=e.toLowerCase()),i1.defaultTools[e]=t},registerFormat:function(e,t){i1.fn.options.formats[e]=t},cacheComments:function(e,t){for(var i in t)e=e.replace(t[i],"{"+i+"}");return e},retrieveComments:function(e,t){for(var i in t)e=e.replace("{"+i+"}",t[i]);return e}},i0=void 0!==document.documentElement.contentEditable,(i1=ij.extend({init:function(e,t){var i,n,s,a,r,o,l=this,d=iU.ui.editor,h=d.Dom;if(i0){if(ij.fn.init.call(l,e,t),l.options=i$({},l.options,t),l.options.tools=l.options.tools.slice(),o=(e=l.element)[0],a=h.name(o),this._registerHandler(e.closest("form"),"submit",l.update.bind(l,void 0)),(s=iK({},l.options)).editor=l,"textarea"==a?(l._wrapTextarea(),n=l.wrapper.find(".k-editor-toolbar"),o.id&&n.attr("aria-controls",o.id)):(l.element.attr("contenteditable",!0).addClass("k-widget k-editor k-editor-inline"),s.popup=!0,n=iL('<ul class="k-toolbar k-editor-toolbar" role="toolbar" />').insertBefore(e)),l.toolbar=new d.Toolbar(n[0],s),l.toolbar.bindTo(l),"textarea"==a&&setTimeout(function(){var e=l.wrapper[0].style.height,t=parseInt(e,10),i=l.wrapper.height();e.indexOf("px")>0&&!isNaN(t)&&i>t&&l.wrapper.height(t-(i-t))}),l._resizable(),l._initializeContentElement(l),l.keyboard=new d.Keyboard([new d.BackspaceHandler(l),new d.TypingHandler(l),new d.SystemHandler(l),new d.SelectAllHandler(l)]),l.clipboard=new d.Clipboard(this),l.undoRedoStack=new iU.util.UndoRedoStack,t&&t.value)i=t.value;else if(l.textarea){(i=o.value).replace(/\s/g,"").length||(i=i.replace(/\s/g,"")),l.options.encoded&&o.defaultValue&&o.defaultValue.trim().length&&(i=o.defaultValue);var u=d.Serializer.htmlToDom(i,iL("<div></div>")[0],l.options.deserialization);r=h.getAllComments(u),i=(i=iZ.cacheComments(i,r)).replace(/[\r\n\v\f\t ]+/gi," "),i=iZ.retrieveComments(i,r)}else i=o.innerHTML;l.value(i||"\uFEFF"),this._registerHandler(document,{mousedown:function(){l._endTyping()},mouseup:function(e){l._mouseup(e)}}),l._initializeImmutables(),"textarea"==a&&l._ariaLabel(l.wrapper.find("iframe")),l.toolbar.resize(),iU.notify(l)}},setOptions:function(e){ij.fn.setOptions.call(this,e),e.tools&&this.toolbar.bindTo(this),this._initializePlaceholder()},_togglePlaceholder:function(e){var t=iL(this.body),i=this.options.placeholder;this.textarea&&i&&(t.attr("aria-label",function(){return e?i:""}),t.toggleClass("k-placeholder",e))},_endTyping:function(){var e=this.keyboard;try{e.isTypingInProgress()&&(e.endTyping(!0),this.saveSelection())}catch(e){}},_selectionChange:function(){this._selectionStarted=!1,this.saveSelection(),this.trigger("select",{})},_resizable:function(){var e=this.options.resizable;if((iL.isPlainObject(e)?e.content===iV||!0===e.content:e)&&this.textarea){var t=iL("<div class='k-resize-handle'><span class='k-icon k-i-arrow-45-down-right'></span></div>").insertAfter(this.textarea);this.wrapper.addClass("k-resizable"),this.wrapper.kendoResizable(iK({},this.options.resizable,{draggableElement:t,start:function(e){var t=this.editor=iL(e.currentTarget).closest(".k-editor");this.initialSize=t.height(),t.find("td").last().append("<div class='k-overlay' />")},resize:function(e){var t=e.y.initialDelta,i=this.initialSize+t,n=this.options.min||0;i=Math.min(this.options.max||1/0,Math.max(n,i)),this.editor.height(i)},resizeend:function(){this.editor.find(".k-overlay").remove(),this.editor=null}})),iU.support.mobileOS.ios&&(this.wrapper.getKendoResizable().draggable.options.ignore=iX)}},_initializeElementResizing:function(){iU.ui.editor.ElementResizingFactory.current.create(this),this._showElementResizeHandlesProxy=this._showElementResizeHandles.bind(this),this.bind(iQ,this._showElementResizeHandlesProxy)},_destroyElementResizing:function(){var e=this.elementResizing;e&&(e.destroy(),this.elementResizing=null),this._showElementResizeHandlesProxy&&this.unbind(iQ,this._showElementResizeHandlesProxy)},_showElementResizeHandles:function(){var e=this.elementResizing;e&&e.element&&e.element.parentNode?e.showResizeHandles():!e||e.element&&e.element.parentNode||this._destroyElementResizing()},_initializeColumnResizing:function(){iU.ui.editor.ColumnResizing.create(this)},_destroyColumnResizing:function(){this.columnResizing&&(this.columnResizing.destroy(),this.columnResizing=null)},_initializeRowResizing:function(){iU.ui.editor.RowResizing.create(this)},_destroyRowResizing:function(){this.rowResizing&&(this.rowResizing.destroy(),this.rowResizing=null)},_wrapTextarea:function(){var e=this.element,t=e[0].style.width,i=e[0].style.height,n=iL(iZ.editorWrapperTemplate).insertBefore(e),s=n.find(".k-editable-area");n.css({width:t,height:i}),e.attr("autocomplete","off").appendTo(s).addClass("k-content k-raw-content").css("display","none"),this.textarea=e,this.wrapper=n},_createContentElement:function(e){var t,i,n,s,a=this,r=a.textarea,o=a.options.domain,l=o||document.domain,d="",h='javascript:""';return r.hide(),t=iL("<iframe />",{title:a.options.messages.editAreaTitle,frameBorder:"0"})[0],iL(t).css("display","").addClass("k-content k-iframe").attr("tabindex",r[0].tabIndex).insertBefore(r),(o||l!=location.hostname)&&(h="javascript:document.write('"+(d='<script>document.domain="'+l+'"</script>')+"')",t.src=h),t.src||(t.src=""),n=(i=t.contentWindow||t).document||t.contentDocument,iL(t).one("load",function(){a.toolbar.decorateFrom(n.body)}),s=document.getElementsByTagName("html")[0].getAttribute("lang")||"en",n.open(),n.write("<!DOCTYPE html><html lang='"+s+"'><head><meta charset='utf-8' /><title>Kendo UI Editor content</title><style>html{padding:0;margin:0;height:100%;min-height:100%;cursor:text;}body{padding:0;margin:0;}body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;"+(iU.support.isRtl(r)?"direction:rtl;":"")+(iG.ios?"word-break:keep-all;":"")+(iq.edge||iq.chrome?"height:100%;":"")+"}h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}ul,ol{padding-left:2.5em}span{-ms-high-contrast-adjust:none;}a{color:#00a}code{font-size:1.23em}telerik\\3Ascript{display: none;}.k-table{width:100%;border-spacing:0;margin: 0 0 1em;}.k-table td{min-width:1px;padding:.2em .3em;}.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}.k-table th{outline:0;border: 1px dotted #999;}.k-table p{margin:0;padding:0;}.k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}.k-column-resize-handle {width: 100%; height: 100%;}.k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}.k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}.k-row-resize-handle {display: table; width: 100%; height: 100%;}.k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}.k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}.k-element-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}.k-element-resize-handle {width: 100%; height: 100%;}.k-element-resize-handle.k-resize-east{cursor:e-resize;}.k-element-resize-handle.k-resize-north{cursor:n-resize;}.k-element-resize-handle.k-resize-northeast{cursor:ne-resize;}.k-element-resize-handle.k-resize-northwest{cursor:nw-resize;}.k-element-resize-handle.k-resize-south{cursor:s-resize;}.k-element-resize-handle.k-resize-southeast{cursor:se-resize;}.k-element-resize-handle.k-resize-southwest{cursor:sw-resize;}.k-element-resize-handle.k-resize-west{cursor:w-resize;}.k-table.k-element-resizing{opacity:0.6;}.k-placeholder{color:grey}k\\:script{display:none;}</style>"+d+iL.map(e,function(e){return"<link rel='stylesheet' href='"+e+"'>"}).join("")+"</head><body autocorrect='off' contenteditable='true'></body></html>"),n.close(),i},_blur:function(){var e=this.textarea,t=e?e.val():this._oldValue,i=this.options.encoded?this.encodedValue():this.value();this.update(),e&&e.trigger("blur"),i!=t&&(this.trigger("change"),e&&e.trigger("change"))},_spellCorrect:function(e){var t,i=!1;this._registerHandler(e.body,{contextmenu:function(){e.one("select",function(){t=null}),e._spellCorrectTimeout=setTimeout(function(){t=new iU.ui.editor.RestorePoint(e.getRange(),e.body),i=!1},10)},input:function(){t&&(!iU.support.browser.mozilla||i?iU.ui.editor._finishUpdate(e,t):i=!0)}})},_registerHandler:function(e,t,i){var n,s,a=".kendoEditor";if(e=iL(e),this._handlers||(this._handlers=[]),e.length){if(iL.isPlainObject(t))for(var r in t)t.hasOwnProperty(r)&&this._registerHandler(e,r,t[r]);else for(n=iU.applyEventMap(t).split(" "),s=0;s<n.length;s++)this._handlers.push({element:e,type:n[s]+a,handler:i}),e.on(n[s]+a,i)}},_deregisterHandlers:function(){for(var e=this._handlers,t=0;t<e.length;t++){var i=e[t];i.element.off(i.type,i.handler)}this._handlers=[]},_initializeContentElement:function(){var e,t,i,n=this;if(n.textarea){if(n.window=n._createContentElement(n.options.stylesheets),!(e=n.document=n.window.contentDocument||n.window.document).body){var s=e.createElement("body");s.setAttribute("contenteditable","true"),s.setAttribute("autocorrect","off"),e.getElementsByTagName("html")[0].appendChild(s);var a=setInterval(function(){iL(n.document).find("body").length>1&&(iL(n.document).find("body").last().remove(),window.clearInterval(a))},10)}n.body=e.body,t=n.window,i=e,this._registerHandler(e,"mouseup",this._mouseup.bind(this))}else n.window=window,e=n.document=document,n.body=n.element[0],t=n.body,i=n.body,n.toolbar.decorateFrom(n.body);this._registerHandler(t,"blur",this._blur.bind(this)),n._registerHandler(i,"down",n._mousedown.bind(n));try{e.execCommand("enableInlineTableEditing",null,!1)}catch(e){}iU.support.touch&&this._registerHandler(e,{keydown:function(){iU._activeElement()!=e.body&&n.window.focus()}}),this._initializePlaceholder(),this._spellCorrect(n),this._registerHandler(n.document,{"mouseover dragenter":function(e){var t=iL(n.body).height();iL(n.body.parentElement).height()>t&&"html"===e.target.nodeName.toLowerCase()&&(n._cachedHeight=""+n.body.style.height,n.body.style.height="100%")},"mouseout dragleave drop contextmenu":function(e){var t=function(){n._cachedHeight!==iV&&e.target===n.body&&(n.body.style.height=n._cachedHeight,delete n._cachedHeight)};"contextmenu"===e.type?setTimeout(function(){t()},10):t()}}),this._registerHandler(n.body,{keydown:function(e){if((e.keyCode===iY.BACKSPACE||e.keyCode===iY.DELETE)&&"true"!==n.body.getAttribute("contenteditable"))return!1;if(e.keyCode===iY.F10)return setTimeout(n.toolbar.focus.bind(n.toolbar),100),n.toolbar.preventPopupHide=!0,void e.preventDefault();if(e.keyCode==iY.LEFT||e.keyCode==iY.RIGHT){t=n.getRange();var t,i=e.keyCode==iY.LEFT,s=t[i?"startContainer":"endContainer"],a=t[i?"startOffset":"endOffset"],r=a+(i?-1:1),o=i?r:a;3==s.nodeType&&"\uFEFF"==s.nodeValue[o]&&(t.setStart(s,r),t.collapse(!0),n.selectRange(t))}var l=n.toolbar.tools,d=n.keyboard.toolFromShortcut(l,e),h=d?l[d].options:{};if(d&&!h.keyPressCommand)return e.preventDefault(),/^(undo|redo)$/.test(d)||n.keyboard.endTyping(!0),n.trigger("keydown",e),n.exec(d),n._runPostContentKeyCommands(e),!1;n.keyboard.clearTimeout(),n.keyboard.keydown(e)},keypress:function(e){setTimeout(function(){n._runPostContentKeyCommands(e),n._showElementResizeHandles()},0)},keyup:function(e){var t=[iY.BACKSPACE,iY.TAB,iY.PAGEUP,iY.PAGEDOWN,iY.END,iY.HOME,iY.LEFT,iY.UP,iY.RIGHT,iY.DOWN,iY.INSERT,iY.DELETE];(iL.inArray(e.keyCode,t)>-1||65==e.keyCode&&e.ctrlKey&&!e.altKey&&!e.shiftKey)&&(window.clearTimeout(this._refreshInterval),this._refreshInterval=window.setTimeout(function(){n._selectionChange()},200)),n.keyboard.keyup(e)},click:function(e){var t;"img"===iU.ui.editor.Dom.name(e.target)&&((t=n.createRange()).selectNode(e.target),n.selectRange(t))},"cut copy paste drop dragover":function(e){n.clipboard["on"+e.type](e)},focusin:function(){n.body.hasAttribute("contenteditable")&&(iL(this).addClass("k-active"),n.toolbar.show(),n._togglePlaceholder(!1))},focusout:function(){setTimeout(function(){var e=iU._activeElement(),t=n.body,i=n.toolbar;if(i.options.popup){var s=i.window.element.get(0);s&&!iL.contains(s,e)&&s!=e&&(i.preventPopupHide=!1)}e==t||iL.contains(t,e)||i.focused()||i.preventPopupHide||(iL(t).removeClass("k-active"),i.hide()),n._togglePlaceholder(!n.value().trim())},10)}}),n._initializeColumnResizing(),n._initializeRowResizing(),n._initializeElementResizing()},_initializePlaceholder:function(){var e,t,i=this.options.placeholder;this.textarea&&i&&(e="<style id='placeholder'>.k-placeholder:before { content: '"+i+"'; }</style>",(t=iL(this.document.head)).find("#placeholder").remove(),t.append(e),this._togglePlaceholder(!this.value().trim()))},_initializeImmutables:function(){var e=iU.ui.editor;this.options.immutables&&(this.immutables=new e.Immutables(this))},_mousedown:function(e){var t=this;if(t._selectionStarted=!0,iL(t.body).parents(".k-window").length&&e.stopPropagation(),!iq.gecko){var i=iL(e.target).closest("a[href]");(2==e.which||1==e.which&&e.ctrlKey)&&i&&i.is("a[href]")&&window.open(i.attr("href"),"_new"),e.target.tagName&&"html"===e.target.tagName.toLowerCase()&&setTimeout(function(){t.body.focus()},0)}},_mouseup:function(e){var t=this;iU.support.mobileOS.ios&&e&&iL(e.target).is(iX)||t._selectionStarted&&setTimeout(function(){t._selectionChange()},1)},_runPostContentKeyCommands:function(e){for(var t=this.getRange(),i=this.keyboard.toolsFromShortcut(this.toolbar.tools,e),n=0;n<i.length;n++){var s=i[n],a=s.options;a.keyPressCommand&&new a.command({range:t}).changesContent()&&(this.keyboard.endTyping(!0),this.exec(s.name))}},refresh:function(){if(this.textarea){this._destroyResizings();var e=this.value();this.textarea.val(e),this.wrapper.find("iframe").remove(),this._initializeContentElement(this),this.value(e)}},events:["select","change","execute","error","paste","keydown","keyup"],options:{name:"Editor",messages:{bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",superscript:"Superscript",subscript:"Subscript",justifyCenter:"Center text",justifyLeft:"Align text left",justifyRight:"Align text right",justifyFull:"Justify",insertUnorderedList:"Insert unordered list",insertOrderedList:"Insert ordered list",indent:"Indent",outdent:"Outdent",createLink:"Insert hyperlink",unlink:"Remove hyperlink",insertImage:"Insert image",insertFile:"Insert file",insertHtml:"Insert HTML",viewHtml:"View HTML",fontName:"Select font family",fontNameInherit:"(inherited font)",fontSize:"Select font size",fontSizeInherit:"(inherited size)",formatBlock:"Format",formatting:"Format",foreColor:"Color",backColor:"Background color",style:"Styles",emptyFolder:"Empty Folder",editAreaTitle:"Editable area. Press F10 for toolbar.",uploadFile:"Upload",overflowAnchor:"More tools",orderBy:"Arrange by:",orderBySize:"Size",orderByName:"Name",invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',deleteFile:'Are you sure you want to delete "{0}"?',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',directoryNotFound:"A directory with this name was not found.",imageWebAddress:"Web address",imageAltText:"Alternate text",imageWidth:"Width (px)",imageHeight:"Height (px)",fileWebAddress:"Web address",fileTitle:"Title",fileText:"Text",linkWebAddress:"Web address",linkText:"Text",linkToolTip:"ToolTip",linkOpenInNewWindow:"Open link in new window",dialogUpdate:"Update",dialogInsert:"Insert",dialogOk:"Ok",dialogCancel:"Cancel",cleanFormatting:"Clean formatting",createTable:"Create a table",createTableHint:"Create a {0} x {1} table",addColumnLeft:"Add column on the left",addColumnRight:"Add column on the right",addRowAbove:"Add row above",addRowBelow:"Add row below",deleteRow:"Delete row",deleteColumn:"Delete column",mergeCellsHorizontally:"Merge cells horizontally",mergeCellsVertically:"Merge cells vertically",splitCellHorizontally:"Split cells horizontally",splitCellVertically:"Split cells vertically",tableAlignLeft:"Table Align Left",tableAlignCenter:"Table Align Center",tableAlignRight:"Table Align Right",tableWizard:"Table Wizard",tableTab:"Table",cellTab:"Cell",accessibilityTab:"Accessibility",caption:"Caption",summary:"Summary",width:"Width",height:"Height",units:"Units",cellSpacing:"Cell Spacing",cellPadding:"Cell Padding",cellMargin:"Cell Margin",alignment:"Alignment",background:"Background",cssClass:"CSS Class",id:"ID",border:"Border",borderStyle:"Border Style",collapseBorders:"Collapse borders",wrapText:"Wrap text",associateCellsWithHeaders:"Associate headers",alignLeft:"Align Left",alignCenter:"Align Center",alignRight:"Align Right",alignLeftTop:"Align Left Top",alignCenterTop:"Align Center Top",alignRightTop:"Align Right Top",alignLeftMiddle:"Align Left Middle",alignCenterMiddle:"Align Center Middle",alignRightMiddle:"Align Right Middle",alignLeftBottom:"Align Left Bottom",alignCenterBottom:"Align Center Bottom",alignRightBottom:"Align Right Bottom",alignRemove:"Remove Alignment",columns:"Columns",rows:"Rows",selectAllCells:"Select All Cells",exportAs:"Export As",import:"Import",print:"Print",headerRows:"Header Rows",headerColumns:"Header Cols",tableSummaryPlaceholder:"Summary attribute is not HTML5 compatible.",associateNone:"None",associateScope:"Associate using 'scope' attribute",associateIds:"Associate using Ids",copyFormat:"Copy format",applyFormat:"Apply format",borderNone:"None",undo:"Undo",redo:"Redo"},placeholder:"",formats:{},encoded:!0,domain:null,resizable:!1,deserialization:{custom:null},serialization:{entities:!0,semantic:!0,scripts:!1,optimizeTags:!1,keepEOL:!1},pasteCleanup:{all:!1,css:!1,custom:null,keepNewLines:!1,msAllFormatting:!1,msConvertLists:!0,msTags:!0,none:!1,span:!1},stylesheets:[],dialogOptions:{modal:!0,resizable:!1,draggable:!0,animation:!1},imageBrowser:null,fileBrowser:null,fontName:[{text:"Arial",value:"Arial, Helvetica, sans-serif"},{text:"Courier New",value:'"Courier New", Courier, monospace'},{text:"Georgia",value:"Georgia, serif"},{text:"Impact",value:"Impact, Charcoal, sans-serif"},{text:"Lucida Console",value:'"Lucida Console", Monaco, monospace'},{text:"Tahoma",value:"Tahoma, Geneva, sans-serif"},{text:"Times New Roman",value:'"Times New Roman", Times, serif'},{text:"Trebuchet MS",value:'"Trebuchet MS", Helvetica, sans-serif'},{text:"Verdana",value:"Verdana, Geneva, sans-serif"}],fontSize:[{text:"1 (8pt)",value:"xx-small"},{text:"2 (10pt)",value:"x-small"},{text:"3 (12pt)",value:"small"},{text:"4 (14pt)",value:"medium"},{text:"5 (18pt)",value:"large"},{text:"6 (24pt)",value:"x-large"},{text:"7 (36pt)",value:"xx-large"}],formatBlock:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],tools:[].concat.call(["formatting"],["bold","italic","underline"],["undo","redo"],["justifyLeft","justifyCenter","justifyRight"],["copyFormat","applyFormat"],["insertUnorderedList","insertOrderedList"],["indent","outdent"],["createLink","unlink"],["insertImage"],["tableWizard","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","mergeCellsHorizontally","mergeCellsVertically","splitCellHorizontally","splitCellVertically","tableAlignLeft","tableAlignCenter","tableAlignRight"])},destroy:function(){ij.fn.destroy.call(this),this._endTyping(!0),this._deregisterHandlers(),clearTimeout(this._spellCorrectTimeout),this._focusOutside(),this.toolbar.destroy(),this._destroyUploadWidget(),this._destroyResizings(),iU.destroy(this.wrapper)},_destroyResizings:function(){this._destroyElementResizing(),iU.ui.editor.ElementResizingFactory.current.dispose(this),this._destroyRowResizing(),iU.ui.editor.RowResizing.dispose(this),this._destroyColumnResizing(),iU.ui.editor.ColumnResizing.dispose(this)},_focusOutside:function(){iU.support.browser.msie&&this.textarea&&iL("<input style='position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0' />").appendTo(document.body).trigger("focus").trigger("blur").remove()},_destroyUploadWidget:function(){this._uploadWidget&&(this._uploadWidget.destroy(),this._uploadWidget=null)},state:function(e){var t,i,n=i1.defaultTools[e],s=n&&(n.options.finder||n.finder),a=iU.ui.editor.RangeUtils;return!!s&&(t=this.getRange(),!(i=a.textNodes(t)).length&&t.collapsed&&(i=[t.startContainer]),s.getFormat?s.getFormat(i):s.isFormatted(i))},value:function(e){var t=this.body,i=iU.ui.editor,n=this.options,s=i.Serializer.domToXhtml(t,n.serialization);if(e===iV)return s;e!=s&&(i.Serializer.htmlToDom(e,t,n.deserialization),this.selectionRestorePoint=null,this.update(),this.toolbar.refreshTools())},saveSelection:function(e){var t=(e=e||this.getRange()).commonAncestorContainer,i=this.body;(t==i||iL.contains(i,t))&&(this.selectionRestorePoint=new iU.ui.editor.RestorePoint(e,i))},_focusBody:function(){var e,t=this.body,i=this.wrapper&&this.wrapper.find("iframe")[0],n=this.document.documentElement,s=iU._activeElement();!i&&t.scrollHeight>t.clientHeight?(e=t.scrollTop,t.focus(),t.scrollTop=e):s!=t&&s!=i&&(e=n.scrollTop,t.focus(),n.scrollTop=e)},restoreSelection:function(){this._focusBody(),this.selectionRestorePoint&&this.selectRange(this.selectionRestorePoint.toRange())},focus:function(){this.restoreSelection()},update:function(e){e=e||this.options.encoded?this.encodedValue():this.value(),this.textarea?(this.textarea.val(e),this._togglePlaceholder(!e.trim())):this._oldValue=e},encodedValue:function(){return iU.ui.editor.Dom.encode(this.value())},createRange:function(e){return iU.ui.editor.RangeUtils.createRange(e||this.document)},getSelection:function(){return iU.ui.editor.SelectionUtils.selectionFromDocument(this.document)},selectRange:function(e){this._focusBody();var t=this.getSelection();t.removeAllRanges(),t.addRange(e),this.saveSelection(e)},getRange:function(){var e=this.getSelection(),t=e&&e.rangeCount>0?e.getRangeAt(0):this.createRange(),i=this.document;return t.startContainer!=i||t.endContainer!=i||t.startOffset||t.endOffset||(t.setStart(this.body,0),t.collapse(!0)),t},_containsRange:function(e){var t=iU.ui.editor.Dom,i=this.body;return e&&t.isAncestorOrSelf(i,e.startContainer)&&t.isAncestorOrSelf(i,e.endContainer)},_deleteSavedRange:function(){"_range"in this&&delete this._range},selectedHtml:function(){return iU.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents())},paste:function(e,t){this.focus();var i=new iU.ui.editor.InsertHtmlCommand(iL.extend({range:this.getRange(),html:e},t));i.editor=this,i.exec()},exec:function(e,t){var i,n,s=null;if(!e)throw Error("kendoEditor.exec(): `name` parameter cannot be empty");if("true"!==this.body.getAttribute("contenteditable")&&"print"!==e&&"pdf"!==e&&"exportAs"!==e)return!1;if(e=e.toLowerCase(),this.keyboard.isTypingInProgress()||(this._focusBody(),this.selectRange(this._range||this.getRange())),!(n=this.toolbar.toolById(e))){for(var a in i1.defaultTools)if(a.toLowerCase()==e){n=i1.defaultTools[a];break}}if(n){if(i=this.getRange(),n.command&&(s=n.command(iK({range:i,body:this.body,immutables:!!this.immutables},t))),this.trigger("execute",{name:e,command:s}))return;if(/^(undo|redo)$/i.test(e))this.undoRedoStack[e]();else if(s&&(this.execCommand(s),s.async))return void(s.change=this._selectionChange.bind(this));this._selectionChange()}},execCommand:function(e){e.managesUndoRedo||this.undoRedoStack.push(e),e.editor=this,e.exec()}})).defaultTools={},iU.ui.plugin(i1),(i2=iW.extend({init:function(e){this.options=e},initialize:function(e,t){e.attr({unselectable:"on",title:t.title,"aria-label":t.title})},command:function(e){return new this.options.command(e)},update:iL.noop})).exec=function(e,t,i){e.exec(t,{value:i})},i3=i2.extend({command:iL.noop,update:function(e,t,i){switch(this.options.name){case"undo":e.attr("disabled",!i.canUndo());break;case"redo":e.attr("disabled",!i.canRedo())}}}),iZ.registerTool("separator",new i2({template:new iJ({template:iZ.separatorTemplate})})),iZ.registerTool("undo",new i3({key:"Z",ctrl:!0,template:new iJ({template:iZ.buttonTemplate,title:"Undo"})})),iZ.registerTool("redo",new i3({key:"Y",ctrl:!0,template:new iJ({template:iZ.buttonTemplate,title:"Redo"})})),i6=i9="\uFEFF",(iq.msie||iq.edge)&&(i6=i9="&nbsp;"),iK(iU.ui,{editor:{ToolTemplate:iJ,EditorUtils:iZ,Tool:i2,emptyElementContent:i9,emptyTableCellContent:i6}}),iU.PDFMixin&&(iU.PDFMixin.extend(i1.prototype),i1.prototype._drawPDF=function(){return iU.drawing.drawDOM(this.body,this.options.pdf)},i1.prototype.saveAsPDF=function(){var e=new iL.Deferred,t=e.promise();if(!this.trigger("pdfExport",{promise:t})){var i=this.options.pdf;return this._drawPDF(e).then(function(e){return iU.drawing.exportPDF(e,i)}).done(function(t){iU.saveAs({dataURI:t,fileName:i.fileName,proxyURL:i.proxyURL,proxyTarget:i.proxyTarget,forceProxy:i.forceProxy}),e.resolve()}).fail(function(t){e.reject(t)}),t}}),function(e){var t=window.kendo,i=e.map,n=e.extend,s=t.support.browser,a="style",r="float",o="cssFloat",l="styleFloat",d="class",h="k-marker";function u(e){var t,i,n={};for(t=0,i=e.length;t<i;t++)n[e[t]]=!0;return n}var c=u("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed".split(",")),p="p,div,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption".split(","),f=p.concat(["ul","ol","li"]),m=u(f),g=u("area,base,br,col,command,embed,hr,img,input,keygen,link,menuitem,meta,param,source,track,wbr".split(",")),v="span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby".split(","),_=u(v),b=u("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected".split(",")),k=["hgroup","ol","ul","dl","object","video","audio","table","colgroup","tbody","thead","tfoot","tr","select","optgroup"],w=function(e){1==e.nodeType&&e.normalize()};s.msie&&s.version>=8&&(w=function(e){if(1==e.nodeType&&e.firstChild){var t=e.firstChild,i=t;for(w(i);i=i.nextSibling;)w(i),3==i.nodeType&&3==t.nodeType&&(i.nodeValue=t.nodeValue+i.nodeValue,z.remove(t)),t=i}});var y,x=/^\s+$/,C=/^[\n\r\t]+$/,T=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i,S=/\ufeff/g,I=/^(\s+|\ufeff)$/,D="color,padding-left,padding-right,padding-top,padding-bottom,background-color,background-attachment,background-image,background-position,background-repeat,border-top-style,border-top-width,border-top-color,border-bottom-style,border-bottom-width,border-bottom-color,border-left-style,border-left-width,border-left-color,border-right-style,border-right-width,border-right-color,font-family,font-size,font-style,font-variant,font-weight,line-height".split(","),F=/[<>\&]/g,E=/[\u00A0-\u2666<>\&]/g,A={34:"quot",38:"amp",39:"apos",60:"lt",62:"gt",160:"nbsp",161:"iexcl",162:"cent",163:"pound",164:"curren",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",175:"macr",176:"deg",177:"plusmn",178:"sup2",179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",215:"times",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",247:"divide",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",402:"fnof",913:"Alpha",914:"Beta",915:"Gamma",916:"Delta",917:"Epsilon",918:"Zeta",919:"Eta",920:"Theta",921:"Iota",922:"Kappa",923:"Lambda",924:"Mu",925:"Nu",926:"Xi",927:"Omicron",928:"Pi",929:"Rho",931:"Sigma",932:"Tau",933:"Upsilon",934:"Phi",935:"Chi",936:"Psi",937:"Omega",945:"alpha",946:"beta",947:"gamma",948:"delta",949:"epsilon",950:"zeta",951:"eta",952:"theta",953:"iota",954:"kappa",955:"lambda",956:"mu",957:"nu",958:"xi",959:"omicron",960:"pi",961:"rho",962:"sigmaf",963:"sigma",964:"tau",965:"upsilon",966:"phi",967:"chi",968:"psi",969:"omega",977:"thetasym",978:"upsih",982:"piv",8226:"bull",8230:"hellip",8242:"prime",8243:"Prime",8254:"oline",8260:"frasl",8472:"weierp",8465:"image",8476:"real",8482:"trade",8501:"alefsym",8592:"larr",8593:"uarr",8594:"rarr",8595:"darr",8596:"harr",8629:"crarr",8656:"lArr",8657:"uArr",8658:"rArr",8659:"dArr",8660:"hArr",8704:"forall",8706:"part",8707:"exist",8709:"empty",8711:"nabla",8712:"isin",8713:"notin",8715:"ni",8719:"prod",8721:"sum",8722:"minus",8727:"lowast",8730:"radic",8733:"prop",8734:"infin",8736:"ang",8743:"and",8744:"or",8745:"cap",8746:"cup",8747:"int",8756:"there4",8764:"sim",8773:"cong",8776:"asymp",8800:"ne",8801:"equiv",8804:"le",8805:"ge",8834:"sub",8835:"sup",8836:"nsub",8838:"sube",8839:"supe",8853:"oplus",8855:"otimes",8869:"perp",8901:"sdot",8968:"lceil",8969:"rceil",8970:"lfloor",8971:"rfloor",9001:"lang",9002:"rang",9674:"loz",9824:"spades",9827:"clubs",9829:"hearts",9830:"diams",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",710:"circ",732:"tilde",8194:"ensp",8195:"emsp",8201:"thinsp",8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8240:"permil",8249:"lsaquo",8250:"rsaquo",8364:"euro"},z={block:m,inline:_,findNodeIndex:function(e,t){var i=0;if(!e)return -1;for(;e=e.previousSibling;)t&&3==e.nodeType||i++;return i},isDataNode:function(e){return e&&null!==e.nodeValue&&null!==e.data},isAncestorOf:function(t,i){try{return!z.isDataNode(t)&&(e.contains(t,z.isDataNode(i)?i.parentNode:i)||i.parentNode==t)}catch(e){return!1}},isAncestorOrSelf:function(e,t){return z.isAncestorOf(e,t)||e==t},findClosestAncestor:function(e,t){if(z.isAncestorOf(e,t))for(;t&&t.parentNode!=e;)t=t.parentNode;return t},getAllComments:function(e){for(var t=[],i=document.createNodeIterator(e,NodeFilter.SHOW_COMMENT,function(){return NodeFilter.FILTER_ACCEPT},!1),n=i.nextNode();n;)t.push(n.nodeValue),n=i.nextNode();return t},getNodeLength:function(e){return z.isDataNode(e)?e.length:e.childNodes.length},splitDataNode:function(e,t){for(var i,n=e.cloneNode(!1),s="",a=e.nextSibling;a&&3==a.nodeType&&a.nodeValue;)s+=a.nodeValue,i=a,a=a.nextSibling,z.remove(i);e.deleteData(t,e.length),n.deleteData(0,t),n.nodeValue+=s,z.insertAfter(n,e)},attrEquals:function(e,i){for(var n in i){var s=e[n];if(n==r&&(s=e[t.support.cssFloat?o:l]),"object"==typeof s){if(!z.attrEquals(s,i[n]))return!1}else if(s!=i[n])return!1}return!0},blockParentOrBody:function(e){return z.parentOfType(e,f)||e.ownerDocument.body},blockParents:function(t){var i,n,s=[];for(i=0,n=t.length;i<n;i++){var a=z.parentOfType(t[i],z.blockElements);a&&0>e.inArray(a,s)&&s.push(a)}return s},windowFromDocument:function(e){return e.defaultView||e.parentWindow},normalize:w,blockElements:f,nonListBlockElements:p,inlineElements:v,empty:c,fillAttrs:b,nodeTypes:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},toHex:function(e){var t=T.exec(e);return t?"#"+i(t.slice(1),function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e}).join(""):e},encode:function(e,t){var i=!t||t.entities?E:F;return e.replace(i,function(e){var t=A[e.charCodeAt(0)];return t?"&"+t+";":e})},isBom:function(e){return e&&3===e.nodeType&&/^[\ufeff]+$/.test(e.nodeValue)},stripBom:function(e){return(e||"").replace(S,"")},stripBomNode:function(e){z.isBom(e)&&e.parentNode.removeChild(e)},insignificant:function(e){var t=e.attributes;return"k-marker"==e.className||z.is(e,"br")&&("k-br"==e.className||t._moz_dirty||t._moz_editor_bogus_node)||z.is(e,"span")&&"k-br"==e.className},tableCell:function(e){return z.is(e,"td")||z.is(e,"th")},significantNodes:function(t){return e.grep(t,function(e){var t=z.name(e);return"br"!=t&&!z.insignificant(e)&&!z.emptyTextNode(e)&&!(1==e.nodeType&&!c[t]&&z.emptyNode(e))})},emptyTextNode:function(e){return e&&3==e.nodeType&&I.test(e.nodeValue)},emptyNode:function(e){return 1==e.nodeType&&!z.significantNodes(e.childNodes).length},name:function(e){return e.nodeName.toLowerCase()},significantChildNodes:function(t){return e.grep(t.childNodes,function(e){return 3!=e.nodeType||!z.isWhitespace(e)})},lastTextNode:function(e){var t=null;if(3==e.nodeType)return e;for(var i=e.lastChild;i&&!(t=z.lastTextNode(i));i=i.previousSibling);return t},is:function(e,t){return e&&z.name(e)==t},isMarker:function(e){return e.className==h},isWhitespace:function(e){return x.test(e.nodeValue)},allowsTextContent:function(e){var t=!0;return k.every(function(i){return!z.is(e,i)||(t=!1,!1)}),t},allWhitespaceContent:function(e){for(var t=e.firstChild;t&&z.isWhitespace(t);)t=t.nextSibling;return!t},isEmptyspace:function(e){return C.test(e.nodeValue)},htmlIndentSpace:function(t){if(!z.isDataNode(t)||!z.isWhitespace(t))return!1;if(C.test(t.nodeValue))return!0;var i=function(e,t){for(;e[t];)if(e=e[t],z.significantNodes([e]).length>0)return e},n=t.parentNode,s=i(t,"previousSibling"),a=i(t,"nextSibling");if(S.test(t.nodeValue))return!(!s&&!a);if(e(n).is("tr,tbody,thead,tfoot,table,ol,ul"))return!0;if(z.isBlock(n)||z.is(n,"body")){var r=s&&z.isBlock(s),o=a&&z.isBlock(a);if(!a&&r||!s&&o||r&&o)return!0}return!1},isBlock:function(e){return m[z.name(e)]},isSelfClosing:function(e){return g[z.name(e)]},isEmpty:function(e){return c[z.name(e)]},isInline:function(e){return _[z.name(e)]},isBr:function(e){return"br"==z.name(e)},list:function(e){var t=e?z.name(e):"";return"ul"==t||"ol"==t||"dl"==t},scrollContainer:function(e){var t=z.windowFromDocument(e),i=(t.contentWindow||t).document||t.ownerDocument||t;return"BackCompat"==i.compatMode?i.body:i.scrollingElement||i.documentElement},scrollTo:function(t,i){var n,s,a,r,o=t.ownerDocument,l=z.windowFromDocument(o).innerHeight,d=z.scrollContainer(o);z.isDataNode(t)?i?(r=z.create(o,"span",{innerHTML:"&#xfeff;"}),z.insertBefore(r,t),n=e(r)):n=e(t.parentNode):n=e(t),s=n.offset().top,a=n[0].offsetHeight,!i&&a||(a=parseInt(n.css("line-height"),10)||Math.ceil(1.2*parseInt(n.css("font-size"),10))||15),r&&z.remove(r),a+s>d.scrollTop+l&&(d.scrollTop=a+s-l)},persistScrollTop:function(e){y=z.scrollContainer(e).scrollTop},offset:function(e,t){for(var i={top:e.offsetTop,left:e.offsetLeft},n=e.offsetParent;n&&(!t||z.isAncestorOf(t,n));)i.top+=n.offsetTop,i.left+=n.offsetLeft,n=n.offsetParent;return i},restoreScrollTop:function(e){"number"==typeof y&&(z.scrollContainer(e).scrollTop=y,y=void 0)},insertAt:function(e,t,i){e.insertBefore(t,e.childNodes[i]||null)},insertBefore:function(e,t){return t.parentNode?t.parentNode.insertBefore(e,t):t},insertAfter:function(e,t){return t.parentNode.insertBefore(e,t.nextSibling)},remove:function(e){e.parentNode&&e.parentNode.removeChild(e)},removeChildren:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},removeTextSiblings:function(e){for(var t=e.parentNode;e.nextSibling&&3==e.nextSibling.nodeType;)t.removeChild(e.nextSibling);for(;e.previousSibling&&3==e.previousSibling.nodeType;)t.removeChild(e.previousSibling)},trim:function(e){for(var t=e.childNodes.length-1;t>=0;t--){var i=e.childNodes[t];z.isDataNode(i)?z.stripBom(i.nodeValue).length||z.remove(i):i.className!=h&&(z.trim(i),(!z.isEmpty(i)&&0===i.childNodes.length||z.isBlock(i)&&z.allWhitespaceContent(i))&&z.remove(i))}return e},closest:function(e,t){for("string"==typeof t&&(t=[t]);e&&0>t.indexOf(z.name(e));)e=e.parentNode;return e},closestBy:function(e,t,i){for(;e&&!t(e);){if(i&&i(e))return null;e=e.parentNode}return e},sibling:function(e,t){do e=e[t];while(e&&1!=e.nodeType);return e},next:function(e){return z.sibling(e,"nextSibling")},prev:function(e){return z.sibling(e,"previousSibling")},parentOfType:function(e,t){do e=e.parentNode;while(e&&!z.ofType(e,t));return e},ofType:function(t,i){return e.inArray(z.name(t),i)>=0},changeTag:function(e,t,i){var n,s,r,o,l,h=z.create(e.ownerDocument,t),u=e.attributes;if(!i)for(n=0,s=u.length;n<s;n++)(l=u[n]).specified&&(r=l.nodeName,o=l.nodeValue,r==d?h.className=o:r==a?h.style.cssText=e.style.cssText:h.setAttribute(r,o));for(;e.firstChild;)h.appendChild(e.firstChild);return z.insertBefore(h,e),z.remove(e),h},editableParent:function(e){for(;e&&(3==e.nodeType||"true"!==e.contentEditable);)e=e.parentNode;return e},wrap:function(e,t){return z.insertBefore(t,e),t.appendChild(e),t},unwrap:function(e){for(var t=e.parentNode;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)},wrapper:function(t){var i=z.closestBy(t,function(e){return e.parentNode&&z.significantNodes(e.parentNode.childNodes).length>1});return e(i).is("body,.k-editor")?void 0:i},create:function(e,t,i){return z.attr(e.createElement(t),i)},createEmptyNode:function(e,t,i){var n=z.attr(e.createElement(t),i);return n.innerHTML="\uFEFF",n},attr:function(e,t){for(var i in(t=n({},t))&&a in t&&(z.style(e,t.style),delete t.style),t)null===t[i]?(e.removeAttribute(i),delete t[i]):"className"==i&&(e[i]=t[i]);return n(e,t)},mergeAttributes:function(t,i,n){t.attributes.length&&e.each(t.attributes,function(){"contenteditable"===this.name||n&&this.name===a||e(i).attr(this.name,this.value),n&&this.name===a&&e.each(t.style,function(){i.style[this]=t.style[this]})})},style:function(t,i){e(t).css(i||{})},unstyle:function(e,i){for(var n in i)n==r&&(n=t.support.cssFloat?o:l),e.style[n]="";""===e.style.cssText&&e.removeAttribute(a)},inlineStyle:function(t,n,a){var r,o=e(z.create(t.ownerDocument,n,a));return t.appendChild(o[0]),r=i(D,function(e){return s.msie&&"line-height"==e&&"1px"==o.css(e)?"line-height:1.5":e+":"+o.css(e)}).join(";"),o.remove(),r},getEffectiveBackground:function(e){var t=e.css("background-color")||"";return 0>t.indexOf("rgba(0, 0, 0, 0")&&"transparent"!==t?t:"html"===e[0].tagName.toLowerCase()?"Window":z.getEffectiveBackground(e.parent())},innerText:function(e){var t=e.innerHTML;return(t=t.replace(/<!--(.|\s)*?-->/gi,"")).replace(/<\/?[^>]+?\/?>/gm,"")},removeClass:function(e,i){var n,s,a=" "+e.className+" ",r=i.split(" ");for(n=0,s=r.length;n<s;n++)a=a.replace(" "+r[n]+" "," ");(a=t.trim(a)).length?e.className=a:e.removeAttribute(d)},commonAncestor:function(){var e,t,i,n,s,a=arguments,r=arguments.length,o=[],l=1/0,d=null;if(!r)return null;if(1==r)return arguments[0];for(e=0;e<r;e++){for(t=[],i=a[e];i;)t.push(i),i=i.parentNode;o.push(t.reverse()),l=Math.min(l,t.length)}if(1==r)return o[0][0];for(e=0;e<l;e++){for(n=o[0][e],s=1;s<r;s++)if(n!=o[s][e])return d;d=n}return d},closestSplittableParent:function(t){(n=1==t.length?z.parentOfType(t[0],["ul","ol"]):z.commonAncestor.apply(null,t))||(n=z.parentOfType(t[0],["p","td"])||t[0].ownerDocument.body),z.isInline(n)&&(n=z.blockParentOrBody(n));var n,s=i(t,z.editableParent),a=z.commonAncestor(s)[0];return e.contains(n,a)&&(n=a),n},closestEditable:function(t,i){var n,s=z.editableParent(t);return((n=z.ofType(t,i)?t:z.parentOfType(t,i))&&s&&e.contains(n,s)||!n&&s)&&(n=s),n},closestEditableOfType:function(t,i){var n=z.closestEditable(t,i);if(n&&z.ofType(n,i)&&!e(n).is(".k-editor"))return n},filter:function(e,t,i){return z.filterBy(t,function(t){return z.name(t)==e},i)},filterBy:function(e,t,i){for(var n,s=0,a=e.length,r=[];s<a;s++)((n=t(e[s]))&&!i||!n&&i)&&r.push(e[s]);return r},ensureTrailingBreaks:function(t){var i=e(t).find("p,td,th"),n=i.length,s=0;if(n)for(;s<n;s++)z.ensureTrailingBreak(i[s]);else z.ensureTrailingBreak(t)},removeTrailingBreak:function(t){e(t).find("br[type=_moz],.k-br").remove()},ensureTrailingBreak:function(e){z.removeTrailingBreak(e);var t,i=e.lastChild,n=i&&z.name(i);n&&("br"==n||"img"==n)&&("br"!=n||"k-br"==i.className)||((t=e.ownerDocument.createElement("br")).className="k-br",e.appendChild(t))},reMapTableColumns:function(e,t){z._mapColIndices(e,t)},clearTableMappings:function(t,i){e(t).find("["+i+"]").removeAttr(i)},_mapColIndices:function(e,t){for(var i={},n=0;n<e.rows.length;n++)for(var s=e.rows[n].cells,a=0,r=0;r<s.length;r++,a++){var o=s[r];if(o.rowSpan>1&&this._mapColspan(o,n,a,i),i[n])for(;i[n][a];)a++;o.setAttribute(t,a),o.colSpan>1&&(a=a+o.colSpan-1)}},_mapColspan:function(e,t,i,n){for(var s,a=e.rowSpan,r=e.colSpan,o=0;o<r;o++){s=i+o;for(var l=t+1;l<t+a;l++){if(n[l]||(n[l]={},n[l].length=0),n[t])for(;n[t][s];)s++;n[l][s]=!0,n[l].length++}}},associateWithIds:function(e){var t,i,n=0,s=e.rows,a=s.length,r=[],o=[];if(e.tHead)n=(t=e.tHead.rows).length;else for(n=this._getNumberOfHeaderRows(e),t=[],i=0;i<n;i++)t.push(s[i]);for(i=0;i<n;i++)r.push([]);for(i=0;i<a;i++)o.push([]);this._generateIdsForColumns(r,t),this._generateIdsForRows(r,o,n,s),this._assignIds(r,o,n,s)},_generateIdsForColumns:function(e,t){var i,n,s,a,r,o,l,d,h,u,c=(new Date).getTime(),p=t?t.length:0;for(l=0;l<p;l++)for(i=t[l].cells,s=0,d=0;d<i.length;d++){for(a="table"+l+d+ ++c,(n=i[d]).setAttribute("id",a),r=n.getAttribute("colspan")||1,o=n.getAttribute("rowspan")||1;e[l][d+s];)s+=1;for(h=0;h<o;h++)for(u=0;u<r;u++)e[l+h][d+s+u]=a}},_generateIdsForRows:function(t,i,n,s){var a,r,o,l,d,h,u,c,p,f,m,g,v=(new Date).getTime(),_=s.length,b=function(e){g.push(e[m])};for(u=n;u<_;u++)for(a=e(s[u].cells).filter("th"),o=0,c=0;c<a.length;c++){for(l="table"+u+c+ ++v,(r=a[c]).setAttribute("id",l),d=r.getAttribute("colspan")||1,h=r.getAttribute("rowspan")||1;i[u][c+o];)o+=1;for(p=0;p<h;p++)for(f=0;f<d;f++)i[u+p][c+o+f]=l;m=r.getAttribute("col-index"),g=[],t.forEach(b),g=g.filter(this._onlyUnique),r.setAttribute("headers",g.join(" ").trim())}},_assignIds:function(t,i,n,s){var a,r,o,l,d,h,u=s.length,c=function(e){h.push(e[d])};for(o=n;o<u;o++)for(a=e(s[o].cells).filter("td"),l=0;l<a.length;l++)d=(r=a[l]).getAttribute("col-index"),h=i[o].slice(),t.forEach(c),h=h.filter(this._onlyUnique),r.setAttribute("headers",h.join(" ").trim())},_getNumberOfColumns:function(t){var i,n,s=e(t).find("th, td"),a=0;for(i=0;i<s.length;i++)(n=Number(s[i].getAttribute("col-index"))+1)>a&&(a=n);return a},_getNumberOfHeaderColumns:function(e,t){var i,n,s,a,r,o=e.rows,l=0;for(s=t;s<o.length;s++)for(n=o[s],a=0;a<n.cells.length;a++)r=n.cells[a],this.is(r,"th")&&(i=Number(r.getAttribute("col-index"))+1)>l&&(l=i);return l},_getNumberOfHeaderRows:function(e){var t,i,n,s,a=e.rows,r=e.tHead&&e.tHead.rows?e.tHead.rows.length:0;if(0===r)for(s=(i=a[0]).cells&&i.cells.length;i&&s&&this.is(i.cells[0],"th");){for(t=0;t<s;t++)n=i?i.cells[t]:null,this.is(n,"th")||(i=null);i&&(r+=1,s=(i=this.next(i))&&i.cells&&i.cells.length)}return r},_onlyUnique:function(e,t,i){return i.indexOf(e)===t}};t.ui.editor.Dom=z}(window.kendo.jQuery),i5=window.kendo.jQuery,ne=(i7=(i4=window.kendo).ui.editor).Dom,nt=i5.extend,ni="xx-small,x-small,small,medium,large,x-large,xx-large".split(","),nn=/"/g,ns=/<br[^>]*>/i,na=/^\d+(\.\d*)?(px)?$/i,nr=/<p>(?:&nbsp;)?<\/p>/i,no=/(\*?[-#\/\*\\\w]+(?:\[[0-9a-z_-]+\])?)\s*:\s*((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/g,nl=/^sizzle-\d+/i,nd=/^k-script-/i,nh=/\s*onerror\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/i,nu='<br class="k-br">',nc="<span class='k-br'>\uFEFF</span>",(np=document.createElement("div")).innerHTML=" <hr>",nf=3===np.firstChild.nodeType,np=null,nm=i4.isFunction,ng={toEditableHtml:function(e){return(e||"").replace(/<!\[CDATA\[(.*)?\]\]>/g,"<!--[CDATA[$1]]-->").replace(/<(\/?)script([^>]*)>/gi,"<$1k:script$2>").replace(/<img([^>]*)>/gi,function(e){return e.replace(nh,"")}).replace(/(<\/?img[^>]*>)[\r\n\v\f\t ]+/gi,"$1").replace(/^<(table|blockquote)/i,nu+"<$1").replace(/^[\s]*(&nbsp;|\u00a0)/i,"$1").replace(/<\/(table|blockquote)>$/i,"</$1>"+nu)},_toEditableImmutables:function(e){for(var t=i7.Immutables.immutable,i=ne.emptyTextNode,n=e.firstChild,s=e.lastChild;i(n);)n=n.nextSibling;for(;i(s);)s=s.previousSibling;n&&t(n)&&i5(nc).prependTo(e),s&&t(s)&&i5(nc).appendTo(e)},_fillEmptyElements:function(e){i5(e).find("p,td").each(function(){var e=i5(this);if(/^\s*$/g.test(e.text())&&!e.find("img,input").length){for(var t=this;t.children[0]&&3!=t.children[0].nodeType;)t=t.children[0];1!=t.nodeType||ne.empty[ne.name(t)]||(ne.is(t,"td")?t.innerHTML=i4.ui.editor.emptyTableCellContent:t.innerHTML=i4.ui.editor.emptyElementContent)}})},_removeSystemElements:function(e){i5(".k-paste-container",e).remove()},_resetOrderedLists:function(e){var t,i,n,s=e.getElementsByTagName("ol");for(t=0;t<s.length;t++)n=(i=s[t]).getAttribute("start"),i.setAttribute("start",1),n?i.setAttribute("start",n):i.removeAttribute(n)},_preventScriptExecution:function(e){i5(e).find("*").each(function(){var e,t,i,n,s=this.attributes,a=[];for(t=0,i=s.length;t<i;t++)n=(e=s[t]).nodeName,e.specified&&/^on/i.test(n)&&(this.setAttribute("k-script-"+n,e.value),a.push(n));for(t=0,i=a.length;t<i;t++)this.removeAttribute(a[t])})},htmlToDom:function(e,t,i){var n=i4.support.browser.msie,s=i||{},a=s.immutables;return e=ng.toEditableHtml(e),nm(s.custom)&&(e=s.custom(e)||e),t.innerHTML=e,a&&a.deserialize(t),n&&(ne.normalize(t),ng._resetOrderedLists(t)),ng._preventScriptExecution(t),ng._fillEmptyElements(t),ng._removeSystemElements(t),ng._toEditableImmutables(t),i5("table",t).addClass("k-table"),t},domToXhtml:function(e,t){var i,n=[],s=t&&t.immutables;function a(e){return i5.grep(e,function(e){return"style"!=e.name})}function r(e,t){n.push("<"+t),d(e),n.push(">")}var o={iframe:{start:function(e){r(e,"iframe")},end:function(){n.push("</iframe>")}},"k:script":{start:function(e){r(e,"script")},end:function(){n.push("</script>")},skipEncoding:!0},span:{canOptimize:!0,semantic:!0,start:function(e){var t=e.style,i=a(l(e));i.length&&(n.push("<span"),d(e,i),n.push(">")),"underline"==t.textDecoration&&n.push("<u>");var s=[];if(t.color&&s.push('color="'+ne.toHex(t.color)+'"'),t.fontFamily&&s.push('face="'+t.fontFamily+'"'),t.fontSize){var r=i5.inArray(t.fontSize,ni);s.push('size="'+r+'"')}for(var o=[],h=["text-decoration","color","font"],u=0;u<t.length;u++){var c=t[u];h.filter(function(e){return c.startsWith(e)}).length<=0&&o.push(c+": "+t[c])}o.length&&s.push('style="'+o.join(";")+'"'),s.length&&n.push("<font "+s.join(" ")+">")},end:function(e){var t=e.style;(t.color||t.fontFamily||t.fontSize)&&n.push("</font>"),"underline"==t.textDecoration&&n.push("</u>"),a(l(e)).length&&n.push("</span>")}},strong:{semantic:!0,start:function(e){r(e,"b")},end:function(){n.push("</b>")}},em:{semantic:!0,start:function(e){r(e,"i")},end:function(){n.push("</i>")}},b:{semantic:!1,start:function(e){r(e,"strong")},end:function(){n.push("</strong>")}},i:{semantic:!1,start:function(e){r(e,"em")},end:function(){n.push("</em>")}},u:{semantic:!1,start:function(e){n.push("<span");var t=l(e),i=i5(t).filter(function(e,t){return"style"==t.name})[0],s={nodeName:"style",value:"text-decoration:underline;"};i&&(s.value=i.value,/text-decoration/i.test(s.value)||(s.value="text-decoration:underline;"+s.value),t.splice(i5.inArray(i,t),1)),t.push(s),d(e,t),n.push(">")},end:function(){n.push("</span>")}},font:{canOptimize:!0,semantic:!1,start:function(e){n.push('<span style="');var t=e.getAttribute("color"),i=ni[e.getAttribute("size")],s=e.getAttribute("face");t&&(n.push("color:"),n.push(ne.toHex(t)),n.push(";")),s&&(n.push("font-family:"),n.push(s),n.push(";")),i&&(n.push("font-size:"),n.push(i),n.push(";")),n.push('">')},end:function(){n.push("</span>")}}};function l(e){var i,n,s,a,r,o,l=[],d=e.attributes;for(n=0,s=d.length;n<s;n++)a=(i=d[n]).nodeName,r=i.value,o=i.specified,"value"==a&&"value"in e&&e.value||"type"==a&&"text"==r?o=!0:"class"!=a||r?nl.test(a)||"complete"==a||"altHtml"==a||"start"==a&&ne.is(e,"ul")||"start"==a&&ne.is(e,"ol")&&"1"==r||a.indexOf("_moz")>=0?o=!1:nd.test(a)?o=!!t.scripts:"data-role"==a&&"resizable"==r&&(ne.is(e,"tr")||ne.is(e,"td"))&&(o=!1):o=!1,o&&l.push(i);return l}function d(e,t){var i,s,a,r,o;if(t=t||l(e),ne.is(e,"img")){var d=e.style.width,h=e.style.height,u=i5(e);d&&na.test(d)&&(u.attr("width",parseInt(d,10)),ne.unstyle(e,{width:void 0})),h&&na.test(h)&&(u.attr("height",parseInt(h,10)),ne.unstyle(e,{height:i8}))}if(t.length)for(i=0,s=t.length;i<s;i++)r=(a=t[i]).nodeName,o=a.value,"class"==r&&"k-table"==o||(r=r.replace(nd,""),n.push(" "),n.push(r),n.push('="'),"style"==r?function(e){var t,i=function(e){var t,i,n,s=i4.trim,a=s(e),r=[];for(no.lastIndex=0;t=no.exec(a);)i=s(t[1].toLowerCase()),n=s(t[2]),"font-size-adjust"!=i&&"font-stretch"!=i&&(i.indexOf("color")>=0?n=ne.toHex(n):i.indexOf("font")>=0?n=n.replace(nn,"'"):/\burl\(/g.test(n)&&(n=n.replace(nn,"")),r.push({property:i,value:n}));return r}(e);for(t=0;t<i.length;t++)n.push(i[t].property),n.push(":"),n.push(i[t].value),n.push(";")}(o||e.style.cssText):"src"==r||"href"==r?n.push(i4.htmlEncode(e.getAttribute(r,2))):n.push(ne.fillAttrs[r]?r:o),n.push('"'))}function h(e){return e.nodeValue.replace(/\ufeff/g,"")}function u(){i4.isFunction(t.custom)&&(n=t.custom(n)||n)}return o.script=o["k:script"],void 0===(t=t||{}).semantic&&(t.semantic=!0),(i=e.childNodes.length)&&3==e.firstChild.nodeType&&(1==i||2==i&&ne.insignificant(e.lastChild))?(n=ne.encode(h(e.firstChild).replace(/[\r\n\v\f\t ]+/," "),t),u(),n):(function e(i,a,r){for(var l=i.firstChild;l;l=l.nextSibling)(function(i,a,r){var l,u,c,p,f,m,g=i.nodeType;if(s&&i7.Immutables.immutable(i))n.push(s.serialize(i));else if(1==g){if(l=ne.name(i),(m=i5(i)).hasClass("k-element-resize-handle-wrapper")||m.hasClass("k-column-resize-handle-wrapper")||m.hasClass("k-row-resize-handle-wrapper")||!l||ne.insignificant(i)||!t.scripts&&("script"==l||"k:script"==l))return;if(u=o[l]){if(u.canOptimize&&t.optimizeTags&&0===i.attributes.length)return void e(i,!1,u.skipEncoding);if(void 0===u.semantic||t.semantic^u.semantic)return u.start(i),e(i,!1,u.skipEncoding),void u.end(i)}n.push("<"),n.push(l),d(i),ne.empty[l]?n.push(" />"):(n.push(">"),e(i,a||ne.is(i,"pre")),n.push("</"),n.push(l),n.push(">"))}else if(3==g){if(function(e){if(ne.isBom(e)){do{if(e=e.parentNode,ne.is(e,"td")&&1===e.childNodes.length)break;if(1!==e.childNodes.length)return!1}while(!ne.isBlock(e));return!0}return!1}(i))return void n.push("&nbsp;");p=h(i),!a&&nf&&(c=i.parentNode,(f=i.previousSibling)||(f=(ne.isInline(c)?c:i).previousSibling),f&&""!==f.innerHTML&&!ne.isBlock(f)||(p=t.keepEOL?p.replace(/[\r\n\v\f\t ]+/," "):p.replace(/^[\r\n\v\f\t ]+/,"")),p=p.replace(/ +/," ")),n.push(r?p:ne.encode(p,t))}else 4==g?(n.push("<![CDATA["),n.push(i.data),n.push("]]>")):8==g&&(0>i.data.indexOf("[CDATA[")?(n.push("<!--"),n.push(i.data),n.push("-->")):(n.push("<!"),n.push(i.data),n.push(">")))})(l,a,r)}(e),n=n.join(""),u(),""===n.replace(ns,"").replace(nr,"")?"":n)}},nt(i7,{Serializer:ng}),nv=window.kendo.jQuery,nb=(n_=window.kendo).ui.DropDownList,nk=n_.ui.editor.Dom,nw=nb.extend({init:function(e,t){var i=this;nb.fn.init.call(i,e,t),n_.support.mobileOS.ios&&(this._initSelectOverlay(),this.bind("dataBound",this._initSelectOverlay.bind(this))),i.text(i.options.title),i.element.attr("title",i.options.title),i.wrapper.attr("title",i.options.title),i.bind("open",function(){if(i.options.autoSize){var e,t=i.list;t.css({whiteSpace:"nowrap",width:"auto"}),(e=t.width())>0?e+=20:e=i._listWidth,t.css("width",e+n_.support.scrollbar()),i._listWidth=e}})},options:{name:"SelectBox",index:-1,size:"medium",fillMode:"solid",rounded:"medium"},_initSelectOverlay:function(){for(var e,t=this,i=t.value(),n=this.dataSource.view(),s="",a=n_.htmlEncode,r=0;r<n.length;r++)s+="<option value='"+a((e=n[r]).value)+"'",e.value==i&&(s+=" selected"),s+=">"+a(e.text)+"</option>";var o=nv("<select class='k-select-overlay'>"+s+"</select>"),l=nv(this.element).closest(".k-dropdownlist");l.next(".k-select-overlay").remove(),o.insertAfter(l),o.on("change",function(){t.value(this.value),t.trigger("change")})},value:function(e){var t=nb.fn.value.call(this,e);if(void 0===e)return t;nb.fn.value.call(this)||this.text(this.options.title)},decorate:function(e){var t,i,n,s,a=this.dataSource,r=a.data();for(e&&this.list.css("background-color",nk.getEffectiveBackground(nv(e))),t=0;t<r.length;t++)i=r[t].tag||"span",n=r[t].className,s=(s=nk.inlineStyle(e,i,{className:n})).replace(/"/g,"'"),r[t].style=s+";display:inline-block";a.trigger("change")}}),n_.ui.plugin(nw),n_.ui.editor.SelectBox=nw,n_.cssProperties.registerPrefix("SelectBox","k-picker-"),n_.cssProperties.registerValues("SelectBox",[{prop:"rounded",values:n_.cssProperties.roundedValues.concat([["full","full"]])}]),function(e){var t=window.kendo,i=t.Class,n=e.extend,s=t.ui.editor,a=t.support.browser,r=s.Dom,o=r.findNodeIndex,l=r.isDataNode,d=r.findClosestAncestor,h=r.getNodeLength,u=r.normalize,c={selectionFromWindow:function(e){if(e)return"getSelection"in e?e.getSelection():new v(e.document)},selectionFromRange:function(e){var t=S.documentFromRange(e);return c.selectionFromDocument(t)},selectionFromDocument:function(e){return c.selectionFromWindow(r.windowFromDocument(e))}},p=i.extend({init:function(t){e.extend(this,{ownerDocument:t,startContainer:t,endContainer:t,commonAncestorContainer:t,startOffset:0,endOffset:0,collapsed:!0})},setStart:function(e,t){this.startContainer=e,this.startOffset=t,m(this),f(this,!0)},setEnd:function(e,t){this.endContainer=e,this.endOffset=t,m(this),f(this,!1)},setStartBefore:function(e){this.setStart(e.parentNode,o(e))},setStartAfter:function(e){this.setStart(e.parentNode,o(e)+1)},setEndBefore:function(e){this.setEnd(e.parentNode,o(e))},setEndAfter:function(e){this.setEnd(e.parentNode,o(e)+1)},selectNode:function(e){this.setStartBefore(e),this.setEndAfter(e)},selectNodeContents:function(e){this.setStart(e,0),this.setEnd(e,e[1===e.nodeType?"childNodes":"nodeValue"].length)},collapse:function(e){e?this.setEnd(this.startContainer,this.startOffset):this.setStart(this.endContainer,this.endOffset)},deleteContents:function(){var e=this.cloneRange();this.startContainer!=this.commonAncestorContainer&&this.setStartAfter(d(this.commonAncestorContainer,this.startContainer)),this.collapse(!0),function e(t){for(;t.next();)t.hasPartialSubtree()?e(t.getSubtreeIterator()):t.remove()}(new g(e))},cloneContents:function(){var e=S.documentFromRange(this);return function t(i){for(var n,s=e.createDocumentFragment();n=i.next();)n=n.cloneNode(!i.hasPartialSubtree()),i.hasPartialSubtree()&&n.appendChild(t(i.getSubtreeIterator())),s.appendChild(n);return s}(new g(this))},extractContents:function(){var e=this,t=e.cloneRange();e.startContainer!=e.commonAncestorContainer&&e.setStartAfter(d(e.commonAncestorContainer,e.startContainer)),e.collapse(!0);var i=S.documentFromRange(e);return function t(n){for(var s,a=i.createDocumentFragment();s=n.next();)n.hasPartialSubtree()?(s=s.cloneNode(!1)).appendChild(t(n.getSubtreeIterator())):n.remove(e.originalRange),a.appendChild(s);return a}(new g(t))},insertNode:function(e){l(this.startContainer)?(this.startOffset!=this.startContainer.nodeValue.length&&r.splitDataNode(this.startContainer,this.startOffset),r.insertAfter(e,this.startContainer)):r.insertAt(this.startContainer,e,this.startOffset),this.setStart(this.startContainer,this.startOffset)},cloneRange:function(){return e.extend(new p(this.ownerDocument),{startContainer:this.startContainer,endContainer:this.endContainer,commonAncestorContainer:this.commonAncestorContainer,startOffset:this.startOffset,endOffset:this.endOffset,collapsed:this.collapsed,originalRange:this})},toString:function(){var e=this.startContainer.nodeName,t=this.endContainer.nodeName;return["#text"==e?this.startContainer.nodeValue:e,"(",this.startOffset,") : ","#text"==t?this.endContainer.nodeValue:t,"(",this.endOffset,")"].join("")}});function f(e,t){(function(e){try{return 0>function(e,t,i,n){if(e==t)return n-i;for(var s=t;s&&s.parentNode!=e;)s=s.parentNode;if(s)return o(s)-i;for(s=e;s&&s.parentNode!=t;)s=s.parentNode;if(s)return n-o(s)-1;for(var a=r.commonAncestor(e,t),l=e;l&&l.parentNode!=a;)l=l.parentNode;l||(l=a);for(var d=t;d&&d.parentNode!=a;)d=d.parentNode;return d||(d=a),l==d?0:o(d)-o(l)}(e.startContainer,e.endContainer,e.startOffset,e.endOffset)}catch(e){return!0}})(e)&&(t?(e.commonAncestorContainer=e.endContainer=e.startContainer,e.endOffset=e.startOffset):(e.commonAncestorContainer=e.startContainer=e.endContainer,e.startOffset=e.endOffset),e.collapsed=!0)}function m(e){e.collapsed=e.startContainer==e.endContainer&&e.startOffset==e.endOffset;for(var t=e.startContainer;t&&t!=e.endContainer&&!r.isAncestorOf(t,e.endContainer);)t=t.parentNode;e.commonAncestorContainer=t}p.fromNode=function(e){return new p(e.ownerDocument)};var g=i.extend({init:function(t){if(e.extend(this,{range:t,_current:null,_next:null,_end:null}),!t.collapsed){var i=t.commonAncestorContainer;this._next=t.startContainer!=i||l(t.startContainer)?d(i,t.startContainer):t.startContainer.childNodes[t.startOffset],this._end=t.endContainer!=i||l(t.endContainer)?d(i,t.endContainer).nextSibling:t.endContainer.childNodes[t.endOffset]}},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return this._next=this._current&&this._current.nextSibling!=this._end?this._current.nextSibling:null,l(this._current)&&(this.range.endContainer==this._current&&(e=e.cloneNode(!0)).deleteData(this.range.endOffset,e.length-this.range.endOffset),this.range.startContainer==this._current&&(e=e.cloneNode(!0)).deleteData(0,this.range.startOffset)),e},traverse:function(e){for(var t;this._current=this._next,this._next=this._current&&this._current.nextSibling!=this._end?this._current.nextSibling:null,t=this._current;)this.hasPartialSubtree()?this.getSubtreeIterator().traverse(e):e(t);return t},remove:function(e){var t,i,n,s=this.range.startContainer==this._current,a=this.range.endContainer==this._current;if(l(this._current)&&(s||a))t=s?this.range.startOffset:0,n=(i=a?this.range.endOffset:this._current.length)-t,e&&(s||a)&&(this._current==e.startContainer&&t<=e.startOffset&&(e.startOffset-=n),this._current==e.endContainer&&i<=e.endOffset&&(e.endOffset-=n)),this._current.deleteData(t,n);else{var d=this._current.parentNode;if(e&&(this.range.startContainer==d||this.range.endContainer==d)){var h=o(this._current);d==e.startContainer&&h<=e.startOffset&&(e.startOffset-=1),d==e.endContainer&&h<e.endOffset&&(e.endOffset-=1)}r.remove(this._current)}},hasPartialSubtree:function(){return!l(this._current)&&(r.isAncestorOrSelf(this._current,this.range.startContainer)||r.isAncestorOrSelf(this._current,this.range.endContainer))},getSubtreeIterator:function(){return new g(this.getSubRange())},getSubRange:function(){var e=this.range.cloneRange();return e.selectNodeContents(this._current),r.isAncestorOrSelf(this._current,this.range.startContainer)&&e.setStart(this.range.startContainer,this.range.startOffset),r.isAncestorOrSelf(this._current,this.range.endContainer)&&e.setEnd(this.range.endContainer,this.range.endOffset),e}}),v=i.extend({init:function(e){this.ownerDocument=e,this.rangeCount=1},addRange:function(e){var t=this.ownerDocument.body.createTextRange();_(t,e,!1),_(t,e,!0),t.select()},removeAllRanges:function(){var e=this.ownerDocument.selection;"None"!=e.type&&e.empty()},getRangeAt:function(){var e,t,i=new p(this.ownerDocument),n=this.ownerDocument.selection;try{if(((e=n.createRange()).item?e.item(0):e.parentElement()).ownerDocument!=this.ownerDocument)return i}catch(e){return i}if("Control"==n.type)i.selectNode(e.item(0));else{a=(s=e).duplicate(),d=s.duplicate(),a.collapse(!0),d.collapse(!1),b(e,i,t=r.commonAncestor(s.parentElement(),a.parentElement(),d.parentElement()),!0),b(e,i,t,!1),9==i.startContainer.nodeType&&i.setStart(i.endContainer,i.startOffset),9==i.endContainer.nodeType&&i.setEnd(i.startContainer,i.endOffset),0===e.compareEndPoints("StartToEnd",e)&&i.collapse(!1);var s,a,d,u=i.startContainer,c=i.endContainer,f=this.ownerDocument.body;if(!(i.collapsed||0!==i.startOffset||i.endOffset!=h(i.endContainer)||u==c&&l(u)&&u.parentNode==f)){for(var m=!1,g=!1;0===o(u)&&u==u.parentNode.firstChild&&u!=f;)u=u.parentNode,m=!0;for(;o(c)==h(c.parentNode)-1&&c==c.parentNode.lastChild&&c!=f;)c=c.parentNode,g=!0;u==f&&c==f&&m&&g&&(i.setStart(u,0),i.setEnd(c,h(f)))}}return i}});function _(e,t,i){var n,s=t[i?"startContainer":"endContainer"],a=t[i?"startOffset":"endOffset"],o=0,d=l(s),h=d?s:s.childNodes[a]||null,u=d?s.parentNode:s,c=t.ownerDocument,p=c.body.createTextRange();3!=s.nodeType&&4!=s.nodeType||(o=a),u||(u=c.body),"img"==u.nodeName.toLowerCase()?p.moveToElementText(u):(n=u.insertBefore(r.create(c,"a"),h),p.moveToElementText(n),r.remove(n),p[i?"moveStart":"moveEnd"]("character",o)),p.collapse(!1),e.setEndPoint(i?"StartToStart":"EndToStart",p)}function b(e,t,i,n){var s,a,d,h,u,c,p,f=r.create(t.ownerDocument,"a"),m=e.duplicate(),g=n?"StartToStart":"StartToEnd",v=!1;f.innerHTML="\uFEFF",m.collapse(n),a=m.parentElement(),r.isAncestorOrSelf(i,a)||(a=i);do v?a.insertBefore(f,f.previousSibling):(a.appendChild(f),v=!0),m.moveToElementText(f);while((s=m.compareEndPoints(g,e))>0&&f.previousSibling);d=f.nextSibling,-1==s&&l(d)?(m.setEndPoint(n?"EndToStart":"EndToEnd",e),r.remove(f),c=[d,m.text.length]):(h=!n&&f.previousSibling,l(u=n&&f.nextSibling)?c=[u,0]:l(h)?c=[h,h.length]:(p=o(f),c=a.nextSibling&&p==a.childNodes.length-1?[a.nextSibling,0]:[a,p]),r.remove(f)),t[n?"setStart":"setEnd"].apply(t,c)}var k=i.extend({init:function(e){this.enumerate=function(){var t=[];return new g(e).traverse(function e(i){if(r.is(i,"img")||3==i.nodeType&&(!r.isEmptyspace(i)||"\uFEFF"==i.nodeValue))t.push(i);else for(i=i.firstChild;i;)e(i),i=i.nextSibling}),t}}}),w=g.extend({hasPartialSubtree:function(){var e=s.Immutables&&s.Immutables.immutable;return e&&!e(this._current)&&g.fn.hasPartialSubtree.call(this)},getSubtreeIterator:function(){return new w(this.getSubRange())}}),y=i.extend({init:function(e){this.enumerate=function(){var t=[],i=s.Immutables&&s.Immutables.immutable;return new w(e).traverse(function e(n){if(i&&!i(n)){if(r.is(n,"img")||3==n.nodeType&&(!r.isEmptyspace(n)||"\uFEFF"==n.nodeValue))t.push(n);else for(n=n.firstChild;n;)e(n),n=n.nextSibling}}),t}}}),x=i.extend({init:function(e,t,i){this.range=e,this.rootNode=S.documentFromRange(e),this.body=t||this.getEditable(e),"body"!=r.name(this.body)&&(this.rootNode=this.body),this.startContainer=this.nodeToPath(e.startContainer),this.endContainer=this.nodeToPath(e.endContainer),this.startOffset=this.offset(e.startContainer,e.startOffset),this.endOffset=this.offset(e.endContainer,e.endOffset),this.immutables=i&&i.immutables,this.immutables&&(this.serializedImmutables=s.Immutables.removeImmutables(this.body)),this.html=this.body.innerHTML,this.immutables&&!this.serializedImmutables.empty&&s.Immutables.restoreImmutables(this.body,this.serializedImmutables)},index:function(e){for(var t=0,i=e.nodeType;e=e.previousSibling;){var n=e.nodeType;3==n&&i==n||t++,i=n}return t},getEditable:function(e){for(var t=e.commonAncestorContainer;t&&(3==t.nodeType||t.attributes&&(!t.attributes.contentEditable||"false"==t.attributes.contentEditable.nodeValue.toLowerCase()));)t=t.parentNode;return t},restoreHtml:function(){r.removeChildren(this.body),this.body.innerHTML=this.html,this.immutables&&!this.serializedImmutables.empty&&s.Immutables.restoreImmutables(this.body,this.serializedImmutables)},offset:function(e,t){if(3==e.nodeType)for(;(e=e.previousSibling)&&3==e.nodeType;)t+=e.nodeValue.length;return t},nodeToPath:function(e){for(var t=[];e!=this.rootNode;)t.push(this.index(e)),e=e.parentNode;return t},toRangePoint:function(e,t,i,n){for(var s=this.rootNode,a=i.length,r=n;a--&&s;)s=s.childNodes[i[a]];for(;s&&3==s.nodeType&&s.nodeValue.length<r;)r-=s.nodeValue.length,s=s.nextSibling;s&&r>=0&&e[t?"setStart":"setEnd"](s,r)},toRange:function(){var e=this.range.cloneRange();return this.toRangePoint(e,!0,this.startContainer,this.startOffset),this.toRangePoint(e,!1,this.endContainer,this.endOffset),e}}),C=i.extend({init:function(){this.caret=null},addCaret:function(e){var t=this.caret=r.create(S.documentFromRange(e),"span",{className:"k-marker"});return e.insertNode(t),r.stripBomNode(t.previousSibling),r.stripBomNode(t.nextSibling),e.selectNode(t),t},removeCaret:function(e){var t=this.caret.previousSibling,i=0;t&&(i=l(t)?t.nodeValue.length:o(t));var n=this.caret.parentNode,s=t?o(t):0;r.remove(this.caret),u(n);var d=n.childNodes[s];if(l(d))e.setStart(d,i);else if(d){var h=r.lastTextNode(d);h?e.setStart(h,h.nodeValue.length):e[t?"setStartAfter":"setStartBefore"](d)}else a.msie||n.innerHTML||(n.innerHTML='<br _moz_dirty="" />'),e.selectNodeContents(n);e.collapse(!0)},add:function(e,t){var i=e.collapsed&&!S.isExpandable(e),n=S.documentFromRange(e);t&&e.collapsed&&(this.addCaret(e),e=S.expand(e));var s=e.cloneRange();if(s.collapse(!1),this.end=r.create(n,"span",{className:"k-marker"}),s.insertNode(this.end),(s=e.cloneRange()).collapse(!0),this.start=this.end.cloneNode(!0),s.insertNode(this.start),this._removeDeadMarkers(this.start,this.end),i){var a=n.createTextNode("\uFEFF");r.insertAfter(a.cloneNode(),this.start),r.insertBefore(a,this.end)}return u(e.commonAncestorContainer),e.setStartBefore(this.start),e.setEndAfter(this.end),e},_removeDeadMarkers:function(e,t){e.previousSibling&&"\uFEFF"==e.previousSibling.nodeValue&&r.remove(e.previousSibling),t.nextSibling&&"\uFEFF"==t.nextSibling.nodeValue&&r.remove(t.nextSibling)},_normalizedIndex:function(e){for(var t=o(e),i=e;i.previousSibling;)3==i.nodeType&&3==i.previousSibling.nodeType&&t--,i=i.previousSibling;return t},remove:function(e){var t=this.start,i=this.end;for(u(e.commonAncestorContainer);!t.nextSibling&&t.parentNode;)t=t.parentNode;for(;!i.previousSibling&&i.parentNode;)i=i.parentNode;t.previousSibling&&3==t.previousSibling.nodeType&&t.nextSibling&&t.nextSibling.nodeType,i.previousSibling&&3==i.previousSibling.nodeType&&i.nextSibling&&i.nextSibling.nodeType;var n=(t=t.nextSibling)===(i=i.previousSibling)&&r.isBom(t);n&&t.length>1&&(t.nodeValue=t.nodeValue.charAt(0));var s=n,a=!1;if(t==this.end&&(a=!!this.start.previousSibling,t=i=this.start.previousSibling||this.end.nextSibling,s=!0),r.remove(this.start),r.remove(this.end),!t||!i)return e.selectNodeContents(e.commonAncestorContainer),void e.collapse(!0);var o=s?l(t)?t.nodeValue.length:t.childNodes.length:0,d=l(i)?i.nodeValue.length:i.childNodes.length;if(3==t.nodeType)for(;t.previousSibling&&3==t.previousSibling.nodeType;)o+=(t=t.previousSibling).nodeValue.length;if(3==i.nodeType)for(;i.previousSibling&&3==i.previousSibling.nodeType;)d+=(i=i.previousSibling).nodeValue.length;var h=t.parentNode,c=i.parentNode,p=this._normalizedIndex(t),f=this._normalizedIndex(i);u(h),3==t.nodeType&&(t=h.childNodes[p]),u(c),3==i.nodeType&&(i=c.childNodes[f]),s?(3==t.nodeType?e.setStart(t,o):e[a?"setStartAfter":"setStartBefore"](t),e.collapse(!0)):(3==t.nodeType?e.setStart(t,o):e.setStartBefore(t),3==i.nodeType?e.setEnd(i,d):e.setEndAfter(i)),this.caret&&this.removeCaret(e)}}),T=/[\u0009-\u000d]|\u0020|\u00a0|\ufeff|\.|,|;|:|!|\(|\)|\?/,S={nodes:function(e){var t=S.textNodes(e);return t.length||(e.selectNodeContents(e.commonAncestorContainer),(t=S.textNodes(e)).length||(t=r.significantChildNodes(e.commonAncestorContainer))),t},textNodes:function(e){return new k(e).enumerate().filter(function(e){return r.allowsTextContent(e.parentElement)})},editableTextNodes:function(e){var t=s.Immutables&&s.Immutables.immutableParent,i=[];return t&&!t(e.commonAncestorContainer)&&(i=new y(e).enumerate().filter(function(e){return r.allowsTextContent(e.parentElement)})),i},documentFromRange:function(e){var t=e.startContainer;return 9==t.nodeType?t:t.ownerDocument},createRange:function(e){return e.createRange()},selectRange:function(e){var t=S.image(e);t&&(e.setStartAfter(t),e.setEndAfter(t));var i=c.selectionFromRange(e);i.removeAllRanges(),i.addRange(e)},stringify:function(e){return t.format("{0}:{1} - {2}:{3}",r.name(e.startContainer),e.startOffset,r.name(e.endContainer),e.endOffset)},split:function(e,t,i){function n(n){var s=e.cloneRange();s.collapse(n),s[n?"setStartBefore":"setEndAfter"](t);var a=s.extractContents();i&&(a=r.trim(a)),r[n?"insertBefore":"insertAfter"](a,t)}n(!0),n(!1)},mapAll:function(t,i){var n=[];return new g(t).traverse(function(t){var s=i(t);s&&0>e.inArray(s,n)&&n.push(s)}),n},getAll:function(e,t){var i=t;return"string"==typeof t&&(t=function(e){return r.is(e,i)}),S.mapAll(e,function(e){if(t(e))return e})},getMarkers:function(e){return S.getAll(e,function(e){return"k-marker"==e.className})},image:function(e){var t=S.getAll(e,"img");if(1==t.length)return t[0]},isStartOf:function(e,t){if(0!==e.startOffset)return!1;for(var i=e.cloneRange();0===i.startOffset&&i.startContainer!=t;){for(var n=r.findNodeIndex(i.startContainer),s=i.startContainer.parentNode;n>0&&s[n-1]&&r.insignificant(s[n-1]);)n--;i.setStart(s,n)}return 0===i.startOffset&&i.startContainer==t},isEndOf:function(e,t){var i=e.cloneRange();i.collapse(!1);var n=i.startContainer;r.isDataNode(n)&&i.startOffset==r.getNodeLength(n)&&(i.setStart(n.parentNode,r.findNodeIndex(n)+1),i.collapse(!0)),i.setEnd(t,r.getNodeLength(t));var s=[];return new g(i).traverse(function(e){r.insignificant(e)||r.isDataNode(e)&&/^[\ufeff]*$/.test(e.nodeValue)||s.push(e)}),!s.length},wrapSelectedElements:function(e){for(var t=r.editableParent(e.startContainer),i=r.editableParent(e.endContainer);0===e.startOffset&&e.startContainer!=t;)e.setStart(e.startContainer.parentNode,r.findNodeIndex(e.startContainer));for(;function(e,t){var i=r.getNodeLength(t);if(e==i)return!0;for(var n=e;n<i;n++)if(!r.insignificant(t.childNodes[n]))return!1;return!0}(e.endOffset,e.endContainer)&&e.endContainer!=i;)e.setEnd(e.endContainer.parentNode,r.findNodeIndex(e.endContainer)+1);return e},expand:function(e){var t=e.cloneRange(),i=t.startContainer.childNodes[0===t.startOffset?0:t.startOffset-1],n=t.endContainer.childNodes[t.endOffset];if(!l(i)||!l(n))return t;var s=i.nodeValue,a=n.nodeValue;if(!s||!a)return t;var r=s.split("").reverse().join("").search(T),o=a.search(T);return r&&o&&(o=-1==o?a.length:o,r=-1==r?0:s.length-r,t.setStart(i,r),t.setEnd(n,o)),t},isExpandable:function(e){var t=e.startContainer,i=S.documentFromRange(e);if(t==i||t==i.body)return!1;var n=e.cloneRange(),s=t.nodeValue;if(!s)return!1;var a=s.substring(0,n.startOffset),r=s.substring(n.startOffset),o=0,l=0;return a&&(o=a.split("").reverse().join("").search(T)),r&&(l=r.search(T)),o&&l}};n(s,{SelectionUtils:c,W3CRange:p,RangeIterator:g,W3CSelection:v,RangeEnumerator:k,RestorePoint:x,Marker:C,RangeUtils:S})}(window.kendo.jQuery),ny=window.kendo.jQuery,nC=(nx=window.kendo).Class,nS=(nT=nx.ui.editor).Dom,nI=nx.template,nD=nT.RangeUtils,nF=["ul","ol","tbody","thead","table"],nE="k-immutable",nA="[k-immutable]",nz=function(e){return ny(e).is("body,.k-editor")},nP=function(e){return e.getAttribute&&"false"==e.getAttribute("contenteditable")},nH=function(e){return nS.closestBy(e,nP,nz)},nN=function(e){return!!nH(e.commonAncestorContainer)||!(!nH(e.startContainer)&&!nH(e.endContainer)||0!==nD.editableTextNodes(e).length)},nR=function(e){for(var t="",i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=e||10;n>0;--n)t+=i.charAt(Math.round(Math.random()*(i.length-1)));return t},nO=function(e){var t=e?e.options:void 0;t&&t.finder&&t.finder._initOptions({immutables:!0})},(nM=nC.extend({init:function(e){this.editor=e,this.serializedImmutables={},this.options=ny.extend({},e&&e.options&&e.options.immutables);var t=e.toolbar.tools;nO(t.justifyLeft),nO(t.justifyCenter),nO(t.justifyRight),nO(t.justifyFull)},serialize:function(e){var t,i=this._toHtml(e);return -1===i.indexOf(nE)?(t=this.randomId(),i=i.replace(/>/,' k-immutable="'+t+'">')):t=i.match(/k-immutable\s*=\s*['"](.*)['"]/)[1],this.serializedImmutables[t]=e,i},_toHtml:function(e){var t,i=this.options.serialization;switch(typeof i){case"string":return nI(i)(e);case"function":return i(e);default:return"<"+(t=nS.name(e))+"></"+t+">"}},deserialize:function(e){var t=this,i=this.options.deserialization;ny(nA,e).each(function(){var e=this.getAttribute(nE),n=t.serializedImmutables[e];nx.isFunction(i)&&i(this,n),ny(this).replaceWith(n)}),t.serializedImmutables={}},randomId:function(e){return nR(e)},keydown:function(e,t){var i,n,s=(i=e.keyCode)===(n=nx.keys).BACKSPACE||i==n.DELETE;if(s&&this._cancelDeleting(e,t)||!s&&this._cancelTyping(e,t))return e.preventDefault(),!0},_cancelTyping:function(e,t){var i=this.editor.keyboard;return t.collapsed&&!i.typingInProgress&&i.isTypingKey(e)&&nN(t)},_cancelDeleting:function(e,t){var i=nx.keys,n=e.keyCode===i.BACKSPACE,s=e.keyCode==i.DELETE;if(!n&&!s)return!1;var a=!1;if(t.collapsed){if(nN(t))return!0;var r=this.nextImmutable(t,s);if(r&&n){var o=nS.closest(t.commonAncestorContainer,"li");if(o){var l=nS.closest(r,"li");if(l&&l!==o)return a}}if(r&&!nS.tableCell(r)){if(nS.parentOfType(r,nF)===nS.parentOfType(t.commonAncestorContainer,nF)){for(;r&&1==r.parentNode.childNodes.length;)r=r.parentNode;if(nS.tableCell(r))return a;this._removeImmutable(r,t)}a=!0}}return a},nextImmutable:function(e,t){var i=e.commonAncestorContainer;if(nS.isBom(i)||t&&nD.isEndOf(e,i)||!t&&nD.isStartOf(e,i)){var n=this._nextNode(i,t);if(n&&nS.isBlock(n)&&!nH(n))for(;n&&n.children&&n.children[t?0:n.children.length-1];)n=n.children[t?0:n.children.length-1];return nH(n)}},_removeImmutable:function(e,t){var i=this.editor,n=new nT.RestorePoint(t,i.body);nS.remove(e),nT._finishUpdate(i,n)},_nextNode:function(e,t){for(var i,n=t?"nextSibling":"previousSibling",s=e;s&&!i;)(i=s[n])&&nS.isDataNode(i)&&/^\s|[\ufeff]$/.test(i.nodeValue)&&(i=(s=i)[n]),i||(s=s.parentNode);return i}})).immutable=nP,nM.immutableParent=nH,nM.expandImmutablesIn=function(e){var t=nH(e.startContainer),i=nH(e.endContainer);(t||i)&&(t&&e.setStartBefore(t),i&&e.setEndAfter(i))},nM.immutablesContext=nN,nM.toolsToBeUpdated=["bold","italic","underline","strikethrough","superscript","subscript","forecolor","backcolor","fontname","fontsize","createlink","unlink","autolink","addcolumnleft","addcolumnright","addrowabove","addrowbelow","deleterow","deletecolumn","mergecells","formatting","cleanformatting"],nM.removeImmutables=function(e){var t,i,n,s={empty:!0};return ny(e).find("[contenteditable='false']").each(function(e,a){n="<"+(t=nS.name(a))+" k-immutable='"+(i=nR())+"'></"+t+">",s[i]={node:a,style:ny(a).attr("style")},s.empty=!1,ny(a).replaceWith(n)}),s},nM.restoreImmutables=function(e,t){var i;ny(e).find(nA).each(function(e,n){i=t[n.getAttribute(nE)],ny(n).replaceWith(i.node),i.style!=ny(i.node).attr("style")&&ny(i.node).removeAttr("style").attr("style",i.style)})},nT.Immutables=nM,nB=window.kendo.jQuery,nV=(nL=window.kendo).Class,nW=(nU=nL.ui.editor).Dom,nj=nU.RestorePoint,nG=nU.Marker,nq=nB.extend,nK=nV.extend({init:function(e){this.options=e,this.restorePoint=new nj(e.range,e.body,{immutables:e.immutables}),this.marker=new nG,this.formatter=e.formatter},getRange:function(){return this.restorePoint.toRange()},lockRange:function(e){return this.marker.add(this.getRange(),e)},releaseRange:function(e){this.marker.remove(e),this.editor.selectRange(e)},undo:function(){var e=this.restorePoint;e.restoreHtml(),this.editor.selectRange(e.toRange())},redo:function(){this.exec()},createDialog:function(e,t){var i=this.editor;return nB(e).appendTo(document.body).kendoWindow(nq({},i.options.dialogOptions,t)).closest(".k-window").toggleClass("k-rtl",nL.support.isRtl(i.wrapper)).end()},exec:function(){var e=this.lockRange(!0);this.formatter.editor=this.editor,this.formatter.toggle(e),this.releaseRange(e)},immutables:function(){return this.editor&&this.editor.options.immutables},expandImmutablesIn:function(e){this.immutables()&&(nL.ui.editor.Immutables.expandImmutablesIn(e),this.restorePoint=new nj(e,this.editor.body))}}),nq(nU,{_finishUpdate:function(e,t){var i=e.selectionRestorePoint=new nj(e.getRange(),e.body),n=new n$(t,i);return n.editor=e,e.undoRedoStack.push(n),e.toolbar.refreshTools(),i},Command:nK,GenericCommand:n$=nV.extend({init:function(e,t){this.body=e.body,this.startRestorePoint=e,this.endRestorePoint=t},redo:function(){nW.removeChildren(this.body),this.body.innerHTML=this.endRestorePoint.html,this.editor.selectRange(this.endRestorePoint.toRange())},undo:function(){nW.removeChildren(this.body),this.body.innerHTML=this.startRestorePoint.html,this.editor.selectRange(this.startRestorePoint.toRange())}})}),function(e,t){var i=window.kendo,n=i.ui,s=n.editor,a=n.Widget,r=e.extend,o=i.keys,l=".kendoEditor",d=s.EditorUtils,h=s.ToolTemplate,u=s.Tool,c=i._outerWidth,p=i._outerHeight,f="overflowAnchor",m=".k-tool-group:visible .k-tool:not(.k-disabled):not([disabled]),.k-tool.k-overflow-anchor:visible,.k-tool-group:visible .k-colorpicker:not(input),.k-tool-group:visible .k-selectbox,.k-tool-group:visible .k-dropdownlist,.k-tool-group:visible .k-combobox .k-input-inner",g={"k-i-sup-script":"superscript","k-i-sub-script":"subscript","k-i-align-left":"justifyLeft","k-i-align-center":"justifyCenter","k-i-align-right":"justifyRight","k-i-align-justify":"justifyFull","k-i-list-unordered":"insertUnorderedList","k-i-list-ordered":"insertOrderedList","k-i-list-roman-upper":"insertUpperRomanList","k-i-list-roman-lower":"insertLowerRomanList","k-i-import":"import","k-i-indent-increase":"indent","k-i-indent-decrease":"outdent","k-i-link-horizontal":"createLink","k-i-unlink-horizontal":"unlink","k-i-image":"insertImage","k-i-file-add":"insertFile","k-i-html":"viewHtml","k-i-foreground-color":"foreColor","k-i-paint":"backColor","k-i-table-insert":"createTable","k-i-table-column-insert-left":"addColumnLeft","k-i-table-column-insert-right":"addColumnRight","k-i-table-row-insert-above":"addRowAbove","k-i-table-row-insert-below":"addRowBelow","k-i-table-row-delete":"deleteRow","k-i-table-column-delete":"deleteColumn","k-i-table-properties":"tableWizard","k-i-table-wizard":"tableWizardInsert","k-i-table-position-left":"tableAlignLeft","k-i-table-position-center":"tableAlignCenter","k-i-table-position-right":"tableAlignRight","k-i-clear-css":"cleanFormatting","k-i-cells-merge-horizontally":"mergeCellsHorizontally","k-i-cells-merge-vertically":"mergeCellsVertically","k-i-cell-split-horizontally":"splitCellHorizontally","k-i-cell-split-vertically":"splitCellVertically","k-i-copy-format":"copyFormat","k-i-apply-format":"applyFormat",".k-i-undo":"undo","k-i-redo":"redo"},v=u.extend({initialize:function(e,t){var i=t.editor.toolbar;e.attr("aria-controls",t.editor.element.attr("id")).on("click",(function(){this.overflowPopup.toggle()}).bind(i))},options:{name:f},command:e.noop,update:e.noop,destroy:e.noop});d.registerTool(f,new v({key:"",ctrl:!0,template:new h({template:d.overflowAnchorTemplate})}));var _=a.extend({init:function(e,t){var n=this;t=r({},t,{name:"EditorToolbar"}),a.fn.init.call(n,e,t),t.popup&&n._initPopup(),t.resizable&&t.resizable.toolbar&&(n._resizeHandler=i.onResize(function(){n.resize(!0)}),n.element.addClass("k-toolbar-resizable"))},events:["execute"],groups:{basic:["bold","italic","underline","strikethrough"],undo:["undo","redo"],scripts:["subscript","superscript"],alignment:["justifyLeft","justifyCenter","justifyRight","justifyFull"],links:["insertImage","insertFile","createLink","unlink"],lists:["insertUnorderedList","insertOrderedList","insertUpperRomanList","insertLowerRomanList","indent","outdent"],tablesInsert:["createTable"],tablesAddDelete:["addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn"],tablesMerge:["mergeCellsHorizontally","mergeCellsVertically","splitCellHorizontally","splitCellVertically"],tablesPosition:["tableAlignLeft","tableAlignCenter","tableAlignRight"],advanced:["viewHtml","cleanFormatting","print","pdf","exportAs","import"],fonts:["fontName","fontSize"],colors:["foreColor","backColor"],formatPainter:["copyFormat","applyFormat"]},overflowFlaseTools:["formatting","fontName","fontSize","foreColor","backColor","insertHtml"],_initPopup:function(){var t=this;this.window=e(this.element).wrap("<div class='editorToolbarWindow' />").parent().prepend("<span class='k-editortoolbar-dragHandle'><span class='k-icon k-i-handler-drag'></span></span>").kendoWindow({title:!1,resizable:!1,draggable:{dragHandle:".k-editortoolbar-dragHandle"},animation:{open:{effects:"fade:in"},close:{effects:"fade:out"}},minHeight:42,visible:!1,autoFocus:!1,actions:[],dragend:function(){this._moved=!0}}).on("mousedown",function(i){e(i.target).is(".k-icon")||(t.preventPopupHide=!0)}).on("focusout",function(){t.options.editor.element.focusout()}).data("kendoWindow")},_toggleOverflowStyles:function(e,t){e.find("> li").toggleClass("k-item",t).find(".k-tool:not(.k-disabled), .k-overflow-button").toggleClass("k-overflow-button",t)},_initOverflowPopup:function(t){var n=this;n.overflowPopup=e("<ul class='k-editor-overflow-popup k-overflow-container k-list-container'></ul>").appendTo("body").kendoPopup({anchor:t,origin:i.support.isRtl(n.element)?"bottom left":"bottom right",position:i.support.isRtl(n.element)?"top left":"top right",copyAnchorStyles:!1,open:function(e){this.element.is(":empty")&&e.preventDefault(),n._toggleOverflowStyles(this.element,!0),t.attr("aria-expanded",!0)},close:function(){t.attr("aria-expanded",!1)},activate:n.focusOverflowPopup.bind(n)}).data("kendoPopup")},items:function(){var e,t,i=this.options.resizable&&this.options.resizable.toolbar;return t=this.element.children().find("> *, select"),i&&(e=this.overflowPopup,t=t.add(e.element.children().find("> *"))),t},focused:function(){var t=i._activeElement(),n=this.window,s=this.overflowPopup;return n&&e(t).closest(n.wrapper).length||s&&s.visible()},toolById:function(e){var t,i=this.tools;for(t in i)if(t.toLowerCase()==e)return i[t]},toolGroupFor:function(t){var i,n=this.groups;if(this.isCustomTool(t))return"custom";for(i in n)if(e.inArray(t,n[i])>=0)return i},bindTo:function(t){var i=this,n=i.window;i._editor&&i._editor.unbind("select",i.resize.bind(i)),i._editor=t,i.options.resizable&&i.options.resizable.toolbar&&t.options.tools.push(f),i.tools=i.expandTools(t.options.tools),i.render(),i.element.find(".k-combobox .k-input-inner").on("keydown",function(t){var i=e(this).closest(".k-combobox").data("kendoComboBox"),n=t.keyCode;n==o.RIGHT||n==o.LEFT?i.close():n==o.DOWN&&(i.dropDown.isOpened()||(t.stopImmediatePropagation(),i.open()))}),i._attachEvents(),i.items().each(function(){var n=i._toolName(this),s="moreVertical"!==n?i.tools[n]:i.tools.overflowAnchor,a=s&&s.options,r=t.options.messages,o=a&&a.tooltip||r[n],l=e(this);if(s&&s.initialize){if("fontSize"==n||"fontName"==n){var d=r[n+"Inherit"];l.find("input").val(d).end().find("span.k-input-inner").text(d).end()}s.initialize(l,{title:i._appendShortcutSequence(o,s),editor:i._editor}),l.closest(".k-dropdownlist",i.element).addClass("k-editor-widget"),l.closest(".k-combobox",i.element).addClass("k-editor-widget"),l.closest(".k-colorpicker",i.element).next(".k-colorpicker").addClass("k-editor-widget")}}),t.bind("select",i.resize.bind(i)),i.update(),n&&n.wrapper.css({top:"",left:"",width:""})},show:function(){var e,t,n,s=this.window,a=this.options.editor,r=i.support.browser;s&&(e=s.wrapper,t=a.element,e.is(":visible")&&this.window.options.visible||(e[0].style.width||e.width(this._getWindowWidth()),s._moved||(n=t.offset(),e.css({top:Math.max(0,parseInt(n.top,10)-p(e)-parseInt(this.window.element.css("padding-bottom"),10)),left:Math.max(0,parseInt(n.left,10))})),(r.msie||r.edge)&&this._overlaps(t)?setTimeout(function(){s.open()},0):s.open()))},_getWindowWidth:function(){var e=this.window.wrapper;return c(this.options.editor.element)-parseInt(e.css("border-left-width"),10)-parseInt(e.css("border-right-width"),10)},_overlaps:function(e){var t=this.window.wrapper,i=t.offset(),n=i.left,s=i.top,a=e.offset(),r=a.left,o=a.top;return!(r+e.width()<n||r>n+t.width()||o+e.height()<s||o>s+t.height())},hide:function(){this.window&&this.window.close()},focus:function(){var e="tabIndex",t=this.element,i=this._editor.element.attr(e);t.attr(e,i||0).trigger("focus").find(m).first().trigger("focus"),i||0===i||t.removeAttr(e)},focusOverflowPopup:function(){var e="tabIndex",t=this.overflowPopup.element,i=this._editor.element.attr(e);t.closest(".k-animation-container").addClass("k-overflow-wrapper"),t.attr(e,i||0).find(m).first().trigger("focus"),i||0===i||t.removeAttr(e)},_appendShortcutSequence:function(e,t){if(!t.key)return e;var i=e+" (";return t.ctrl&&(i+="Ctrl + "),t.shift&&(i+="Shift + "),t.alt&&(i+="Alt + "),i+=t.key+")"},_nativeTools:["insertLineBreak","insertParagraph","redo","undo","autoLink"],tools:{},isCustomTool:function(e){return!(e in i.ui.Editor.defaultTools)},expandTools:function(t){var n,a,o,l,d=this._nativeTools,h=i.deepExtend({},i.ui.Editor.defaultTools),u={};for(a=0;a<t.length;a++)l=(n=t[a]).name,e.isPlainObject(n)?l&&h[l]?(u[l]=r({},h[l]),r(u[l].options,n)):((o=r({cssClass:"k-i-gear",type:"button",title:""},n)).name||(o.name="custom"),o.cssClass="k-"+o.name,o.template||"button"!=o.type||(o.template=s.EditorUtils.buttonTemplate,o.title=o.title||o.tooltip),u[l]={options:o}):h[n]&&(u[n]=h[n]);for(a=0;a<d.length;a++)u[d[a]]||(u[d[a]]=h[d[a]]);return u},render:function(){var t,n,s,a,r,o,l,d,h=this,u=h.tools,c=h._editor.element,p=h.element.empty(),m=h._editor.options.tools,g=0,v=h.options.resizable&&h.options.resizable.toolbar,_=this.overflowFlaseTools;function b(){l.children().length&&(v&&(l.data("position",g),g++),l.appendTo(p))}function k(t){t!==f?(l=e("<li class='k-tool-group' role='presentation' />")).data("overflow",-1===e.inArray(t,_)):l=e("<li class='k-overflow-tools' />")}for(p.empty(),m.length&&(a=m[0].name||m[0]),k(a),d=0;d<m.length;d++)!(t=u[a=m[d].name||m[d]]&&u[a].options)&&e.isPlainObject(a)&&(t=a),n=t&&t.template,"break"==a&&(b(),e("<li class='k-row-break' role='presentation' />").appendTo(h.element),k(a)),n&&(r==(o=h.toolGroupFor(a))&&a!=f||(b(),k(a),r=o),a==f&&(n.options.title=h.options.messages.overflowAnchor),s=e(n=function(e){var n="";return e.getHtml?n=e.getHtml():(i.isFunction(e)||(e=i.template(e)),n=e(t)),i.trim(n)}(n)).appendTo(l),"custom"==o&&(b(),k(a)),t.exec&&s.hasClass("k-tool")&&s.on("click",t.exec.bind(c[0])));b(),e(h.element).children(":has(> .k-tool)").not(".k-overflow-tools").addClass("k-button-group"),h.updateGroups(),v&&h._initOverflowPopup(h.element.find(".k-overflow-anchor")),h.angular("compile",function(){return{elements:h.element}})},updateGroups:function(){e(this.element).children().not(".k-overflow-tools").each(function(){e(this).children().removeClass("k-group-start k-group-end").first().addClass("k-group-start").end().last().addClass("k-group-end").end()})},decorateFrom:function(t){this.items().filter(".k-decorated").each(function(){var i=e(this).data("kendoSelectBox");i&&i.decorate(t)})},destroy:function(){a.fn.destroy.call(this);var e,t=this.tools;for(e in t)t[e].destroy&&t[e].destroy();this.window&&this.window.destroy(),this._resizeHandler&&i.unbindResize(this._resizeHandler),this.overflowPopup&&this.overflowPopup.destroy()},_attachEvents:function(){var t=this.overflowPopup?this.overflowPopup.element:e([]);this.attachToolsEvents(this.element.add(t))},attachToolsEvents:function(t){var n=this,s="[role=button].k-tool",a=s+":not(.k-disabled), [role=button].k-i-import:not(.k-disabled)",r=[s,".k-dropdownlist",".k-colorpicker"].join(",");t.off(l).on("mouseenter"+l,a,function(){e(this).addClass("k-hover")}).on("mouseleave"+l,a,function(){e(this).removeClass("k-hover")}).on("mousedown"+l,r,function(e){e.preventDefault()}).on("keydown"+l,m,function(t){var s,a,r,l=this,d=n.options.resizable&&n.options.resizable.toolbar,h=i.support.isRtl(n.element)?-1:1,u=t.keyCode;function c(e,t,i){var n=t.find(m),s=n.index(l)+e;return i&&(s=Math.max(0,Math.min(n.length-1,s))),n[s]}u==o.RIGHT||u==o.LEFT?a=e(l).is(".k-dropdownlist")?e(l):c(u==o.RIGHT?1*h:-1*h,n.element,!0):d&&(u==o.UP||u==o.DOWN)?a=c(u==o.DOWN?1:-1,n.overflowPopup.element,!0):u==o.HOME?(a=n.element.find(m)[0],t.preventDefault()):u==o.END?(a=(s=n.element.find(m).filter(function(){return"hidden"!==e(this).css("visibility")}))[s.length-1],t.preventDefault()):u==o.ESC?(n.overflowPopup&&n.overflowPopup.visible()&&n.overflowPopup.close(),a=n._editor):u!=o.TAB||t.ctrlKey||t.altKey||(r=d&&e(l.parentElement).hasClass("k-overflow-tool-group")?n.overflowPopup.element:n.element,t.shiftKey?a=c(-1,r):(a=c(1,r))&&"hidden"!==e(a).closest(".k-overflow-tools").css("visibility")||(a=n._editor)),a&&(t.preventDefault(),a.focus()),u!==o.ENTER&&u!==o.SPACEBAR||!e(l).is("button")&&!e(l).is("a")||e(l).attr("href")||n._executeToolCommand(l,t)}).on("click"+l,a,function(e){n._executeToolCommand(this,e)}).on("click"+l,s+".k-disabled",function(e){e.preventDefault()})},_executeToolCommand:function(t,i){var n=e(t);i.preventDefault(),i.stopPropagation(),n.removeClass("k-hover"),n.is("[data-popup]")||this._editor.exec(this._toolName(t))},_toolName:function(t){if(t){var n=t.className;/k-tool\b/i.test(n)&&(n=t.firstChild.className);var s=e.grep(n.split(" "),function(e){return!/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(e)});if(s[0]){var a=s[0];return g[a]&&(a=g[a]),a.indexOf("k-i-")>=0?i.toCamelCase(a.substring(a.indexOf("k-i-")+4)):a.substring(a.lastIndexOf("-")+1)}return"custom"}},refreshTools:function(){var t=this,i=t._editor,n=i.getRange(),a=s.RangeUtils.textNodes(n),r=i.options.immutables,o=t._immutablesContext(n);(a=s.Dom.filterBy(a,s.Dom.htmlIndentSpace,!0)).length||(a=[n.startContainer]),t.items().each(function(){var n=t.tools[t._toolName(this)];if(n){var s=e(this);n.update&&n.update(s,a,i.undoRedoStack),r&&t._updateImmutablesState(n,s,o)}}),this.update()},_immutablesContext:function(e){if(this._editor.options.immutables)return e.collapsed?s.Immutables.immutablesContext(e):0===s.RangeUtils.editableTextNodes(e).length},_updateImmutablesState:function(t,i,n){var a=t.name,r=i,o=t.options.trackImmutables;if(void 0===o&&(o=e.inArray(a,s.Immutables.toolsToBeUpdated)>-1),o){var l=n?"none":"";if(!i.is(".k-tool")){var d=i.data();for(var h in d)if(h.match(/^kendo[A-Z][a-zA-Z]*/)){r=d[h].wrapper;break}}r.css("display",l);var u=r.closest("li");0===u.children(":visible").length&&u.css("display",l)}},update:function(){this.updateGroups()},_resize:function(e){var t=e.width,i=this.options.resizable&&this.options.resizable.toolbar,n=this.overflowPopup,s=this.options.editor.element,a=this.window;this.refreshTools(),i&&(a&&(a.wrapper.width(this._getWindowWidth()),a._moved||a.wrapper.css({left:Math.max(0,parseInt(s.offset().left,10))})),n.visible()&&n.close(!0),this._refreshWidths(),this._shrink(t),this._stretch(t),this._toggleOverflowStyles(this.element,!1),this._toggleOverflowStyles(this.overflowPopup.element,!0),this.element.children("li.k-overflow-tools").css("visibility",n.element.is(":empty")?"hidden":"visible"))},_refreshWidths:function(){this.element.children("li").each(function(t,i){var n=e(i);n.data("outerWidth",c(n,!0))})},_shrink:function(e){var t,i;if(e<this._groupsWidth())for(var n=(i=this._visibleGroups().filter(":not(.k-overflow-tools)")).length-1;n>=0&&(t=i.eq(n),!(e>this._groupsWidth()));n--)this._hideGroup(t)},_stretch:function(e){var t,i;if(e>this._groupsWidth()){i=this._hiddenGroups();for(var n=0;n<i.length&&(t=i.eq(n),!(e<this._groupsWidth())&&this._showGroup(t,e));n++);}},_hiddenGroups:function(){var t=this.overflowPopup,i=this.element.children("li.k-tool-group").filter(":hidden");return(i=i.add(t.element.children("li"))).sort(function(t,i){return e(t).data("position")>e(i).data("position")?1:-1}),i},_visibleGroups:function(){return this.element.children("li.k-tool-group, li.k-overflow-tools").filter(":visible")},_groupsWidth:function(){var t=0;return this._visibleGroups().each(function(){t+=e(this).data("outerWidth")}),Math.ceil(t)},_hideGroup:function(e){if(e.data("overflow")){var t=this.overflowPopup;e.detach().prependTo(t.element).addClass("k-overflow-tool-group")}else e.addClass("k-hidden")},_showGroup:function(t,i){var n,s,a;return!!t.hasClass("k-disabled")||(t.hasClass("k-overflow-tool-group")?a=t.data("outerWidth"):(t.removeClass("k-hidden"),a=c(t,!0),t.addClass("k-hidden")),!!(t.length&&i>this._groupsWidth()+a)&&(t.hasClass("k-overflow-tool-group")?(0===(n=t.data("position"))?t.detach().prependTo(this.element):(s=this.element.children().filter(function(t,i){return e(i).data("position")===n-1}),t.detach().insertAfter(s)),t.removeClass("k-overflow-tool-group")):t.removeClass("k-hidden"),!0))}});e.extend(s,{Toolbar:_})}(window.kendo.jQuery),nY=window.kendo.jQuery,nX=window.kendo,nJ=nY.extend,n0=(nZ=nX.ui.editor).EditorUtils,n1=nZ.Command,n2=nZ.Tool,n3=nZ.ToolTemplate,n9=nZ.Dom,nJ(n6=n1.extend({init:function(e){this.options=e,n1.fn.init.call(this,e),this.attributes=null,this.async=!0},exec:function(){var e,t,i=this,n=i.editor,s=n.options,a=n.options.messages,r=nY(nX.template(n6.template)(a)).appendTo(document.body),o=".k-editor-textarea > textarea";function l(e){e.preventDefault(),r.data("kendoWindow").destroy(),n.immutables&&(n.immutables.serializedImmutables={}),n.focus()}s.serialization.immutables=n.immutables,t=n9.getAllComments(n.body),e=n0.cacheComments(n.value(),t),e=n6.indent(e),e=n0.retrieveComments(e,t),s.serialization.immutables=void 0,this.createDialog(r,{title:a.viewHtml,width:600,height:400,resizable:!0,close:l,visible:!1}).find(o).val(e).end().find(".k-dialog-update").on("click",function(e){s.deserialization.immutables=n.immutables,n.value(r.find(o).val()),s.deserialization.immutables=nQ,l(e),i.change&&i.change(),n.trigger("change")}).end().find(".k-dialog-close").on("click",l).end().data("kendoWindow").center().open(),r.find(o).trigger("focus")}}),{template:"<div class='k-editor-dialog k-popup-edit-form k-viewhtml-dialog'><span class='k-input k-textarea k-input-solid k-input-md k-rounded-md k-editor-textarea'><textarea class='k-input-inner !k-overflow-auto !k-resize-none'></textarea></span><div class='k-edit-buttons'><button class='k-dialog-update k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary'><span class='k-button-text'>#: dialogUpdate #</span></button><button class='k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base'><span class='k-button-text'>#: dialogCancel #</span></button></div></div>",indent:function(e){return e.replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"</$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"")}}),nX.ui.editor.ViewHtmlCommand=n6,nZ.EditorUtils.registerTool("viewHtml",new n2({command:n6,template:new n3({template:n0.buttonTemplate,title:"View HTML"})})),function(e){var t=window.kendo,i=e.extend,n=t.ui.editor,s=n.Tool,a=n.Command,r=n.EditorUtils,o=a.extend({init:function(e){e.formatter=e.formatter();var t=e.formatter.finder;t&&r.formatByName("immutable",t.format)&&t._initOptions({immutables:e.immutables}),a.fn.init.call(this,e)}}),l=s.extend({init:function(e){s.fn.init.call(this,e)},command:function(e){return new o(i(e,{formatter:this.options.formatter}))},update:function(e,t){var i=this.options.finder.isFormatted(t);e.toggleClass("k-selected",i),e.attr("aria-pressed",i)}});e.extend(n,{FormatCommand:o,FormatTool:l})}(window.kendo.jQuery),n5=window.kendo.jQuery,n4=(n8=window.kendo).Class,n7=n8.ui.editor,se=n8.ui.Editor.fn.options.formats,st=n7.EditorUtils,si=n7.Tool,sn=n7.ToolTemplate,ss=n7.FormatTool,sa=n7.Dom,sr=n7.RangeUtils,so=n5.extend,sl=n7.EditorUtils.registerTool,sd=n7.EditorUtils.registerFormat,sh="mousedown.kendoEditor",su="k-marker",sc=n4.extend({init:function(e){this.format=e},numberOfSiblings:function(e){var t,i=0,n=0,s=0,a=e.parentNode;for(t=a.firstChild;t;t=t.nextSibling)t!=e&&(t.className==su?s++:3==t.nodeType?i++:n++);return s>1&&a.firstChild.className==su&&a.lastChild.className==su?0:n+i},findSuitable:function(e,t){if(!t&&this.numberOfSiblings(e)>0)return null;for(var i=e.parentNode,n=this.format[0].tags;!sa.ofType(i,n);){if(this.numberOfSiblings(i)>0)return null;i=i.parentNode}return i},findFormat:function(e){var t,i,n,s,a,r=this.format,o=sa.attrEquals;for(t=0,i=r.length;t<i;t++){if(n=e,s=r[t].tags,a=r[t].attr,n&&sa.ofType(n,s)&&o(n,a))return n;for(;n;)if((n=sa.parentOfType(n,s))&&o(n,a))return n}return null},isFormatted:function(e){var t,i;for(t=0,i=e.length;t<i;t++)if(this.findFormat(e[t]))return!0;return!1}}),sp=n4.extend({init:function(e,t){this.finder=new sc(e),this.attributes=so({},e[0].attr,t),this.tag=e[0].tags[0]},wrap:function(e){return sa.wrap(e,sa.create(e.ownerDocument,this.tag,this.attributes))},activate:function(e,t){this.finder.isFormatted(t)?(this.split(e),this.remove(t)):this.apply(t)},toggle:function(e){var t=(this.immutables()?sr.editableTextNodes:sr.textNodes)(e);t.length>0&&this.activate(e,t)},immutables:function(){return this.editor&&this.editor.options.immutables},apply:function(e){var t,i,n,s,a=[];if(e.length>1)for(t=0,i=e.length;t<i;t++)n=e[t],s=this.format(n,!0),a.push(s);else n=e[0],s=this.format(n,!1);this.consolidate(a)},format:function(e,t){var i=this.finder.findSuitable(e),n=this.attributes,s=n&&n.style||{};if(i)sa.is(i,"font")&&(s.color&&i.removeAttribute("color"),s.fontName&&i.removeAttribute("face"),s.fontSize&&i.removeAttribute("size")),sa.attr(i,n);else{for(;!sa.isBlock(e.parentNode)&&1==e.parentNode.childNodes.length&&"true"!==e.parentNode.contentEditable&&t;)e=e.parentNode;i=this.wrap(e)}return i},remove:function(e){var t,i,n;for(t=0,i=e.length;t<i;t++)(n=this.finder.findFormat(e[t]))&&(this.attributes&&this.attributes.style?(sa.unstyle(n,this.attributes.style),n.style.cssText||n.attributes.class||sa.unwrap(n)):sa.unwrap(n))},split:function(e){var t,i,n=sr.textNodes(e),s=n.length;if(s>0)for(t=0;t<s;t++)(i=this.finder.findFormat(n[t]))&&sr.split(e,i,!0)},consolidate:function(e){for(var t,i;e.length>1;)if(t=e.pop(),i=e[e.length-1],t.previousSibling&&t.previousSibling.className==su&&i.appendChild(t.previousSibling),t.tagName==i.tagName&&t.previousSibling==i&&t.style.cssText==i.style.cssText&&t.className===i.className){for(;t.firstChild;)i.appendChild(t.firstChild);sa.remove(t)}}}),sf=sc.extend({init:function(e,t,i){this.format=e,this.greedyProperty=t,this.fontAttr=i,sc.fn.init.call(this,e)},getInlineCssValue:function(e){var t,i,n,s,a,r,o,l,d,h,u,c,p=e.attributes,f=n8.trim;if(p)for(t=0,i=p.length;t<i;t++){if(s=(n=p[t]).nodeName,a=n.nodeValue,n.specified&&"style"==s){for(l=0,d=(r=f(a||e.style.cssText).split(";")).length;l<d;l++)if((o=r[l]).length){if(u=f((h=o.split(":"))[0].toLowerCase()),c=f(h[1]),u!=this.greedyProperty)continue;return u.indexOf("color")>=0?sa.toHex(c):c}}if(this.fontAttr&&n.specified&&s==this.fontAttr)return u=n.nodeValue,c=n.nodeValue,u.indexOf("color")>=0?sa.toHex(c):c}},getFormatInner:function(e){var t,i,n,s=n5(sa.isDataNode(e)?e.parentNode:e).parentsUntil("[contentEditable]").addBack().toArray().reverse();for(t=0,i=s.length;t<i;t++)if(n="className"==this.greedyProperty?s[t].className:this.getInlineCssValue(s[t]))return n;return"inherit"},getFormat:function(e){var t,i,n=this.getFormatInner(e[0]);for(t=1,i=e.length;t<i;t++)if(n!=this.getFormatInner(e[t]))return"";return n},isFormatted:function(e){return""!==this.getFormat(e)}}),sm=sp.extend({init:function(e,t,i){sp.fn.init.call(this,e,t),this.values=t,this.finder=new sf(e,i),i&&(this.greedyProperty=n8.toCamelCase(i))},activate:function(e,t){var i=this.greedyProperty,n="apply";this.split(e),i&&"inherit"==this.values.style[i]&&(n="remove"),this[n](t)}}),sg=ss.extend({init:function(e){ss.fn.init.call(this,so(e,{finder:new sc(e.format),formatter:function(){return new sp(e.format)}}))}}),s_=(sv=si.extend({update:function(e,t){var i=e.data(this.type);i.close(),i.value(this.finder.getFormat(t))}})).extend({init:function(e){si.fn.init.call(this,e),this.type=n8.support.browser.msie||n8.support.touch?"kendoDropDownList":"kendoComboBox",this.format=[{tags:["span","font"]}],this.finder=new sf(this.format,e.cssAttr,e.fontAttr)},command:function(e){var t=this.options,i=this.format,n={};return new n7.FormatCommand(so(e,{formatter:function(){return n[t.domAttr]=e.value,new sm(i,{style:n},t.cssAttr)}}))},initialize:function(e,t){var i,n,s=t.editor,a=this.options,r=a.name,o=[];a.defaultValue&&(o=[{text:s.options.messages[a.defaultValue[0].text],value:a.defaultValue[0].value}]),i=o.concat(a.items?a.items:s.options[r]||[]),e.attr({title:t.title}),e[this.type]({dataTextField:"text",dataValueField:"value",dataSource:i,change:function(){s._range=n,si.exec(s,r,this.value())},close:function(){setTimeout(function(){s._deleteSavedRange()},0)},highlightFirst:!1}),e.closest(".k-combobox").removeClass("k-"+r).find("*").addBack().attr("unselectable","on");var l=e.data(this.type);l.value("inherit"),l.wrapper.on(sh,".k-select,.k-input-button,.k-input",function(){var e=s.getRange();n=s._containsRange(e)?e:n}).on("keydown.kendoEditor",function(e){e.keyCode===n8.keys.ENTER&&(s._deleteSavedRange(),e.preventDefault())})}}),sb=si.extend({init:function(e){si.fn.init.call(this,e),this.format=[{tags:["span","font"]}],this.finder=new sf(this.format,e.cssAttr)},options:{palette:"websafe",columns:18},update:function(){this._widget.close()},command:function(e){var t=this.options,i=this.format,n={};return new n7.FormatCommand(so(e,{formatter:function(){return n[t.domAttr]=e.value,new sm(i,{style:n},t.cssAttr)}}))},initialize:function(e,t){var i=this,n=t.editor,s=this.name,a=so({},sb.fn.options,this.options),r=a.palette,o=a.columns;(e=this._widget=new n8.ui.ColorPicker(e,{closeOnSelect:!0,views:["palette"],preview:!1,input:!1,buttons:!1,toolIcon:"k-icon k-i-"+st.getToolCssClass(a.name),palette:r,columns:o,change:function(){var t=e.value();n8.support.browser.msie&&i.storedRange&&i._inputFocused&&n.selectRange(i.storedRange),t&&si.exec(n,s,t),delete i.storedRange,delete i._inputFocused,n.focus()},open:function(e){var t=e.sender;i.storedRange=n.getRange(),t._popup.element.on(sh,function(e){n5(e.target).is("input.k-color-value")||e.preventDefault()}),t._popup.element.is("[unselectable='on']")||t._popup.element.attr({unselectable:"on"}).find("*:not(input)").attr("unselectable","on").end().find("input").on("focus",function(){i._inputFocused=!0}),setTimeout(function(){t._popup.element.find(".k-colorpalette").trigger("focus")})},close:function(e){e.sender._popup.element.off(sh),n8.support.browser.msie&&i.storedRange&&i._inputFocused&&n.selectRange(i.storedRange)},activate:function(t){t.preventDefault(),"rgba(255, 255, 255, 0)"!==t.sender._value.toCssRgba()&&e.trigger("change")}})).wrapper.attr({title:t.title,unselectable:"on"}).find("*:not(input)").attr("unselectable","on"),e.value("transparent")}}),so(n7,{InlineFormatFinder:sc,InlineFormatter:sp,DelayedExecutionTool:sv,GreedyInlineFormatFinder:sf,GreedyInlineFormatter:sm,InlineFormatTool:sg,FontTool:s_,ColorTool:sb}),sd("bold",[{tags:["strong","b"]},{tags:["span"],attr:{style:{fontWeight:"bold"}}}]),sl("bold",new sg({key:"B",ctrl:!0,format:se.bold,template:new sn({template:st.buttonTemplate,title:"Bold"})})),sd("italic",[{tags:["em","i"]},{tags:["span"],attr:{style:{fontStyle:"italic"}}}]),sl("italic",new sg({key:"I",ctrl:!0,format:se.italic,template:new sn({template:st.buttonTemplate,title:"Italic"})})),sd("underline",[{tags:["span"],attr:{style:{textDecoration:"underline"}}},{tags:["u"]}]),sl("underline",new sg({key:"U",ctrl:!0,format:se.underline,template:new sn({template:st.buttonTemplate,title:"Underline"})})),sd("strikethrough",[{tags:["del","strike"]},{tags:["span"],attr:{style:{textDecoration:"line-through"}}}]),sl("strikethrough",new sg({format:se.strikethrough,template:new sn({template:st.buttonTemplate,title:"Strikethrough"})})),sd("superscript",[{tags:["sup"]}]),sl("superscript",new sg({format:se.superscript,template:new sn({template:st.buttonTemplate,title:"Superscript"})})),sd("subscript",[{tags:["sub"]}]),sl("subscript",new sg({format:se.subscript,template:new sn({template:st.buttonTemplate,title:"Subscript"})})),sl("foreColor",new sb({cssAttr:"color",fontAttr:"color",domAttr:"color",name:"foreColor",template:new sn({template:st.colorPickerTemplate,title:"Color"})})),sl("backColor",new sb({cssAttr:"background-color",domAttr:"backgroundColor",name:"backColor",template:new sn({template:st.colorPickerTemplate,title:"Background Color"})})),sl("fontName",new s_({cssAttr:"font-family",fontAttr:"face",domAttr:"fontFamily",name:"fontName",defaultValue:[{text:"fontNameInherit",value:"inherit"}],template:new sn({template:st.comboBoxTemplate,title:"Font Name"})})),sl("fontSize",new s_({cssAttr:"font-size",fontAttr:"size",domAttr:"fontSize",name:"fontSize",defaultValue:[{text:"fontSizeInherit",value:"inherit"}],template:new sn({template:st.comboBoxTemplate,title:"Font Size"})})),function(e,t){var i=window.kendo,n=i.Class,s=e.extend,a=i.ui.editor,r=a.Dom,o=a.RangeUtils,l=a.EditorUtils,d=a.Command,h=a.Tool,u=a.ToolTemplate,c=a.InlineFormatter,p=a.InlineFormatFinder,f=o.textNodes,m=o.editableTextNodes,g=a.EditorUtils.registerTool,v=i.keys,_="http://",b=/^\w*:\/\//,k=/[\w\/\$\-_\*\?]/i,w=n.extend({findSuitable:function(e){return r.parentOfType(e,["a"])}}),y=n.extend({init:function(){this.finder=new w},apply:function(e,t){var i,n,s,a,l,d=this.immutables?m(e):f(e);if(t.innerText){n=o.documentFromRange(e),i=o.getMarkers(e),e.deleteContents(),a=r.create(n,"a",t),e.insertNode(a),l=a.parentNode,"a"==r.name(l)&&r.insertAfter(a,l),r.emptyNode(l)&&r.remove(l);for(var h=a,u=0;u<i.length;u++)r.insertAfter(i[u],h),h=i[u];i.length&&(r.insertBefore(n.createTextNode("\uFEFF"),i[1]||i[0]),r.insertAfter(n.createTextNode("\uFEFF"),i[1]||i[0]),e.setStartBefore(i[0]),e.setEndAfter(i[i.length-1]))}else(s=new c([{tags:["a"]}],t)).finder=this.finder,s.apply(d)}}),x=d.extend({init:function(e){var t=this;e.formatter={toggle:function(e){var i=t.immutables()?m(e):f(e);new c([{tags:["a"]}]).remove(i)}},this.options=e,d.fn.init.call(this,e)}}),C=d.extend({init:function(e){var t;this.options=e,d.fn.init.call(this,e),this.formatter=new y,e.url?this.exec=function(){this.formatter.immutables=t,this.formatter.apply(e.range,{href:e.url,innerText:e.text||e.url,target:e.target})}:(this.attributes=null,this.async=!0)},_dialogTemplate:function(){return i.template("<div class=\"k-editor-dialog k-popup-edit-form\"><div class=\"k-edit-form-container\"><div class='k-edit-label'><label for='k-editor-link-url'>#: messages.linkWebAddress #</label></div><div class='k-edit-field'><span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type='text' class='k-input-inner' id='k-editor-link-url'></span></div><div class='k-edit-label k-editor-link-text-row'><label for='k-editor-link-text'>#: messages.linkText #</label></div><div class='k-edit-field k-editor-link-text-row'><span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type='text' class='k-input-inner' id='k-editor-link-text'></span></div><div class='k-edit-label'><label for='k-editor-link-title'>#: messages.linkToolTip #</label></div><div class='k-edit-field'><span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type='text' class='k-input-inner' id='k-editor-link-title'></span></div><div class='k-edit-label'></div><div class='k-edit-field'><input type='checkbox' class='k-checkbox k-checkbox-md k-rounded-md' id='k-editor-link-target'><label for='k-editor-link-target' class='k-checkbox-label'>#: messages.linkOpenInNewWindow #</label></div><div class='k-edit-buttons'><button class=\"k-dialog-insert k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary\"><span class=\"k-button-text\">#: messages.dialogInsert #</span></button><button class=\"k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\"><span class=\"k-button-text\">#: messages.dialogCancel #</span></button></div></div></div>")({messages:this.editor.options.messages})},exec:function(){var t=this.editor.options.messages;this._initialText="",this._range=this.lockRange(!0),this.formatter.immutables=this.immutables();var i=f(this._range),n=i.length?this.formatter.finder.findSuitable(i[0]):null,s=i.length&&"img"==r.name(i[0]),a=this.createDialog(this._dialogTemplate(),{title:t.createLink,close:this._close.bind(this),visible:!1});n&&(this._range.selectNodeContents(n),i=f(this._range)),this._initialText=this.linkText(i),a.find(".k-dialog-insert").on("click",this._apply.bind(this)).end().find(".k-dialog-close").on("click",this._close.bind(this)).end().find(".k-edit-field input").on("keydown",this._keydown.bind(this)).end().find("#k-editor-link-url").val(this.linkUrl(n)).end().find("#k-editor-link-text").val(this._initialText).end().find("#k-editor-link-title").val(n?n.title:"").end().find("#k-editor-link-target").attr("checked",!!n&&"_blank"==n.target).end().find(".k-editor-link-text-row").toggle(!s),this._dialog=a.data("kendoWindow").center().open(),e("#k-editor-link-url",a).trigger("focus").select()},_keydown:function(e){var t=i.keys;e.keyCode==t.ENTER?this._apply(e):e.keyCode==t.ESC&&this._close(e)},_apply:function(t){var n,s,a,o=this._dialog.element,l=e("#k-editor-link-url",o).val(),d=e("#k-editor-link-text",o);l&&l!=_&&(l.indexOf("@")>0&&!/^(\w+:)|(\/\/)/i.test(l)&&(l="mailto:"+l),this.attributes={href:l},(n=e("#k-editor-link-title",o).val())&&(this.attributes.title=n),d.is(":visible")&&((s=i.trim(d.val()))||this._initialText?s&&s!==this._initialText&&(this.attributes.innerText=r.stripBom(s)):this.attributes.innerText=l),a=e("#k-editor-link-target",o).is(":checked"),this.attributes.target=a?"_blank":null,this.formatter.apply(this._range,this.attributes)),this._close(t),this.change&&this.change()},_close:function(e){e.preventDefault(),this._dialog.destroy(),r.windowFromDocument(o.documentFromRange(this._range)).focus(),this.releaseRange(this._range)},linkUrl:function(e){return e?e.getAttribute("href",2):_},linkText:function(e){var t,i="";for(t=0;t<e.length;t++)i+=e[t].nodeValue;return r.stripBom(i||"")},redo:function(){var e=this.lockRange(!0);this.formatter.apply(e,this.attributes),this.releaseRange(e)}}),T=d.extend({init:function(e){d.fn.init.call(this,e),this.formatter=new y},exec:function(){var e=this.detectLink();if(e){var t=this.getRange(),n=new i.ui.editor.Marker,s=t.cloneRange();s.setStart(e.start.node,e.start.offset),s.setEnd(e.end.node,e.end.offset),t=this.lockRange(),n.add(s),this.formatter.apply(s,{href:this._ensureWebProtocol(e.text)}),n.remove(s),this.releaseRange(t)}},detectLink:function(){var e=this.getRange(),t=e.startContainer,i=e.startOffset;return!t.previousSibling&&(r.isBom(t)&&!t.nextSibling||!i&&r.isDataNode(t))&&(t=t.parentNode,i=0),new I(new A({node:t,offset:i,cancelAtNode:function(e){return e&&"a"===r.name(e)}})).detectLink()},changesContent:function(){return!!this.detectLink()},_ensureWebProtocol:function(e){return this._hasProtocolPrefix(e)?e:this._prefixWithWebProtocol(e)},_hasProtocolPrefix:function(e){return b.test(e)},_prefixWithWebProtocol:function(e){return _+e}}),S=h.extend({init:function(t){this.options=t,this.finder=new p([{tags:["a"]}]),h.fn.init.call(this,e.extend(t,{command:x}))},initialize:function(e,t){h.fn.initialize.call(this,e,t),e.addClass("k-disabled")},update:function(e,t){e.toggleClass("k-disabled",!this.finder.isFormatted(t)).removeClass("k-hover")}}),I=n.extend({init:function(e){this.traverser=e,this.start=F(),this.end=F(),this.text=""},detectLink:function(){var e=this.traverser.node,t=this.traverser.offset;if(r.isDataNode(e)){var i=e.data.substring(0,t);if(/\s{2}$/.test(r.stripBom(i)))return}else if(0===t){var n=r.closestEditableOfType(e,r.blockElements);n&&n.previousSibling&&this.traverser.init({node:n.previousSibling})}return this.traverser.traverse(this._detectEnd.bind(this)),this.end.blank()||(this.traverser=this.traverser.clone(this.end),this.traverser.traverse(this._detectStart.bind(this)),this._isLinkDetected())||(new z(this.traverser.extendOptions(this.start)).traverse(this._skipStartPuntuation.bind(this)),this._isLinkDetected()||(this.start=F())),this.start.blank()?null:{start:this.start,end:this.end,text:this.text}},_isLinkDetected:function(){return b.test(this.text)||/^w{3}\./i.test(this.text)},_detectEnd:function(e,t){var i=D(e,k);if(i>-1)return this.end.node=t,this.end.offset=i+1,!1},_detectStart:function(e,t){var i=D(e,/\s/),n=i+1;if(this.text=e.substring(n)+this.text,this.start.node=t,this.start.offset=n,i>-1)return!1},_skipStartPuntuation:function(e,t,i){var n,s=(n=/\w/.exec(e))?n.index:-1,a=s;if(-1===s&&(a=e.length),this.text=this.text.substring(a),this.start.node=t,this.start.offset=a+(0|i),s>-1)return!1}});function D(e,t){for(var i=e.length;i--&&!t.test(e[i]););return i}var F=function(){return{node:null,offset:null,blank:function(){return null===this.node&&null===this.offset}}},E=n.extend({init:function(t){this.node=t.node,this.offset=void 0===t.offset?r.isDataNode(this.node)&&this.node.length||0:t.offset,this.cancelAtNode=t.cancelAtNode||this.cancelAtNode||e.noop},traverse:function(e){e&&(this.cancel=!1,this._traverse(e,this.node,this.offset))},_traverse:function(e,t,i){if(t&&!this.cancel){if(3!==t.nodeType){var n=this.edgeNode(t);return this.cancel=this.cancel||this.cancelAtNode(n),this._traverse(e,n)}var s=t.data;void 0!==i&&(s=this.subText(s,i)),this.cancel=!1===e(s,t,i);var a=this.next(t);if(!a)for(var o=t.parentNode;!a&&r.isInline(o);)a=this.next(o),o=o.parentNode;this.cancel=this.cancel||this.cancelAtNode(a),this._traverse(e,a)}},extendOptions:function(t){return e.extend({node:this.node,offset:this.offset,cancelAtNode:this.cancelAtNode},t||{})},edgeNode:function(e){},next:function(e){},subText:function(e,t){}}),A=E.extend({subText:function(e,t){return e.substring(0,t)},next:function(e){return e.previousSibling},edgeNode:function(e){return e.lastChild},clone:function(e){return new A(this.extendOptions(e))}}),z=E.extend({subText:function(e,t){return e.substring(t)},next:function(e){return e.nextSibling},edgeNode:function(e){return e.firstChild},clone:function(e){return new z(this.extendOptions(e))}});s(i.ui.editor,{LinkFormatFinder:w,LinkFormatter:y,UnlinkCommand:x,LinkCommand:C,AutoLinkCommand:T,UnlinkTool:S,DomTextLinkDetection:I,LeftDomTextTraverser:A,RightDomTextTraverser:z}),g("createLink",new h({key:"K",ctrl:!0,command:C,template:new u({template:l.buttonTemplate,title:"Create Link"})})),g("unlink",new S({key:"K",ctrl:!0,shift:!0,template:new u({template:l.buttonTemplate,title:"Remove Link"})})),g("autoLink",new h({key:[v.ENTER,v.SPACEBAR],keyPressCommand:!0,command:T}))}(window.kendo.jQuery),sk=window.kendo.jQuery,sy=(sw=window.kendo).Class,sx=sk.extend,sC=sw.ui.editor,sT=sw.ui.Editor.fn.options.formats,sS=sC.Dom,sI=sC.ToolTemplate,sD=sC.FormatTool,sE=(sF=sC.EditorUtils).registerTool,sA=sF.registerFormat,sz=sC.RangeUtils,sP=sy.extend({init:function(e){this.format=e},contains:function(e,t){var i,n,s;for(i=0,n=t.length;i<n;i++)if(!(s=t[i])||!sS.isAncestorOrSelf(e,s))return!1;return!0},findSuitable:function(e){var t,i,n,s=this.format,a=[];for(t=0,i=e.length;t<i;t++){for(var r=s.length-1;r>=0&&!(n=sS.ofType(e[t],s[r].tags)?e[t]:sS.closestEditableOfType(e[t],s[r].tags));r--);if(!n||"true"===n.contentEditable)return[];0>sk.inArray(n,a)&&a.push(n)}for(this._resolveListsItems(a),t=0,i=a.length;t<i;t++)if(this.contains(a[t],a))return[a[t]];return a},_resolveListsItems:function(e){var t,i,n;for(t=0;t<e.length;t++)i=e[t],n=(n=sS.is(i,"li")?i:sS.wrapper(i))&&sS.list(n)?n.children[0]:n,sS.is(n,"li")&&(i=e[t]=n)},findFormat:function(e,t){var i,n,s,a,r,o=this.format,l=sS.editableParent(e),d=this.options&&this.options.immutables,h=sC.Immutables;for(i=0,n=o.length;i<n;i++){if(s=e,a=o[i].tags,r=o[i].attr,d&&a&&"immutable"==a[0]){var u=h.immutableParent(s);if(u&&sS.attrEquals(u,r))return s}for(;s&&sS.isAncestorOf(l,s);){if(sS.ofType(s,a)&&sS.attrEquals(s,r))return s;if(t&&t(s))break;s=s.parentNode}}return null},getFormat:function(e){var t,i,n=this,s=function(e){return n.findFormat(sS.isDataNode(e)?e.parentNode:e)},a=s(e[0]);if(!a)return"";for(t=1,i=e.length;t<i;t++)if(a!=s(e[t]))return"";return a.nodeName.toLowerCase()},isFormatted:function(e,t){for(var i=0,n=e.length;i<n;i++)if(!this.findFormat(e[i],t))return!1;return!0}}),sH=sy.extend({init:function(e,t){this.format=e,this.values=t,this.finder=new sP(e)},wrap:function(e,t,i){var n=1==i.length?sS.blockParentOrBody(i[0]):sS.commonAncestor.apply(null,i);sS.isInline(n)&&(n=sS.blockParentOrBody(n));var s,a,r=sS.significantChildNodes(n),o=sS.findNodeIndex(r[0]),l=sS.create(n.ownerDocument,e,t);for(s=0;s<r.length;s++)a=r[s],sS.isBlock(a)?(sS.attr(a,t),l.childNodes.length&&(sS.insertBefore(l,a),l=l.cloneNode(!1)),o=sS.findNodeIndex(a)+1):l.appendChild(a);l.firstChild&&sS.insertAt(n,l,o)},apply:function(e){var t,i=this.values;function n(e){return sx({},e&&e.attr,i)}this._handleImmutables(e,!0);var s=sS.filter("img",e),a=n(sF.formatByName("img",this.format));if(sk.each(s,function(){sS.attr(this,a)}),s.length!=e.length){var r=sS.filter("img",e,!0),o=this.finder.findSuitable(r);if(o.length)for(var l=0,d=o.length;l<d;l++)t=sF.formatByName(sS.name(o[l]),this.format),sS.attr(o[l],n(t));else t=this.format[0],this.wrap(t.tags[0],n(t),r)}},_handleImmutables:function(e,t){if(this.immutables()){var i=sF.formatByName("immutable",this.format);if(i)for(var n=sC.Immutables,s=e.length-1;s>=0;s--){var a=n.immutableParent(e[s]);a&&(a!==e[s+1]&&(t?sS.attr(a,i.attr):sS.unstyle(a,i.attr.style)),e.splice(s,1))}}},immutables:function(){return this.editor&&this.editor.options.immutables},remove:function(e){var t,i,n,s,a;for(this._handleImmutables(e,!1),t=0,i=e.length;t<i;t++)(n=this.finder.findFormat(e[t]))&&(a=sS.name(n),(s=sF.formatByName(a,this.format)).attr.style&&sS.unstyle(n,s.attr.style),s.attr.className&&sS.removeClass(n,s.attr.className))},toggle:function(e){var t=sS.filterBy(sz.nodes(e),sS.htmlIndentSpace,!0);this.finder.isFormatted(t)?this.remove(t):this.apply(t)}}),sN=sy.extend({init:function(e,t){this.format=e,this.values=t,this.finder=new sP(e)},apply:function(e){var t,i,n,s,a,r,o,l,d=this.format,h=sS.blockParents(e),u=d[0].tags[0];if(h.length)for(t=0,i=h.length;t<i;t++)l=h[t],this.immutables()&&sC.Immutables.immutableParent(l)||("li"==(o=sS.name(l))?(n=l.parentNode,s=new sC.ListFormatter(n.nodeName.toLowerCase(),u),(a=this.editor.createRange()).selectNode(h[t]),s.toggle(a)):u&&("td"==o||l.attributes.contentEditable)?new sH(d,this.values).apply(l.childNodes):(r=sS.changeTag(l,u),sS.attr(r,d[0].attr)));else{var c=new sH(d,this.values);c.editor=this.editor,c.apply(e)}},toggle:function(e){var t=sz.textNodes(e);t.length||(e.selectNodeContents(e.commonAncestorContainer),(t=sz.textNodes(e)).length||(t=sS.significantChildNodes(e.commonAncestorContainer))),this.apply(t)},immutables:function(){return this.editor&&this.editor.options.immutables}}),sR=sD.extend({init:function(e){sD.fn.init.call(this,sx(e,{finder:new sP(e.format),formatter:function(){return new sH(e.format)}}))}}),sx(sC,{BlockFormatFinder:sP,BlockFormatter:sH,GreedyBlockFormatter:sN,BlockFormatTool:sR}),sO=["ul","ol","li"],sA("justifyLeft",[{tags:sS.nonListBlockElements,attr:{style:{textAlign:"left"}}},{tags:["img"],attr:{style:{float:"left",display:"",marginLeft:"",marginRight:""}}},{tags:["immutable"],attr:{style:{float:"left",display:"",marginLeft:"",marginRight:""}}},{tags:sO,attr:{style:{textAlign:"left",listStylePosition:""}}}]),sE("justifyLeft",new sR({format:sT.justifyLeft,template:new sI({template:sF.buttonTemplate,title:"Justify Left"})})),sA("justifyCenter",[{tags:sS.nonListBlockElements,attr:{style:{textAlign:"center"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto",float:""}}},{tags:["immutable"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto",float:""}}},{tags:sO,attr:{style:{textAlign:"center",listStylePosition:"inside"}}}]),sE("justifyCenter",new sR({format:sT.justifyCenter,template:new sI({template:sF.buttonTemplate,title:"Justify Center"})})),sA("justifyRight",[{tags:sS.nonListBlockElements,attr:{style:{textAlign:"right"}}},{tags:["img"],attr:{style:{float:"right",display:"",marginLeft:"",marginRight:""}}},{tags:["immutable"],attr:{style:{float:"right",display:"",marginLeft:"",marginRight:""}}},{tags:sO,attr:{style:{textAlign:"right",listStylePosition:"inside"}}}]),sE("justifyRight",new sR({format:sT.justifyRight,template:new sI({template:sF.buttonTemplate,title:"Justify Right"})})),sA("justifyFull",[{tags:sS.nonListBlockElements,attr:{style:{textAlign:"justify"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto",float:""}}},{tags:["immutable"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto",float:""}}},{tags:sO,attr:{style:{textAlign:"justify",listStylePosition:""}}}]),sE("justifyFull",new sR({format:sT.justifyFull,template:new sI({template:sF.buttonTemplate,title:"Justify Full"})})),sM=window.kendo.jQuery,sL=(sB=window.kendo).Class,sV=sM.extend,sW=(sU=sB.ui.editor).Dom,sj=sU.RangeUtils,sG=sU.EditorUtils,sq=sU.Command,sK=sU.ToolTemplate,s$=sU.FormatTool,sY=sU.BlockFormatFinder,sQ=sj.textNodes,sX=sU.EditorUtils.registerTool,sJ=sY.extend({init:function(e){this.tag=e.tag,this.attr=e.attr,this.altAttr=e.altAttr;var t=this.tags=["ul"==this.tag?"ol":"ul",this.tag],i=[{tags:t,attr:this.attr}];this.altAttr&&i.push({tags:t,attr:this.altAttr}),sY.fn.init.call(this,i)},matchesType:function(e){return sW.attrEquals(e,this.attr)||this.altAttr&&sW.attrEquals(e,this.altAttr)},isList:function(e){return sW.list(e)},isFormatted:function(e){var t,i,n=[];for(i=0;i<e.length;i++)(t=this.findFormat(e[i],this.isList))&&sW.name(t)==this.tag&&this.matchesType(t)&&n.push(t);if(n.length<1||n.length!=e.length)return!1;for(i=0;i<n.length&&n[i].parentNode==t.parentNode;i++)if(n[i]!=t)return!1;return!0},findSuitable:function(e){var t=this.findFormat(e[0],this.isList);return t&&sW.name(t)==this.tag?t:null}}),sZ=sL.extend({init:function(e,t){e=sM.isPlainObject(e)?e:{tag:e,attr:null},this.tag=e.tag,this.attr=e.attr,this.finder=new sJ(e),this.unwrapTag=t},isList:function(e){return sW.list(e)},immutables:function(){return this.editor&&!!this.editor.options.immutables},wrap:function(e,t){var i,n,s=sW.create(e.ownerDocument,"li"),a=this.immutables()?sU.Immutables.immutable:sM.noop;for(i=0;i<t.length;i++)if(n=t[i],sW.is(n,"li"))e.appendChild(n);else if(this.isList(n))for(;n.firstChild;)e.appendChild(n.firstChild);else if(sW.is(n,"td")){for(;n.firstChild;)s.appendChild(n.firstChild);e.appendChild(s),n.appendChild(e),e=e.cloneNode(!1),s=s.cloneNode(!1)}else s.appendChild(n),sW.isBlock(n)&&(e.appendChild(s),a(n)||sW.unwrap(n),s=s.cloneNode(!1));s.firstChild&&e.appendChild(s)},containsAny:function(e,t){for(var i=0;i<t.length;i++)if(sW.isAncestorOrSelf(e,t[i]))return!0;return!1},suitable:function(e,t){if("k-marker"==e.className){var i=e.nextSibling;if(i&&sW.isBlock(i)||(i=e.previousSibling)&&sW.isBlock(i))return!1}return this.containsAny(e,t)||sW.isInline(e)||3==e.nodeType},_parentLists:function(e){var t=sW.closestEditable(e);return sM(e).parentsUntil(t,"ul,ol")},split:function(e){var t,i,n,s=sQ(e);if(s.length){t=sW.parentOfType(s[0],["li"]),i=sW.parentOfType(s[s.length-1],["li"]),e.setStartBefore(t),e.setEndAfter(i);for(var a=0,r=s.length;a<r;a++){var o=this.finder.findFormat(s[a]);o&&((n=this._parentLists(o)).length?sj.split(e,n.last()[0],!0):sj.split(e,o,!0))}}},merge:function(e,t){for(var i,n=t.previousSibling;n&&("k-marker"==n.className||3==n.nodeType&&sW.isWhitespace(n));)n=n.previousSibling;if(n&&sW.name(n)==e&&this.finder.matchesType(n)){for(;t.firstChild;)n.appendChild(t.firstChild);sW.remove(t),t=n}for(i=t.nextSibling;i&&("k-marker"==i.className||3==i.nodeType&&sW.isWhitespace(i));)i=i.nextSibling;if(i&&sW.name(i)==e&&this.finder.matchesType(i)){for(;t.lastChild;)i.insertBefore(t.lastChild,i.firstChild);sW.remove(t)}},breakable:function(e){return e!=e.ownerDocument.body&&!/table|tbody|thead|tr|td/.test(sW.name(e))&&!e.attributes.contentEditable},findSuitableNode:function(e){var t,i=this.finder,n=this.tag;return(t=i.findSuitable(e))||(t=(i=new sJ({tag:"ul"==n?"ol":"ul"})).findSuitable(e)),t||(t=(t=(i=new sJ({tag:n})).findSuitable(e))&&this.finder.matchesType(t)?null:t),t},applyOnSection:function(e,t){var i,n=this.tag,s=this.attr,a=sW.closestSplittableParent(t),r=[],o=this.findSuitableNode(t);function l(){r.push(this)}/table|tbody|thead/.test(sW.name(a))?i=sM.map(t,function(e){return sW.parentOfType(e,["td"])}):(i=sW.significantChildNodes(a),sM.grep(i,sW.isBlock).length&&(i=sM.grep(i,(function(e){return this.containsAny(e,t)}).bind(this))),i.length||(i=t));for(var d=0;d<i.length;d++){var h=i[d];(!o||!sW.isAncestorOrSelf(o,h))&&this.suitable(h,t)&&(o&&this.isList(h)?(sM.each(h.children,l),sW.remove(h)):r.push(h))}for(r.length==i.length&&this.breakable(a)&&(r=[a]),o||(o=sW.create(a.ownerDocument,n,s),sW.isBlock(r[0])&&sW.mergeAttributes(r[0],o),sW.insertBefore(o,r[0])),this.wrap(o,r);sW.isBom(o.nextSibling);)sW.remove(o.nextSibling);this.finder.matchesType(o)||(o.removeAttribute("type"),o.style.listStyleType="",sW.mergeAttributes(sW.create(a.ownerDocument,n,s),o,!0)),o&&""===o.getAttribute("type")&&o.removeAttribute("type"),sW.is(o,n)||sW.changeTag(o,n),this.merge(n,o)},apply:function(e){var t,i,n,s,a=0,r=[],o=e.length,l=this.immutables()?sU.Immutables.immutableParent:sM.noop;function d(){t&&r.push({section:t,nodes:i})}for(a=0;a<o;a++)s=l(e[a])||e[a],n=sW.closestEditable(s,["td","th","body"]),t&&n==t?i.push(s):(d(),i=[s],t=n);for(d(),a=0;a<r.length;a++)this.applyOnSection(r[a].section,r[a].nodes)},unwrap:function(e){var t,i,n,s,a=e.ownerDocument.createDocumentFragment(),r=this.unwrapTag;for(i=e.firstChild;i;i=i.nextSibling){for(n=sW.create(e.ownerDocument,r||"p");i.firstChild;)s=i.firstChild,sW.isBlock(s)?(n.firstChild&&(a.appendChild(n),n=sW.create(e.ownerDocument,r||"p")),a.appendChild(s)):n.appendChild(s);n.firstChild&&a.appendChild(n)}(t=this._parentLists(e))[0]?(sW.insertAfter(a,t.last()[0]),t.last().remove()):sW.insertAfter(a,e),sW.remove(e)},remove:function(e){for(var t,i=0,n=e.length;i<n;i++)(t=this.finder.findFormat(e[i]))&&this.unwrap(t)},toggle:function(e){var t=sQ(e),i=e.commonAncestorContainer;if(!t.length&&(e.selectNodeContents(i),!(t=sQ(e)).length)){var n=i.ownerDocument.createTextNode("");e.startContainer.appendChild(n),t=[n],e.selectNode(n.parentNode)}t=sW.filterBy(t,sW.htmlIndentSpace,!0),this.finder.isFormatted(t)?(this.split(e),this.remove(t)):this.apply(t)}}),s0=sq.extend({init:function(e){e.formatter=new sZ({tag:e.tag,attr:e.attr}),sq.fn.init.call(this,e)}}),s1=s$.extend({init:function(e){this.options=e,s$.fn.init.call(this,sV(e,{finder:new sJ(e)}))},command:function(e){return new s0(sV(e,{tag:this.options.tag,attr:this.options.attr}))}}),sV(sU,{ListFormatFinder:sJ,ListFormatter:sZ,ListCommand:s0,ListTool:s1}),sX("insertUnorderedList",new s1({tag:"ul",attr:{style:{listStyleType:""},type:""},template:new sK({template:sG.buttonTemplate,title:"Insert unordered list"})})),sX("insertOrderedList",new s1({tag:"ol",attr:{style:{listStyleType:""},type:""},template:new sK({template:sG.buttonTemplate,title:"Insert ordered list"})})),sX("insertUpperRomanList",new s1({tag:"ol",attr:{style:{listStyleType:"upper-roman"}},altAttr:{type:"I"},template:new sK({template:sG.buttonTemplate,title:"Insert upper roman list"})})),sX("insertLowerRomanList",new s1({tag:"ol",attr:{style:{listStyleType:"lower-roman"}},altAttr:{type:"i"},template:new sK({template:sG.buttonTemplate,title:"Insert lower roman list"})})),s2=window.kendo.jQuery,s6=(s9=(s3=window.kendo).ui.editor).Tool,s5=s9.ToolTemplate,s8=s9.DelayedExecutionTool,s4=s9.Command,s7=s9.Dom,ae=s9.EditorUtils,at=s9.RangeUtils,ai=ae.registerTool,an=s8.extend({init:function(e){s6.fn.init.call(this,s3.deepExtend({},this.options,e)),this.type="kendoSelectBox",this.finder={getFormat:function(){return""}}},options:{items:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],width:110},toFormattingItem:function(e){var t=e.value;if(!t||e.tag||e.className)return e;var i=t.indexOf(".");return 0===i?e.className=t.substring(1):-1==i?e.tag=t:(e.tag=t.substring(0,i),e.className=t.substring(i+1)),e},command:function(e){var t=this,i=e.value;return i=this.toFormattingItem(i),new s9.FormatCommand({range:e.range,formatter:function(){var e,n=(i.tag||i.context||"span").split(","),s=[{tags:n,attr:{className:i.className||""}}];return(e=s2.inArray(n[0],s7.inlineElements)>=0?new s9.GreedyInlineFormatter(s):new s9.GreedyBlockFormatter(s)).editor=t.editor,e}})},initialize:function(e,t){var i,n=t.editor,s=this.options,a=s.name,r=this;r.editor=n,e.width(s.width),i=e.kendoSelectBox({autoWidth:!0,dataTextField:"text",dataValueField:"value",dataSource:s.items||n.options[a],title:n.options.messages[a],autoSize:!0,change:function(){var e=this.dataItem();e&&s6.exec(n,a,e.toJSON())},dataBound:function(){var e,t=this.dataSource.data();for(e=0;e<t.length;e++)t[e]=r.toFormattingItem(t[e])},highlightFirst:!1,template:s3.template('<span unselectable="on" style="display:block;#=(data.style||"")#">#:data.text#</span>')}).data("kendoSelectBox"),e.attr("title",t.title),i.wrapper.attr("title",t.title),e.addClass("k-decorated").closest(".k-dropdownlist, .k-combobox").removeClass("k-"+a).find("*").addBack().attr("unselectable","on")},getFormattingValue:function(e,t){for(var i=0;i<e.length;i++){var n=e[i],s=(n.tag||n.context||"")+(n.className?"."+n.className:"");if(s2(t[0]).closest(s)[0]){if(1==t.length)return n.value;for(var a=1;a<t.length&&s2(t[a]).closest(s)[0];a++)if(a==t.length-1)return n.value}}return""},update:function(e,t){var i=s2(e).data(this.type);if(i){var n,s,a=i.dataSource,r=a.data(),o=s7.commonAncestor.apply(null,t);if(o==s7.closestEditable(o)||this._ancestor!=o){for(this._ancestor=o,n=0;n<r.length;n++)s=r[n].context,r[n].visible=!s||!!s2(o).closest(s).length;a.filter([{field:"visible",operator:"eq",value:!0}]),s8.fn.update.call(this,e,t),i.value(this.getFormattingValue(a.view(),t)),i.wrapper.toggleClass("k-disabled",!a.view().length)}}},destroy:function(){this._ancestor=null}}),as=s4.extend({exec:function(){var e=this.lockRange(!0);this.tagsToClean=this.options.remove||"strong,em,span,sup,sub,del,b,i,u,font".split(","),at.wrapSelectedElements(e);for(var t=at.mapAll(e,function(e){return e}),i=t.length-1;i>=0;i--){var n=t[i];this.immutableParent(n)||this.clean(n)}this.releaseRange(e)},clean:function(e){if(e&&!s7.isMarker(e)){var t=s7.name(e);if("ul"==t||"ol"==t){var i=new s9.ListFormatter(t),n=e.previousSibling,s=e.nextSibling;for(i.unwrap(e);n&&n!=s;n=n.nextSibling)this.clean(n)}else if("blockquote"==t)s7.changeTag(e,"p");else if(1!=e.nodeType||s7.insignificant(e))!function(e){var t=s7.closestEditableOfType(e,["li"]);if(t){var i=new s9.ListFormatter(s7.name(t.parentNode)),n=s3.ui.editor.W3CRange.fromNode(e);n.selectNode(t),i.toggle(n)}}(e);else{for(var a=e.childNodes.length-1;a>=0;a--)this.clean(e.childNodes[a]);e.removeAttribute("style"),e.removeAttribute("class")}s2.inArray(t,this.tagsToClean)>-1&&s7.unwrap(e)}},immutableParent:function(e){return this.immutables()&&s9.Immutables.immutableParent(e)}}),s2.extend(s9,{FormattingTool:an,CleanFormatCommand:as}),ai("formatting",new an({template:new s5({template:ae.dropDownListTemplate,title:"Format"})})),ai("cleanFormatting",new s6({command:as,template:new s5({template:ae.buttonTemplate,title:"Clean formatting"})})),aa=window.kendo.jQuery,ar=window.kendo,ao=aa.extend,ad=(al=ar.ui.editor).EditorUtils,ah=al.Dom,au=ad.registerTool,ac=al.ToolTemplate,ap=al.RangeUtils,af=al.Command,am=ar.keys,ag="#k-editor-image-url",av="#k-editor-image-title",a_="#k-editor-image-width",ab="#k-editor-image-height",ak=af.extend({init:function(e){af.fn.init.call(this,e),this.async=!0,this.attributes={}},insertImage:function(e,t){var i=this.attributes,n=ap.documentFromRange(t);if(i.src&&"http://"!=i.src){var s=function(){setTimeout(function(){i.width||e.removeAttribute("width"),i.height||e.removeAttribute("height"),e.removeAttribute("complete")})};if(!e)return(e=ah.create(n,"img",i)).onload=e.onerror=s,t.deleteContents(),t.insertNode(e),e.nextSibling||ah.insertAfter(n.createTextNode("\uFEFF"),e),s(),t.setStartAfter(e),t.setEndAfter(e),ap.selectRange(t),!0;e.onload=e.onerror=s,ah.attr(e,i),s()}return!1},_dialogTemplate:function(e){return ar.template('<div class="k-editor-dialog k-popup-edit-form"><div class="k-edit-form-container"><div class="k-edit-form-content"># if (showBrowser) { #<div class="k-filebrowser k-imagebrowser"></div># } #<div class=\'k-edit-label\'><label for="k-editor-image-url">#: messages.imageWebAddress #</label></div><div class=\'k-edit-field\'><span class="k-textbox k-input k-input-md k-rounded-md k-input-solid"><input type="text" class="k-input-inner" id="k-editor-image-url"></span></div><div class=\'k-edit-label\'><label for="k-editor-image-title">#: messages.imageAltText #</label></div><div class=\'k-edit-field\'><span class="k-textbox k-input k-input-md k-rounded-md k-input-solid"><input type="text" class="k-input-inner" id="k-editor-image-title"></span></div><div class=\'k-edit-label\'><label for="k-editor-image-width">#: messages.imageWidth #</label></div><div class=\'k-edit-field\'><span class="k-textbox k-input k-input-md k-rounded-md k-input-solid"><input type="text" class="k-input-inner" id="k-editor-image-width"></span></div><div class=\'k-edit-label\'><label for="k-editor-image-height">#: messages.imageHeight #</label></div><div class=\'k-edit-field\'><span class="k-textbox k-input k-input-md k-rounded-md k-input-solid"><input type="text" class="k-input-inner" id="k-editor-image-height"></span></div></div><div class="k-edit-buttons"><button class="k-dialog-insert k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary"><span class="k-button-text">#: messages.dialogInsert #</span></button><button class="k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base"><span class="k-button-text">#: messages.dialogCancel #</span></button></div></div></div>')({messages:this.editor.options.messages,showBrowser:e})},redo:function(){var e=this.lockRange();this.insertImage(ap.image(e),e)||this.releaseRange(e)},exec:function(){var e,t=this,i=t.lockRange(),n=!1,s=ap.image(i),a=s&&s.getAttribute("width")||"",r=s&&s.getAttribute("height")||"",o=ar.support.browser.msie,l=t.editor.options,d=l.messages,h=l.imageBrowser,u=!!(ar.ui.ImageBrowser&&h&&h.transport&&void 0!==h.transport.read),c={title:d.insertImage,visible:!1,resizable:u};function p(a){var r=e.element,o=parseInt(r.find(a_).val(),10),l=parseInt(r.find(ab).val(),10);t.attributes={src:r.find(ag).val().replace(/ /g,"%20"),alt:r.find(av).val()},t.attributes.width=null,t.attributes.height=null,!isNaN(o)&&o>0&&(t.attributes.width=o),!isNaN(l)&&l>0&&(t.attributes.height=l),n=t.insertImage(s,i),f(a),t.change&&t.change()}function f(s){s.preventDefault(),e.destroy(),ah.windowFromDocument(ap.documentFromRange(i)).focus(),n||t.releaseRange(i)}this.expandImmutablesIn(i),c.close=f,u&&(c.width=750);var m=(e=this.createDialog(t._dialogTemplate(u),c).toggleClass("k-filebrowser-dialog",u).find(".k-dialog-insert").on("click",p).end().find(".k-dialog-close").on("click",f).end().find(".k-edit-field input").on("keydown",function(e){e.keyCode==am.ENTER?p(e):e.keyCode==am.ESC&&f(e)}).end().find(ag).val(s?s.getAttribute("src",2):"http://").end().find(av).val(s?s.alt:"").end().find(a_).val(a).end().find(ab).val(r).end().data("kendoWindow")).element;if(u&&(this._imageBrowser=new ar.ui.ImageBrowser(m.find(".k-imagebrowser"),ao({},h)),this._imageBrowser.bind("change",function(e){"f"===e.selected.get("type")&&m.find(ag).val(this.value())}),this._imageBrowser.bind("apply",p)),o){var g=m.closest(".k-window").height();m.css("max-height",g)}e.center().open(),m.find(ag).trigger("focus").select()}}),ar.ui.editor.ImageCommand=ak,au("insertImage",new al.Tool({command:ak,template:new ac({template:ad.buttonTemplate,title:"Insert Image"})})),aw=window.kendo.jQuery,ay=window.kendo,ax=aw.extend,aT=(aC=ay.ui.editor).EditorUtils,aS=aC.Command,aI=aC.Tool,aD=aT.registerTool,aF=aC.ToolTemplate,aE='<div contenteditable="false" class="k-loading-mask" style="width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;"><div class="k-loading-image"></div><div class="k-loading-color"></div></div>',aA=aS.extend({exec:function(){(this.editor._uploadWidget||this._initializeUploadWidget()).element.click()},_initializeUploadWidget:function(){var e=this.editor,t=e.options.import,i=aw('<input id="editorImport" name="files" type="file" />').kendoUpload({success:this._onUploadSuccess.bind(this),progress:this._onUploadProgress.bind(this),select:this._onUploadSelect.bind(this),error:this._onUploadError.bind(this),complete:this._onUploadComplete.bind(this),showFileList:!1,multiple:!1,async:{saveUrl:t.proxyURL,autoUpload:!0,saveField:"file"},validation:{allowedExtensions:t.allowedExtensions,maxFileSize:t.maxFileSize}}).getKendoUpload();return e._uploadWidget=i,i},_onUploadComplete:function(e){this._trigger("complete",e),e.sender.clearAllFiles(),this._removeLoadingOverlay()},_onUploadSuccess:function(e){this.editor.value(e.response.html.replace(/<\/?body>/gi,"")),this._trigger("success",e)},_onUploadProgress:function(e){this._trigger("progress",e)},_onUploadSelect:function(e){this._trigger("select",e),e.files[0].validationErrors||this._initLoadingOverlay()},_onUploadError:function(e){this._trigger("error",e)},_trigger:function(e,t){var i=this.editor,n=i.options.import;"function"==typeof n[e]&&n[e].call(i,t)},_initLoadingOverlay:function(){var e=this.editor.body;aC.Dom.is(e,"body")?this._iframeWrapper=this._container=this.editor.wrapper.find("iframe").parent().css({position:"relative"}).append(aE):this._container=aw(e).append(aE),ay.ui.progress(this._container,!0)},_removeLoadingOverlay:function(){ay.ui.progress(this._container,!1),aw(this._iframeWrapper).css({position:""}),delete this._container,delete this._iframeWrapper}}),ax(aC,{ImportCommand:aA}),aD("import",new aI({command:aA,template:new aF({template:aT.iconTextButtonTemplate,title:"Import"})})),az=window.kendo.jQuery,aH=(aP=window.kendo.ui.editor).Command,aN=aP.GenericCommand,aO=(aR=aP.EditorUtils).registerTool,aM=aP.Tool,aB=aP.ToolTemplate,aL=aP.RestorePoint,aV=az.extend,aU=aH.extend({init:function(e){aH.fn.init.call(this,e),this.managesUndoRedo=!0},exec:function(){var e=this.editor,t=this.options,i=t.range,n=e.body,s=new aL(i,n),a=t.html||t.value||"";e.selectRange(i),e.clipboard.paste(a,t),t.postProcess&&t.postProcess(e,e.getRange());var r=new aN(s,new aL(e.getRange(),n));r.editor=e,e.undoRedoStack.push(r),e.focus()}}),aW=aM.extend({initialize:function(e,t){var i=t.editor,n=this.options,s=n.items?n.items:i.options.insertHtml;this._selectBox=new aP.SelectBox(e,{dataSource:s,dataTextField:"text",dataValueField:"value",change:function(){aM.exec(i,"insertHtml",this.value())},title:i.options.messages.insertHtml,highlightFirst:!1}),e.attr("title",t.title),this._selectBox.wrapper.attr("title",t.title)},command:function(e){return new aU(e)},update:function(e){var t=e.data("kendoSelectBox")||e.find("select").data("kendoSelectBox");t.close(),t.value(t.options.title)}}),aV(aP,{InsertHtmlCommand:aU,InsertHtmlTool:aW}),aO("insertHtml",new aW({template:new aB({template:aR.dropDownListTemplate,title:"Insert HTML",initialValue:"Insert HTML"})})),aj=window.kendo.jQuery,aG=window.kendo,aq=aj.extend,a$=(aK=aG.ui.editor).EditorUtils,aY=aK.Command,aQ=aK.Tool,aX=a$.registerTool,aJ=aK.ToolTemplate,aZ=aY.extend({init:function(e){this.options=e,aY.fn.init.call(this,e),this.attributes=null,this.exportType=e.exportType},exec:function(){var e=this.lockRange(!0);this.postToProxy(),this.releaseRange(e)},postToProxy:function(){this.generateForm().appendTo("body").submit().remove()},generateForm:function(){var e=this.editor.options.exportAs,t=aj("<form>").attr({action:e&&e.proxyURL||"",method:"POST"});return t.append([this.valueInput(),this.exportTypeInput(),this.fileNameInput(),this.antiForgeryInput()]),t},valueInput:function(){var e=this.editor;return aj("<input>").attr({value:e.encodedValue(),name:"value",type:"hidden"})},exportTypeInput:function(){return aj("<input>").attr({value:this.exportType,name:"exportType",type:"hidden"})},fileNameInput:function(){var e=this.editor,t=e.options.exportAs,i=t&&t.fileName||e.element.attr("id")||"editor";return aj("<input>").attr({value:i,name:"fileName",type:"hidden"})},antiForgeryInput:function(){var e=aj("meta[name=csrf-param],meta[name=_csrf_header]").attr("content");return aj("input[name^='__RequestVerificationToken']").clone().add(aj("input[name^='"+e+"']").clone())}}),a0=aQ.extend({init:function(e){aQ.fn.init.call(this,aG.deepExtend({},this.options,e)),this.type="kendoSelectBox"},options:{items:[{text:"Docx",value:"docx"},{text:"Rtf",value:"rtf"},{text:"Pdf",value:"pdf"},{text:"Html",value:"html"},{text:"Plain Text",value:"txt"}],width:140},command:function(e){var t=e.value;return new aK.ExportAsCommand({range:e.range,exportType:t.exportType})},initialize:function(e,t){var i,n=t.editor,s=this.options,a=s.name,r=this.changeHandler.bind(this),o=s.items||n.options[a],l=n.options.messages[a];o.unshift({text:l,value:""}),this.editor=n,e.width(s.width),i=e.kendoSelectBox({dataTextField:"text",dataValueField:"value",dataSource:o,autoSize:!0,change:r,open:function(e){var t=e.sender;t.items()[0].style.display="none",t.unbind("open")},highlightFirst:!1,template:aG.template('<span unselectable="on" style="display:block;#=(data.style||"")#">#:data.text#</span>'),valueTemplate:'<span class="k-editor-export"><span class="k-icon k-i-export"></span><span class="k-export-tool-text">'+l+"</span></span>"}).data("kendoSelectBox"),e.attr("title",t.title),i.wrapper.attr("title",t.title),e.addClass("k-decorated").closest(".k-dropdownlist").removeClass("k-"+a).find("*").addBack().attr("unselectable","on")},changeHandler:function(e){var t=e.sender,i=t.dataItem(),n=i&&i.value;this._exec(n),t.value("")},_exec:function(e){e&&aQ.exec(this.editor,this.options.name,{exportType:e})},destroy:function(){this._ancestor=null}}),aq(aK,{ExportAsTool:a0,ExportAsCommand:aZ}),aX("exportAs",new a0({template:new aJ({template:a$.dropDownListTemplate,title:"Export As"})})),function(e,t){var i=window.kendo,n=i.Class,s=e.extend,a=i.ui.editor,r=a.Dom,o=a.EditorUtils,l=o.registerTool,d=a.Command,h=a.Tool,u=a.ToolTemplate,c=a.RangeUtils,p=r.blockElements,f=a.BlockFormatFinder,m=a.BlockFormatter;function g(t,i){var n="rtl"==e(t).css("direction")?"Right":"Left",s="td"!=r.name(t)?"margin"+n:"padding"+n;if(void 0===i)return t.style[s]||0;i>0?t.style[s]=i+"px":(t.style[s]="",t.style.cssText||t.removeAttribute("style"))}var v=n.extend({init:function(){this.finder=new f([{tags:r.blockElements}])},apply:function(t){t=r.filterBy(t,r.htmlIndentSpace,!0);var i,n,s,a,o,l=this.finder.findSuitable(t),d=[];if((l=this.mapImmutables(l)).length){for(i=0,n=l.length;i<n;i++)r.is(l[i],"li")?e(l[i]).index()?0>e.inArray(l[i].parentNode,d)&&d.push(l[i]):d.push(l[i].parentNode):d.push(l[i]);for(;d.length;)if(s=d.shift(),r.is(s,"li")){a=s.parentNode;var h=(o=e(s).prev("li")).find("ul,ol").last(),u=e(s).children("ul,ol")[0];if(u&&o[0])h[0]?(h.append(s),h.append(e(u).children()),r.remove(u)):(o.append(u),u.insertBefore(s,u.firstChild));else for((u=o.children("ul,ol")[0])||(u=r.create(s.ownerDocument,r.name(a),this.getListTypeAttr(a)),o.append(u));s&&s.parentNode==a;)u.appendChild(s),s=d.shift()}else{var c=parseInt(g(s),10)+30;g(s,c);for(var p=0;p<d.length;p++)e.contains(s,d[p])&&d.splice(p,1)}}else new m([{tags:["p"]}],{style:{marginLeft:30}}).apply(t)},getListTypeAttr:function(e){var t=e.getAttribute("type"),i=e.style.listStyleType;return t?{type:t}:{style:{listStyleType:i}}},mapImmutables:function(t){if(this.immutables){var i=[];return e.map(t,function(t){var n=a.Immutables.immutableParent(t);if(n){if(-1!==e.inArray(n,i))return null;i.push(n)}return n||t})}return t},remove:function(t){t=r.filterBy(t,r.htmlIndentSpace,!0);var i,n,s,a,o,l,d,h,u=this.finder.findSuitable(t);for(n=0,s=(u=this.mapImmutables(u)).length;n<s;n++){if((d=e(u[n])).is("li")){if((o=(a=d.parent()).parent()).is("li,ul,ol")&&!g(a[0])){if(i&&e.contains(i,o[0]))continue;(l=d.nextAll("li")).length&&e(a[0].cloneNode(!1)).appendTo(d).append(l),o.is("li")?d.insertAfter(o):d.appendTo(o),a.children("li").length||a.remove();continue}if(i==a[0])continue;i=a[0]}else i=u[n];h=parseInt(g(i),10)-30,g(i,h)}}}),_=d.extend({init:function(e){e.formatter={toggle:(function(e){var t=new v;t.immutables=this.editor&&this.editor.options.immutables,t.apply(c.nodes(e))}).bind(this)},d.fn.init.call(this,e)}}),b=d.extend({init:function(e){e.formatter={toggle:(function(e){var t=new v;t.immutables=this.editor&&this.editor.options.immutables,t.remove(c.nodes(e))}).bind(this)},d.fn.init.call(this,e)}}),k=h.extend({init:function(e){h.fn.init.call(this,e),this.finder=new f([{tags:p}])},initialize:function(t,i){h.fn.initialize.call(this,t,i),e.extend(this.options,{immutables:i.editor&&i.editor.options.immutables}),t.addClass("k-disabled")},update:function(t,i){var n,s,o,l,d,h,u=this.finder.findSuitable(i);for(o=0,l=u.length;o<l;o++)if(d=u[o],this.options.immutables&&(h=a.Immutables.immutableParent(d))&&(d=h),(n=g(d))||(s=e(d).parents("ul,ol").length,n=r.is(d,"li")&&(s>1||g(d.parentNode))||r.ofType(d,["ul","ol"])&&s>0),n)return void t.removeClass("k-disabled");t.addClass("k-disabled").removeClass("k-hover")}});s(a,{IndentFormatter:v,IndentCommand:_,OutdentCommand:b,OutdentTool:k}),l("indent",new h({command:_,template:new u({template:o.buttonTemplate,title:"Indent"})})),l("outdent",new k({command:b,template:new u({template:o.buttonTemplate,title:"Outdent"})}))}(window.kendo.jQuery),a1=window.kendo.jQuery,a2=window.kendo,a3=a1.extend,a6=(a9=a2.ui.editor).Dom,a5=a9.Command,a8=a9.Tool,a4=a9.BlockFormatter,a7=a6.normalize,re=a9.RangeUtils,rt=a9.EditorUtils.registerTool,ri=a5.extend({init:function(e){this.options=e,a5.fn.init.call(this,e)},_insertMarker:function(e,t){var i,n=a6.create(e,"a");return n.className="k-marker",t.insertNode(n),n.parentNode||((i=t.commonAncestorContainer).innerHTML="",i.appendChild(n)),a7(n.parentNode),n},_moveFocus:function(e,t){if(a6.isEmpty(t))e.setStartBefore(t);else{e.selectNodeContents(t);var i=re.textNodes(e)[0];if(!i){for(;t.childNodes.length&&!a6.is(t.firstChild,"br");)t=t.firstChild;i=t}if(a6.isEmpty(i))e.setStartBefore(i);else{a6.emptyNode(i)&&(i.innerHTML="\uFEFF");var n=i.firstChild||i;a6.isDataNode(n)?e.setStart(n,0):e.setStartBefore(n)}}},shouldTrim:function(e){var t="p,h1,h2,h3,h4,h5,h6".split(","),i=a6.parentOfType(e.startContainer,t),n=a6.parentOfType(e.endContainer,t);return i&&!n||!i&&n},_blankAfter:function(e){for(;e&&(a6.isMarker(e)||""===a6.stripBom(e.nodeValue));)e=e.nextSibling;return!e},exec:function(){var e,t,i,n,s,a,r,o,l,d,h=this.getRange(),u=re.documentFromRange(h),c=a9.emptyElementContent;if(this.expandImmutablesIn(h),d=this.shouldTrim(h),h.deleteContents(),s=this._insertMarker(u,h),a6.stripBomNode(s.previousSibling),a6.stripBomNode(s.nextSibling),a=a6.closestEditableOfType(s,["li"]),r=a6.closestEditableOfType(s,"h1,h2,h3,h4,h5,h6".split(",")),o=a6.is(s.parentNode,"table")&&s.parentNode,a){if(a6.emptyNode(a)){n=a6.create(u,"p"),a6.next(a)&&((l=h.cloneRange()).selectNode(a),re.split(l,a.parentNode));var p=a1("br",a);1==p.length&&p.remove();var f=a.parentNode,m=a.parentNode.children.length,g=m>1&&1==a.childNodes.length&&a.children[0];a6.insertAfter(n,f),a6.remove(1==m?a.parentNode:a),g&&g!==s?(n.appendChild(g),n.appendChild(s)):n.innerHTML=c,i=n}}else r&&this._blankAfter(s)?(n=this._insertParagraphAfter(r),a6.remove(s),i=n):o&&(n=this._insertParagraphAfter(o),a6.remove(s),i=n);i||(a||r||new a4([{tags:["p"]}]).apply([s]),h.selectNode(s),e=a6.parentOfType(s,[a?"li":r?a6.name(r):"p"]),re.split(h,e,d),t=e.previousSibling,a6.is(t,"li")&&t.firstChild&&!a6.is(t.firstChild,"br")&&(t=t.firstChild),i=e.nextSibling,this.clean(t,{links:!0}),this.clean(i,{links:!0}),a6.is(i,"li")&&i.firstChild&&!a6.is(i.firstChild,"br")&&(i=i.firstChild),a6.remove(e),a7(t)),a7(i),this._moveFocus(h,i),h.collapse(!0),a6.scrollTo(i,!0),re.selectRange(h)},_insertParagraphAfter:function(e){var t=this.getRange(),i=re.documentFromRange(t),n=a9.emptyElementContent,s=a6.create(i,"p");return a6.insertAfter(s,e),s.innerHTML=n,s},clean:function(e,t){var i=e;if(e.firstChild&&a6.is(e.firstChild,"br")&&a6.remove(e.firstChild),a6.isDataNode(e)&&!e.nodeValue&&(e=e.parentNode),e){for(var n=!1;e.firstChild&&1==e.firstChild.nodeType;)n=n||a6.significantNodes(e.childNodes).length>1,e=e.firstChild;if(a6.isEmpty(e)||"k-br"==e.className||!/^\s*$/.test(e.innerHTML)||n||(a1(i).find(".k-br").remove(),e.innerHTML=a9.emptyElementContent),t&&t.links)for(;e!=i;){if(a6.is(e,"a")&&a6.emptyNode(e)){a6.unwrap(e);break}e=e.parentNode}}}}),a3(a9,{ParagraphCommand:ri,NewLineCommand:rn=a5.extend({init:function(e){this.options=e,a5.fn.init.call(this,e)},exec:function(){var e=this.getRange();this.expandImmutablesIn(e);var t,i,n=a6.create(re.documentFromRange(e),"br"),s=e.startContainer,a=a2.support.browser,r=a.msie&&a.version<11,o=a6.is(s,"table")&&s;e.deleteContents(),o?a6.insertAfter(n,o):(i=a1(s).closest(".k-br"),e.insertNode(n),i.length&&a6.unwrap(i[0])),a7(n.parentNode),r||n.nextSibling&&!a6.isWhitespace(n.nextSibling)||(n.nextSibling&&a6.isWhitespace(n.nextSibling)&&a1(n.nextSibling).remove(),(t=n.cloneNode(!0)).className="k-br",a6.insertAfter(t,n)),e.setStartAfter(n),e.collapse(!0),a6.scrollTo(n.nextSibling||n,!0),re.selectRange(e)}})}),rt("insertLineBreak",new a8({key:13,shift:!0,command:rn})),rt("insertParagraph",new a8({key:13,command:ri})),rs=window.kendo.jQuery,ra=window.kendo,rr=rs.extend,rl=(ro=ra.ui.editor).EditorUtils,rd=ro.Dom,rh=rl.registerTool,ru=ro.ToolTemplate,rc=ro.RangeUtils,rp=ro.Command,rf=ro.LinkFormatter,rm=rc.textNodes,rg=ra.keys,rv="#k-editor-file-url",r_="#k-editor-file-text",rb="#k-editor-file-title",rk=rp.extend({init:function(e){rp.fn.init.call(this,e),this.formatter=new rf,this.async=!0,this.attributes={}},insertFile:function(e,t){var i=this.attributes,n=rc.documentFromRange(t);if(i.href&&"http://"!=i.href){if(!e)return(e=rd.create(n,"a",{href:i.href})).innerHTML=i.innerHTML,e.title=i.title,t.deleteContents(),t.insertNode(e),e.nextSibling||rd.insertAfter(n.createTextNode("\uFEFF"),e),t.setStartAfter(e),t.setEndAfter(e),rc.selectRange(t),!0;rd.attr(e,i)}return!1},_dialogTemplate:function(e){return ra.template('<div class="k-editor-dialog k-popup-edit-form"><div class="k-edit-form-container"><div class="k-edit-form-content"># if (showBrowser) { #<div class="k-filebrowser"></div># } #<div class=\'k-edit-label\'><label for="k-editor-file-url">#: messages.fileWebAddress #</label></div><div class=\'k-edit-field\'><span class="k-textbox k-input k-input-md k-rounded-md k-input-solid"><input type="text" class="k-input-inner" id="k-editor-file-url"></span></div><div class=\'k-edit-label\'><label for="k-editor-file-text">#: messages.fileText #</label></div><div class=\'k-edit-field\'><span class="k-textbox k-input k-input-md k-rounded-md k-input-solid"><input type="text" class="k-input-inner" id="k-editor-file-text"></span></div><div class=\'k-edit-label\'><label for="k-editor-file-title">#: messages.fileTitle #</label></div><div class=\'k-edit-field\'><span class="k-textbox k-input k-input-md k-rounded-md k-input-solid"><input type="text" class="k-input-inner" id="k-editor-file-title"></span></div></div><div class="k-edit-buttons"><button class="k-dialog-insert k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary"><span class="k-button-text">#: messages.dialogInsert #</span></button><button class="k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base"><span class="k-button-text">#: messages.dialogCancel #</span></button></div></div></div>')({messages:this.editor.options.messages,showBrowser:e})},redo:function(){var e=this.lockRange();this.formatter.apply(e,this.attributes),this.releaseRange(e)},exec:function(){var e,t=this,i=t.lockRange(),n=rm(i),s=!1,a=n.length?this.formatter.finder.findSuitable(n[0]):null,r=ra.support.browser.msie,o=t.editor.options,l=o.messages,d=o.fileBrowser,h=!!(ra.ui.FileBrowser&&d&&d.transport&&void 0!==d.transport.read),u={title:l.insertFile,visible:!1,resizable:h};function c(n){var r=e.element,o=r.find(rv).val().replace(/ /g,"%20"),l=r.find(r_).val(),d=r.find(rb).val();t.attributes={href:o,innerHTML:""!==l?l:o,title:d},s=t.insertFile(a,i),p(n),t.change&&t.change()}function p(n){n.preventDefault(),e.destroy(),rd.windowFromDocument(rc.documentFromRange(i)).focus(),s||t.releaseRange(i)}this.expandImmutablesIn(i),u.close=p,h&&(u.width=750);var f=(e=this.createDialog(t._dialogTemplate(h),u).toggleClass("k-filebrowser-dialog",h).find(".k-dialog-insert").on("click",c).end().find(".k-dialog-close").on("click",p).end().find(".k-edit-field input").on("keydown",function(e){e.keyCode==rg.ENTER?c(e):e.keyCode==rg.ESC&&p(e)}).end().find(rv).val(a?a.getAttribute("href",2):"http://").end().find(r_).val(a?a.innerText:"").end().find(rb).val(a?a.title:"").end().data("kendoWindow")).element;if(h&&(t._fileBrowser=new ra.ui.FileBrowser(f.find(".k-filebrowser"),rr({},d)),t._fileBrowser.bind("change",function(e){"f"===e.selected.get("type")&&f.find(rv).val(this.value())}),t._fileBrowser.bind("apply",c)),r){var m=f.closest(".k-window").height();f.css("max-height",m)}e.center().open(),f.find(rv).trigger("focus").select()}}),ra.ui.editor.FileCommand=rk,rh("insertFile",new ro.Tool({command:rk,template:new ru({template:rl.buttonTemplate,title:"Insert File"})})),rw=window.kendo.jQuery,ry=window.kendo,rx=rw.extend,rT=(rC=ry.ui.editor).Dom,rS=rC.EditorUtils,rI=rC.RangeUtils,rD=rC.Command,rF="kendoEditor",rE="k-active",rA="k-selected",rz="scope",rP="rowgroup",rH="colgroup",rN="colspan",rR="rowspan",rO="table",rM="thead",rB="tbody",rL=rC.Tool,rV=rC.ToolTemplate,rU=rC.InsertHtmlCommand,rW=rC.BlockFormatFinder,rj=rC.BlockFormatTool,rG=rC.FormatCommand,rq=rC.EditorUtils.registerTool,rK=rC.EditorUtils.registerFormat,r$=ry.ui.Editor.fn.options.formats,rY=ry.getTouches,rQ=ry.template,rX=new rW([{tags:[rO]}]),rJ=rU.extend({init:function(e){var t=rw.extend({postProcess:this.postProcess,skipCleaners:!0},e||{});rU.fn.init.call(this,t)},_tableHtml:function(e,t){e=e||1,t=t||1;var i=rQ("<td style='width:#=width#%;'>#=content#</td>")({width:100/t,content:rC.emptyTableCellContent}),n=100/e;return"<table class='k-table' data-last>"+Array(e+1).join("<tr style='height:"+n+"%;'>"+Array(t+1).join(i)+"</tr>")+"</table>"},postProcess:function(e,t){var i=rw("table[data-last]",e.document).removeAttr("data-last");t.setStart(i.find("td")[0],0),t.collapse(!0),e.selectRange(t)},exec:function(){var e=this.options;e.html=this._tableHtml(e.rows,e.columns),rU.fn.exec.call(this)}}),r0=(rZ=rL.extend({initialize:function(e,t){rL.fn.initialize.call(this,e,t);var i=rw(this.options.popupTemplate).appendTo("body").kendoPopup({anchor:e,copyAnchorStyles:!1,open:this._open.bind(this),activate:this._activate.bind(this),close:this._close.bind(this)}).data("kendoPopup");e.on("click",this._toggle.bind(this)).on("keydown",this._keydown.bind(this));var n=this._editor=t.editor;this._popup=i;var s=new rC.TableWizardTool({template:new rV({template:rS.tableWizardButtonTemplate,title:n.options.messages.tableWizard}),command:rC.TableWizardCommand,insertNewTable:!0});rq("tableWizardInsert",s);var a=rw("<div>"+s.options.template.getHtml()+"</div>");a.appendTo(i.element),n.toolbar&&n.toolbar.attachToolsEvents(a)},popup:function(){return this._popup},_activate:rw.noop,_open:function(){this._popup.options.anchor.addClass(rE)},_close:function(){this._popup.options.anchor.removeClass(rE)},_keydown:function(e){var t=ry.keys,i=e.keyCode;i==t.DOWN&&e.altKey||i==t.ENTER||i==t.SPACEBAR?this._popup.open():i==t.ESC&&this._popup.close()},_toggle:function(e){rw(e.target).closest(".k-tool").hasClass("k-disabled")||this.popup().toggle()},update:function(e){var t=this.popup();t.wrapper&&"block"==t.wrapper.css("display")&&t.close(),e.removeClass("k-hover")},destroy:function(){this._popup.destroy()}})).extend({init:function(e){this.cols=8,this.rows=6,rZ.fn.init.call(this,rw.extend(e,{command:rJ,popupTemplate:"<div class='k-ct-popup'><div>"+Array(this.cols*this.rows+1).join("<span class='k-ct-cell k-disabled'></span>")+"</div><div class='k-status'></div></div>"}))},_activate:function(){var e,t,i=this,n=i._popup.element,s=n.find(".k-ct-cell"),a=s.eq(0),r=s.eq(s.length-1),o=ry.getOffset(a),l=ry.getOffset(r),d=i.cols,h=i.rows;function u(i){var n=rw(window);return{row:Math.floor((i.clientY+n.scrollTop()-o.top)/t)+1,col:Math.floor((i.clientX+n.scrollLeft()-o.left)/e)+1}}n.find("*").addBack().attr("unselectable","on"),l.left+=r[0].offsetWidth,l.top+=r[0].offsetHeight,e=(l.left-o.left)/d,t=(l.top-o.top)/h,n.autoApplyNS(rF).on("mousemove",".k-ct-cell",function(e){i._setTableSize(u(e))}).on("mouseleave",".k-ct-cell",function(){i._setTableSize()}).on("down",".k-ct-cell",function(e){e.preventDefault();var t=rY(e)[0];i._exec(u(t.location))})},_valid:function(e){return e&&e.row>0&&e.col>0&&e.row<=this.rows&&e.col<=this.cols},_exec:function(e){this._valid(e)&&(this._editor.exec("createTable",{rows:e.row,columns:e.col}),this._popup.close())},_setTableSize:function(e){var t=this._popup.element,i=t.find(".k-status"),n=t.find(".k-ct-cell"),s=this.cols,a=this._editor.options.messages;this._valid(e)?(i.text(ry.format(a.createTableHint,e.row,e.col)),n.each(function(t){rw(this).toggleClass(rA,t%s<e.col&&t/s<e.row)})):(i.text(a.createTable),n.removeClass(rA))},_keydown:function(e){var t=this._popup.visible();if(rZ.fn._keydown.call(this,e),this._popup.visible()){var i,n=ry.keys,s=e.keyCode,a=Math.max(this._popup.element.find(".k-ct-cell").filter(".k-selected").last().index(),0),r=Math.floor(a/this.cols),o=a%this.cols,l=!1;s!=n.DOWN||e.altKey?s==n.UP?(l=!0,r--):s==n.RIGHT?(l=!0,o++):s==n.LEFT?(l=!0,o--):s==n.TAB&&(i=this._popup.element.find(".k-button")).length>0&&(l=!0,i.trigger("focus")):(l=!0,r++);var d={row:Math.max(1,Math.min(this.rows,r+1)),col:Math.max(1,Math.min(this.cols,o+1))};s==n.ENTER&&t?this._exec(d):this._setTableSize(d),l&&(e.preventDefault(),e.stopImmediatePropagation())}},_open:function(){var e=this._editor.options.messages;rZ.fn._open.call(this),this.popup().element.find(".k-status").text(e.createTable).end().find(".k-ct-cell").removeClass(rA)},_close:function(){rZ.fn._close.call(this),this.popup().element.off("."+rF)}}),r2=(r1=rD.extend({undo:function(){var e=this.restorePoint;e.restoreHtml(),rw(this.editor.body).find(".k-element-resize-handle-wrapper").each(function(e,t){t.remove()}),this.editor.selectRange(e.toRange())},_clearColIndexAttr:function(e){rT.clearTableMappings(e,"col-index")},_mapColIndices:function(e){rT.reMapTableColumns(e,"col-index")},_findRowSpanCell:function(e,t,i){for(var n,s=t;s>=0;s--)if((n=rw(e.rows[s]).find("[col-index="+i+"]")).length)return n},_resetElementResizing:function(e){e._destroyResizings(),e._initializeColumnResizing(),e._initializeRowResizing(),e._initializeElementResizing()},_findNextTdInRow:function(e,t){for(var i,n=e.find("td:last-child"),s=parseInt(n.attr("col-index"),10)+n.prop("colSpan")-1,a=t;a<=s;a++)if((i=e.find("[col-index="+a+"]")).length)return i},_adjustColgroups:function(e,t){for(var i,n,s,a=t.getElementsByTagName("col"),r=t.getElementsByTagName(rH),o=e.cells,l=o.length;a.length>0;)a[0].remove();for(;r.length>0;)r[0].remove();for(i=l-1;i>=0;i--)(s=o[i]).getAttribute(rz)===rH?((n=rT.createEmptyNode(this.editor.document,rH)).setAttribute("span",s.getAttribute(rN)),t.prepend(n)):t.prepend(rT.createEmptyNode(this.editor.document,"col"))},_associateHeaderIds:function(e){rT.clearTableMappings(e,"col-index"),rT.reMapTableColumns(e,"col-index"),rw(e).find("th, td").removeAttr("id headers"),rT.associateWithIds(e)},_getNumberOfColumns:function(e){return rT._getNumberOfColumns(e,"td, th")}})).extend({exec:function(){var e,t,i,n,s,a,r=this.lockRange(!0),o=rT.closest(r.endContainer,["td","th"]),l=rT.closest(o,rO),d=this.options.position||"after";if(!l||this.immutables()&&rC.Immutables.immutableParent(o))this.releaseRange(r);else{this._mapColIndices(l),t=o.parentNode,s=rT.findNodeIndex(t,!0),o.rowSpan>1&&"after"===d&&(t=l.rows[s+o.rowSpan-1]),e=this._getNumberOfColumns(l),rw(n=t.cloneNode(!0)).empty();for(var h=0;h<e;h+=i.prop("colSpan"))(i=rw(t).find("[col-index="+h+"]")).length?i.prop("rowSpan")>1&&"after"===d&&i?i.attr(rR,i.prop("rowSpan")+1):this._appendCell(n,i):(s=rT.findNodeIndex(t,!0),(i=this._findRowSpanCell(t.parentElement,s,h)).closest("tr").index()+i.prop("rowSpan")-1===s&&"after"===d?this._appendCell(n,i):i.attr(rR,i.prop("rowSpan")+1)),(a=rw(n).find("[col-index="+h+"]")).attr(rz)!==rP||a.attr(rR)||a.attr(rz,"row");"before"==d?rT.insertBefore(n,t):rT.insertAfter(n,t),rw(l).find("[headers]").length>0&&this._associateHeaderIds(l),this._clearColIndexAttr(l),this.releaseRange(r),this._resetElementResizing(this.editor)}},_appendCell:function(e,t){var i;(i=t.clone()).html(rC.emptyTableCellContent),i.removeAttr(rR),i.appendTo(e)}}),r3=r1.extend({exec:function(){var e,t,i,n,s=this.lockRange(!0),a=rT.closest(s.endContainer,["td","th"]),r=rT.closest(a,rO),o=r.getElementsByTagName("col"),l=r.getElementsByTagName(rH),d=r&&r.rows,h=this.options.position||"after";if(!a||this.immutables()&&rC.Immutables.immutableParent(a))this.releaseRange(s);else{for(this._mapColIndices(r),e=parseInt(a.getAttribute("col-index"),10),a.colSpan>1&&"after"===h&&(a.setAttribute("col-index",e+a.colSpan-1),e=e+a.colSpan-1),t=0;t<d.length;t++)(i=this._processForColSpan(d[t],e,h,a))&&((n=i.cloneNode()).innerHTML=rC.emptyTableCellContent,n.removeAttribute(rN),n.getAttribute(rz)&&n.getAttribute(rz)===rH&&n.setAttribute(rz,"col"),"before"==h?rT.insertBefore(n,i):rT.insertAfter(n,i),this._resizeCells(n,i));(o.length>0||l.length>0)&&this._adjustColgroups(d[0],r),rw(r).find("[headers]").length>0&&this._associateHeaderIds(r),this._clearColIndexAttr(r),this.releaseRange(s),this._resetElementResizing(this.editor)}},_processForColSpan:function(e,t,i,n){var s,a,r=t-1;if((s=rw(e).find("[col-index="+t+"]")[0])&&s.colSpan>1&&"after"===i&&s!==n)s.colSpan+=1;else{if(s)return s;for(;r>=0&&!((s=rw(e).find("[col-index="+r+"]")[0])&&s.colSpan>1);r--);if(s){if((a=parseInt(s.getAttribute("col-index"),10)+s.colSpan-1)===t&&"after"===i)return s;t<=a&&s.setAttribute(rN,s.colSpan+1)}}},_resizeCells:function(e,t){var i,n,s,a=e.style.width;a&&(i=parseFloat(a),n=a.slice(i.toString().length),s=i/2+n,e.style.width=s,t.style.width=s)}}),r9=r1.extend({exec:function(){var e,t=this.lockRange(),i=rI.mapAll(t,function(e){return rw(e).closest("tr")[0]}),n=rT.closest(t.endContainer,["td","th"]),s=i[0],a=n?n.rowSpan:1,r=rw(i[0]).index(),o=rT.closest(s,rO),l=s.parentElement;if(!o||this.immutables()&&rC.Immutables.immutableParent(s))this.releaseRange(t);else{for(var d=0;d<a;d++)0>i.indexOf(l.rows[r+d])&&i.push(l.rows[r+d]);if(o.rows.length<=i.length)(e=rT.next(o))&&!rT.insignificant(e)||(e=rT.prev(o)),e&&e.rows&&(e=e.rows[0].cells[0]),rT.remove(o),this._resetElementResizing(this.editor);else if(l.rows.length<=i.length)(e=l.nextSibling)||(e=l.previousSibling),rT.remove(l);else{this._mapColIndices(o);for(var h=0;h<i.length;h++)s=i[h],rT.removeTextSiblings(s),e=(e=rT.next(s)||rT.prev(s)).cells[0],this._focusElement(t,e),e=null,this._handleRowSpanCells(o,s),rT.remove(s);this._clearColIndexAttr(o)}rw(o).find("[headers]").length>0?this._associateHeaderIds(o):rT.is(l,rM)&&rw(o).find("[scope]").length>0&&this._adjustColgroups(l.rows[0],o),e&&this._focusElement(t,e),this._resetElementResizing(this.editor)}},_focusElement:function(e,t){e.setStart(t,0),e.collapse(!0),this.editor.selectRange(e)},_handleRowSpanCells:function(e,t){var i,n,s,a,r=rT.findNodeIndex(t,!0),o=e.rows[0],l=o.cells[o.cells.length-1],d=parseInt(l.getAttribute("col-index"),10)+l.colSpan-1;for(i=0;i<=d;i+=n.prop("colSpan"))(n=rw(t).find("[col-index="+i+"]")).length&&n.prop("rowSpan")>1&&((s=rw(a=e.rows[r+1]).find("[col-index="+(i+1)+"]")).length?s.before(n):rw(a).append(n),this._reduceRowSpan(n)),n.length||(n=this._findRowSpanCell(t.parentElement,r,i),this._reduceRowSpan(n))},_reduceRowSpan:function(e){var t=e.prop("rowSpan")-1;t<=1?(e.removeAttr(rR),e.attr(rz)===rP&&e.attr(rz,"row")):e.attr(rR,t)}}),r6=r1.extend({exec:function(){var e,t,i,n,s=this.lockRange(),a=rT.closest(s.endContainer,["td","th"]),r=rT.closest(a,rO),o=r&&r.rows,l=rT.findNodeIndex(a,!0),d=o&&o[0].cells.length,h=r.getElementsByTagName("col"),u=r.getElementsByTagName(rH);if(!a||this.immutables()&&rC.Immutables.immutableParent(a))this.releaseRange(s);else{if(1==d||a.colSpan==d)(e=rT.next(r))&&!rT.insignificant(e)||(e=rT.prev(r)),e&&e.rows&&(e=e.rows[0].cells[0]),rT.remove(r),this._resetElementResizing(this.editor);else{for(rT.removeTextSiblings(a),e=rT.next(a)||rT.prev(a),this._mapColIndices(r),l=parseInt(a.getAttribute("col-index"),10),n=0;n<a.colSpan;n++)for(t=0;t<o.length;t+=i.prop("rowSpan")||1)(i=rw(o[t]).find("[col-index="+(l+n)+"]")).length&&1>=i.prop("colSpan")?i.remove():this._handleColSpanCells(o[t],l+n);this._clearColIndexAttr(r)}(h.length>0||u.length>0)&&this._adjustColgroups(o[0],r),rw(r).find("[headers]").length>0&&this._associateHeaderIds(r),e&&(s.setStart(e,0),s.collapse(!0),this.editor.selectRange(s)),this._resetElementResizing(this.editor)}},_handleColSpanCells:function(e,t){var i=rw(e).find("[col-index="+t+"]");if(i.length&&i.prop("colSpan")>1){var n=i.clone(!0);return i.after(n),this._reduceColSpan(n),n.attr("col-index",parseInt(i.attr("col-index"),10)+1),void i.remove()}for(var s=t;s>=0;s--)if((i=rw(e).find("[col-index="+s+"]")).length)return this._reduceColSpan(i),void i.attr("col-index",parseInt(i.attr("col-index"),10)+1)},_reduceColSpan:function(e){var t=e.prop("colSpan")-1;t<=1?(e.removeAttr(rN),e.attr(rz)===rH&&e.attr(rz,"col")):e.attr(rN,t)}}),r5=r1.extend({exec:function(){var e,t,i,n,s,a=this.lockRange(),r=rT.closest(a.endContainer,["td","th"]);if(r){if(e=rT.closest(r,rO),t=r.parentNode,i=rT.findNodeIndex(r,!0),t.children[i+1],this.immutables()&&rC.Immutables.immutableParent(r))this.releaseRange(a);else{if(this._mapColIndices(e),i=parseInt(rw(r).attr("col-index"),10),!(n=rw(t).find("[col-index="+(i+1+this._getColspan(r)-1)+"]").get(0))||n.rowSpan!==r.rowSpan||r.tagName!==n.tagName)return this._clearColIndexAttr(e),void this.releaseRange(a);s=this._getColspan(r)+this._getColspan(n),rw(r).prop(rN,s).append(rT.emptyNode(n)?"":"<br/>"+n.innerHTML),rw(r).width(r.offsetWidth),rw(n).remove(),"col"===r.getAttribute(rz)&&r.setAttribute(rz,rH),r.getAttribute(rz)===rH&&this._adjustColgroups(t,e),rw(e).find("[headers]").length>0&&this._associateHeaderIds(e),this._clearColIndexAttr(e),this.releaseRange(a),this._resetElementResizing(this.editor)}}else this.releaseRange(a)},_getColspan:function(e){return parseInt(e.getAttribute(rN),10)||1}}),r8=r1.extend({exec:function(){var e,t,i,n,s,a,r,o=this.lockRange(),l=rT.closest(o.endContainer,["td","th"]);if(l){if(e=rT.closest(l,"tr"),t=rT.closest(l,[rM,rB]),i=rT.closest(l,rO),n=rT.findNodeIndex(l,!0),(s=rT.findNodeIndex(e,!0))+1!==t.rows.length){if((a=t.rows[s+this._getRowspan(l)])&&a.children[n],this.immutables()&&rC.Immutables.immutableParent(l))this.releaseRange(o);else{if(this._mapColIndices(i),n=rw(l).attr("col-index"),!(r=rw(a).find("[col-index="+n+"]").get(0))||r.colSpan!==l.colSpan||l.tagName!==r.tagName)return this._clearColIndexAttr(i),void this.releaseRange(o);rw(l).prop(rR,this._getRowspan(l)+this._getRowspan(r)).append(rT.emptyNode(r)?"":"<br/>"+r.innerHTML),"row"===l.getAttribute(rz)&&l.setAttribute(rz,rP),rw(r).remove(),rw(i).find("[headers]").length>0&&this._associateHeaderIds(i),this._clearColIndexAttr(i),this.releaseRange(o)}}else this.releaseRange(o)}else this.releaseRange(o)},_getRowspan:function(e){return parseInt(e.getAttribute(rR),10)||1}}),r4=r1.extend({exec:function(){var e=this.lockRange(),t=this.options.type,i="row"===t?rN:rR,n=rT.closest(e.endContainer,["td","th"]),s=rT.closest(n,[rM,rB]),a=rT.closest(n,rO),r=rT.createEmptyNode(this.editor.document,n.nodeName.toLowerCase());!n||this.immutables()&&rC.Immutables.immutableParent(n)||(this._mapColIndices(a),"row"===t&&rw(n).is("["+i+"]")?this._splitCellHorizontally(n,s,i,r):"column"===t&&rw(n).is("["+i+"]")&&this._splitCellVertically(n,s,i,r),1>=rw(n).prop(i.toLowerCase())&&rw(n).removeAttr(i),rw(a).find("[headers]").length>0&&this._associateHeaderIds(a),this._clearColIndexAttr(a)),this.releaseRange(e)},_getRowspanValue:function(e){return parseInt(e.getAttribute(rR),10)},_getColspanValue:function(e){return parseInt(e.getAttribute(rN),10)},_splitCellHorizontally:function(e,t,i,n){var s=e.rowSpan,a=e.colSpan,r=rw(n),o=Math.floor(a/2);o>1&&r.attr(rN,o),s>1&&r.attr(rR,s),rw(e).prop(i,a-o).after(r),rw(e).width(e.offsetWidth),r.width(r[0].offsetWidth),e.hasAttribute(rz)&&(e.getAttribute(rz)===rH?(r.attr(rz,"col"),e.getAttribute(rN)&&"1"!==e.getAttribute(rN)||e.setAttribute(rz,"col"),this._adjustColgroups(e.parentNode,t.parentNode)):r.attr(rz,e.getAttribute(rz)))},_splitCellVertically:function(e,t,i,n){var s=rT.closest(e,"tr"),a=parseInt(rw(e).attr("col-index"),10),r=rT.findNodeIndex(s,!0),o=e.rowSpan,l=e.colSpan,d=Math.floor(o/2),h=rw(t).find("tr").eq(r+o-d),u=this._findNextTdInRow(h,a+l),c=rw(n);d>1&&c.attr(rR,d),l>1&&c.attr(rN,l),u&&u.length?u.before(c):h.append(c),rw(e).prop(i,o-d),e.hasAttribute(rz)&&(e.getAttribute(rz)===rP?(c.attr(rz,"row"),e.getAttribute(rR)&&"1"!==e.getAttribute(rR)||e.setAttribute(rz,"row")):c.attr(rz,e.getAttribute(rz)))}}),r7=rL.extend({command:function(e){return(e=rx(e,this.options)).action=e.action||"insert",new({row:{insert:r2,delete:r9,merge:r5,split:r4},column:{insert:r3,delete:r6,merge:r8,split:r4}})[e.type][e.action](e)},initialize:function(e,t){rL.fn.initialize.call(this,e,t),e.addClass("k-disabled"),e.attr("disabled","disabled")},update:function(e,t){!0==!rX.isFormatted(t)?(e.parent().addClass("k-hidden k-disabled"),e.attr("disabled","disabled"),e.addClass("k-disabled")):(e.parent().removeClass("k-hidden k-disabled"),e.prop("disabled",!1),e.removeClass("k-disabled"))}}),oe=rG.extend({exec:function(){var e=this.editor;rG.fn.exec.call(this),e.elementResizing&&e.elementResizing._showResizeHandles()}}),ot=rj.extend({initialize:function(e,t){rj.fn.initialize.call(this,e,t),e.addClass("k-disabled"),e.attr("disabled","disabled")},update:function(e,t){var i=!rX.isFormatted(t),n=this.options.finder.isFormatted(t,this.isTable);!0===i?(e.parent().addClass("k-hidden k-disabled"),e.attr("disabled","disabled"),e.addClass("k-disabled")):(e.parent().removeClass("k-hidden k-disabled"),e.prop("disabled",!1),e.removeClass("k-disabled")),e.toggleClass("k-selected",n),e.attr("aria-pressed",n)},command:function(e){return new oe(rx(e,{formatter:this.options.formatter}))},isTable:function(e){return rT.is(e,"table")}}),rx(ry.ui.editor,{PopupTool:rZ,TableCommand:rJ,InsertTableTool:r0,TableFormatTool:ot,TableFormatCommand:oe,TableModificationTool:r7,InsertRowCommand:r2,InsertColumnCommand:r3,DeleteRowCommand:r9,DeleteColumnCommand:r6,MergeCellsHorizontallyCommand:r5,MergeCellsVerticallyCommand:r8,SplitCellCommand:r4}),rq("createTable",new r0({template:new rV({template:rS.buttonTemplate,popup:!0,title:"Create table"})})),rq("addColumnLeft",new r7({type:"column",position:"before",template:new rV({template:rS.buttonTemplate,title:"Add column on the left"})})),rq("addColumnRight",new r7({type:"column",template:new rV({template:rS.buttonTemplate,title:"Add column on the right"})})),rq("addRowAbove",new r7({type:"row",position:"before",template:new rV({template:rS.buttonTemplate,title:"Add row above"})})),rq("addRowBelow",new r7({type:"row",template:new rV({template:rS.buttonTemplate,title:"Add row below"})})),rq("deleteRow",new r7({type:"row",action:"delete",template:new rV({template:rS.buttonTemplate,title:"Delete row"})})),rq("deleteColumn",new r7({type:"column",action:"delete",template:new rV({template:rS.buttonTemplate,title:"Delete column"})})),rq("mergeCellsHorizontally",new r7({type:"row",action:"merge",template:new rV({template:rS.buttonTemplate,title:"Merge Cell Right"})})),rq("mergeCellsVertically",new r7({type:"column",action:"merge",template:new rV({template:rS.buttonTemplate,title:"Merge Cell Down"})})),rq("splitCellHorizontally",new r7({type:"row",action:"split",template:new rV({template:rS.buttonTemplate,title:"Split Cell"})})),rq("splitCellVertically",new r7({type:"column",action:"split",template:new rV({template:rS.buttonTemplate,title:"Split Cell"})})),rK("tableAlignLeft",[{tags:["table"],attr:{style:{marginLeft:"",marginRight:"auto"}}},{tags:["table"],attr:{align:"left"}}]),rq("tableAlignLeft",new ot({format:r$.tableAlignLeft,template:new rV({template:rS.buttonTemplate,title:"Table Align Left"})})),rK("tableAlignCenter",[{tags:["table"],attr:{style:{marginLeft:"auto",marginRight:"auto"}}},{tags:["table"],attr:{align:"center"}}]),rq("tableAlignCenter",new ot({format:r$.tableAlignCenter,template:new rV({template:rS.buttonTemplate,title:"Table Align Center"})})),rK("tableAlignRight",[{tags:["table"],attr:{style:{marginLeft:"auto",marginRight:""}}},{tags:["table"],attr:{align:"right"}}]),rq("tableAlignRight",new ot({format:r$.tableAlignRight,template:new rV({template:rS.buttonTemplate,title:"Table Align Left"})})),oi=window.kendo.jQuery,os=(on=window.kendo).Class,or=(oa=on.ui.editor).RangeUtils,oo=oa.Dom,ol=oa.RestorePoint,od=oa.Marker,oh=on.support.browser,ou=oi.extend,oc=os.extend({init:function(e){this.editor=e;var t=e.options.pasteCleanup;this.cleaners=[new of(t),new om(t),new og(t),new ov(t),new ob(t),new ok(t),new oC(t),new oT(t)]},htmlToFragment:function(e){var t=this.editor.document,i=oo.create(t,"div"),n=t.createDocumentFragment();for(i.innerHTML=e;i.firstChild;)n.appendChild(i.firstChild);return n},isBlock:function(e){return/<(div|p|ul|ol|table|h[1-6])/i.test(e)},_startModification:function(){var e,t,i=this.editor;if(!this._inProgress)return this._inProgress=!0,t=new ol(e=i.getRange(),i.body),oo.persistScrollTop(i.document),{range:e,restorePoint:t}},_endModification:function(e){oa._finishUpdate(this.editor,e.restorePoint),this.editor._selectionChange(),this._inProgress=!1},_contentModification:function(e,t){var i=this,n=i.editor,s=i._startModification();s&&(e.call(i,n,s.range),setTimeout(function(){t.call(i,n,s.range),i._endModification(s)}))},_removeBomNodes:function(e){for(var t=or.textNodes(e),i=0;i<t.length;i++)t[i].nodeValue=oo.stripBom(t[i].nodeValue)||t[i].nodeValue},_onBeforeCopy:function(e){var t=new od;t.add(e),this._removeBomNodes(e),t.remove(e),this.editor.selectRange(e)},oncopy:function(){this._onBeforeCopy(this.editor.getRange())},oncut:function(){this._onBeforeCopy(this.editor.getRange()),this._contentModification(oi.noop,oi.noop)},_fileToDataURL:function(e){var t=oi.Deferred(),i=new FileReader;return e instanceof window.File||!e.getAsFile||(e=e.getAsFile()),i.onload=t.resolve.bind(t),i.readAsDataURL(e),t.promise()},_triggerPaste:function(e,t){var i={html:e||""};i.html=i.html.replace(/\ufeff/g,""),this.editor.trigger("paste",i),this.paste(i.html,t||{})},_handleImagePaste:function(e){if("FileReader"in window&&!(oh.msie&&oh.version>10)){var t=e.clipboardData||e.originalEvent.clipboardData||window.clipboardData||{},i=t.items||t.files;return this._insertImages(i)}},_insertImages:function(e){if(e){var t=oi.grep(e,function(e){return/^image\//i.test(e.type)});if(!oi.grep(e,function(e){return/^text\/html/i.test(e.type)}).length&&t.length){var i=this._startModification();if(i)return oi.when.apply(oi,oi.map(t,this._fileToDataURL)).done((function(){var e=Array.prototype.slice.call(arguments),t=oi.map(e,function(e){return'<img src="'+e.target.result+'" />'}).join("");this._triggerPaste(t),this._endModification(i)}).bind(this)),!0}}},onpaste:function(e){"false"!==this.editor.body.contentEditable&&(this._handleImagePaste(e)?e.preventDefault():(this.expandImmutablesIn(),this._contentModification(function(t,i){var n=oo.create(t.document,"div",{className:"k-paste-container",innerHTML:"\uFEFF"}),s=on.support.browser,a=t.body;if(this._decoreateClipboardNode(n,a),a.appendChild(n),s.webkit&&this._moveToCaretPosition(n,i),s.msie&&s.version<11){e.preventDefault();var r=t.createRange();r.selectNodeContents(n),t.selectRange(r);var o=t.document.body.createTextRange();o.moveToElementText(n),oi(a).off("paste"),o.execCommand("Paste"),oi(a).on("paste",this.onpaste.bind(this))}else{var l=t.createRange();l.selectNodeContents(n),t.selectRange(l)}i.deleteContents()},function(e,t){var i,n="";e.selectRange(t),(i=oi(e.body).children(".k-paste-container")).each(function(){var e=this.lastChild;e&&oo.is(e,"br")&&oo.remove(e),n+=this.innerHTML}),i.remove(),this._triggerPaste(n,{clean:!0})})))},ondragover:function(e){(oh.msie||oh.edge)&&(e.stopPropagation(),e.preventDefault())},ondrop:function(e){if("FileReader"in window){var t=(e.originalEvent||e).dataTransfer||{},i=t.items||t.files;this._insertImages(i)&&e.preventDefault()}},_decoreateClipboardNode:function(e,t){if((oh.msie||oh.webkit)&&((e=oi(e)).css({borderWidth:"0px",width:"0px",height:"0px",overflow:"hidden",margin:"0",padding:"0"}),oh.msie)){var i=oi(t.ownerDocument.documentElement);e.css({fontVariant:"normal",fontWeight:"normal",lineSpacing:"normal",lineHeight:"normal",textDecoration:"none"});var n=i.css("color");n&&e.css("color",n);var s=i.css("fontFamily");s&&e.css("fontFamily",s);var a=i.css("fontSize");a&&e.css("fontSize",a)}},_moveToCaretPosition:function(e,t){var i=this.editor.body,n=oo.offset(e,i),s=this._caretOffset(t,i),a="translate("+(s.left-n.left)+"px,"+(s.top-n.top)+"px)";oi(e).css({"-webkit-transform":a,transform:a})},_caretOffset:function(e,t){var i,n=this.editor,s=oo.create(n.document,"span",{innerHTML:"\uFEFF"}),a=e.startContainer;if(e.collapsed){var r=oo.isDataNode(a);r&&(oo.isBom(a)||0===e.startOffset)?oo.insertBefore(s,a):r&&e.startOffset===a.length?oo.insertAfter(s,a):(e.insertNode(s),i=!0)}else a=a===t?a.childNodes[e.startOffset]:a,oo.insertBefore(s,a);var o=oo.offset(s,t),l=s.previousSibling,d=s.nextSibling;if(oo.remove(s),i&&oo.isDataNode(l)&&oo.isDataNode(d)&&!oo.isBom(l)&&!oo.isBom(d)){var h=l.length;d.data=l.data+d.data,e.setStart(d,h),oo.remove(l),e.collapse(!0),n.selectRange(e)}return o},expandImmutablesIn:function(e){var t=this.editor;if(t&&t.options.immutables){var i=t.body;if(e=e||t.getRange(),on.ui.editor.Immutables.expandImmutablesIn(e),e.startContainer===i&&0===e.startOffset){var n=i.ownerDocument.createTextNode("\uFEFF");i.insertBefore(n,i.childNodes[0]),e.setStartBefore(n)}t.selectRange(e)}},splittableParent:function(e,t){var i,n;if(e)return oo.closestEditableOfType(t,["p","ul","ol"])||t.parentNode;if(i=t.parentNode,n=t.ownerDocument.body,oo.isInline(i))for(;i.parentNode!=n&&!oo.isBlock(i.parentNode);)i=i.parentNode;return i},paste:function(e,t){var i,n,s,a=this.editor;if(this.expandImmutablesIn(),!(t=ou({clean:!1,split:!0},t)).skipCleaners)for(i=0,n=this.cleaners.length;i<n;i++)this.cleaners[i].applicable(e)&&(e=this.cleaners[i].clean(e));t.clean&&(e=(e=e.replace(/(<br>(\s|&nbsp;)*)+(<\/?(div|p|li|col|t))/gi,"$3")).replace(/<(a|span)[^>]*><\/\1>/gi,"")),e=(e=e.replace(/<(a|span|font)([^>]*)> <\/\1>/gi,"<$1$2>&nbsp;</$1>")).replace(/^<li/i,"<ul><li").replace(/li>$/g,"li></ul>");var r=this.isBlock(e);a.focus();var o=a.getRange();o.deleteContents(),o.startContainer==a.document&&o.selectNodeContents(a.body);var l=new od,d=l.addCaret(o),h=this.splittableParent(r,d),u=!1,c=h!=a.body&&!oo.is(h,"td");t.split&&c&&(r||oo.isInline(h))&&(o.selectNode(d),or.split(o,h,!0),u=!0);var p=this.htmlToFragment(e);if(p.firstChild&&"k-paste-container"===p.firstChild.className){var f=[];for(i=0,n=p.childNodes.length;i<n;i++)f.push(p.childNodes[i].innerHTML);p=this.htmlToFragment(f.join("<br />"))}if(oi(s=p.childNodes).filter("table").addClass("k-table").end().find("table").addClass("k-table"),oi(s).each(function(e,t){oo.isBlock(t)&&!oo.isSelfClosing(t)&&""===t.innerHTML&&t.appendChild(a.document.createTextNode("\uFEFF"))}),o.insertNode(p),h=this.splittableParent(r,d),u){for(;d.parentNode!=h;)oo.unwrap(d.parentNode);oo.unwrap(d.parentNode)}oo.normalize(o.commonAncestorContainer),d.style.display="inline",oo.restoreScrollTop(a.document),oo.scrollTo(d),l.removeCaret(o);var m=o.commonAncestorContainer.parentNode;(o.collapsed&&"tbody"==oo.name(m)||o.collapsed&&"thead"==oo.name(m))&&(o.setStartAfter(oi(m).closest("table")[0]),o.collapse(!0));var g=oi(o.commonAncestorContainer.parentNode).closest("table");if(g.get(0)){for(var v=g.parent().contents(),_=v.length-1,b=v.get(_);null!==b.nodeValue&&(" "===b.nodeValue||""===b.nodeValue);)_-=1,b=v.get(_);b!==g.get(0)||g.parents("table").length||oo.insertAfter(oo.createEmptyNode(a.document,"p"),g[0])}a.selectRange(o)}}),of=(op=os.extend({init:function(e){this.options=e||{},this.replacements=[]},clean:function(e,t){var i,n,s=t||this.replacements;for(i=0,n=s.length;i<n;i+=2)e=e.replace(s[i],s[i+1]);return e}})).extend({init:function(e){op.fn.init.call(this,e),this.replacements=[/<(\/?)script([^>]*)>/i,"<$1telerik:script$2>"]},applicable:function(e){return!this.options.none&&/<script[^>]*>/i.test(e)}}),om=op.extend({init:function(e){op.fn.init.call(this,e),this.replacements=[/<span\s+class="Apple-tab-span"[^>]*>\s*<\/span>/gi," ",/\t/gi," ",/&nbsp;&nbsp; &nbsp;/gi," "]},applicable:function(e){return/&nbsp;&nbsp; &nbsp;|class="?Apple-tab-span/i.test(e)}}),og=op.extend({init:function(e){op.fn.init.call(this,e),this.junkReplacements=[/<\?xml[^>]*>/gi,"",/<!--(.|\n)*?-->/g,"",/&quot;/g,"'",/<o:p>&nbsp;<\/o:p>/gi,"&nbsp;",/<\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\n)*?<\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,"",/<\/o>/g,""],this.replacements=this.junkReplacements.concat([/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1",/<br><br>/g,"<BR><BR>",/<br>\n/g,"<br/>",/<br>(?!\n)/g," ",/<table([^>]*)>(\s|&nbsp;)+<t/gi,"<table$1><t",/<tr[^>]*>(\s|&nbsp;)*<\/tr>/gi,"",/<tbody[^>]*>(\s|&nbsp;)*<\/tbody>/gi,"",/<table[^>]*>(\s|&nbsp;)*<\/table>/gi,"",/<BR><BR>/g,"<br>",/^\s*(&nbsp;)+/gi,"",/(&nbsp;|<br[^>]*>)+\s*$/gi,"",/mso-[^;"]*;?/gi,"",/<(\/?)b(\s[^>]*)?>/gi,"<$1strong$2>",/<(\/?)font(\s[^>]*)?>/gi,this.convertFontMatch,/<(\/?)i(\s[^>]*)?>/gi,"<$1em$2>",/style=(["|'])\s*\1/g,"",/(<br[^>]*>)?\n/g,function(e,t){return t?e:" "}])},convertFontMatch:function(e,t,i){var n=/face=['"]([^'"]+)['"]/i.exec(i),s=i&&n&&n[1];return t?"</span>":s?'<span style="font-family:'+s+'">':"<span>"},applicable:function(e){return/class="?Mso/i.test(e)||/style="[^"]*mso-/i.test(e)||/urn:schemas-microsoft-com:office/.test(e)},stripEmptyAnchors:function(e){return e.replace(/<a([^>]*)>\s*<\/a>/gi,function(e,t){return!t||0>t.indexOf("href")?"":e})},listType:function(e,t){var i,n=e.innerHTML,s=oo.innerText(e),a=n.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i),r=a&&a[1],o=/^[a-z\d]/i.test(r),l=function(e){return e.replace(/^(?:&nbsp;|[\u00a0\n\r\s])+/,"")};return a&&(i=!0),n=n.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g,"\xa0"),!i&&/^[\u2022\u00b7\u00a7\u00d8o]\u00a0+/.test(n)||i&&/^.\u00a0+/.test(n)||r&&!o&&t?{tag:"ul",style:this._guessUnorderedListStyle(l(s))}:/^\s*\w+[\.\)][\u00a0 ]{2,}/.test(n)?{tag:"ol",style:this._guessOrderedListStyle(l(s))}:void 0},_convertToLi:function(e){var t;return 1==e.childNodes.length?(t=e.firstChild.nodeType===oo.nodeTypes.TEXT_NODE?oo.innerText(e):e.firstChild.innerHTML.replace(/^\w+[\.\)](&nbsp;)+ /,""),t=this._checkForBullet(t)):t=this._getHtmlNoBullet(e),oo.remove(e),oo.create(document,"li",{innerHTML:t})},_checkForBullet:function(e){var t=oo.create(document,"p",{innerHTML:e});return/^\s*\w+[\.\)]\s+/.test(t.innerText)?this._getHtmlNoBullet(t):e},_getHtmlNoBullet:function(e){var t=oo.name(e);return oo.remove(e.firstChild),3==e.firstChild.nodeType&&/^[ivxlcdm]+\.$/i.test(e.firstChild.nodeValue)&&oo.remove(e.firstChild),/^(&nbsp;|\s)+$/i.test(e.firstChild.innerHTML)&&oo.remove(e.firstChild),"p"!=t?"<"+t+">"+e.innerHTML+"</"+t+">":e.innerHTML},_guessUnorderedListStyle:function(e){return/^[\u2022\u00b7\u00FC\u00D8\u002dv-]/.test(e)?null:/^o/.test(e)?"circle":"square"},_guessOrderedListStyle:function(e){var t=null;return/^\d/.test(e)||(t=(/^[a-z]/.test(e)?"lower-":"upper-")+(/^[ivxlcdm]/i.test(e)?"roman":"alpha")),t},extractListLevels:function(e){return e=e.replace(/style=['"]?[^'"]*?mso-list:\s?[a-zA-Z]+(\d+)\s[a-zA-Z]+(\d+)\s(\w+)/gi,function(e,t,i){return on.format('data-list="{0}" data-level="{1}" {2}',t,i,e)})},_createList:function(e,t){return oo.create(document,e,{style:{listStyleType:t}})},lists:function(e){var t,i,n,s,a,r,o,l,d,h,u,c,p=oi(e).find(oo.blockElements.join(",")),f=-1,m={},g=["p","h1","h2","h3","h4","h5","h6"];for(o=0;o<p.length;o++){var v=(c=oi(l=p[o]).data()).list;if(t=oo.name(l),!oi(l).parents("table").length){var _=this.listType(l,c);if(!(d=_&&_.tag)||0>g.indexOf(t))l.innerHTML?i&&!a&&i.appendChild(l):oo.remove(l);else if(!oh.msie){var b=d+v;m[h=c.level||parseFloat(l.style.marginLeft||0)]||(m[h]={}),(!n||n<0)&&(n=h,s=oi(e).find("[data-list='"+v+"']").last()[0],r=this._createList(d,_.style),oo.insertBefore(r,l),f=h,m[h][b]=r),a=s===l,u=m[h][b],(h>f||!u)&&(u=this._createList(d,_.style),m[h][b]=u,i.appendChild(u)),i=this._convertToLi(l),u.appendChild(i),a?n=f=-1:f=h}}}},removeAttributes:function(e){for(var t,i=e.attributes,n=i.length,s=[],a=function(e){["border","background","padding"].filter(function(t){return 0===e.trim().indexOf(t)}).length>0&&s.push(e.trim())};n--;)"colspan"!=oo.name(i[n])&&("style"!==(t=i[n]).name||"TD"!==e.nodeName&&"TH"!==e.nodeName||t.value.split(";").forEach(a),e.removeAttributeNode(i[n]));s.length>0&&e.setAttribute("style",s.join(";"))},createColGroup:function(e){var t=e.cells,i=oi(e).closest("table"),n=i.children("colgroup");t.length<2||(n.length&&(t=n.children(),n[0].parentNode.removeChild(n[0])),(n=oi(oi.map(t,function(e){var t=e.width;return t&&0!==parseInt(t,10)?on.format('<col style="width:{0}px;"/>',t):"<col />"}).join(""))).is("colgroup")||(n=oi("<colgroup/>").append(n)),n.prependTo(i))},convertHeaders:function(e){var t,i=e.cells,n=oi.map(i,function(e){var t=oi(e).children("p").children("strong")[0];if(t&&"strong"==oo.name(t))return t});if(n.length==i.length){for(t=0;t<n.length;t++)oo.unwrap(n[t]);for(oi(e).closest("table").find("colgroup").after("<thead></thead>").end().find("thead").append(e),t=0;t<i.length;t++)oo.changeTag(i[t],"th")}},removeParagraphs:function(e){var t,i,n,s;for(t=0;t<e.length;t++)for(this.removeAttributes(e[t]),i=0,n=(s=oi(e[t]).children("p")).length;i<n;i++)i<n-1&&oo.insertAfter(oo.create(document,"br"),s[i]),oo.unwrap(s[i])},removeTextNodes:function(e){var t,i,n,s,a;for(t=0;t<e.length;t++)for(n=(a=e[t]).childNodes,i=0;i<n.length;i++)(s=n[i]).nodeType===oo.nodeTypes.TEXT_NODE&&a.removeChild(s)},tables:function(e){var t,i,n,s,a,r=oi(e).find("table");for(s=0;s<r.length;s++){for(n=i=(t=r[s].rows)[0],a=1;a<t.length;a++)t[a].cells.length>n.cells.length&&(n=t[a]);this.createColGroup(n),this.convertHeaders(i),this.removeAttributes(r[s]),this.removeParagraphs(r.eq(s).find("td,th")),this.removeTextNodes(r.eq(s).find("tr"))}},headers:function(e){for(var t=oi(e).find("p.MsoTitle"),i=0;i<t.length;i++)oo.changeTag(t[i],"h1")},removeFormatting:function(e){oi(e).find("*").each(function(){oi(this).css({fontSize:"",fontFamily:""}),this.getAttribute("style")||this.style.cssText||this.removeAttribute("style")})},clean:function(e){var t,i=this.options;return i.none?(e=op.fn.clean.call(this,e,this.junkReplacements),e=this.stripEmptyAnchors(e)):(e=i.msConvertLists?this.extractListLevels(e):e,e=op.fn.clean.call(this,e),e=this.stripEmptyAnchors(e),t=oo.create(document,"div",{innerHTML:e}),this.headers(t),i.msConvertLists&&this.lists(t),this.tables(t),i.msAllFormatting&&this.removeFormatting(t),e=t.innerHTML.replace(/(<[^>]*)\s+class="?[^"\s>]*"?/gi,"$1")),e}}),ov=op.extend({init:function(e){op.fn.init.call(this,e),this.replacements=[/\s+class="Apple-style-span[^"]*"/gi,"",/<(div|p|h[1-6])\s+style="[^"]*"/gi,"<$1",/^<div>(.*)<\/div>$/,"$1"]},applicable:function(e){return/class="?Apple-style-span|style="[^"]*-webkit-nbsp-mode/i.test(e)}}),ob=(o_=op.extend({clean:function(e){var t=oo.create(document,"div",{innerHTML:e});return(t=this.cleanDom(t)).innerHTML},cleanDom:function(e){return e}})).extend({cleanDom:function(e){var t=this.collectTags();return oi(e).find(t).each(function(){oo.unwrap(this)}),e},collectTags:function(){if(this.options.span)return"span"},applicable:function(){return this.options.span}}),ok=o_.extend({cleanDom:function(e){var t=this.collectAttr();return oi(e).find("["+t.join("],[")+"]").removeAttr(t.join(" ")),e},collectAttr:function(){return this.options.css?["class","style"]:[]},applicable:function(){return this.options.css}}),ow=function(){this.text="",this.add=function(e){this.text+=e}},oy=os.extend({init:function(e){this.separators=e||{text:" ",line:"<br/>"},this.lines=[],this.inlineBlockText=[],this.resetLine()},appendText:function(e){3===e.nodeType&&(e=e.nodeValue),this.textContainer.add(e)},appendInlineBlockText:function(e){this.inlineBlockText.push(e)},flashInlineBlockText:function(){this.inlineBlockText.length&&(this.appendText(this.inlineBlockText.join(" ")),this.inlineBlockText=[])},endLine:function(){this.flashInlineBlockText(),this.resetLine()},html:function(){var e=this.separators,t="",i=this.lines;this.flashInlineBlockText();for(var n=0,s=i.length,a=s-1;n<s;n++){for(var r=i[n],o=0,l=r.length,d=l-1;o<l;o++)t+=r[o].text,o!==d&&(t+=e.text);n!==a&&(t+=e.line)}return t},resetLine:function(){this.textContainer=new ow,this.line=[],this.line.push(this.textContainer),this.lines.push(this.line)}}),ox=os.extend({init:function(e){this.callback=e},enumerate:function(e){if(e){var t=this.callback(e),i=e.firstChild;!t&&i&&this.enumerate(i),this.enumerate(e.nextSibling)}}}),oC=op.extend({init:function(e){op.fn.init.call(this,e),this.hasText=!1,this.enumerator=new ox(this.buildText.bind(this))},clean:function(e){var t=oo.create(document,"div",{innerHTML:e});return this.cleanDom(t)},cleanDom:function(e){return this.separators=this.getDefaultSeparators(),this.htmlLines=new oy(this.separators),this.enumerator.enumerate(e.firstChild),this.hasText=!1,this.htmlLines.html()},buildText:function(e){if(oo.isDataNode(e))oo.isEmptyspace(e)||(this.htmlLines.appendText(e.nodeValue.replace("\n",this.separators.line)),this.hasText=!0);else{if(oo.isBlock(e)&&this.hasText)return(this.actions[oo.name(e)]||this.actions.block)(this,e);oo.isBr(e)&&this.htmlLines.appendText(this.separators.line)}},applicable:function(){var e=this.options;return e.all||e.keepNewLines},getDefaultSeparators:function(){return this.options.all?{text:" ",line:" "}:{text:" ",line:"<br/>"}},actions:{ul:oi.noop,ol:oi.noop,table:oi.noop,thead:oi.noop,tbody:oi.noop,td:function(e,t){var i=new oC({all:!0}).cleanDom(t);return e.htmlLines.appendInlineBlockText(i),!0},block:function(e){e.htmlLines.endLine()}}}),oT=op.extend({clean:function(e){return this.options.custom(e)},applicable:function(){return"function"==typeof this.options.custom}}),ou(oa,{Clipboard:oc,Cleaner:op,ScriptCleaner:of,TabCleaner:om,MSWordFormatCleaner:og,WebkitFormatCleaner:ov,HtmlTagsCleaner:ob,HtmlAttrCleaner:ok,HtmlContentCleaner:oC,HtmlTextLines:oy,CustomCleaner:oT}),function(e){var t=window.kendo,i=t.Class,n=t.ui.editor,s=n.RangeUtils,a=n.Dom,r=n.RestorePoint,o=n.Marker,l=t.support.browser,d="<span  class='k-br'>\uFEFF</span>",h=e.extend,u=a.nodeTypes,c="previousSibling";function p(e,t,i){for(var n=e?e[t]:null;n&&!i(n);)n=n[t];return n}var f="td,th,caption",m=function(t){return!t.collapsed&&e(t.commonAncestorContainer).is("table,tbody,thead,tfoot,tr")},g=i.extend({remove:function(t){var i=new o;i.add(t,!1);var n=s.getAll(t,function(t){return e(t).is("table,tbody,thead,tfoot,tr,td,th,caption")}),r=s.documentFromRange(t),l=i.start,d=i.end,h=f.split(","),u=a.parentOfType(l,h),c=a.parentOfType(d,h);this._removeContent(l,u,!0),this._removeContent(d,c,!1),e(n).each(function(t,i){((i=e(i)).is(f)?i:i.find(f)).each(function(e,t){t.innerHTML="&#65279;"})}),u&&!l.previousSibling&&a.insertBefore(r.createTextNode("\uFEFF"),l),c&&!d.nextSibling&&a.insertAfter(r.createTextNode("\uFEFF"),d),u?t.setStartBefore(l):n[0]&&(u=(u=e(n[0])).is(f)?u:u.find(f).first()).length&&t.setStart(u.get(0),0),t.collapse(!0),a.remove(l),a.remove(d)},_removeContent:function(t,i,n){if(i){var s,r=n?"nextSibling":"previousSibling",o=function(t){for(;t&&!t[r];)t=t.parentNode;return t&&e.contains(i,t)?t[r]:null};for(t=o(t);t;)s=o(t),a.remove(t),t=s}}}),v=i.extend({init:function(e){this.editor=e},keydown:function(t){var i=this,s=i.editor,a=s.keyboard,o=a.isTypingKey(t),d=h(e.Event(),t);if(i.editor.trigger("keydown",d),d.isDefaultPrevented())return t.preventDefault(),!0;if(!d.isDefaultPrevented()&&o&&!a.isTypingInProgress()){var u=s.getRange(),c=s.body;return i.startRestorePoint=new r(u,c),m(u)&&(new g(s).remove(u),s.selectRange(u)),l.webkit&&!u.collapsed&&u.startContainer===c&&u.endContainer===c&&0===u.startOffset&&u.endOffset==c.childNodes.length&&(c.innerHTML=""),s.immutables&&n.Immutables.immutablesContext(u)&&new n.BackspaceHandler(s).deleteSelection(u),a.startTyping(function(){i._removeBomSpan(),i.endRestorePoint=n._finishUpdate(s,i.startRestorePoint)}),!0}return!1},keyup:function(e){var t=this.editor.keyboard;return this.editor.trigger("keyup",e),!!t.isTypingInProgress()&&(t.endTyping(),!0)},_removeBomSpan:function(){var e=this.editor.getRange().commonAncestorContainer;a.emptyNode(e)||(3===e.nodeType&&(e=e.parentNode),a.insignificant(e)&&(e.textContent=a.stripBom(e.textContent),a.unwrap(e)))}}),_=i.extend({init:function(e){this.editor=e},_addCaret:function(e){var i=a.create(this.editor.document,"a");return!t.support.browser.chrome&&e.firstChild&&e.firstChild.nodeType===u.ELEMENT_NODE&&(e=e.firstChild),a.insertAt(e,i,0),a.stripBomNode(i.previousSibling),a.stripBomNode(i.nextSibling),i},_restoreCaret:function(e){var t=this.editor.createRange();!e.nextSibling&&a.isDataNode(e.previousSibling)?t.setStart(e.previousSibling,e.previousSibling.length):t.setStartAfter(e),t.collapse(!0),this.editor.selectRange(t),a.remove(e)},_handleDelete:function(e){var t=e.endContainer,i=a.closestEditableOfType(t,a.blockElements);if(i&&n.RangeUtils.isEndOf(e,i)){var s=a.next(i);if(!s||"p"!=a.name(s))return!1;var r=a.significantChildNodes(s)[0];r=r&&a.isInline(r)?r:s;var o=this._addCaret(r);return this._merge(i,s),this._restoreCaret(o),!0}return!1},_cleanBomBefore:function(e){for(var t=e.startOffset,i=e.startContainer,n=i.nodeValue,s=0;t-s>=0&&"\uFEFF"==n[t-s-1];)s++;s>0&&(i.deleteData(t-s,s),e.setStart(i,Math.max(0,t-s)),e.collapse(!0),this.editor.selectRange(e))},_handleBackspace:function(t){var i,s=t.startContainer,r=a.closestEditableOfType(s,["li"]),o=a.closestEditableOfType(s,"p,h1,h2,h3,h4,h5,h6".split(",")),l=this.editor;if(a.isDataNode(s)){if(t.collapsed&&/^\s[\ufeff]+$/.test(s.nodeValue))return t.setStart(s,0),t.setEnd(s,s.length),l.selectRange(t),!1;this._cleanBomBefore(t)}i=p(o,c,function(e){return!a.htmlIndentSpace(e)}),t.collapsed&&t.startOffset!==t.endOffset&&t.startOffset<0&&(t.startOffset=0,t.endOffset=0,l.selectRange(t));var d=r&&n.RangeUtils.isStartOf(t,r),h=r&&e(r).index(),u=d&&h>0;if(u&&(o=r,i=a.prev(r)),o&&i&&a.is(i,"table")&&n.RangeUtils.isStartOf(t,o))return""===o.innerText&&(o.innerHTML="\uFEFF"),!0;if(n.RangeUtils.isStartOf(t,o)&&parseInt(o.style.marginLeft,10)>0)return l.exec("outdent"),!0;if(o&&i&&n.RangeUtils.isStartOf(t,o)||u){var f=a.significantChildNodes(o)[0];f=f&&a.isInline(f)?f:o;var m=this._addCaret(f);return this._merge(i,o),this._restoreCaret(m),!0}if(d&&0===h){var g=r.firstChild;g||(r.innerHTML=n.emptyElementContent,g=r.firstChild);var v=new n.ListFormatter(a.name(r.parentNode),"p");return t.selectNodeContents(r),v.toggle(t),a.insignificant(g)?t.setStartBefore(g):t.setStart(g,0),l.selectRange(t),!0}var _=s.childNodes[t.startOffset-1],b=t,k=_&&a.closestEditableOfType(_,["a"]),w=p(_||s,c,function(e){return!a.isDataNode(e)||!a.isBom(e)&&e.length>0});if((k||(0===t.startOffset||_)&&a.is(w,"a"))&&(k=k||w,(b=l.createRange()).setStart(k,k.childNodes.length),b.collapse(!0)),(k=k||a.closestEditableOfType(_||b.startContainer,["a"]))&&n.RangeUtils.isEndOf(b,k)){var y=new n.UnlinkCommand({range:b,body:l.body,immutables:!!l.immutables});l.execCommand(y),l._selectionChange()}return!1},_handleSelection:function(t){var i,s=t.commonAncestorContainer,r=a.closest(s,"table"),l=n.emptyElementContent,d=this.editor;if(m(t))return new g(d).remove(t),d.selectRange(t),!0;var h=new o;h.add(t,!1),t.commonAncestorContainer===d.body&&this._surroundFullyContent(h,t),d.immutables&&this._handleImmutables(h),this._surroundFullySelectedAnchor(h,t),t.setStartAfter(h.start),t.setEndBefore(h.end);var u=t.startContainer,c=t.endContainer;return t.deleteContents(),"li"===c.tagName.toLocaleLowerCase()&&a.emptyNode(c)&&(t.selectNode(c),t.deleteContents()),r&&""===e(r).text()&&(t.selectNode(r),t.deleteContents()),s=t.commonAncestorContainer,"p"===a.name(s)&&""===s.innerHTML&&(s.innerHTML=l,t.setStart(s,0)),this._join(u,c),a.insertAfter(d.document.createTextNode("\uFEFF"),h.start),h.remove(t),u=t.startContainer,"tr"==a.name(u)&&(u=u.childNodes[Math.max(0,t.startOffset-1)],t.setStart(u,a.getNodeLength(u))),t.collapse(!0),d.selectRange(t),i=u.parentElement||u.parentNode,a.isDataNode(u)&&!a.emptyNode(i)&&this._cleanBomBefore(t),!0},_handleImmutables:function(e){var t=n.Immutables.immutableParent,i=t(e.start),s=t(e.start);i&&a.insertBefore(e.start,i),s&&a.insertAfter(e.end,s),i&&a.remove(i),s&&s.parentNode&&a.remove(s)},_surroundFullyContent:function(e,t){var i=t.commonAncestorContainer.children,n=i[0],s=i[i.length-1];this._moveMarker(e,t,n,s)},_surroundFullySelectedAnchor:function(t,i){var n=e(t.start).closest("a").get(0),s=e(t.end).closest("a").get(0);this._moveMarker(t,i,n,s)},_moveMarker:function(e,t,i,n){var r=e.start,o=e.end;i&&s.isStartOf(t,i)&&a.insertBefore(r,i),n&&s.isEndOf(t,n)&&a.insertAfter(o,n)},_root:function(e){for(;e&&"body"!=a.name(e)&&e.parentNode&&"body"!=a.name(e.parentNode);)e=e.parentNode;return e},_join:function(e,t){(e=this._root(e))!=(t=this._root(t))&&a.is(t,"p")&&this._merge(e,t)},_merge:function(e,t){for(a.removeTrailingBreak(e);e&&t.firstChild;)1==e.nodeType?(e=a.list(e)?e.children[e.children.length-1]:e)&&e.appendChild(t.firstChild):e.nodeType===u.TEXT_NODE?this._mergeWithTextNode(e,t.firstChild):e.parentNode.appendChild(t.firstChild);a.remove(t)},_mergeWithTextNode:function(e,t){e&&e.nodeType===u.TEXT_NODE&&(e.nextSibling&&this._isCaret(e.nextSibling)?a.insertAfter(t,e.nextSibling):a.insertAfter(t,e))},_isCaret:function(t){return e(t).is("a")},keydown:function(e){var i,s,a=this.editor,o=a.getRange(),l=e.keyCode,d=t.keys,h=l===d.BACKSPACE,u=l==d.DELETE;a.immutables&&a.immutables.keydown(e,o)||((h||u)&&!o.collapsed?i="_handleSelection":h?i="_handleBackspace":u&&(i="_handleDelete"),i&&(s=new r(o,a.body),this[i](o)&&(e.preventDefault(),n._finishUpdate(a,s))))},deleteSelection:function(e){this._handleSelection(e)},keyup:e.noop}),b=i.extend({init:function(e){this.editor=e,this.systemCommandIsInProgress=!1},createUndoCommand:function(){this.startRestorePoint=this.endRestorePoint=n._finishUpdate(this.editor,this.startRestorePoint)},changed:function(){return!!this.startRestorePoint&&this.startRestorePoint.html!=this.editor.body.innerHTML},keydown:function(e){var t=this.editor,i=t.keyboard;return i.isModifierKey(e)?(i.isTypingInProgress()&&i.endTyping(!0),this.startRestorePoint=new r(t.getRange(),t.body),!0):!!i.isSystem(e)&&(this.systemCommandIsInProgress=!0,this.changed()&&(this.systemCommandIsInProgress=!1,this.createUndoCommand()),!0)},keyup:function(){return!(!this.systemCommandIsInProgress||!this.changed())&&(this.systemCommandIsInProgress=!1,this.createUndoCommand(),!0)}}),k=i.extend({init:function(e){this.editor=e},keydown:function(e){!l.webkit||e.isDefaultPrevented()||!e.ctrlKey||65!=e.keyCode||e.altKey||e.shiftKey||(this.editor.options.immutables&&this._toSelectableImmutables(),this._selectEditorBody())},_selectEditorBody:function(){var e=this.editor,t=e.getRange();t.selectNodeContents(e.body),setTimeout(function(){e.selectRange(t)})},_toSelectableImmutables:function(){for(var t=this.editor.body,i=n.Immutables.immutable,s=a.emptyTextNode,r=t.firstChild,o=t.lastChild;s(r);)r=r.nextSibling;for(;s(o);)o=o.previousSibling;r&&i(r)&&e(d).prependTo(t),o&&i(o)&&e(d).appendTo(t)},keyup:e.noop});h(n,{TypingHandler:v,SystemHandler:b,BackspaceHandler:_,SelectAllHandler:k,Keyboard:i.extend({init:function(e){this.handlers=e,this.typingInProgress=!1},isCharacter:function(e){return e>=48&&e<=90||e>=96&&e<=111||e>=186&&e<=192||e>=219&&e<=222||229==e},toolFromShortcut:function(t,i){var n,s,a=String.fromCharCode(i.keyCode),r=this._getShortcutModifier(i,navigator.platform);for(n in t)if(((s=e.extend({ctrl:!1,alt:!1,shift:!1},t[n].options)).key==a||s.key==i.keyCode)&&s.ctrl==r&&s.alt==i.altKey&&s.shift==i.shiftKey)return n},_getShortcutModifier:function(e,t){return t.toUpperCase().indexOf("MAC")>=0?e.metaKey:e.ctrlKey},toolsFromShortcut:function(t,i){var n,s,a=String.fromCharCode(i.keyCode),r=[],o=function(e){return e==a||e==i.keyCode||e==i.charCode};for(n in t)(Array.isArray((s=e.extend({ctrl:!1,alt:!1,shift:!1},t[n].options)).key)?e.grep(s.key,o).length>0:o(s.key))&&s.ctrl==i.ctrlKey&&s.alt==i.altKey&&s.shift==i.shiftKey&&r.push(t[n]);return r},isTypingKey:function(e){var t=e.keyCode;return this.isCharacter(t)&&!e.ctrlKey&&!e.altKey||32==t||13==t||8==t||46==t&&!e.shiftKey&&!e.ctrlKey&&!e.altKey},isModifierKey:function(e){var t=e.keyCode;return 17==t&&!e.shiftKey&&!e.altKey||16==t&&!e.ctrlKey&&!e.altKey||18==t&&!e.ctrlKey&&!e.shiftKey},isSystem:function(e){return 46==e.keyCode&&e.ctrlKey&&!e.altKey&&!e.shiftKey},startTyping:function(e){this.onEndTyping=e,this.typingInProgress=!0},stopTyping:function(){this.typingInProgress&&this.onEndTyping&&this.onEndTyping(),this.typingInProgress=!1},endTyping:function(e){this.clearTimeout(),e?this.stopTyping():this.timeout=window.setTimeout(this.stopTyping.bind(this),1e3)},isTypingInProgress:function(){return this.typingInProgress},clearTimeout:function(){window.clearTimeout(this.timeout)},notify:function(e,t){var i,n=this.handlers;for(i=0;i<n.length&&!n[i][t](e);i++);},keydown:function(e){this.notify(e,"keydown")},keyup:function(e){this.notify(e,"keyup")}})})}(window.kendo.jQuery),oS=window.kendo.jQuery,oD=(oI=window.kendo.ui.editor).Command,oE=(oF=oI.EditorUtils).registerTool,oA=oI.Tool,oz=oI.ToolTemplate,(0,oS.extend)(oI,{ExportPdfCommand:oP=oD.extend({init:function(e){this.async=!0,oD.fn.init.call(this,e)},exec:function(){var e=this,t=e.lockRange(!0),i=e.editor;i._destroyResizings(),i.saveAsPDF().then(function(){e.releaseRange(t),i._initializeColumnResizing(),i._initializeRowResizing(),i._initializeElementResizing()})}})}),oE("pdf",new oA({command:oP,template:new oz({template:oF.buttonTemplate,title:"Export PDF"})})),oH=window.kendo.jQuery,oO=(oR=(oN=window.kendo).ui.editor).Command,oB=(oM=oR.EditorUtils).registerTool,oL=oR.Tool,oV=oR.ToolTemplate,(0,oH.extend)(oR,{PrintCommand:oU=oO.extend({init:function(e){oO.fn.init.call(this,e),this.managesUndoRedo=!0},exec:function(){var e=this.editor;oN.support.browser.msie?e.document.execCommand("print",!1,null):e.window.print&&e.window.print()}})}),oB("print",new oL({command:oU,template:new oV({template:oM.buttonTemplate,title:"Print"})})),oW=window.kendo.jQuery,oG=(oj=window.kendo.ui.editor).Tool,oq=oj.Command,oK=oj.ToolTemplate,o$=oj.EditorUtils,oY=oj.Dom,oQ=oj.RangeUtils,oX=o$.registerTool,oJ=oq.extend({init:function(e){oq.fn.init.call(this,e)},exec:function(){var e=this.lockRange(!0);this.inlineStyles=[],this.blockStyles=[],this.collectStyles(e),this.editor.inlineStyles=this.inlineStyles,this.editor.blockStyles=this.blockStyles,this.releaseRange(e)},collectStyles:function(e){var t,i=oQ.nodes(e);for(t=1===i.length?i[0].parentNode:e.startContainer;t&&!oY.is(t,"body")&&"editor"!==t.getAttribute("data-role");)oY.isBlock(t)?(this.populateStyles(t,"blockStyles"),t=oY.is(t,"li")?t.parentNode:null):(this.populateStyles(t,"inlineStyles"),t=t.parentNode)},populateStyles:function(e,t){var i,n,s,a,r,o=e.style,l=e.attributes,d={tags:[e.tagName],attr:{style:{}}};for(r=0;o&&r<o.length;r++)i=o[n=o[r]],d.attr.style[n]=i;for(r=0;l&&r<l.length;r++)s=l[r].nodeName,a=l[r].nodeValue,"style"!==s&&("class"===s?d.attr.className=a:d.attr[s]=a);this[t].push(d)}}),oZ=oq.extend({init:function(e){oq.fn.init.call(this,e)},exec:function(){var e,t=this.lockRange(!0),i=oQ.getMarkers(t),n=this.editor,s=n.inlineStyles,a=n.blockStyles;(s&&0!==s.length||a&&0!==a.length)&&(3===i.length&&(this.marker.removeCaret(t),this.marker.caret=null),this.removeEmptyElementsFromRange(t),e=oQ.nodes(t),this.cleanInlineParents(e),oY.normalize(t.commonAncestorContainer),2===i.length?(t.setStartAfter(i[0]),t.setEndBefore(i[1])):(t.setStartBefore(e[0]),t.setEndAfter(e[0])),(e=oQ.nodes(t))&&a&&a.length&&this.applyBlockStyles(e,a),e&&s&&s.length&&this.applyInlineStyles(e,s),this.releaseRange(t))},removeEmptyElementsFromRange:function(e){var t,i;if((t=oQ.getAll(e,function(e){return oY.isInline(e)&&!e.firstChild&&!oY.isMarker(e)}))&&t.length>0)for(i=0;i<t.length;i++)t[i].parentNode.removeChild(t[i])},cleanInlineParents:function(e){var t,i,n,s,a,r,o;for(t=0;t<e.length;t++)if(n=(i=e[t]).parentNode,!this.immutableParent(i))for(;n&&oY.isInline(n);){for(s=n.childNodes,a=0;a<s.length;a++)r=s[a],oY.isMarker(r)||r===i||((o=n.cloneNode(!0)).innerHTML="",oY.wrap(r,o));oY.unwrap(n),n=i.parentNode}},applyBlockStyles:function(e,t){var i,n,s,a,r,o,l,d,h,u,c,p,f,m,g,v=t[0].tags[0],_=t[0].attr,b=this.editor.document;for(i=0,n=e.length;i<n;i++)if(s=e[i],!oY.isWhitespace(s)&&!this.immutableParent(s)){if("BODY"!==(r=oY.blockParentOrBody(s)).tagName&&r.tagName!==v){if("LI"!==r.tagName&&"TD"!==r.tagName&&"TH"!==r.tagName){for(l=[],d=[],h=s.previousSibling,u=s.nextSibling;h;)oY.isMarker(h)||l.push(h),h=h.previousSibling;if(l.length)for((c=r.cloneNode(!0)).innerHTML="",oY.insertBefore(c,l[0]),m=0;m<l.length;m++)f=l[m],oY.insertAt(c,f,0);for(;u;)oY.isMarker(u)||d.push(u),u=u.nextSibling;if(d.length)for((p=r.cloneNode(!0)).innerHTML="",oY.insertBefore(p,d[0]),m=0;m<d.length;m++)f=d[m],p.appendChild(f);oY.unwrap(r)}a=oY.create(b,v,_),oY.wrap(s,a)}else r.tagName===v&&oY.attr(r,_)}if(r&&2===t.length&&"LI"!==r.tagName&&"LI"===v){for(g=[];oY.is(a,"li");)g.push(a),a=oY.prev(a);for(o=oY.create(b,t[1].tags[0],t[1].attr),oY.insertBefore(o,g[g.length-1]),o.appendChild(g[0]),i=1,n=g.length;i<n;i++)oY.insertBefore(g[i],o.firstChild)}else r&&2===t.length&&"LI"!==r.tagName&&(o=oY.create(b,t[1].tags[0],t[1].attr),oY.wrap(a,o))},applyInlineStyles:function(e,t){var i,n,s,a,r,o,l=this.editor.document;for(a=0;a<t.length;a++)i=t[a],n=oY.create(l,i.tags[0],i.attr),s&&n.appendChild(s),s=n;if(s){for(a=0;a<e.length;a++)if(o=e[a],!oY.isWhitespace(o)&&!this.immutableParent(o)){for(r=s.cloneNode(!0),oY.insertBefore(r,o);r.children&&r.children.length;)r=r.children[0];r.appendChild(o)}}},immutables:function(){return this.editor&&this.editor.options.immutables},immutableParent:function(e){return this.immutables()&&oj.Immutables.immutableParent(e)}}),o0=oG.extend({init:function(e){oG.fn.init.call(this,e)},command:function(e){return new oJ(e)}}),o1=oG.extend({init:function(e){oG.fn.init.call(this,e)},command:function(e){return new oZ(e)}}),oW.extend(oj,{CopyFormatCommand:oJ,ApplyFormatCommand:oZ,CopyFormatTool:o0,ApplyFormatTool:o1}),oX("copyFormat",new o0({template:new oK({template:o$.buttonTemplate,title:"Copy format"})})),oX("applyFormat",new o1({template:new oK({template:o$.buttonTemplate,title:"Apply format"})})),function(e,t){var i=window,n=i.Math,s=n.min,a=n.max,r=i.parseFloat,o=e.jQuery,l=o.extend,d=e.ui.editor,h=/(\d+)(\.?)(\d*)%/,u=/(\d+)(\.?)(\d*)px/,c="string";function p(e){return typeof e===c&&h.test(e)}l(d,{ResizingUtils:{constrain:function(e){var t=e.value,i=e.min,n=e.max;return a(s(r(t),r(n)),r(i))},getScrollBarWidth:function(t){return t&&!o(t).is("body")&&t.scrollHeight>t.clientHeight?e.support.scrollbar():0},calculatePercentageRatio:function(e,t){return p(e)?r(e):r(e)/t*100},inPercentages:p,inPixels:function(e){return typeof e===c&&u.test(e)},toPercentages:function(e){return r(e)+"%"},toPixels:function(e){return r(e)+"px"}}})}(window.kendo),o9=(o3=(o2=window.kendo).jQuery).extend,o6=o3.noop,o5=o2.ui.editor,o8=o2.Class,o4="keydown",o7="mouseleave",le="mouseup",lt="table",li=o8.extend({init:function(e,t){this.options=o9({},this.options,t),this.options.tags=Array.isArray(this.options.tags)?this.options.tags:[this.options.tags],o3(e).is(lt)&&(this.element=e,this._attachEventHandlers())},destroy:function(){var e=this.options.eventNamespace;this.element&&(o3(this.element).off(e),this.element=null),o3(this.options.rootElement).off(o4+e),this._destroyResizeHandle()},options:{tags:[],min:0,rootElement:null,eventNamespace:"",rtl:!1,handle:{dataAttribute:"",height:0,width:0,classNames:{},template:""}},_attachEventHandlers:function(){var e=this.options;o3(this.element).on("mousemove"+e.eventNamespace,e.tags.join(","),this.detectElementBorderHovering.bind(this))},resizingInProgress:function(){var e=this._resizable;return!!e&&!!e.resizing},resize:o6,detectElementBorderHovering:function(e){var t=this.options.handle,i=o3(e.currentTarget),n=this.resizeHandle,s=t.dataAttribute;this.resizingInProgress()||(!i.is(":last-child")&&this.elementBorderHovered(i,e)?n?n.data(s)&&n.data(s)!==i[0]&&this.showResizeHandle(i,e):this.showResizeHandle(i,e):n&&this._destroyResizeHandle())},elementBorderHovered:o6,showResizeHandle:function(e,t){0===t.buttons&&(this._initResizeHandle(),this.setResizeHandlePosition(e),this.setResizeHandleDimensions(),this.setResizeHandleDataAttributes(e[0]),this._attachResizeHandleEventHandlers(),this._initResizable(e),this._hideResizeMarker(),this.resizeHandle.show())},_initResizeHandle:function(){var e=this.options;this._destroyResizeHandle(),this.resizeHandle=o3(e.handle.template).appendTo(e.rootElement)},setResizeHandlePosition:o6,setResizeHandleDimensions:o6,setResizeHandleDataAttributes:function(e){this.resizeHandle.data(this.options.handle.dataAttribute,e)},_attachResizeHandleEventHandlers:function(){var e=this.options,t=e.eventNamespace,i=e.handle.classNames.marker,n=this.resizeHandle;this.resizeHandle.on("mousedown"+t,function(){n.find("."+i).show()}).on(le+t,function(){n.find("."+i).hide()})},_hideResizeMarker:function(){this.resizeHandle.find("."+this.options.handle.classNames.marker).hide()},_destroyResizeHandle:function(){this.resizeHandle&&(this._destroyResizable(),this.resizeHandle.off(this.options.eventNamespace).remove(),this.resizeHandle=null)},_initResizable:function(e){this.resizeHandle&&(this._destroyResizable(),this._resizable=new o2.ui.Resizable(e,{draggableElement:this.resizeHandle[0],start:this.onResizeStart.bind(this),resize:this.onResize.bind(this),resizeend:this.onResizeEnd.bind(this)}))},_destroyResizable:function(){this._resizable&&(this._resizable.destroy(),this._resizable=null)},onResizeStart:function(){this._disableKeyboard()},onResize:function(e){this.setResizeHandleDragPosition(e)},setResizeHandleDragPosition:o6,onResizeEnd:function(e){this.resize(e),this._destroyResizeHandle(),this._enableKeyboard()},_enableKeyboard:function(){var e=this.options;o3(e.rootElement).off(o4+e.eventNamespace)},_disableKeyboard:function(){var e=this.options;o3(e.rootElement).on(o4+e.eventNamespace,function(e){e.preventDefault()})},_forceResizing:function(e){var t=this._resizable;t&&t.userEvents&&t.userEvents._end(e)}}),(ln=o8.extend({create:function(e,t){var i=this,n=t.name,s=t.eventNamespace;o3(e.body).on("mouseenter"+s,lt,function(s){var a=s.currentTarget,r=e[n];s.stopPropagation(),r?r.element===a||r.resizingInProgress()||(i._destroyResizing(e,t),i._initResizing(e,a,t)):i._initResizing(e,a,t)}).on(o7+s,lt,function(s){var a,r=e[n];s.stopPropagation(),!r||r.resizingInProgress()||r.resizeHandle||(a=o3(r.element).parents(lt)[0])&&(i._destroyResizing(e,t),i._initResizing(e,a,t))}).on(o7+s,function(){var s=e[n];s&&!s.resizingInProgress()&&i._destroyResizing(e,t)}).on(le+s,function(s){var a,r=e[n];r&&r.resizingInProgress()&&(a=o3(s.target).parents(lt)[0])&&(r._forceResizing(s),i._destroyResizing(e,t),i._initResizing(e,a,t))})},dispose:function(e,t){o3(e.body).off(t.eventNamespace)},_initResizing:function(e,t,i){var n=i.name,s=i.type;e[n]=new s(t,{rtl:o2.support.isRtl(e.element),rootElement:e.body})},_destroyResizing:function(e,t){var i=t.name;e[i]&&(e[i].destroy(),e[i]=null)}})).current=new ln,li.create=function(e,t){ln.current.create(e,t)},li.dispose=function(e,t){ln.current.dispose(e,t)},o9(o5,{TableElementResizing:li}),ls=window.kendo,la=window.Math.abs,lo=(lr=ls.jQuery).extend,ld=(ll=ls.ui.editor).Dom,lh=ll.TableElementResizing,lc=(lu=ll.ResizingUtils).constrain,lp=lu.calculatePercentageRatio,lf=lu.getScrollBarWidth,lm=lu.inPercentages,lg=lu.toPercentages,lv=lu.toPixels,l_=ls._outerWidth,lb=".kendoEditorColumnResizing",lk="body",lw="col-index",(ly=lh.extend({options:{tags:["td","th"],min:20,rootElement:null,eventNamespace:lb,rtl:!1,handle:{dataAttribute:"column",width:10,height:0,classNames:{handle:"k-column-resize-handle",marker:"k-column-resize-marker"},template:'<div class="k-column-resize-handle-wrapper" unselectable="on" contenteditable="false"><div class="k-column-resize-handle"><div class="k-column-resize-marker"></div></div></div>'}},elementBorderHovered:function(e,t){var i=this.options,n=i.handle.width,s=e.offset().left+(i.rtl?0:l_(e)),a=t.clientX+lr(e[0].ownerDocument).scrollLeft();return a>s-n&&a<s+n},setResizeHandlePosition:function(e){var t=lr(this.element.tHead||this.element.tBodies[0]),i=this.options,n=i.rtl,s=i.handle.width,a=lr(i.rootElement),r=a.is(lk)?0:a.scrollTop(),o=a.is(lk)?0:ls.scrollLeft(a),l=n?0:l_(e),d=n?lf(a[0]):0,h=e.offset().left-(a.offset().left+parseFloat(a.css("borderLeftWidth")))-parseFloat(e.css("marginLeft")),u=t.offset().top-(a.offset().top+parseFloat(a.css("borderTopWidth")))-parseFloat(t.css("marginTop")),c=ls.support.browser;n&&(c.mozilla||c.webkit&&c.version>=85)&&(o*=-1),this.resizeHandle.css({top:u+r,left:h+l+(o-d)-s/2,position:"absolute"})},setResizeHandleDimensions:function(){var e=lr(this.element).children("thead"),t=lr(this.element).children("tbody"),i=e.length>0?e.height()+t.height():t.height();this.resizeHandle.css({width:this.options.handle.width,height:i})},setResizeHandleDragPosition:function(e){var t=lr(lr(e.currentTarget).data(this.options.handle.dataAttribute)),i=this.options,n=lr(i.rootElement),s=i.handle?i.handle.width:0,a=i.min,r=i.rtl,o=l_(t),l=t.offset().left-(n.offset().left+parseFloat(n.css("borderLeftWidth")))-parseFloat(t.css("marginLeft")),d=l_(t.next()),h=lr(this.resizeHandle),u=n.is(lk)?0:ls.scrollLeft(n),c=r?lf(n[0]):0,p=h.offset().left-(n.offset().left+parseFloat(n.css("borderLeftWidth")))-parseFloat(h.css("marginLeft")),f=ls.support.browser;r&&(f.mozilla||f.webkit&&f.version>=85)&&(u*=-1);var m=lc({value:p+(u-c)+e.x.delta,min:l+(u-c)-(r?d:0)+a,max:l+o+(u-c)+(r?0:d)-s-a});h.css({left:m})},resize:function(e){var t,i,n,s,a,r=lr(lr(e.currentTarget).data(this.options.handle.dataAttribute)),o=this.options,l=o.rtl?-1:1,d=o.min,h=l*e.x.initialDelta;ld.reMapTableColumns(this.element,lw),s=parseInt(r.attr(lw),10),r.prop("colSpan")>1&&(s=parseInt((r=lr(this.element).find("[col-index="+(s+r.prop("colSpan")-1)+"]").eq(0)).attr(lw),10)),a=lr(this.element).find("[col-index="+(s+1)+"]:not([colspan])"),this._setTableComputedWidth(),this._setColumnsComputedWidth(),t=lc({value:(n=l_(r))+h,min:d,max:n+(i=l_(a))-d}),this._resizeColumn(r[0],t),this._resizeTopAndBottomColumns(r[0],t),this._resizeAdjacentColumns(parseInt(r.attr(lw),10),i,n,n-t),ld.clearTableMappings(this.element,lw)},_setTableComputedWidth:function(){var e=this.element;""===e.style.width&&(e.style.width=lv(l_(lr(e))))},_setColumnsComputedWidth:function(){var e,t=lr(this.element.tHead||this.element.tBodies[0]),i=l_(t),n=t.children("tr").children("td"),s=n.length,a=n.map(function(){return l_(lr(this))});for(e=0;e<s;e++)lm(n[e].style.width)?n[e].style.width=lg(lp(a[e],i)):n[e].style.width=lv(a[e])},_resizeTopAndBottomColumns:function(e,t){var i,n=lr(e).attr(lw),s=lr(this.element).children("tbody,thead").children("tr").children(this.options.tags.join(",")).filter(function(){return lr(this).attr(lw)===n&&this!==e}),a=s.length;for(i=0;i<a;i++)this._resizeColumn(s[i],t)},_resizeColumn:function(e,t){var i=lr(this.element.tHead||this.element.tBodies[0]);lm(e.style.width)?e.style.width=lg(lp(t,l_(i))):e.style.width=lv(t)},_resizeAdjacentColumns:function(e,t,i,n){var s,a=lr(this.element).children("tbody,thead").children("tr").children(this.options.tags.join(",")).filter(function(){return parseInt(lr(this).attr(lw),10)===e+1}),r=a.length;for(s=0;s<r;s++)this._resizeAdjacentColumn(a[s],t,i,n)},_resizeAdjacentColumn:function(e,t,i,n){var s,a=this.options.min;s=lc({value:t+n,min:a,max:la(i+t-a)}),this._resizeColumn(e,s)}})).create=function(e){lh.create(e,{name:"columnResizing",type:ly,eventNamespace:lb})},ly.dispose=function(e){lh.dispose(e,{eventNamespace:lb})},lo(ll,{ColumnResizing:ly}),lx=window.kendo,lC=window.Math.abs,lS=(lT=lx.jQuery).extend,lD=(lI=lx.ui.editor).TableElementResizing,lE=(lF=lI.ResizingUtils).getScrollBarWidth,lA=lF.constrain,lz=lF.calculatePercentageRatio,lP=lF.inPercentages,lH=lF.toPercentages,lN=lF.toPixels,lR=lx._outerHeight,lO=".kendoEditorRowResizing",lM="body",lB="tbody",lL="thead",(lV=lD.extend({options:{tags:["tr"],min:20,rootElement:null,eventNamespace:lO,rtl:!1,handle:{dataAttribute:"row",width:0,height:10,classNames:{handle:"k-row-resize-handle",marker:"k-row-resize-marker"},template:'<div class="k-row-resize-handle-wrapper" unselectable="on" contenteditable="false"><div class="k-row-resize-handle"><div class="k-row-resize-marker-wrapper"><div class="k-row-resize-marker"></div></div></div></div>'}},elementBorderHovered:function(e,t){var i=this.options.handle.height,n=e.offset().top+lR(e),s=t.clientY+lT(e[0].ownerDocument).scrollTop();return s>n-i&&s<n+i},setResizeHandlePosition:function(e){var t=this.options,i=t.handle.height,n=lT(t.rootElement),s=n.is(lM)?0:n.scrollTop(),a=n.is(lM)?0:lx.scrollLeft(n),r=t.rtl?lE(n[0]):0,o=e.offset().left-(n.offset().left+parseFloat(n.css("borderLeftWidth")))-parseFloat(e.css("marginLeft")),l=e.offset().top-(n.offset().top+parseFloat(n.css("borderTopWidth")))-parseFloat(e.css("marginTop")),d=lx.support.browser;t.rtl&&(d.mozilla||d.webkit&&d.version>=85)&&(a*=-1),this.resizeHandle.css({top:l+lR(e)+s-i/2,left:o+(a-r),position:"absolute"})},setResizeHandleDimensions:function(){var e=lT(this.element.tHead||this.element.tBodies[0]);this.resizeHandle.css({width:e.width(),height:this.options.handle.height})},setResizeHandleDragPosition:function(e){var t=this.options,i=t.min,n=lT(this.element).children(lL),s=lT(this.element).children(lB),a=n.length>0?n:s,r=lT(this.resizeHandle),o=lT(e.currentTarget).data(t.handle.dataAttribute),l=lT(o),d=lT(t.rootElement),h=d.is(lM)?0:d.scrollTop(),u=a.offset().top-(d.offset().top+parseFloat(d.css("borderTopWidth")))-parseFloat(a.css("marginTop")),c=l.offset().top-(d.offset().top+parseFloat(d.css("borderTopWidth")))-parseFloat(l.css("marginTop")),p=lA({value:r.offset().top-(Math.max(0,d.offset().top)+parseFloat(d.css("borderTopWidth")))-parseFloat(r.css("marginTop"))+h+e.y.delta,min:c+h+i,max:u+lR(n)+lR(s)+h-t.handle.height-i});r.css({top:p})},resize:function(e){var t=this.options,i=lT(e.currentTarget).data(t.handle.dataAttribute),n=lR(lT(i)),s=lT(this.element),a=lR(s),r=s.children(lL),o=r.length>0?r.height():0,l=s.children(lB).height(),d=i.style.height,h=lA({value:n+e.y.initialDelta,min:t.min,max:lC(o+l-t.min)});this._setRowsHeightInPixels(),i.style.height=lN(h),this._setTableHeight(a+(h-n)),lP(d)&&this._setRowsHeightInPercentages()},_setRowsHeightInPixels:function(){var e,t=lT(this.element).children("tbody,thead").children("tr"),i=t.length,n=t.map(function(){return lR(lT(this))});for(e=0;e<i;e++)t[e].style.height=lN(n[e])},_setRowsHeightInPercentages:function(){var e,t=lT(this.element).children(lL),i=t.length>0?t.height():0,n=lT(this.element).children(lB).height(),s=lT(this.element).children("thead,tbody").children("tr"),a=s.length,r=s.map(function(){return lR(lT(this))});for(e=0;e<a;e++)s[e].style.height=lH(lz(r[e],i+n))},_setTableHeight:function(e){var t=this.element;lP(t.style.height)?t.style.height=lH(lz(e,lT(t).parent().height())):t.style.height=lN(e)}})).create=function(e){lD.create(e,{name:"rowResizing",type:lV,eventNamespace:lO})},lV.dispose=function(e){lD.dispose(e,{eventNamespace:lO})},lS(lI,{RowResizing:lV}),lj=(lW=(lU=window.kendo).jQuery).extend,lG=lW.noop,lq=lU.ui.editor,lK=lU.Class,l$=lU.ui.Draggable,lY=lU.Observable,lQ=lq.ResizingUtils.getScrollBarWidth,lX=lU._outerWidth,lJ=lU._outerHeight,lZ=".kendoEditorElementResizeHandle",l0="dragStart",l1="drag",l2="dragEnd",l3="halfInside",l9="mouseover",l6="mouseout",l5="east",l8="north",l4="northeast",l7="northwest",de="south",dt="southeast",di="southwest",dn="west",ds=lY.extend({init:function(e){lY.fn.init.call(this),this.options=lj({},this.options,e),this.element=lW(this.options.template).appendTo(this.options.appendTo)[0],this._attachEventHandlers(),this._addStyles(),this._initDraggable(),this._initPositioningStrategy(),this._initDraggingStrategy(),lW(this.element).data("table",this.options.resizableElement)},destroy:function(){lW(this.element).off(lZ).remove(),this.element=null,this._destroyDraggable(),this.unbind()},options:{appendTo:null,direction:dt,resizableElement:null,rtl:!1,template:"<div class='k-element-resize-handle-wrapper' unselectable='on' contenteditable='false'><div class='k-element-resize-handle'></div></div>"},events:[l0,l1,l2,l9,l6],show:function(){this._setPosition()},_setPosition:function(){var e=this._positioningStrategy.getPosition();lW(this.element).css({top:e.top,left:e.left,position:"absolute"})},_attachEventHandlers:function(){lW(this.element).on(l9+lZ,this._onMouseOver.bind(this)).on(l6+lZ,this._onMouseOut.bind(this))},_onMouseOver:function(){this.trigger(l9)},_onMouseOut:function(){this.trigger(l6)},_addStyles:function(){lW(this.element).children(".k-element-resize-handle").addClass("k-resize-"+this.options.direction)},_initPositioningStrategy:function(){var e=this.options;this._positioningStrategy=dl.create({name:e.direction,handle:this.element,resizableElement:e.resizableElement,rootElement:e.rootElement,rtl:e.rtl})},_initDraggable:function(){var e=this.element;!this._draggable&&e&&(this._draggable=new l$(e,{dragstart:this._onDragStart.bind(this),drag:this._onDrag.bind(this),dragend:this._onDragEnd.bind(this)}))},_onDragStart:function(){this.trigger(l0)},_onDrag:function(e){this.trigger(l1,this._draggingStrategy.adjustDragDelta({deltaX:e.x.delta,deltaY:e.y.delta,initialDeltaX:e.x.initialDelta,initialDeltaY:e.y.initialDelta}))},_onDragEnd:function(){this.trigger(l2)},_destroyDraggable:function(){this._draggable&&(this._draggable.destroy(),this._draggable=null)},_initDraggingStrategy:function(){this._draggingStrategy=d_.create({name:this.options.direction})}}),(dr=(da=lK.extend({init:function(){this._items=[]},register:function(e,t){this._items.push({name:e,type:t})},create:function(e){var t,i,n,s=this._items,a=s.length,r=e.name?e.name.toLowerCase():"";for(n=0;n<a;n++)if((i=s[n]).name.toLowerCase()===r){t=i;break}if(t)return new t.type(e)}})).extend({})).current=new dr,(dl=lK.extend({init:function(e){this.options=lj({},this.options,e)},options:{handle:null,offset:l3,resizableElement:null,rootElement:null,rtl:!1},getPosition:function(){var e=this.calculatePosition(),t=this.applyHandleOffset(e);return this.applyScrollOffset(t)},calculatePosition:lG,applyHandleOffset:function(e){var t=this.options,i=lW(t.handle);return t.offset===l3?{top:e.top-lJ(i)/2,left:e.left-lX(i)/2}:e},applyScrollOffset:function(e){var t,i=this.options,n=lW(i.rootElement),s=i.rtl?lQ(n[0]):0,a=lU.support.browser;return n.is("body")?e:(t=lU.scrollLeft(n)||0,i.rtl&&(a.mozilla||a.webkit&&a.version>=85)&&(t*=-1),{top:e.top+(n.scrollTop()||0),left:e.left+t-s})}})).create=function(e){return dr.current.create(e)},dd=dl.extend({calculatePosition:function(){var e=lW(this.options.resizableElement),t=e.position(),i=parseInt(e.css("marginLeft"),10);return{top:t.top+lJ(e)/2,left:t.left+lX(e)+i}}}),dr.current.register(l5,dd),dh=dl.extend({calculatePosition:function(){var e=lW(this.options.resizableElement),t=e.position(),i=parseInt(e.css("marginLeft"),10);return{top:t.top,left:t.left+lX(e)/2+i}}}),dr.current.register(l8,dh),du=dl.extend({calculatePosition:function(){var e=lW(this.options.resizableElement),t=e.position(),i=parseInt(e.css("marginLeft"),10);return{top:t.top,left:t.left+lX(e)+i}}}),dr.current.register(l4,du),dc=dl.extend({calculatePosition:function(){var e=lW(this.options.resizableElement),t=e.position(),i=parseInt(e.css("marginLeft"),10);return{top:t.top,left:t.left+i}}}),dr.current.register(l7,dc),dp=dl.extend({calculatePosition:function(){var e=lW(this.options.resizableElement),t=e.position(),i=parseInt(e.css("marginLeft"),10);return{top:t.top+lJ(e),left:t.left+lX(e)/2+i}}}),dr.current.register(de,dp),df=dl.extend({calculatePosition:function(){var e=lW(this.options.resizableElement),t=e.position(),i=parseInt(e.css("marginLeft"),10);return{top:t.top+lJ(e),left:t.left+lX(e)+i}}}),dr.current.register(dt,df),dm=dl.extend({calculatePosition:function(){var e=lW(this.options.resizableElement),t=e.position(),i=parseInt(e.css("marginLeft"),10);return{top:t.top+lJ(e),left:t.left+i}}}),dr.current.register(di,dm),dg=dl.extend({calculatePosition:function(){var e=lW(this.options.resizableElement),t=e.position(),i=parseInt(e.css("marginLeft"),10);return{top:t.top+lJ(e)/2,left:t.left+i}}}),dr.current.register(dn,dg),(dv=da.extend({})).current=new dv,(d_=lK.extend({init:function(e){this.options=lj({},this.options,e)},options:{deltaX:{adjustment:null,modifier:null},deltaY:{adjustment:null,modifier:null}},adjustDragDelta:function(e){var t=this.options,i=t.deltaX.adjustment*t.deltaX.modifier,n=t.deltaY.adjustment*t.deltaY.modifier;return{deltaX:e.deltaX*i,deltaY:e.deltaY*n,initialDeltaX:e.initialDeltaX*i,initialDeltaY:e.initialDeltaY*n}}})).create=function(e){return dv.current.create(e)},dk=(db=d_.extend({options:{deltaX:{adjustment:1,modifier:1},deltaY:{adjustment:0,modifier:0}}})).extend({options:{deltaX:{modifier:1}}}),dv.current.register(l5,dk),dw=db.extend({options:{deltaX:{modifier:-1}}}),dv.current.register(dn,dw),dx=(dy=d_.extend({options:{deltaX:{adjustment:0,modifier:0},deltaY:{adjustment:1,modifier:1}}})).extend({options:{deltaY:{modifier:-1}}}),dv.current.register(l8,dx),dC=dy.extend({options:{deltaY:{modifier:1}}}),dv.current.register(de,dC),dS=(dT=d_.extend({options:{deltaX:{adjustment:1,modifier:1},deltaY:{adjustment:1,modifier:1}}})).extend({options:{deltaX:{modifier:1},deltaY:{modifier:-1}}}),dv.current.register(l4,dS),dI=dT.extend({options:{deltaX:{modifier:-1},deltaY:{modifier:-1}}}),dv.current.register(l7,dI),dD=dT.extend({options:{deltaX:{modifier:1},deltaY:{modifier:1}}}),dv.current.register(dt,dD),dF=dT.extend({options:{deltaX:{modifier:-1},deltaY:{modifier:1}}}),dv.current.register(di,dF),lj(lq,{ElementResizeHandle:ds}),function(e,t){var i=window.Math,n=i.min,s=i.max,a=e.jQuery,r=a.contains,o=a.extend,l=e.support.browser,d=e.ui.editor,h=e.Class,u=d.ElementResizeHandle,c=d.ResizingUtils,p=c.calculatePercentageRatio,f=c.constrain,m=c.inPercentages,g=c.inPixels,v=c.toPercentages,_=c.toPixels,b=e._outerWidth,k=e._outerHeight,w=d.RangeUtils,y=".kendoEditorElementResizing",x="k-element-resize-handle-wrapper",C="k-element-resizing",T="dragStart",S="drag",I="dragEnd",D="keydown",F="mousedown",E="select",A=["TABLE","IMG"],z="width",P="height";function H(e){return void 0===e}var N=h.extend({init:function(e,t){this.options=o({},this.options,t),this.handles=[],A.indexOf(e.nodeName)>=0&&(this.element=e)},destroy:function(){a(this.element).off(y),this.element=null,a(this.options.rootElement).off(D+y),this._destroyResizeHandles()},options:{appendHandlesTo:null,rtl:!1,rootElement:null,minWidth:10,minHeight:10,handles:[{direction:"northwest"},{direction:"north"},{direction:"northeast"},{direction:"east"},{direction:"southeast"},{direction:"south"},{direction:"southwest"},{direction:"west"}]},resize:function(e){var t=o({},{deltaX:0,deltaY:0,initialDeltaX:0,initialDeltaY:0},e);this._resizeWidth(t.deltaX,t.initialDeltaX),this._resizeHeight(t.deltaY,t.initialDeltaY),this.showResizeHandles()},_resizeWidth:function(){return!1},_resizeHeight:function(){return!1},_getMaxDimensionValue:function(t){var i=a(this.element),n=t.toLowerCase(),s=this.options.rtl?-1:1,r=a(this.element).parent(),o=r[0],l=r[n](),d=s*(t===z?e.scrollLeft(r):r.scrollTop());return o&&o===i.closest("td")[0]?""!==o.style[n]||m(this.element.style[n])?l+d:1/0:l+d},showResizeHandles:function(){this._initResizeHandles(),this._showResizeHandles()},_initResizeHandles:function(){var e,t=this.handles,i=this.options,n=this.options.handles,s=n.length;if(!(t&&t.length>0)){for(e=0;e<s;e++)this.handles.push(new u(o({appendTo:i.appendHandlesTo,resizableElement:this.element,rootElement:i.rootElement,rtl:i.rtl},n[e])));this._bindToResizeHandlesEvents()}},_destroyResizeHandles:function(){for(var e=this.handles?this.handles.length:0,t=0;t<e;t++)this.handles[t].destroy();this.handles=[]},_showResizeHandles:function(){var e,t=(this.handles||[]).length;for(e=0;e<t;e++)this.handles[e].show()},_bindToResizeHandlesEvents:function(){return!1},_onResizeHandleDragStart:function(){var e=a(this.element);e.addClass(C),this._initialElementHeight=k(e),this._initialElementWidth=b(e),this._disableKeyboard()},_onResizeHandleDrag:function(e){this.resize(e)},_onResizeHandleDragEnd:function(){a(this.element).removeClass(C),this._enableKeyboard()},_enableKeyboard:function(){a(this.options.rootElement).off(D+y)},_disableKeyboard:function(){a(this.options.rootElement).on(D+y,function(e){e.preventDefault()})}}),R=N.extend({_bindToResizeHandlesEvents:function(){var e,t,i=this.handles||[],n=i.length;for(e=0;e<n;e++)(t=i[e]).bind(T,this._onResizeHandleDragStart.bind(this)),t.bind(S,this._onResizeHandleDrag.bind(this)),t.bind(I,this._onResizeHandleDragEnd.bind(this))},_hasRowsInPixels:function(){for(var e=a(this.element).children("thead,tbody").children("tr"),t=0;t<e.length;t++)if(""===e[t].style.height||g(e[t].style.height))return!0;return!1},_resizeWidth:function(e,t){var i,r,o,l,d=a(this.element),h=d[0].style.width,u=b(d),c=d.parent().width(),g=this._getMaxDimensionValue(z);0!==e&&(H(this._initialElementWidth)&&(this._initialElementWidth=u),l=f({value:this._initialElementWidth+t,min:this.options.minWidth,max:g}),m(h)?(u+e>c?(r=s(l,c),o=n(l,c)):(r=n(l,c),o=s(l,c)),i=v(p(r,o))):i=_(l),this._setColumnsWidth(),d[0].style.width=i)},_resizeHeight:function(e,t){var i,r,o,l,d=a(this.element),h=d[0].style.height,u=k(d),c=d.parent().height(),g=this._getMaxDimensionValue(P),b=this.options.minHeight,w=this._hasRowsInPixels();0!==e&&(H(this._initialElementHeight)&&(this._initialElementHeight=u),l=f({value:this._initialElementHeight+t,min:b,max:g}),w&&e<0&&this._setRowsHeightInPercentages(),m(h)?(u+e>c?(r=s(l,c),o=n(l,c)):(r=n(l,c),o=s(l,c)),i=v(p(r,o))):i=_(l),d[0].style.height=i,w&&e<0&&this._setRowsHeightInPixels())},_setColumnsWidth:function(){var e,t,i,n=a(this.element),s=n.parent()[0],r=n.closest("td"),o=r.closest("tr").children(),l=o.length;if((""!==(t=(e=n[0]).style.width)?!!m(t):!!a(e).hasClass("k-table"))&&s===r[0]&&""===s.style.width)for(i=0;i<l;i++)o[i].style.width=_(a(o[i]).width())},_setRowsHeightInPercentages:function(){var e,t=a(this.element).children("thead"),i=t.length>0?t.height():0,n=a(this.element).children("tbody").height(),s=a(this.element).children("thead,tbody").children("tr"),r=s.length,o=s.map(function(){return k(a(this))});for(e=0;e<r;e++)s[e].style.height=v(p(o[e],i+n))},_setRowsHeightInPixels:function(){var e,t=a(this.element).children("thead,tbody").children("tr"),i=t.length,n=t.map(function(){return k(a(this))});for(e=0;e<i;e++)t[e].style.height=_(n[e])}}),O=N.extend({_bindToResizeHandlesEvents:function(){var e,t,i=this.handles||[],n=i.length;for(e=0;e<n;e++)(t=i[e]).bind(T,this._onResizeHandleDragStart.bind(this)),"north"===t.options.direction||"south"===t.options.direction?t.bind(S,this._onResizeHandleDragVertical.bind(this)):"east"===t.options.direction||"west"===t.options.direction?t.bind(S,this._onResizeHandleDragHorizontal.bind(this)):t.bind(S,this._onResizeHandleDragLocked.bind(this)),t.bind(I,this._onResizeHandleDragEnd.bind(this))},_getDeltas:function(e){return o({},{deltaX:0,deltaY:0,initialDeltaX:0,initialDeltaY:0},e)},_onResizeHandleDragVertical:function(e){var t=this._getDeltas(e);this._resizeHeight(t.deltaY,t.initialDeltaY),this.showResizeHandles()},_onResizeHandleDragHorizontal:function(e){var t=this._getDeltas(e);this._resizeWidth(t.deltaX,t.initialDeltaX),this.showResizeHandles()},_onResizeHandleDragLocked:function(e){var t,i=Math.min(Math.abs(e.initialDeltaX),Math.abs(e.initialDeltaY)),n=this._initialElementWidth,s=this._initialElementHeight;i===e.initialDeltaX||i===-1*e.initialDeltaX?(e.initialDeltaY=e.initialDeltaX*s/n,e.deltaY=e.deltaX):i!==e.initialDeltaY&&i!==-1*e.initialDeltaY||(e.initialDeltaX=e.initialDeltaY*n/s,e.deltaX=e.deltaY),t=this._getDeltas(e),this._resizeWidth(t.deltaX,t.initialDeltaX),this._resizeHeight(t.deltaY,t.initialDeltaY),this.showResizeHandles()},_resizeWidth:function(e,t){var i,n,s=a(this.element),r=b(s);0!==e&&(H(this._initialElementWidth)&&(this._initialElementWidth=r),i=_(n=f({value:this._initialElementWidth+t,min:this.options.minWidth,max:this._getMaxDimensionValue(z)})),s[0].style.width=i,s.attr(z,Math.floor(n)))},_resizeHeight:function(e,t){var i,n,s=a(this.element),r=k(s);0!==e&&(H(this._initialElementHeight)&&(this._initialElementHeight=r),i=_(n=f({value:this._initialElementHeight+t,min:this.options.minHeight,max:Number.MAX_SAFE_INTEGER})),s[0].style.height=i,s.attr(P,Math.floor(n)))}}),M=h.extend({create:function(e){var t=this;a(e.body).on("dragstart"+y,function(){var t=w.nodes(e.getRange()),i=!1;t.forEach(function(e){"IMG"===e.nodeName&&(i=!0)}),i&&t.length>1&&e.elementResizing._destroyResizeHandles()}).on("drop"+y,function(){setTimeout(function(){var t=w.image(e.getRange());t&&(e.elementResizing._destroyResizeHandles(),e.elementResizing.element=t,e.elementResizing.showResizeHandles())})}).on(F+y,"table,img",function(i){var n=i.target,s=i.currentTarget,a=e.elementResizing,o=a?a.element:null;if(a){if(o&&s!==o){if(r(s,o)&&o!==n&&r(o,n))return;o!==n&&(e._destroyElementResizing(),t._initResizing(e,s))}}else t._initResizing(e,s);e._showElementResizeHandles()}).on(F+y,function(t){var i=e.elementResizing,n=i?i.element:null,s=t.target,o=a(s).hasClass(x)||a(s).parents("."+x).length>0;!i||n===s||r(n,s)||o||e._destroyElementResizing()})},dispose:function(e){a(e.body).off(y)},_initResizing:function(t,i){l.msie||(a(i).is("table")?t.elementResizing=t.tableResizing=new R(i,{appendHandlesTo:t.body,rtl:e.support.isRtl(t.element),rootElement:t.body}):a(i).is("img")&&(t.elementResizing=new O(i,{appendHandlesTo:t.body,rtl:e.support.isRtl(t.element),rootElement:t.body})),t._showElementResizeHandlesProxy&&(t.unbind(E,t._showElementResizeHandlesProxy),t.bind(E,t._showElementResizeHandlesProxy)))}});M.current=new M,o(d,{TableResizing:R,ImageResizing:O,ElementResizing:N,ElementResizingFactory:M})}(window.kendo),dE=window.kendo.jQuery,dH=(dP=(dz=window.kendo).ui.editor).EditorUtils,dN=dP.RangeUtils,dR=dP.Dom,dO=dH.registerTool,dM=dP.ToolTemplate,dB=dP.Command,dL=new dP.BlockFormatFinder([{tags:["table"]}]),dV=new dP.BlockFormatFinder([{tags:["td","th"]}]),dU=/([a-z]+|%)$/i,dW="scope",dj="col-index",dG=dB.extend({exec:function(){var e=this.editor,t=this.range=this.lockRange(),i=this._sourceTable=this.options.insertNewTable?void 0:this._selectedTable(t),n=this._selectedTableCells=i?this._selectedCells(t):dA,s={visible:!1,messages:e.options.messages,closeCallback:this.onDialogClose.bind(this),table:this.parseTable(i,n),dialogOptions:e.options.dialogOptions,isRtl:dz.support.isRtl(e.wrapper)};new dP.TableWizardDialog(s).open()},onDialogClose:function(e){this.releaseRange(this.range),e&&(this.options.insertNewTable?this.insertTable(this.createNewTable(e)):this.updateTable(e,this._sourceTable,this._selectedTableCells))},releaseRange:function(e){var t=this.editor.document;dR.windowFromDocument(t).focus(),dB.fn.releaseRange.call(this,e)},insertTable:function(e){var t=this.range;t.insertNode(e),t.collapse(!0),this.editor.selectRange(t),this._ensureFocusableAfterTable(e)},_ensureFocusableAfterTable:function(e){for(var t=dE(e).parent().contents(),i=t.length-1,n=t.get(i);null!==n.nodeValue&&(" "===n.nodeValue||""===n.nodeValue);)i-=1,n=t.get(i);n===e&&dR.insertAfter(dR.createEmptyNode(this.editor.document,"p"),e)},updateTable:function(e,t,i){for(var n,s,a=this,r=dE(t.rows).toArray(),o=e.tableProperties,l=o.rows,d=t.tHead,h=a._lastInCollection;i.length>1;)i.pop();n=i.length?h(i).parentNode:h(r),a._deleteTableRows(r,r.length-l),r.length<l&&a._addRows(n,l,r),dR.reMapTableColumns(t,dj),a._updateColumns(r,o.columns,i,n),a._updateTableProperties(t,o),s=e.cellProperties,i[0]&&dR.attr(i[0],{id:s.id||null}),(s.selectAllCells?dE(r).children():dE(i)).each(function(e,t){a._updateCellProperties(t,s)}),a._updateCaption(t,o),d?a._updateHeadersWithThead(t,e):a._updateHeadersNoThead(t,e),a._updateHeaderAssociates(t,o),dR.clearTableMappings(t,dj)},_isHeadingRow:function(e){return dR.is(e.cells[0],"th")&&dR.is(e.parentNode,"thead")},_isHeadingCell:function(e){return dR.is(e,"th")},cellsWithHeadersAssociated:function(e){var t=dE(e.rows).children(),i=[],n=function(e){return i.indexOf(e)>-1};return t.each(function(e,t){t.id&&dR.is(t,"th")&&i.push(t.id)}),!!t.filter(function(e,t){var i,s=t.getAttribute("headers");return!!(s&&!dR.is(t,"th")&&(i=s.split(" "))&&i.length>0)&&i.some(n)}).length},_insertCells:function(e,t,i){i=isNaN(i)?-1:i;for(var n=0;n<e;n++)t.insertCell(i).innerHTML="&nbsp;"},_deleteTableRows:function(e,t){for(var i,n,s=0;s<t;s++)(n=(i=e.pop()).parentNode).removeChild(i),n.rows.length||dR.remove(n)},createNewTable:function(e){var t,i=this.editor.document,n=e.tableProperties,s=dR.create(i,"table"),a=0;this._updateTableProperties(s,n),this._updateCaption(s,n),n.headerRows&&n.headerRows>0&&(t=s.createTHead(),this._createTableRows(e,t,a,!0),a+=n.headerRows);var r=s.createTBody();return this._createTableRows(e,r,a,!1),dR.reMapTableColumns(s,dj),"ids"===n.cellsWithHeaders?dR.associateWithIds(s):"scope"===n.cellsWithHeaders&&this._addScopes(s,n.headerRows,n.headerColumns),dR.clearTableMappings(s,dj),s},_createTableRows:function(e,t,i,n){for(var s,a=e.tableProperties,r=e.cellProperties,o=a.columns,l=n?a.headerRows:a.rows,d=r.selectAllCells,h=a.headerColumns,u=i;u<l;u++){s=t.insertRow();for(var c,p=0;p<o;p++)c=n||h>p?document.createElement("th"):document.createElement("td"),s.appendChild(c),c.innerHTML="&nbsp;",0===u&&0===p&&r.id&&(c.id=r.id),this._updateCellProperties(c,d||0===u&&0===p?r:{})}},_addRows:function(e,t,i){for(var n,s=dE(e).index(),a=e.cells.length,r=t-i.length,o=e.parentNode;r;)n=o.insertRow(s+1),this._insertCells(a-n.cells.length,n),r--},_updateColumns:function(e,t,i,n){var s=this,a=s._lastInCollection,r=a(e[0].cells),o=Number(r.getAttribute(dj))+r.colSpan;if(o>t&&dE(e).each(function(e,i){for(var n=a(i.cells),s=Number(n.getAttribute(dj))+n.colSpan;s>t;)n.colSpan&&n.colSpan>1?n.colSpan-=1:i.deleteCell(-1),s=Number((n=a(i.cells)).getAttribute(dj))+n.colSpan}),o<t){var l=dE(a(i)||a(n.cells)).index();dE(e).each(function(e,i){var n=a(i.cells);s._insertCells(t-Number(n.getAttribute(dj))-n.colSpan,i,l+1)})}},_updateTableProperties:function(e,t){var i=this._getStylesData(t);dR.attr(e,{cellSpacing:t.cellSpacing||null,cellPadding:t.cellPadding||null,className:t.className||null,id:t.id||null,summary:t.summary||null,style:i||null}),dE(e).addClass("k-table")},_updateCellProperties:function(e,t){var i=this._getStylesData(t);i.padding=t.cellPadding||null,i.margin=t.cellMargin||null,dR.attr(e,{style:i||null,className:t.className||null})},_updateCaption:function(e,t){if(e.caption&&!t.captionContent)e.deleteCaption();else if(t.captionContent){var i=e.createCaption();i.innerHTML=t.captionContent;var n=this._getAlignmentData(t.captionAlignment);dR.attr(i,{style:{textAlign:n.textAlign,verticalAlign:n.verticalAlign}})}},_updateHeadersNoThead:function(e,t){var i,n,s,a,r=t.tableProperties,o=e.rows;for(s=0;s<o.length;s++)for(i=o[s].cells,a=0;a<i.length;a++)n=i[a],!this._isHeadingCell(n)&&(s<r.headerRows||r.headerColumns>n.getAttribute(dj))?dR.changeTag(n,"th",!1):this._isHeadingCell(n)&&s>=r.headerRows&&r.headerColumns<=n.getAttribute(dj)&&dR.changeTag(n,"td",!1)},_updateHeadersWithThead:function(e,t){var i,n,s,a=t.tableProperties,r=e.tHead,o=0,l=e.tBodies[0];if(l||(l=e.createTBody()),a.headerRows&&a.headerRows>0){for(r||(r=e.createTHead());r.rows.length<a.headerRows;)r.appendChild(l.rows[0]);for(;r.rows.length>a.headerRows;)l.appendChild(r.rows[0]);this._swapToHeaderCells(r)}else if(r){for(;r.rows.length>0;)l.appendChild(r.rows[r.rows.length-1]);e.deleteTHead()}for(;l.rows.length>o;){for(i=l.rows[o],s=0;s<i.cells.length;s++)n=i.cells[s],this._isHeadingCell(n)&&a.headerColumns<=n.getAttribute(dj)?dR.changeTag(n,"td",!1):!this._isHeadingCell(n)&&a.headerColumns>n.getAttribute(dj)&&dR.changeTag(n,"th",!1);o+=1}},_updateHeaderAssociates:function(e,t){"ids"===t.cellsWithHeaders?(this.cellsWithHeadersAssociated(e)||this._removeScopes(e),dR.associateWithIds(e)):"scope"===t.cellsWithHeaders?(this.cellsWithHeadersAssociated(e)&&this._removeAssociates(e),this._addScopes(e,t.headerRows,t.headerColumns)):this.cellsWithHeadersAssociated(e)?this._removeAssociates(e):this._removeScopes(e)},_addScopes:function(e,t,i){var n,s,a,r,o=e.rows;for(n=0;n<o.length;n++)for(a=o[n],s=0;s<a.cells.length;s++)r=a.cells[s],n<t?r.setAttribute(dW,"col"):r.getAttribute(dj)<i&&r.setAttribute(dW,"row")},_removeScopes:function(e){dE(e).find("th").removeAttr(dW),dE(e).find("col").remove(),dE(e).find("colgroup").remove()},_removeAssociates:function(e){dE(e).find("th, td").removeAttr("id headers")},_swapToHeaderCells:function(e){dE(e).find("td").each(function(e,t){dR.changeTag(t,"th",!1)})},_getStylesData:function(e){var t=this._getAlignmentData(e.alignment),i="wrapText"in e?e.wrapText?"":"nowrap":null;return{width:e.width?e.width+e.widthUnit:null,height:e.height?e.height+e.heightUnit:null,textAlign:t.textAlign,verticalAlign:t.verticalAlign,backgroundColor:e.bgColor||"",borderWidth:e.borderWidth,borderStyle:e.borderStyle,borderColor:e.borderColor||"",borderCollapse:e.collapseBorders?"collapse":null,whiteSpace:i}},_getAlignmentData:function(e){var t="",i=t;if(e){if(-1!=e.indexOf(" ")){var n=e.split(" ");t=n[0],i=n[1]}else t=e}return{textAlign:t,verticalAlign:i}},parseTable:function(e,t){if(!e)return{tableProperties:{},selectedCells:[]};var i=e.style,n=e.rows,s=e.caption,a=dE(s?s.cloneNode(!0):dA);a.find(".k-marker").remove();var r=e.className;r=(r=(r=r.replace(/^k-table\s|\sk-table$/,"")).replace(/\sk-table\s/," ")).replace(/^k-table$/,"");var o,l=this._getAlignment(e,!0),d=s?this._getAlignment(s):dA,h=dR._getNumberOfHeaderRows(e);o=this.cellsWithHeadersAssociated(e)?"ids":dE(e).find("th[scope]").length>0?"scope":"none",dR.reMapTableColumns(e,dj);var u=dR._getNumberOfColumns(e),c=dR._getNumberOfHeaderColumns(e,h);dR.clearTableMappings(e,dj);var p={tableProperties:{width:i.width||e.width?parseFloat(i.width||e.width):null,height:i.height||e.height?parseFloat(i.height||e.height):null,columns:u,rows:n.length,widthUnit:this._getUnit(i.width),heightUnit:this._getUnit(i.height),cellSpacing:e.cellSpacing,cellPadding:e.cellPadding,alignment:l.textAlign,bgColor:i.backgroundColor||e.bgColor,className:r,id:e.id,borderWidth:i.borderWidth||e.border,borderColor:i.borderColor,borderStyle:i.borderStyle||"",collapseBorders:!!i.borderCollapse,summary:e.summary,captionContent:s?a.html():"",captionAlignment:s&&d.textAlign?d.textAlign+" "+d.verticalAlign:"",headerRows:h,headerColumns:c,cellsWithHeaders:o},selectedCells:[]};return p.rows=this.parseTableRows(n,t,p),p},parseTableRows:function(e,t,i){for(var n,s,a,r,o=[],l=0;l<e.length;l++){n={cells:[]},s=e[l].cells,o.push(n);for(var d=0;d<s.length;d++)a=s[d],r=this.parseCell(a),-1!=dE.inArray(a,t)&&i.selectedCells.push(r),n.cells.push(r)}return o},parseCell:function(e){var t=e.style,i=this._getAlignment(e);return i=i.textAlign?i.textAlign+" "+i.verticalAlign:"",{width:t.width||e.width?parseFloat(t.width||e.width):null,height:t.height||e.height?parseFloat(t.height||e.height):null,widthUnit:this._getUnit(t.width),heightUnit:this._getUnit(t.height),cellMargin:t.margin,cellPadding:t.padding,alignment:i,bgColor:t.backgroundColor||e.bgColor,className:e.className,id:e.id,borderWidth:t.borderWidth||e.border,borderColor:t.borderColor,borderStyle:t.borderStyle,wrapText:"nowrap"!=t.whiteSpace}},_getAlignment:function(e,t){var i=e.style,n=i.textAlign||e.align||"";if(t)return{textAlign:n};var s=i.verticalAlign||e.vAlign||"";return n&&s?{textAlign:n,verticalAlign:s}:!n&&s?{textAlign:"left",verticalAlign:s}:n&&!s?{textAlign:n,verticalAlign:"top"}:{textAlign:"",verticalAlign:""}},_getUnit:function(e){var t=(e||"").match(dU);return t?t[0]:"px"},_selectedTable:function(e){var t=dR.filterBy(dN.nodes(e),dR.htmlIndentSpace,!0);return dL.findSuitable(t)[0]},_selectedCells:function(e){var t=dR.filterBy(dN.nodes(e),dR.htmlIndentSpace,!0);return dV.findSuitable(t)},_lastInCollection:function(e){return e[e.length-1]}}),dK=(dq=dP.Tool.extend({command:function(e){return e.insertNewTable=this.options.insertNewTable,new dG(e)}})).extend({update:function(e,t){!0==!dL.isFormatted(t)?(e.parent().addClass("k-hidden k-disabled"),e.attr("disabled","disabled"),e.addClass("k-disabled")):(e.parent().removeClass("k-hidden k-disabled"),e.prop("disabled",!1),e.removeClass("k-disabled"))}}),dz.ui.editor.TableWizardTool=dq,dz.ui.editor.TableWizardCommand=dG,dO("tableWizard",new dK({command:dG,insertNewTable:!1,template:new dM({template:dH.buttonTemplate,title:"Table Wizard"})})),function(e,t){var i=window.kendo,n=i.ui,s=i.keys,a=e.map,o=e.each,l=i.trim,d=e.extend,h=i.isFunction,u=i.template,c=i._outerWidth,p=i._outerHeight,f=n.Widget,m=/^(a|div)$/i,g=".kendoTabStrip",v="href",_="prev",b="next",k="show",w="k-link",y="k-last",x="click",C="k-image",T="k-first",S="select",I="activate",D="k-tabstrip-content k-content",F="contentUrl",E="mouseenter",A="contentLoad",z="k-disabled",P="k-active",H="k-focus",N="k-hover",R="k-tab-on-top",O=".k-item:not(.k-disabled)",M=".k-item",B="aria-hidden",L="aria-controls",V="aria-disabled",U="aria-selected",W="aria-labelledby",j={content:u("<div class='k-tabstrip-content k-content' #= contentAttributes(data) # tabindex='0'>#= content(item) #</div>"),itemWrapper:u("<#= tag(item) # class='k-link' #= contentUrl(item) # #= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) #</#= tag(item) #>"),item:u("<li class='#= wrapperCssClass(group, item) #' role='tab' #=item.active ? \"aria-selected='true'\" : ''#>#= itemWrapper(data) #</li>"),image:u("<img class='k-image' alt='' src='#= imageUrl #' />"),sprite:u("<span class='k-sprite #= spriteCssClass #'></span>"),empty:u("")},G={wrapperCssClass:function(e,t){var i=["k-tabstrip-item","k-item"],n=t.index;return!1===t.enabled&&i.push("k-disabled"),0===n&&i.push("k-first"),n==e.length-1&&i.push("k-last"),i.join(" ")},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},text:function(e){return!1===e.encoded?e.text:i.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},contentAttributes:function(e){return!0!==e.active?" style='display:none' aria-hidden='true'":""},content:function(e){return e.content?e.content:e.contentUrl?"":"&nbsp;"},contentUrl:function(e){return e.contentUrl?i.attr("content-url")+'="'+e.contentUrl+'"':""}};function q(t){t.children("img").addClass(C),t.children("a").addClass(w).children("img").addClass(C),t.filter("li[disabled]").addClass(z).attr(V,"true").prop("disabled",!1),t.filter(":not([class*=k-state])").children("a").filter(":focus").parent().addClass("k-active "+R),t.attr("role","tab"),t.filter(".k-active").attr(U,!0),t.each(function(){var t=e(this);t.children("."+w).length||t.contents().filter(function(){return!(this.nodeName.match(m)||3==this.nodeType&&!l(this.nodeValue))}).wrapAll("<span UNSELECTABLE='on' class='k-link'/>")})}function K(e){var t=e.children(".k-item");t.filter(".k-first:not(:first-child)").removeClass(T),t.filter(".k-last:not(:last-child)").removeClass(y),t.filter(":first-child").addClass(T),t.filter(":last-child").addClass(y)}function $(e,t){return"<span aria-hidden='true' class='k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button k-tabstrip-"+e+"' unselectable='on'><span class='k-button-icon k-icon "+t+"'></span></span>"}var Y=f.extend({init:function(e,t){var n;f.fn.init.call(this,e,t),this._animations(this.options),t=this.options,this._contentUrls=t.contentUrls||[],this._wrapper(),this._isRtl=i.support.isRtl(this.wrapper),this._tabindex(),this._updateClasses(),this._dataSource(),this.tabGroup.attr("role","tablist"),t.dataSource&&this.dataSource.fetch(),this._tabPosition(),this._scrollable(),this._processContentUrls(),this._attachEvents(),this.options.value&&(n=this.options.value),this._initialActivate(),this.value(n),i.notify(this)},events:[S,I,k,"error",A,"change","dataBinding","dataBound"],options:{name:"TabStrip",dataEncodedField:"",dataTextField:"",dataContentField:"",dataImageUrlField:"",dataUrlField:"",dataSpriteCssClass:"",dataContentUrlField:"",tabPosition:"top",animation:{open:{effects:"expand:vertical fadeIn",duration:200},close:{duration:200}},collapsible:!1,navigatable:!0,contentUrls:!1,scrollable:{distance:200}},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.dataSource.fetch()},setOptions:function(e){var t=this.options.animation;this._animations(e),e.contentUrls&&(this._contentUrls=e.contentUrls),e.animation=d(!0,t,e.animation),e.navigatable?this.wrapper.on("keydown"+g,this._keyDownProxy):this.wrapper.off("keydown"+g,this._keyDownProxy),f.fn.setOptions.call(this,e)},activateTab:function(e){if(!this.tabGroup.children("[data-animating]").length){e=this.tabGroup.find(e);var t=this,n=t.options.animation,s=n.open,a=d({},n.close),r=a&&"effects"in a,o=e.parent().children(),l=o.filter(".k-active"),h=o.index(e),u=s&&"duration"in s&&"effects"in s;a=d(r?a:d({reverse:!0},s),{hide:!0}),i.size(s.effects)?(l.kendoRemoveClass(P,{duration:a.duration}),e.kendoRemoveClass(N,{duration:a.duration})):(l.removeClass(P),e.removeClass(N));var c=t.contentAnimators;if(t.inRequest&&(t.xhr.abort(),t.inRequest=!1),0===c.length)return t.tabGroup.find("."+R).removeClass(R),e.addClass(R).css("z-index"),e.addClass(P),t._current(e),t.trigger("change"),t._scrollableModeActive&&t._scrollTabsToItem(e),!1;var f=c.filter(".k-active"),m=t.contentHolder(h),g=m.closest(".k-content");if(t.tabsHeight=p(t.tabGroup)+parseInt(t.wrapper.css("border-top-width"),10)+parseInt(t.wrapper.css("border-bottom-width"),10),0===m.length)return f.removeClass(P).attr(B,!0).kendoStop(!0,!0).kendoAnimate(a),!1;e.attr("data-animating",!0);var v=!(!e.children("."+w).data(F)&&!t._contentUrls[h])&&m.is(":empty"),_=function(){l.removeAttr(U),e.attr(U,!0),t._current(e),g.addClass(P).removeAttr(B).kendoStop(!0,!0).kendoAnimate(d({init:function(){t.trigger(k,{item:e[0],contentElement:m[0]}),i.resize(m)}},s,{complete:function(){e.removeAttr("data-animating"),t.trigger(I,{item:e[0],contentElement:m[0]}),i.resize(m),u&&(i.support.browser.msie||i.support.browser.edge)&&m.finish().animate({opacity:.9},"fast","linear",function(){m.finish().animate({opacity:1},"fast","linear")})}}))},b=function(){v?(e.removeAttr("data-animating"),t.ajaxRequest(e,m,function(){e.attr("data-animating",!0),_(),t.trigger("change")})):(_(),t.trigger("change")),t._scrollableModeActive&&t._scrollTabsToItem(e)},y=t.element.css("min-height");return t.element.css("min-height",t.element.outerHeight()),f.removeClass(P),t.tabGroup.find("."+R).removeClass(R),e.addClass(R).css("z-index"),i.size(s.effects)?e.kendoAddClass(P,{duration:s.duration}):e.addClass(P),f.attr(B,!0),f.length?f.kendoStop(!0,!0).kendoAnimate(d({complete:b},a)):b(),t.element.css("min-height",y),!0}},ajaxRequest:function(t,n,s,a){t=this.tabGroup.find(t);var r=this,o=e.ajaxSettings.xhr,l=t.find("."+w),d=t.width()/2,u=!1,c=t.find(".k-loading").removeClass("k-complete");c[0]||(c=e("<span class='k-loading'/>").prependTo(t));var p=2*d-c.width(),f=function(){c.animate({marginLeft:(parseInt(c.css("marginLeft"),10)||0)<d?p:0},500,f)};i.support.browser.msie&&i.support.browser.version<10&&setTimeout(f,40),a=a||l.data(F)||r._contentUrls[t.index()]||l.attr(v),r.inRequest=!0;var m={type:"GET",cache:!1,url:a,dataType:"html",data:{},xhr:function(){var t=this,i=o(),n=t.progressUpload?"progressUpload":!!t.progress&&"progress";return i&&e.each([i,i.upload],function(){this.addEventListener&&this.addEventListener("progress",function(e){n&&t[n](e)},!1)}),t.noProgress=!(window.XMLHttpRequest&&"upload"in new XMLHttpRequest),i},progress:function(e){if(e.lengthComputable){var t=parseInt(e.loaded/e.total*100,10)+"%";c.stop(!0).addClass("k-progress").css({width:t,marginLeft:0})}},error:function(e,t){r.trigger("error",{xhr:e,status:t})&&this.complete()},stopProgress:function(){clearInterval(u),c.stop(!0).addClass("k-progress")[0].style.cssText=""},complete:function(e){r.inRequest=!1,this.noProgress?setTimeout(this.stopProgress,500):this.stopProgress(),"abort"==e.statusText&&c.remove()},success:function(e){c.addClass("k-complete");try{var o=this,l=10;o.noProgress&&(c.width(l+"%"),u=setInterval(function(){o.progress({lengthComputable:!0,loaded:Math.min(l,100),total:100}),l+=10},40)),r.angular("cleanup",function(){return{elements:n.get()}}),i.destroy(n),n.html(e)}catch(e){var d=window.console;d&&d.error&&d.error(e.name+": "+e.message+" in "+a),this.error(this.xhr,"error")}s&&s.call(r,n),r.angular("compile",function(){return{elements:n.get()}}),r.trigger(A,{item:t[0],contentElement:n[0]})}};"object"==typeof a&&h((m=e.extend(!0,{},m,a)).url)&&(m.url=m.url()),r.xhr=e.ajax(m)},append:function(e){var t=this,i=t._create(e);return o(i.tabs,function(e){var n=i.contents[e];t.tabGroup.append(this),"bottom"==t.options.tabPosition?t.tabWrapper.before(n):t.wrapper.append(n),t.angular("compile",function(){return{elements:[n]}})}),K(t.tabGroup),t._updateContentElements(),t.resize(!0),t},contentElement:function(n){if(isNaN(n-0))return t;var s=this.contentElements&&this.contentElements[0]&&!i.kineticScrollNeeded?this.contentElements:this.contentAnimators,a=e(this.tabGroup.children()[n]).attr(L);if(s){for(var r=0,o=s.length;r<o;r++)if(s.eq(r).closest(".k-content")[0].id==a)return s[r]}return t},contentHolder:function(t){var n=e(this.contentElement(t)),s=n.children(".km-scroll-container");return i.support.touch&&s[0]?s:n},deactivateTab:function(e){var t=this.options.animation,n=t.open,s=d({},t.close),a=s&&"effects"in s;e=this.tabGroup.find(e),s=d(a?s:d({reverse:!0},n),{hide:!0}),i.size(n.effects)?e.kendoRemoveClass(P,{duration:n.duration}):e.removeClass(P),e.removeAttr(U),this.contentAnimators.filter(".k-active").kendoStop(!0,!0).kendoAnimate(s).removeClass(P).attr(B,!0)},destroy:function(){f.fn.destroy.call(this),this._refreshHandler&&this.dataSource.unbind("change",this._refreshHandler),this.wrapper.off(g),this.tabGroup.off(g),this._scrollableModeActive&&(this._scrollPrevButton.off().remove(),this._scrollNextButton.off().remove()),i.destroy(this.wrapper)},disable:function(e){return this._toggleDisabled(e,!1),this},enable:function(e,t){return this._toggleDisabled(e,!1!==t),this},insertAfter:function(t,i){i=e(t).is(e(i))?this.tabGroup.find(i).prev():this.tabGroup.find(i);var n=this,s=n._create(t),a=n.element.find("[id='"+i.attr(L)+"']");return o(s.tabs,function(t){var r=s.contents[t],o=s.newTabsCreated?n._contentUrls.length-(s.tabs.length-t):e(r).index()-1;i.after(this),a.after(r),n._moveUrlItem(o,e(this).index()),n.angular("compile",function(){return{elements:[r]}})}),K(n.tabGroup),n._updateContentElements(s.newTabsCreated),n.resize(!0),n},insertBefore:function(t,i){i=e(t).is(e(i))?this.tabGroup.find(i).next():this.tabGroup.find(i);var n=this,s=n._create(t),a=n.element.find("[id='"+i.attr(L)+"']");return o(s.tabs,function(t){var r=s.contents[t],o=s.newTabsCreated?n._contentUrls.length-(s.tabs.length-t):e(r).index()-1;i.before(this),a.before(r),n._moveUrlItem(o,e(this).index()),n.angular("compile",function(){return{elements:[r]}})}),K(n.tabGroup),n._updateContentElements(s.newTabsCreated),n.resize(!0),n},items:function(){return this.tabGroup[0].children},refresh:function(e){var t,n,s,a=this.options,r=i.getter(a.dataEncodedField),o=i.getter(a.dataTextField),l=i.getter(a.dataContentField),d=i.getter(a.dataContentUrlField),h=i.getter(a.dataImageUrlField),u=i.getter(a.dataUrlField),c=i.getter(a.dataSpriteCssClass),p=[],f=this.dataSource.view();for((e=e||{}).action&&(f=e.items),t=0,s=f.length;t<s;t++)n={text:o(f[t])},a.dataEncodedField&&(n.encoded=r(f[t])),a.dataContentField&&(n.content=l(f[t])),a.dataContentUrlField&&(n.contentUrl=d(f[t])),a.dataUrlField&&(n.url=u(f[t])),a.dataImageUrlField&&(n.imageUrl=h(f[t])),a.dataSpriteCssClass&&(n.spriteCssClass=c(f[t])),p[t]=n;if("add"==e.action)e.index<this.tabGroup.children().length?this.insertBefore(p,this.tabGroup.children().eq(e.index)):this.append(p);else if("remove"==e.action)for(t=0;t<f.length;t++)this.remove(e.index);else"itemchange"==e.action?(t=this.dataSource.view().indexOf(f[0]),e.field===a.dataTextField&&this.tabGroup.children().eq(t).find(".k-link").text(f[0].get(e.field)),e.field===a.dataUrlField&&(this._contentUrls[t]=f[0].get(e.field))):(this.trigger("dataBinding"),this.remove("li"),this._contentUrls=[],this.append(p),this.trigger("dataBound"))},reload:function(t){t=this.tabGroup.find(t);var i=this,n=i._contentUrls;return t.each(function(){var t=e(this),s=t.find("."+w).data(F)||n[t.index()],a=i.contentHolder(t.index());s&&i.ajaxRequest(t,a,null,s)}),i},remove:function(t){var n,s=this,a=typeof t;return"string"===a?t=s.tabGroup.find(t):"number"===a&&(t=s.tabGroup.children().eq(t)),n=t.map(function(){var t=e(this).index(),n=s.contentElement(t);return i.destroy(n),s._removeUrlItem(t),n}),t.remove(),n.empty(),n.remove(),s._updateContentElements(),s.resize(!0),s},select:function(t){var i=this;return 0==arguments.length?i.tabGroup.children("li.k-active"):(isNaN(t)||(t=i.tabGroup.children().get(t)),e(t=i.tabGroup.find(t)).each(function(t,n){(n=e(n)).hasClass(P)||i.trigger(S,{item:n[0],contentElement:i.contentHolder(n.index())[0]})||i.activateTab(n)}),i)},value:function(n){var s=this;if(n===t)return s.select().text();n!=s.value()&&s.tabGroup.children().each(function(){i.trim(e(this).text())==n&&s.select(this)})},_active:function(){var e=this.tabGroup.children().filter(".k-active");(e=e[0]?e:this._endItem("first"))[0]&&this._current(e)},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={open:{effects:{}},close:{effects:{}}})},_appendUrlItem:function(e){this._contentUrls.push(e)},_attachEvents:function(){var e=this,t=e.options;e.wrapper.on(E+g+" mouseleave"+g,".k-tabstrip-items > .k-item:not(.k-disabled):not(.k-active)",e._toggleHover).on("focus"+g,e._active.bind(e)).on("blur"+g,function(){e._current(null)}),e._keyDownProxy=e._keydown.bind(e),t.navigatable&&e.wrapper.on("keydown"+g,e._keyDownProxy),e.tabGroup.on(x+g,".k-disabled .k-link",!1).on(x+g," > "+O,e._itemClick.bind(e))},_click:function(e){var t,i,n=e.find("."+w),s=n.attr(v),a=this.options.collapsible,r=e.index(),o=this.contentHolder(r),l=e.parent().children().filter(".k-focus");if(e.closest(".k-widget")[0]==this.wrapper[0]){if(e.is(".k-disabled"+(a?"":",.k-active")))return l.removeClass(H),this._focused=e,e.addClass(H),this._current(e),this._scrollableModeActive&&this._scrollTabsToItem(e),!0;if(i=n.data(F)||this._contentUrls[r]||s&&("#"==s.charAt(s.length-1)||-1!=s.indexOf("#"+this.element[0].id+"-")),t=!s||i,this.tabGroup.children("[data-animating]").length)return t;if(this.trigger(S,{item:e[0],contentElement:o[0]}))return!0;if(!1!==t)return a&&e.is(".k-active")?(this.deactivateTab(e),!0):(this.activateTab(e)&&(t=!0),t)}},_create:function(t){var n,s,r,o=this,l=!1;return t=t instanceof i.data.ObservableArray?t.toJSON():t,e.isPlainObject(t)||Array.isArray(t)?(t=Array.isArray(t)?t:[t],l=!0,n=a(t,function(i,n){return o._appendUrlItem(t[n].contentUrl||null),e(Y.renderItem({group:o.tabGroup,item:d(i,{index:n})}))}),s=a(t,function(t,i){if("string"==typeof t.content||t.contentUrl)return e(Y.renderContent({item:d(t,{index:i})}))})):(n="string"==typeof t&&"<"!=t[0]?o.element.find(t):e(t),s=e(),n.each(function(){r=/k-tabstrip-items/.test(this.parentNode.className)?o.element.find("[id='"+this.getAttribute(L)+"']"):e("<div class='"+D+"'/>"),s=s.add(r)}),q(n)),{tabs:n,contents:s,newTabsCreated:l}},_current:function(e){var i=this._focused;if(e===t)return i;i&&i.removeClass(H),e&&(e.hasClass(P)||e.addClass(H)),this._focused=e},_dataSource:function(){this.dataSource&&this._refreshHandler?this.dataSource.unbind("change",this._refreshHandler):this._refreshHandler=this.refresh.bind(this),this.dataSource=i.data.DataSource.create(this.options.dataSource).bind("change",this._refreshHandler)},_elementId:function(e,t,n){var s=e.attr("id"),a=this.element.attr("id"),r=i.guid();if(!s||s.indexOf(a+"-")>-1){var o=(a||r)+"-";return n&&(o+="tab-"),o+(t+1)}return s},_endItem:function(e){return this.tabGroup.children(O)[e]()},_getItem:function(e){return this.tabGroup.children(M)[e]()},_initialActivate:function(){var e=this.tabGroup.children("li.k-active"),t=this.contentHolder(e.index());e[0]&&t.length>0&&0===t[0].childNodes.length&&this.activateTab(e.eq(0))},_item:function(e,t){var i;return i=t===_?"last":"first",e?((e=e[t]())[0]||(e=this.tabGroup.children(M)[i]()),e.hasClass(z)&&e.addClass(H),(e.hasClass(z)||e.hasClass(P))&&(this._focused=e),e):this._endItem(i)},_itemClick:function(t){var n=this.wrapper[0];if(n!==document.activeElement){if(i.support.browser.msie)try{n.setActive()}catch(e){n.focus()}else n.focus()}this._click(e(t.currentTarget))&&t.preventDefault()},_keydown:function(e){var t,i=e.keyCode,n=this._current(),a=this._isRtl,r=/top|bottom/.test(this.options.tabPosition);if(e.target==e.currentTarget&&n){if(i!==s.DOWN||r){if(i!==s.UP||r){if(i===s.RIGHT&&r)t=a?_:b;else if(i===s.LEFT&&r)t=a?b:_;else if(i==s.ENTER||i==s.SPACEBAR)this._click(n),e.preventDefault();else{if(i==s.HOME)return this._click(this._getItem("first")),void e.preventDefault();if(i==s.END)return this._click(this._getItem("last")),void e.preventDefault()}}else t=_}else t=b;t&&(this._click(this._item(n,t)),e.preventDefault())}},_moveUrlItem:function(e,t){this._contentUrls.splice(t,0,this._contentUrls.splice(e,1)[0])},_processContentUrls:function(){var t=this;t._contentUrls.length?t.tabGroup.children(".k-item").each(function(i,n){var s=t._contentUrls[i];"string"==typeof s&&e(n).find(">."+w).data(F,s)}):t._contentUrls.length=t.tabGroup.find("li.k-item").length},_removeUrlItem:function(e){this._contentUrls.splice(e,1)},_resize:function(){this._scrollable()},_scrollable:function(){var e,t,n,s,a=this,r=a.options;if(a._scrollableAllowed()){if(a.wrapper.addClass("k-tabstrip-scrollable"),e=a.wrapper[0].offsetWidth,(t=a.tabGroup[0].scrollWidth)>e&&!a._scrollableModeActive){a._nowScrollingTabs=!1,a._isRtl=i.support.isRtl(a.element);var o=i.support.touch?"touchstart":"mousedown",l=i.support.touch?"touchend":"mouseup",d=i.support.browser,h=a._isRtl&&!d.msie&&!d.edge;a.tabWrapper.prepend($("prev","k-i-arrow-60-left")),a.tabWrapper.append($("next","k-i-arrow-60-right")),n=a._scrollPrevButton=a.tabWrapper.children(".k-tabstrip-prev"),s=a._scrollNextButton=a.tabWrapper.children(".k-tabstrip-next"),n.on(o+g,function(){a._nowScrollingTabs=!0,a._scrollTabsByDelta(r.scrollable.distance*(h?1:-1))}),s.on(o+g,function(){a._nowScrollingTabs=!0,a._scrollTabsByDelta(r.scrollable.distance*(h?-1:1))}),n.add(s).on(l+g,function(){a._nowScrollingTabs=!1}),a._scrollableModeActive=!0,a._toggleScrollButtons()}else a._scrollableModeActive&&t<=e?(a._scrollableModeActive=!1,a.wrapper.removeClass("k-tabstrip-scrollable"),a._scrollPrevButton.off().remove(),a._scrollNextButton.off().remove()):a._scrollableModeActive?a._toggleScrollButtons():a.wrapper.removeClass("k-tabstrip-scrollable")}},_scrollableAllowed:function(){var e=this.options;return e.scrollable&&!e.scrollable.distance&&(e.scrollable={distance:200}),e.scrollable&&!isNaN(e.scrollable.distance)&&("top"==e.tabPosition||"bottom"==e.tabPosition)},_scrollTabsToItem:function(e){var t,n=this,s=n.tabGroup,a=i.scrollLeft(s),r=c(e),o=n._isRtl?e.position().left:e.position().left-s.children().first().position().left,l=s[0].offsetWidth,d=i.support.browser;n._isRtl&&(d.mozilla||d.webkit&&d.version>=85)&&(a*=-1),n._isRtl?o<0?t=a+o-(l-a):o+r>l&&(t=a+o-r):a+l<o+r?t=o+r-l:a>o&&(t=o),s.finish().animate({scrollLeft:t},"fast","linear",function(){n._toggleScrollButtons()})},_scrollTabsByDelta:function(e){var t=this,n=t.tabGroup,s=i.scrollLeft(n),a=i.support.browser;t._isRtl&&(a.mozilla||a.webkit&&a.version>=85)&&(s*=-1),n.finish().animate({scrollLeft:s+e},"fast","linear",function(){t._nowScrollingTabs&&!r.fx.off?t._scrollTabsByDelta(e):t._toggleScrollButtons()})},_tabPosition:function(){var e=this.options.tabPosition;this.wrapper.addClass("k-floatwrap k-tabstrip-"+e),"bottom"==e&&this.tabWrapper.appendTo(this.wrapper),"left"!==e&&"right"!==e||this.tabGroup.attr("aria-orientation","vertical"),this.resize(!0)},_toggleHover:function(t){e(t.currentTarget).toggleClass(N,t.type==E)},_toggleDisabled:function(t,i){(t=this.tabGroup.find(t)).each(function(){e(this).toggleClass(z,!i).attr(V,!i)})},_toggleScrollButtons:function(){var e=this.tabGroup,t=i.scrollLeft(e);this._scrollPrevButton.toggleClass("k-disabled",0===t),this._scrollNextButton.toggleClass("k-disabled",t===e[0].scrollWidth-e[0].offsetWidth)},_updateClasses:function(){var i,n,s,a=/top|bottom/.test(this.options.tabPosition);this.wrapper.addClass("k-widget k-tabstrip"),this.tabGroup||(this.tabGroup=this.wrapper.children("ul"),this.tabGroup.wrap("<div />"),this.tabWrapper=this.tabGroup.parent()),this.tabGroup[0]||(this.tabGroup=e("<ul />").prependTo(this.wrapper),this.tabGroup.wrap("<div />"),this.tabWrapper=this.tabGroup.parent()),this.tabWrapper.addClass("k-tabstrip-items-wrapper"),this.tabWrapper.addClass(a?"k-hstack":"k-vstack"),this.tabGroup.addClass("k-tabstrip-items k-reset"),(i=this.tabGroup.find("li").addClass("k-tabstrip-item k-item")).length&&(s=(n=i.filter(".k-active").index())>=0?n:t,this.tabGroup.contents().filter(function(){return 3==this.nodeType&&!l(this.nodeValue)}).remove()),n>=0&&i.eq(n).addClass(R),this.contentElements=this.wrapper.children("div:not(.k-tabstrip-items-wrapper)"),this.contentElements.addClass(D).eq(s).addClass(P).css({display:"block"}),i.length&&(q(i),K(this.tabGroup),this._updateContentElements(!0))},_updateContentElements:function(t){var n=this,s=n._contentUrls,a=n.tabGroup.children(".k-item"),r=n.wrapper.children("div:not(.k-tabstrip-items-wrapper)"),o=n._elementId.bind(n);r.length&&a.length>r.length?r.each(function(i){var n,s=o(e(this),i),r=a.filter("[aria-controls="+(s||0)+"]")[0];!r&&t&&(r=a[i]),r&&(r.setAttribute(L,s),n=r.id=o(e(r),i,!0),this.setAttribute(W,n)),this.setAttribute("id",s)}):a.each(function(t){var i,a=r.eq(t),l=o(a,t);this.setAttribute(L,l),i=this.id=o(e(this),t,!0),!a.length&&s[t]?e("<div class='"+D+"'/>").appendTo(n.wrapper).attr("id",l):(a.attr("id",l),e(this).children(".k-loading")[0]||s[t]||e("<span class='k-loading k-complete'/>").prependTo(this)),a.attr("role","tabpanel"),a.attr("tabindex","0"),a.attr(W,i),a.filter(":not(.k-active)").attr(B,!0)}),n.contentElements=n.contentAnimators=n.wrapper.children("div:not(.k-tabstrip-items-wrapper)"),n.tabsHeight=p(n.tabGroup)+parseInt(n.wrapper.css("border-top-width"),10)+parseInt(n.wrapper.css("border-bottom-width"),10),i.kineticScrollNeeded&&i.mobile.ui.Scroller&&(i.touchScroller(n.contentElements),n.contentElements=n.contentElements.children(".km-scroll-container"))},_wrapper:function(){this.element.is("ul")?this.wrapper=this.element.wrapAll("<div />").parent():this.wrapper=this.element}});d(Y,{renderItem:function(e){e=d({tabStrip:{},group:{}},e);var t=j.empty,i=e.item;return j.item(d(e,{image:i.imageUrl?j.image:t,sprite:i.spriteCssClass?j.sprite:t,itemWrapper:j.itemWrapper},G))},renderContent:function(e){return j.content(d(e,G))}}),i.ui.plugin(Y)}(window.kendo.jQuery),d$=window.kendo.jQuery,dY=window.kendo,dQ={format:"0",min:0},dX=["px","em"],dJ=["solid","dotted","dashed","double","groove","ridge","inset","outset","initial","inherit","none","hidden"],dZ={dataSource:[{className:"k-icon k-i-table-align-middle-left",value:"left"},{className:"k-icon k-i-table-align-middle-center",value:"center"},{className:"k-icon k-i-table-align-middle-right",value:"right"},{className:"k-icon k-i-align-remove",value:""}],dataTextField:"className",dataValueField:"value",template:"<span class='#: className #' title='#: tooltip #'></span>",valueTemplate:"<span class='k-align-group #: className #' title='#: tooltip #'></span>"},d0={dataSource:[{className:"k-icon k-i-table-align-top-left",value:"left top"},{className:"k-icon k-i-table-align-top-center",value:"center top"},{className:"k-icon k-i-table-align-top-right",value:"right top"},{className:"k-icon k-i-table-align-middle-left",value:"left middle"},{className:"k-icon k-i-table-align-middle-center",value:"center middle"},{className:"k-icon k-i-table-align-middle-right",value:"right middle"},{className:"k-icon k-i-table-align-bottom-left",value:"left bottom"},{className:"k-icon k-i-table-align-bottom-center",value:"center bottom"},{className:"k-icon k-i-table-align-bottom-right",value:"right bottom"},{className:"k-icon k-i-align-remove",value:""}],dataTextField:"className",dataValueField:"value",template:"<span class='#: className #' title='#: tooltip #'></span>",valueTemplate:"<span class='k-align-group #: className #' title='#: tooltip #'></span>"},d1={dataSource:[{className:"k-icon k-i-table-align-top-left",value:"left top"},{className:"k-icon k-i-table-align-top-center",value:"center top"},{className:"k-icon k-i-table-align-top-right",value:"right top"},{className:"k-icon k-i-table-align-bottom-left",value:"left bottom"},{className:"k-icon k-i-table-align-bottom-center",value:"center bottom"},{className:"k-icon k-i-table-align-bottom-right",value:"right bottom"},{className:"k-icon k-i-align-remove",value:""}],dataTextField:"className",dataValueField:"value",template:"<span class='#: className #' title='#: tooltip #'></span>",valueTemplate:"<span class='k-align-group #: className #' title='#: tooltip #'></span>"},d2=dY.Class.extend({init:function(e){this.options=e},open:function(){var e,t=this,i=t.options,n=i.dialogOptions,s=i.table,a=i.messages,r=dY.support.browser.msie;function o(i){i.preventDefault(),t.destroy(),e.destroy()}function l(e){o(e),i.closeCallback()}n.close=l,n.title=a.tableWizard,n.visible=i.visible;var d=(e=d$(t._dialogTemplate(a)).appendTo(document.body).kendoWindow(n).closest(".k-window").toggleClass("k-rtl",i.isRtl).end().find(".k-dialog-ok").on("click",function(e){t.collectDialogValues(s),o(e),t.change&&t.change(),i.closeCallback(s)}).end().find(".k-dialog-close").on("click",l).end().data("kendoWindow")).element;if(t._initTabStripComponent(d),t._initTableViewComponents(d,s),t._initCellViewComponents(d,s),t._initAccessibilityViewComponents(d,s),e.center(),e.open(),r){var h=d.closest(".k-window").height();d.css("max-height",h)}},_initTabStripComponent:function(e){(this.components={}).tabStrip=e.find("#k-table-wizard-tabs").kendoTabStrip({animation:!1}).data("kendoTabStrip")},collectDialogValues:function(){var e=this.options.table;this._collectTableViewValues(e),this._collectCellViewValues(e),this._collectAccessibilityViewValues(e)},_collectTableViewValues:function(e){var t=this.components.tableView,i=e.tableProperties;i.width=t.width.value(),i.widthUnit=t.widthUnit.value(),i.height=t.height.value(),i.columns=t.columns.value(),i.rows=t.rows.value(),i.heightUnit=t.heightUnit.value(),i.cellSpacing=t.cellSpacing.value(),i.cellPadding=t.cellPadding.value(),i.alignment=t.alignment.value(),i.bgColor=t.bgColor.value(),i.className=t.className.value,i.id=t.id.value,i.borderWidth=t.borderWidth.value(),i.borderColor=t.borderColor.value(),i.borderStyle=t.borderStyle.value(),i.collapseBorders=t.collapseBorders.checked},_collectCellViewValues:function(e){var t=e.cellProperties={},i=this.components.cellView;t.selectAllCells=i.selectAllCells.checked,t.width=i.width.value(),t.widthUnit=i.widthUnit.value(),t.height=i.height.value(),t.heightUnit=i.heightUnit.value(),t.cellMargin=i.cellMargin.value(),t.cellPadding=i.cellPadding.value(),t.alignment=i.alignment.value(),t.bgColor=i.bgColor.value(),t.className=i.className.value,t.id=i.id.value,t.borderWidth=i.borderWidth.value(),t.borderColor=i.borderColor.value(),t.borderStyle=i.borderStyle.value(),t.wrapText=i.wrapText.checked,t.width||(t.selectAllCells=!0,t.width=100/e.tableProperties.columns,t.widthUnit="%")},_collectAccessibilityViewValues:function(e){var t=e.tableProperties,i=this.components.accessibilityView;t.captionContent=i.captionContent.value,t.captionAlignment=i.captionAlignment.value(),t.summary=i.summary.value,t.cellsWithHeaders=i.cellsWithHeaders.value(),t.headerRows=i.headerRows.value(),t.headerColumns=i.headerColumns.value()},_addUnit:function(e,t){t&&-1==d$.inArray(t,e)&&e.push(t)},_initTableViewComponents:function(e,t){var i=this,n=i.components.tableView={},s=t.tableProperties=t.tableProperties||{};s.borderStyle=s.borderStyle||"",i._addUnit(dX,s.widthUnit),i._addUnit(dX,s.heightUnit),i._initNumericTextbox(e.find("#k-editor-table-width"),"width",s,n),i._initNumericTextbox(e.find("#k-editor-table-height"),"height",s,n),i._initNumericTextbox(e.find("#k-editor-table-columns"),"columns",s,n,{min:1,value:4,change:function(e){var t=i.components.accessibilityView.headerColumns,n=t.value(),s=e.sender.value();s<n&&t.value(s),t.max(s)}}),i._initNumericTextbox(e.find("#k-editor-table-rows"),"rows",s,n,{min:1,value:4,change:function(e){var t=i.components.accessibilityView.headerRows,n=t.value(),s=e.sender.value();s<n&&t.value(s),t.max(s)}}),i._initDropDownList(e.find("#k-editor-table-width-type"),"widthUnit",s,n,dX),i._initDropDownList(e.find("#k-editor-table-height-type"),"heightUnit",s,n,dX),i._initNumericTextbox(e.find("#k-editor-table-cell-spacing"),"cellSpacing",s,n),i._initNumericTextbox(e.find("#k-editor-table-cell-padding"),"cellPadding",s,n),i._initTableAlignmentDropDown(e.find("#k-editor-table-alignment"),s),i._initColorPicker(e.find("#k-editor-table-bg"),"bgColor",s,n),i._initInput(e.find("#k-editor-css-class"),"className",s,n),i._initInput(e.find("#k-editor-id"),"id",s,n),i._initNumericTextbox(e.find("#k-editor-border-width"),"borderWidth",s,n),i._initColorPicker(e.find("#k-editor-border-color"),"borderColor",s,n),i._initBorderStyleDropDown(e.find("#k-editor-border-style"),"borderStyle",s,n,dJ),i._initCheckbox(e.find("#k-editor-collapse-borders"),"collapseBorders",s,n)},_initCellViewComponents:function(e,t){var i=this.components.cellView={};t.selectedCells=t.selectedCells=t.selectedCells||[];var n=t.selectedCells[0]||{borderStyle:"",wrapText:!0};this._addUnit(dX,n.widthUnit),this._addUnit(dX,n.heightUnit),this._initCheckbox(e.find("#k-editor-selectAllCells"),"selectAllCells",t.tableProperties,i),this._initNumericTextbox(e.find("#k-editor-cell-width"),"width",n,i),this._initNumericTextbox(e.find("#k-editor-cell-height"),"height",n,i),this._initDropDownList(e.find("#k-editor-cell-width-type"),"widthUnit",n,i,dX),this._initDropDownList(e.find("#k-editor-cell-height-type"),"heightUnit",n,i,dX),this._initNumericTextbox(e.find("#k-editor-table-cell-margin"),"cellMargin",n,i),this._initNumericTextbox(e.find("#k-editor-table-cells-padding"),"cellPadding",n,i),this._initCellAlignmentDropDown(e.find("#k-editor-cell-alignment"),n),this._initColorPicker(e.find("#k-editor-cell-bg"),"bgColor",n,i),this._initInput(e.find("#k-editor-cell-css-class"),"className",n,i),this._initInput(e.find("#k-editor-cell-id"),"id",n,i),this._initNumericTextbox(e.find("#k-editor-cell-border-width"),"borderWidth",n,i),this._initColorPicker(e.find("#k-editor-cell-border-color"),"borderColor",n,i),this._initBorderStyleDropDown(e.find("#k-editor-cell-border-style"),"borderStyle",n,i,dJ),this._initCheckbox(e.find("#k-editor-wrap-text"),"wrapText",n,i)},_initAccessibilityViewComponents:function(e,t){var i=this.components.accessibilityView={},n=t.tableProperties;this._initInput(e.find("#k-editor-table-caption"),"captionContent",n,i),this._initAccessibilityAlignmentDropDown(e.find("#k-editor-accessibility-alignment"),n),this._initInput(e.find("#k-editor-accessibility-summary"),"summary",n,i),this._initAssociationDropDown(e.find("#k-editor-cells-headers"),"cellsWithHeaders",{valuePrimitive:!0},n,i),this._initNumericTextbox(e.find("#k-editor-table-header-rows"),"headerRows",n,i,{max:n.rows||4}),this._initNumericTextbox(e.find("#k-editor-table-header-columns"),"headerColumns",n,i,{max:n.columns||4})},_initNumericTextbox:function(e,t,i,n,s){var a=n[t]=e.kendoNumericTextBox(s?d$.extend({},dQ,s):dQ).data("kendoNumericTextBox");t in i&&a.value(parseInt(i[t],10))},_initDropDownList:function(e,t,i,n,s){var a=n[t]=e.kendoDropDownList({dataSource:s}).data("kendoDropDownList");this._setComponentValue(a,i,t)},_initBorderStyleDropDown:function(e,t,i,n,s){var a=n[t]=e.kendoDropDownList({dataSource:s,optionLabel:this.options.messages.borderNone}).data("kendoDropDownList");this._setComponentValue(a,i,t)},_initTableAlignmentDropDown:function(e,t){var i=this.options.messages,n=this.components.tableView,s=dZ.dataSource;s[0].tooltip=i.alignLeft,s[1].tooltip=i.alignCenter,s[2].tooltip=i.alignRight,s[3].tooltip=i.alignRemove,this._initAlignmentDropDown(e,dZ,"alignment",t,n)},_initCellAlignmentDropDown:function(e,t){var i=this.options.messages,n=this.components.cellView,s=d0.dataSource;s[0].tooltip=i.alignLeftTop,s[1].tooltip=i.alignCenterTop,s[2].tooltip=i.alignRightTop,s[3].tooltip=i.alignLeftMiddle,s[4].tooltip=i.alignCenterMiddle,s[5].tooltip=i.alignRightMiddle,s[6].tooltip=i.alignLeftBottom,s[7].tooltip=i.alignCenterBottom,s[8].tooltip=i.alignRightBottom,s[9].tooltip=i.alignRemove,this._initAlignmentDropDown(e,d0,"alignment",t,n)},_initAccessibilityAlignmentDropDown:function(e,t){var i=this.options.messages,n=this.components.accessibilityView,s=d1.dataSource;s[0].tooltip=i.alignLeftTop,s[1].tooltip=i.alignCenterTop,s[2].tooltip=i.alignRightTop,s[3].tooltip=i.alignLeftBottom,s[4].tooltip=i.alignCenterBottom,s[5].tooltip=i.alignRightBottom,s[6].tooltip=i.alignRemove,this._initAlignmentDropDown(e,d1,"captionAlignment",t,n)},_initAlignmentDropDown:function(e,t,i,n,s){var a=s[i]=e.kendoDropDownList(t).data("kendoDropDownList");a.list.addClass("k-align").css("width","110px"),this._setComponentValue(a,n,i)},_initAssociationDropDown:function(e,t,i,n,s){var a=s[t]=e.kendoDropDownList(i).data("kendoDropDownList");this._setComponentValue(a,n,t)},_setComponentValue:function(e,t,i){i in t&&e.value(t[i])},_initColorPicker:function(e,t,i,n){var s=n[t]=e.kendoColorPicker({buttons:!1,clearButton:!0}).data("kendoColorPicker");i[t]&&s.value(i[t])},_initInput:function(e,t,i,n){var s=n[t]=e.get(0);t in i&&(s.value=i[t])},_initCheckbox:function(e,t,i,n){var s=n[t]=e.get(0);t in i&&(s.checked=i[t])},destroy:function(){this._destroyComponents(this.components.tableView),this._destroyComponents(this.components.cellView),this._destroyComponents(this.components.accessibilityView),this._destroyComponents(this.components),delete this.components},_destroyComponents:function(e){for(var t in e)e[t].destroy&&e[t].destroy(),delete e[t]},_dialogTemplate:function(e){return dY.template('<div class="k-editor-dialog k-editor-table-wizard-dialog k-action-window k-popup-edit-form"><div class="k-edit-form-container"><div id="k-table-wizard-tabs" class="k-root-tabs"><ul><li class="k-active">#= messages.tableTab #</li><li>#= messages.cellTab #</li><li>#= messages.accessibilityTab #</li></ul><div id="k-table-properties"><div class="k-edit-label"><label for="k-editor-table-width">#= messages.width #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-width" /><input id="k-editor-table-width-type" aria-label="#= messages.units #" /></div><div class="k-edit-label"><label for="k-editor-table-height">#= messages.height #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-height" /><input id="k-editor-table-height-type" aria-label="#= messages.units #" /></div><div class="k-edit-label"><label for="k-editor-table-columns">#= messages.columns #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-columns" /></div><div class="k-edit-label"><label for="k-editor-table-rows">#= messages.rows #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-rows" /></div><div class="k-edit-label"><label for="k-editor-table-cell-spacing">#= messages.cellSpacing #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-cell-spacing" /></div><div class="k-edit-label"><label for="k-editor-table-cell-padding">#= messages.cellPadding #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-cell-padding" /></div><div class="k-edit-label"><label for="k-editor-table-alignment">#= messages.alignment #</label></div><div class="k-edit-field"><input id="k-editor-table-alignment" class="k-align" /></div><div class="k-edit-label"><label for="k-editor-table-bg">#= messages.background #</label></div><div class="k-edit-field"><input id="k-editor-table-bg" /></div><div class="k-edit-label"><label for="k-editor-css-class">#= messages.cssClass #</label></div><div class="k-edit-field"><span class="k-textbox k-input k-input-md k-rounded-md k-input-solid"><input id="k-editor-css-class" class="k-input-inner" type="text" /></span></div><div class="k-edit-label"><label for="k-editor-id">#= messages.id #</label></div><div class="k-edit-field"><span class="k-textbox k-input k-input-md k-rounded-md k-input-solid"><input id="k-editor-id" class="k-input-inner" type="text" /></span></div><div class="k-edit-label"><label for="k-editor-border-width">#= messages.border #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-border-width" /><input id="k-editor-border-color" /></div><div class="k-edit-label"><label for="k-editor-border-style">#= messages.borderStyle #</label></div><div class="k-edit-field"><input id="k-editor-border-style" /></div><div class="k-edit-label">&nbsp;</div><div class="k-edit-field"><input id="k-editor-collapse-borders" type="checkbox" class="k-checkbox k-checkbox-md k-rounded-md" /><label for="k-editor-collapse-borders" class="k-checkbox-label">#= messages.collapseBorders #</label></div></div><div id="k-cell-properties"><div class="k-edit-field"><input id="k-editor-selectAllCells" type="checkbox" class="k-checkbox k-checkbox-md k-rounded-md" /><label for="k-editor-selectAllCells" class="k-checkbox-label">#= messages.selectAllCells #</label></div><div class="k-edit-label"><label for="k-editor-cell-width">#= messages.width #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-cell-width" /><input id="k-editor-cell-width-type" aria-label="#= messages.units #" /></div><div class="k-edit-label"><label for="k-editor-cell-height">#= messages.height #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-cell-height" /><input id="k-editor-cell-height-type" aria-label="#= messages.units #" /></div><div class="k-edit-label"><label for="k-editor-table-cell-margin">#= messages.cellMargin #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-cell-margin" /></div><div class="k-edit-label"><label for="k-editor-table-cells-padding">#= messages.cellPadding #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-cells-padding" /></div><div class="k-edit-label"><label for="k-editor-cell-alignment">#= messages.alignment #</label></div><div class="k-edit-field"><input id="k-editor-cell-alignment" class="k-align" /></div><div class="k-edit-label"><label for="k-editor-cell-bg">#= messages.background #</label></div><div class="k-edit-field"><input id="k-editor-cell-bg" /></div><div class="k-edit-label"><label for="k-editor-cell-css-class">#= messages.cssClass #</label></div><div class="k-edit-field"><span class="k-textbox k-input k-input-md k-rounded-md k-input-solid"><input id="k-editor-cell-css-class" class="k-input-inner" type="text" /></span></div><div class="k-edit-label"><label for="k-editor-cell-id">#= messages.id #</label></div><div class="k-edit-field"><span class="k-textbox k-input k-input-md k-rounded-md k-input-solid"><input id="k-editor-cell-id" class="k-input-inner" type="text" /></span></div><div class="k-edit-label"><label for="k-editor-cell-border-width">#= messages.border #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-cell-border-width" /><input id="k-editor-cell-border-color" /></div><div class="k-edit-label"><label for="k-editor-cell-border-style">#= messages.borderStyle #</label></div><div class="k-edit-field"><input id="k-editor-cell-border-style" /></div><div class="k-edit-label">&nbsp;</div><div class="k-edit-field"><input id="k-editor-wrap-text" type="checkbox" class="k-checkbox k-checkbox-md k-rounded-md" /><label for="k-editor-wrap-text" class="k-checkbox-label">#= messages.wrapText #</label></div></div><div id="k-accessibility-properties"><div class="k-edit-label"><label for="k-editor-table-header-rows">#= messages.headerRows #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-header-rows" /></div><div class="k-edit-label"><label for="k-editor-table-header-columns">#= messages.headerColumns #</label></div><div class="k-edit-field"><input type="numeric" id="k-editor-table-header-columns" /></div><div class="k-edit-label"><label for="k-editor-table-caption">#= messages.caption #</label></div><div class="k-edit-field"><span class="k-textbox k-input k-input-md k-rounded-md k-input-solid"><input id="k-editor-table-caption" class="k-input-inner" type="text"/></span></div><div class="k-edit-label"><label for="k-editor-accessibility-alignment">#= messages.alignment #</label></div><div class="k-edit-field"><input id="k-editor-accessibility-alignment" class="k-align" /></div><div class="k-edit-label"><label for="k-editor-accessibility-summary">#= messages.summary #</label></div><div class="k-edit-field"><span class="k-input k-textarea k-input-solid k-input-md k-rounded-md"><textarea id="k-editor-accessibility-summary" rows="5" class="k-input-inner k-editor-accessibility-summary" placeholder="#= messages.tableSummaryPlaceholder #"></textarea></span></div><div class="k-edit-label"><label for="k-editor-cells-headers">#= messages.associateCellsWithHeaders #</label></div><div class="k-edit-field"><select id="k-editor-cells-headers"><option value="none">#= messages.associateNone #</option><option value="scope">#= messages.associateScope #</option><option value="ids">#= messages.associateIds #</option></select></div></div></div><div class="k-edit-buttons"><button class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary k-dialog-ok"><span class="k-button-text">#= messages.dialogOk #</span></button><button class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-dialog-close"><span class="k-button-text">#= messages.dialogCancel #</span></button></div></div></div>')({messages:e})}}),dY.ui.editor.TableWizardDialog=d2,function(e,t){var i=window.kendo,n=i.ui,s=i._activeElement,a=i.support.touch&&i.support.mobileOS,r=Array.isArray,o=i.data.HierarchicalDataSource,l="mousedown",d="click",h=e.extend,u=e.each,c=i.template,p=i.keys,f=n.Widget,m=/^(ul|a|div)$/i,g=".kendoMenu",v="open",_="k-menu",b="k-link k-menu-link",k=".k-link",w=".k-menu-expand-arrow-icon",y="k-last",x="close",C="timer",T="k-first",S="k-image",I="select",D="zIndex",F="activate",E="deactivate",A="touchstart"+g+" MSPointerDown"+g+" pointerdown"+g,z=i.support.pointers,P=i.support.msPointers,H=P||z,N="change",R="error",O=i.support.touch?"touchstart":"",M=z?"pointerover":P?"MSPointerOver":"mouseenter",B=z?"pointerout":P?"MSPointerOut":"mouseleave",L="DOMMouseScroll"+g+" mousewheel"+g,V=i.support.resize+g,U="group",W="groupparent",j=e(document.documentElement),G="kendoPopup",q="k-hover",K="k-focus",$="k-disabled",Y=".k-menu",Q=".k-menu-group",X=".k-animation-container",J=".k-menu-group,.k-animation-container",Z=":not(.k-list) > .k-item:not([role='treeitem'])",ee=".k-item",et=".k-item:not(.k-disabled)",ei=":not(.k-item.k-separator)",en=".k-menu-scroll-button",es={2:1,touch:1},ea="dataBound",er="aria-expanded",eo="role",el={text:"dataTextField",url:"dataUrlField",spriteCssClass:"dataSpriteCssClassField",imageUrl:"dataImageUrlField",imageAttr:"dataImageAttrField",content:"dataContentField"},ed={wrapperCssClass:function(e,t){var i="k-item k-menu-item",n=t.index;return!1===t.enabled&&(i+=" k-disabled"),e.firstLevel&&0===n&&(i+=" k-first"),n==e.length-1&&(i+=" k-last"),t.cssClass&&(i+=" "+t.cssClass),t.attr&&t.attr.hasOwnProperty("class")&&(i+=" "+t.attr.class),t.selected&&(i+=" k-selected"),i},itemCssAttributes:function(e){var t="",i=e.attr||{};for(var n in i)i.hasOwnProperty(n)&&"class"!==n&&(t+=n+'="'+i[n]+'" ');return t},imageCssAttributes:function(e){var t="",i=e&&e.toJSON?e.toJSON():{};for(var n in i.class?i.class+=" "+S:i.class=S,i)i.hasOwnProperty(n)&&(t+=n+'="'+i[n]+'" ');return t},contentCssAttributes:function(e){var t="",i=e.contentAttr||{},n="k-content k-group k-menu-group k-menu-group-md";for(var s in i.class?i.class+=" "+n:i.class=n,i)i.hasOwnProperty(s)&&(t+=s+'="'+i[s]+'" ');return t},textClass:function(){return b},arrowClass:function(e,t){var i="k-menu-expand-arrow-icon k-icon";return t.horizontal?i+=" k-i-arrow-s":i+=" k-i-arrow-e",i},groupAttributes:function(e){return!0!==e.expanded?" style='display:none'":""},groupCssClass:function(){return"k-group k-menu-group k-menu-group-md"},content:function(e){return e.content?e.content:"&nbsp;"}};function eh(t,i){try{return e.contains(t,i)}catch(e){return!1}}function eu(t){(t=e(t)).attr(i.attr("omit-wrap"))||(t.addClass("k-item k-menu-item").children("img").addClass(S),t.children("a").addClass(b).children("img").addClass(S),t.filter(":not([disabled])"),t.filter(".k-separator").removeClass("k-menu-item").addClass("k-menu-separator").empty().append("&nbsp;"),t.filter("li[disabled]").addClass($).prop("disabled",!1).attr("aria-disabled",!0),t.filter("[role]").length||t.attr(eo,"menuitem"),t.children(k).length||t.contents().filter(function(){return!(this.nodeName.match(m)||3===this.nodeType&&!i.trim(this.nodeValue))}).wrapAll("<span class='"+b+"'></span>").filter(function(e,t){return 3===t.nodeType}).wrap("<span class='k-menu-link-text'></span>"),ec(t),ep(t))}function ec(t){(t=e(t)).find("> .k-link > .k-menu-expand-arrow > [class*=k-i-arrow]:not(.k-sprite)").parent().remove(),t.filter(":has(.k-menu-group)").children(".k-link:not(:has([class*=k-i-arrow]:not(.k-sprite)))").each(function(){var t,n,s=e(this),a=(t=s.parent().parent(),n=i.support.isRtl(t),t.hasClass(_+"-horizontal")?"k-i-arrow-s":n?"k-i-arrow-w":"k-i-arrow-e");s.append("<span aria-hidden='true' class='k-menu-expand-arrow'><span class='k-menu-expand-arrow-icon k-icon "+a+"'></span></span>")})}function ep(t){(t=e(t)).filter(".k-first:not(:first-child)").removeClass(T),t.filter(".k-last:not(:last-child)").removeClass(y),t.filter(":first-child").addClass(T),t.filter(":last-child").addClass(y)}function ef(e){if(e&&e.length)for(var t in e){var i=e.eq(t);i.find("ul").length?i.attr("aria-haspopup",!0):i.removeAttr("aria-haspopup")}}function em(e){if(!e.hasClass(_))return e.parentsUntil("."+_,"li")}function eg(t,n){var s,a,r=(s=n.select,a=i.isFunction,s&&a(s)?s:null);r&&function(t,i){e(t).children(".k-link").data({selectHandler:i})}(t,r),n.items&&e(t).children("ul").children("li").each(function(e){eg(this,n.items[e])})}function ev(e){return e?"li[data-groupparent='"+e+"']":"li[data-groupparent]"}function e_(e){var t=e?"[data-group='"+e+"']":"[data-group]";return"ul"+t+",div"+t}function eb(t,i){var n=t.find(ev()),s=[];return n.each(function(n,a){for(var r=(a=e(a)).data(W),o=t;r;)(o=i.find(e_(r)+":visible")).length&&s.push(o),r=(a=o.find(ev())).data(W)}),s}function ek(t,i){var n=t.data(U);return n?i.find(ev(n)):e([])}function ew(t,i){var n=t.data(W);return n?i.children(X).children(e_(n)):e([])}function ey(e,t){for(var i=0,n=e.parentNode;n&&!isNaN(n[t]);)i+=n[t],n=n.parentNode;return i}function ex(e){return H&&e.originalEvent&&e.originalEvent.pointerType in es}function eC(e){e.contents().filter(function(){return"LI"!=this.nodeName}).remove()}var eT=i.ui.DataBoundWidget.extend({init:function(e,t){f.fn.init.call(this,e,t),e=this.wrapper=this.element,t=this.options,this._accessors(),this._templates(),this._dataSource(),this._updateClasses(),this._animations(t),this.nextItemZIndex=100,this._tabindex(),this._initOverflow(t),this._attachMenuEventsHandlers(),t.openOnClick&&(this.clicked=!1),e.attr(eo,"menubar"),e[0].id&&(this._ariaId=i.format("{0}_mn_active",e[0].id)),i.notify(this)},events:[v,x,F,E,I,ea],options:{name:"Menu",animation:{open:{duration:200},close:{duration:100}},orientation:"horizontal",direction:"default",openOnClick:!1,closeOnClick:!0,hoverDelay:100,scrollable:!1,popupCollision:t},_initData:function(){var e=this;e.dataSource&&(e.angular("cleanup",function(){return{elements:e.element.children()}}),e.element.empty(),e.append(e.dataSource.view(),e.element),e.angular("compile",function(){return{elements:e.element.children()}}))},_attachMenuEventsHandlers:function(){var t=this.element,i=this.options,n=this._overflowWrapper();this._checkActiveProxy=this._checkActiveElement.bind(this),(n||t).on(A,ee,this._focusHandler.bind(this)).on(d+g,".k-item.k-disabled",!1).on(d+g,ee,this._click.bind(this)).on(A+" "+l+g,".k-content",this._preventClose.bind(this)).on(M+g,et,this._mouseenter.bind(this)).on(B+g,et,this._mouseleave.bind(this)).on(l+g,et,this._mousedown.bind(this)).on(O+g+" "+M+g+" "+B+g+" "+l+g+" "+d+g,".k-item:not(.k-disabled) > .k-link",this._toggleHover.bind(this)),t.on("keydown"+g,this._keydown.bind(this)).on("focus"+g,this._focus.bind(this)).on("focus"+g,".k-content",this._focus.bind(this)).on("blur"+g,this._removeHoverItem.bind(this)).on("blur"+g,"[tabindex]",this._checkActiveProxy),n&&n.on(B+g,J,this._mouseleavePopup.bind(this)).on(M+g,J,this._mouseenterPopup.bind(this)),i.openOnClick&&(this._documentClickHandler=this._documentClick.bind(this),e(document).on("click",this._documentClickHandler))},_detachMenuEventsHandlers:function(){var t=this._overflowWrapper();t&&t.off(g),this.element.off(g),this._documentClickHandler&&e(document).off("click",this._documentClickHandler)},_initOverflow:function(t){var i,n,s=this,a="horizontal"==t.orientation;if(t.scrollable){s._openedPopups={},s._scrollWrapper=s.element.wrap("<div class='k-menu-scroll-wrapper k-"+t.orientation+"'></div>").parent(),a&&eC(s.element),i=e(s.templates.scrollButton({direction:a?"left":"up"})),n=e(s.templates.scrollButton({direction:a?"right":"down"})),i.add(n).appendTo(s._scrollWrapper),s._initScrolling(s.element,i,n,a);var r=s.element.outerWidth(),o=s.element[0].style.width;o="auto"===o?"":o,a&&e(window).on(V,function(){setTimeout(function(){s._setOverflowWrapperWidth(r,o),s._toggleScrollButtons(s.element,i,n,a)},300)}),s._setOverflowWrapperWidth(r,o),s._toggleScrollButtons(s.element,i,n,a)}},_overflowWrapper:function(){return this._scrollWrapper||this._popupsWrapper},_setOverflowWrapperWidth:function(e,t){var i=this._scrollWrapper.css("width");this._scrollWrapper.css({width:""});var n=this._scrollWrapper.outerWidth();this._scrollWrapper.css({width:i});var s=this.element.outerWidth(),a=this.element[0].offsetWidth-this.element[0].clientWidth;if(s!=n&&n>0){var r=t?Math.min(e,n):n;this.element.width(r-a),this._scrollWrapper.width(r)}},_reinitOverflow:function(e){(e.scrollable&&!this.options.scrollable||!e.scrollable&&this.options.scrollable||e.scrollable&&this.options.scrollable&&e.scrollable.distance!=this.options.scrollable.distance||e.orientation!=this.options.orientation)&&(this._detachMenuEventsHandlers(),this._destroyOverflow(),this._initOverflow(e),this._attachMenuEventsHandlers())},_destroyOverflow:function(){var i=this._overflowWrapper();i&&(i.off(g),i.find(en).off(g).remove(),i.children(X).each(function(t,n){var s=e(n).children(Q);s.off(L);var a=ek(s,i);a.length&&a.append(n)}),i.find(ev()).removeAttr("data-groupparent"),i.find(e_()).removeAttr("data-group"),this.element.off(L),e(window).off(V),i.contents().unwrap(),this._scrollWrapper=this._popupsWrapper=this._openedPopups=t)},_initScrolling:function(t,n,s,r){var o=this,l=o.options.scrollable,d=o.isNumeric(l.distance)?l.distance:50,h=d/2,u=!1,c=!1,p=function(e){var i=r?{scrollLeft:e}:{scrollTop:e};t.finish().animate(i,"fast","linear",function(){u&&p(e)}),o._toggleScrollButtons(t,n,s,r)},f=function(e){u||c||(p(e.data.direction),u=!0)},m=function(i){var l,d=r?{scrollLeft:i.data.direction}:{scrollTop:i.data.direction};l=i.originalEvent,c=a&&/touch/i.test(l.type||"")||ex(i),t.stop().animate(d,"fast","linear",function(){c?(o._toggleScrollButtons(t,n,s,r),u=!0):e(i.currentTarget).trigger(M)}),u=!1,i.stopPropagation(),i.preventDefault()};n.on(M+g,{direction:"-="+d},f).on(i.eventMap.down+g,{direction:"-="+2*d},m),s.on(M+g,{direction:"+="+d},f).on(i.eventMap.down+g,{direction:"+="+2*d},m),n.add(s).on(B+g,function(){t.stop(),u=!1,o._toggleScrollButtons(t,n,s,r)}),t.on(L,function(e){if(!e.ctrlKey&&!e.shiftKey&&!e.altKey){var i,a,l=(i=e.originalEvent,a=0,i.wheelDelta&&(a=(a=-i.wheelDelta/120)>0?Math.ceil(a):Math.floor(a)),i.detail&&(a=Math.round(i.detail/3)),a),d=(l>0?"+=":"-=")+Math.abs(l)*h,u=r?{scrollLeft:d}:{scrollTop:d};o._closeChildPopups(t),t.finish().animate(u,"fast","linear",function(){o._toggleScrollButtons(t,n,s,r)}),e.preventDefault()}})},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},_toggleScrollButtons:function(e,t,n,s){var a=s?i.scrollLeft(e):e.scrollTop();t.toggle(0!==a),n.toggle(a<e[0][s?"scrollWidth":"scrollHeight"]-e[0][s?"offsetWidth":"offsetHeight"]-1)},setOptions:function(e){var t=this.options.animation;this._animations(e),e.animation=h(!0,t,e.animation),"dataSource"in e&&this._dataSource(e),this._updateClasses(),this._reinitOverflow(e),f.fn.setOptions.call(this,e)},destroy:function(){f.fn.destroy.call(this),this._detachMenuEventsHandlers(),this._destroyOverflow(),i.destroy(this.element)},enable:function(e,t){return this._toggleDisabled(e,!1!==t),this},disable:function(e){return this._toggleDisabled(e,!1),this},attemptGetItem:function(t){t=t||this.element;var i=this.element.find(t),n=this._overflowWrapper();return i.length||t===this.element?i:n?n.find(t):e()},append:function(e,t){t=this.attemptGetItem(t);var i=this._insert(e,t,t.length?this._childPopupElement(t):null);return u(i.items,function(t){i.group.append(this),ec(this),eg(this,e[t]||e)}),ec(t),ep(i.group.find(".k-first, .k-last").add(i.items)),ef(em(i.group)),this},insertBefore:function(e,t){return t=this.attemptGetItem(t),u(this._insert(e,t,t.parent()).items,function(i){t.before(this),ec(this),ep(this),eg(this,e[i]||e)}),ep(t),this},insertAfter:function(e,t){return t=this.attemptGetItem(t),u(this._insert(e,t,t.parent()).items,function(i){t.after(this),ec(this),ep(this),eg(this,e[i]||e)}),ep(t),this},_insert:function(t,n,s){var a,o,l=this;n&&n.length||(s=l.element);var d=e.isPlainObject(t)||t instanceof i.data.ObservableObject,u={firstLevel:s.hasClass(_),horizontal:s.hasClass(_+"-horizontal"),expanded:!0,length:s.children().length};return n&&!s.length&&(s=e(l.renderGroup({group:u,options:l.options})).css("display","none").appendTo(n)),d||r(t)||t instanceof i.data.ObservableArray?a=e(e.map(d?[t]:t,function(t,i){return"string"==typeof t?e(t).get():e(l.renderItem({group:u,item:h(t,{index:i})})).get()})):(o=(a="string"==typeof t&&"<"!=t.charAt(0)?l.element.find(t):e(t)).find("> ul").addClass("k-menu-group k-menu-group-md").attr(eo,"menu"),(a=a.filter("li")).add(o.find("> li")).each(function(){eu(this)})),{items:a,group:s}},remove:function(e){var t=(e=this.attemptGetItem(e)).parentsUntil(this.element,Z),i=e.parent("ul:not(.k-menu)");if(e.remove(),i&&!i.children(Z).length){var n=em(i),s=i.parent(X);s.length?s.remove():i.remove(),ef(n)}return t.length&&(ec(t=t.eq(0)),ep(t)),this},_openAfterLoad:function(e,t){var i=this;t.loaded()?(i.open(e),i._loading=!1):t.one(N,function(){e.find(w).removeClass("k-i-loading"),i._loading&&(i.open(e),i._loading=!1)})},open:function(n){var s=this,r=s.options,o="horizontal"==r.orientation,l=r.direction,d=i.support.isRtl(s.wrapper),u=s._overflowWrapper();n=(u||s.element).find(n);var c=s.dataSource&&s.dataSource.getByUid(n.data(i.ns+"uid"));if(c&&c.hasChildren&&!c.loaded()&&!s._loading)return s._loading=!0,n.find(w).addClass("k-i-loading"),c.load(),void s._openAfterLoad(n,c);/^(top|bottom|default)$/.test(l)&&(l=d?o?(l+" left").replace("default","bottom"):"left":o?(l+" right").replace("default","bottom"):"right");var p=">.k-popup:visible,>.k-animation-container>.k-popup:visible",f=function(){e(this).data(G)&&s.close(e(this).closest("li.k-item"),!0)};return n.siblings().find(p).each(f),u&&n.find(p).each(f),s.options.openOnClick&&(s.clicked=!0),n.each(function(){var n=e(this);clearTimeout(n.data(C)),n.data(C,setTimeout(function(){var c,p,f=n.find("> .k-menu-group, > .k-animation-container > .k-menu-group").filter(":hidden").first();if(!f[0]&&u&&(f=(p=s._getPopup(n))&&p.element),!f.is(":visible")&&f[0]&&!1===s._triggerEvent({item:n[0],type:v})){if(!f.find(".k-menu-group")[0]&&f.children(".k-item").length>1){var m,g,b,k=e(window).height();f.css({maxHeight:k-(i._outerHeight(f)-f.height())-i.getShadows(f).bottom,overflow:"auto"})}else f.css({maxHeight:"",overflow:""});n.data(D,n.css(D));var w=s.nextItemZIndex++;n.css(D,w),s.options.scrollable&&n.parent().siblings(en).css({zIndex:++w}),c=f.data(G);var y=n.parent().hasClass(_),C=(m=(m=l).split(" ")[!y+0]||m,g={origin:["bottom",d?"right":"left"],position:["top",d?"right":"left"]},/left|right/.test(m)?(g.origin=["top",m],g.position[1]=i.directions[m].reverse):(g.origin[0]=m,g.position[0]=i.directions[m].reverse),g.origin=g.origin.join(" "),g.position=g.position.join(" "),g),T=r.animation.open.effects,S=T!==t?T:"slideIn:"+(b=(b=l).split(" ")[!y+0]||b).replace("top","up").replace("bottom","down");c?((c=f.data(G)).options.origin=C.origin,c.options.position=C.position,c.options.animation.open.effects=S):(c=f.kendoPopup({activate:function(){s._triggerEvent({item:this.wrapper.parent(),type:F})},deactivate:function(e){s._closing=!1,e.sender.element.removeData("targetTransform").css({opacity:""}),s._triggerEvent({item:this.wrapper.parent(),type:E})},origin:C.origin,position:C.position,collision:r.popupCollision!==t?r.popupCollision:y&&o?"fit":"fit flip",anchor:n,appendTo:u||n,animation:{open:h(!0,{effects:S},r.animation.open),close:r.animation.close},open:s._popupOpen.bind(s),close:function(e){s._closing=e.sender.element;var t=e.sender.wrapper.parent();if(u){var n=e.sender.element.data(U);n&&(t=(u||s.element).find(ev(n))),e.sender.wrapper.children(en).hide()}s._triggerEvent({item:t[0],type:x})?e.preventDefault():(t.css(D,t.data(D)),t.removeData(D),s.options.scrollable&&t.parent().siblings(en).css({zIndex:""}),(a||H||i.support.mouseAndTouchPresent)&&(t.removeClass(q),s._removeHoverItem()))}}).data(G),f.closest(X).removeAttr(eo)),f.removeAttr("aria-hidden"),n.attr(er,!0),s._configurePopupOverflow(c,n),c._hovered=!0,c.open(),s._initPopupScrolling(c)}},s.options.hoverDelay))}),s},_configurePopupOverflow:function(e,t){if(this.options.scrollable&&(this._wrapPopupElement(e),!t.attr("data-groupparent"))){var i=(new Date).getTime();t.attr("data-groupparent",i),e.element.attr("data-group",i)}},_wrapPopupElement:function(e){e.element.parent().is(X)||(e.wrapper=i.wrap(e.element,e.options.autosize).css({overflow:"hidden",display:"block",position:"absolute"}))},_initPopupScrolling:function(e,t,i){this.options.scrollable&&e.element[0].scrollHeight>e.element[0].offsetHeight&&this._initPopupScrollButtons(e,t,i)},_initPopupScrollButtons:function(t,i,n){var s=this,a=t.wrapper.children(en),r=s.options.animation;setTimeout(function(){if(!a.length){var r=e(s.templates.scrollButton({direction:i?"left":"up"})),o=e(s.templates.scrollButton({direction:i?"right":"down"}));a=r.add(o).appendTo(t.wrapper),s._initScrolling(t.element,r,o,i),n||a.on(M+g,function(){var i=s._overflowWrapper();e(eb(t.element,i)).each(function(e,t){var n=i.find(ev(t.data(U)));s.close(n)})}).on(B+g,function(){setTimeout(function(){e.isEmptyObject(s._openedPopups)&&s._closeParentPopups(t.element)},30)})}s._toggleScrollButtons(t.element,a.first(),a.last(),i)},(r&&r.open&&r.open.duration||0)+30)},_popupOpen:function(e){this._keyTriggered||e.sender.element.children(".k-focus").removeClass(K),this.options.scrollable&&this._setPopupHeight(e.sender)},_setPopupHeight:function(t,n){var s=t.element,a=s.add(s.parent(X));a.height(s.hasClass(_)&&this._initialHeight||"");var r=t._location(n),o=e(window).height(),l=r.height,d=n?0:Math.max(r.top,0),h=n?0:ey(this._overflowWrapper()[0],"scrollTop"),u=window.innerHeight-o,c=o-i.getShadows(s).bottom+u;c+h>l+d||a.css({overflow:"hidden",height:Math.min(c,c-d+h)+"px"})},close:function(t,i){var n=this,s=n._overflowWrapper(),a=s||n.element;return(t=a.find(t)).length||(t=a.find(">.k-item")),t.each(function(){var a=e(this);a.attr(er,!1),!i&&n._isRootItem(a)&&(n.clicked=!1),clearTimeout(a.data(C)),a.data(C,setTimeout(function(){var i,r,o,l=n._getPopup(a);if(l&&(o=a.data(W),!s||!o||!n._openedPopups[o.toString()]||n._forceClose)){if(!n._forceClose&&(i=l.element,r=!1,e.isEmptyObject(n._openedPopups)||e(eb(i,s)).each(function(e,t){return!(r=!!n._openedPopups[t.data(U).toString()])}),r))return;l.close(),l.element.attr("aria-hidden",!0),s&&n._forceClose&&t.last().is(a[0])&&delete n._forceClose}},n.options.hoverDelay))}),n},_getPopup:function(e){var t=e.find(".k-menu-group:not(.k-list-container):not(.k-calendar-container):visible").first().data(G),i=this._overflowWrapper();if(!t&&i){var n=e.data(W);n&&(t=i.find(e_(n)).data(G))}return t},_toggleDisabled:function(t,i){this.element.find(t).each(function(){e(this).toggleClass($,!i).attr("aria-disabled",!i)})},_toggleHover:function(t){var n=e(i.eventTarget(t)||t.target).closest(Z),s=t.type==M||-1!==l.indexOf(t.type);n.siblings().removeClass(q),n.parents("li.k-disabled").length||n.toggleClass(q,s||"mousedown"==t.type||"pointerover"==t.type||t.type==O),this._removeHoverItem()},_preventClose:function(){this.options.closeOnClick||(this._closurePrevented=!0)},_checkActiveElement:function(t){var n=this,s=e(t?t.currentTarget:this._hoverItem()),a=n._findRootParent(s)[0];this._closurePrevented||setTimeout(function(){document.hasFocus()&&(eh(a,i._activeElement())||!t||eh(a,t.currentTarget))||n.close(a)},0),this._closurePrevented=!1},_removeHoverItem:function(){var e=this._hoverItem();e&&e.hasClass(K)&&(e.removeClass(K),this._oldHoverItem=null)},_updateClasses:function(){var e,t=this.element;t.removeClass("k-menu-horizontal k-menu-vertical"),t.addClass("k-widget k-reset k-menu-init "+_).addClass(_+"-"+this.options.orientation),"vertical"===this.options.orientation?t.attr("aria-orientation","vertical"):t.attr("aria-orientation","horizontal"),t.find("li > ul").filter(function(){return!i.support.matchesSelector.call(this,".k-menu-init div ul")}).addClass("k-group k-menu-group k-menu-group-md").attr(eo,"menu").hide().attr("aria-hidden",t.is(":visible")).parent("li").attr("aria-haspopup","true").end().find("li > div").addClass("k-content").attr("tabindex","-1"),t.find("li[aria-haspopup]").attr(er,!1),e=t.find("> li,.k-menu-group > li"),t.removeClass("k-menu-init"),e.each(function(){eu(this)})},_mouseenter:function(t){var i=this,n=e(t.currentTarget),s=i._itemHasChildren(n),r=n.data(W)||n.parent().data(U),o=ex(t),l=!1;r&&(i._openedPopups[r.toString()]=!0),i._closing&&(l=!!i._closing.find(n).length),l||t.delegateTarget!=n.parents(Y)[0]&&t.delegateTarget!=n.parents(".k-menu-scroll-wrapper,.k-popups-wrapper")[0]||(i._keyTriggered=!1,i.options.openOnClick.rootMenuItems&&i._isRootItem(n.closest(Z))||i.options.openOnClick.subMenuItems&&!i._isRootItem(n.closest(Z))||(!(!1===i.options.openOnClick||!1===i.options.openOnClick.rootMenuItems&&i._isRootItem(n.closest(Z))||!1===i.options.openOnClick.subMenuItems&&!i._isRootItem(n.closest(Z))||i.clicked)||a||o&&i._isRootItem(n.closest(Z))||!eh(t.currentTarget,t.relatedTarget)&&s&&i.open(n),(!0===i.options.openOnClick&&i.clicked||a)&&n.siblings().each(function(e,t){i.close(t,!0)})))},_mousedown:function(t){var i=this,n=e(t.currentTarget);(i.options.openOnClick.subMenuItems&&!i._isRootItem(n)||a)&&n.siblings().each(function(e,t){i.close(t,!0)})},_mouseleave:function(t){var n=e(t.currentTarget),s=n.data(W),r=n.children(X).length||n.children(Q).length||s,o=e(window);if(s&&delete this._openedPopups[s.toString()],!n.parentsUntil(X,".k-list-container,.k-calendar-container")[0])return!1!==this.options.openOnClick&&(this.options.openOnClick.rootMenuItems||!this._isRootItem(n))&&(this.options.openOnClick.subMenuItems||this._isRootItem(n))||a||ex(t)||eh(t.currentTarget,t.relatedTarget||t.target)||!r||eh(t.currentTarget,i._activeElement())?void((i.support.browser.msie&&!t.toElement&&!t.relatedTarget&&!ex(t)||t.clientX<0||t.clientY<0||t.clientY>o.height()||t.clientX>o.width())&&this.close(n)):(this.close(n,!0),void(this._loading=!1));t.stopImmediatePropagation()},_mouseenterPopup:function(t){var i=e(t.currentTarget);if(!i.parent().is(X)){var n=(i=i.children("ul")).data(U);n&&(this._openedPopups[n.toString()]=!0)}},_mouseleavePopup:function(t){var i=e(t.currentTarget);!ex(t)&&i.is(X)&&this._closePopups(i.children("ul"))},_closePopups:function(t){var i=this,n=i._overflowWrapper(),s=t.data(U);if(s){delete i._openedPopups[s.toString()];var a=n.find(ev(s));setTimeout(function(){if(i.options.openOnClick)i._closeChildPopups(t);else if(e.isEmptyObject(i._openedPopups)){var n=i._innerPopup(t);i._closeParentPopups(n)}else i.close(a,!0)},0)}},_closeChildPopups:function(t){var i=this,n=i._overflowWrapper();e(eb(t,n)).each(function(){var e=n.find(ev(this.data(U)));i.close(e,!0)})},_innerPopup:function(e){var t=eb(e,this._overflowWrapper());return t[t.length-1]||e},_closeParentPopups:function(e){var t=this._overflowWrapper(),i=e.data(U),n=t.find(ev(i));for(i=n.parent().data(U),this.close(n,!0);i&&!this._openedPopups[i]&&!n.parent().is(Y);)n=t.find(ev(i)),this.close(n,!0),i=n.parent().data(U)},_click:function(t){var n,s,a,r,o=this.options,l=e(i.eventTarget(t)),d=l[0],h=l[0]?l[0].nodeName.toUpperCase():"",u="INPUT"==h||"SELECT"==h||"BUTTON"==h||"LABEL"==h,c=l.closest(k),p=l.closest(Z),f=p[0],m=c.attr("href"),g=l.attr("href"),_=e("<a href='#' />").attr("href"),b=!!m&&m!==_,w=b&&!!m.match(/^#/),y=this._overflowWrapper();if(!d||d.parentNode&&f){for(e(l).hasClass("k-menu-expand-arrow-icon")&&(this._lastClickedElement=f);d&&d.parentNode!=f;)d=d.parentNode;if(!e(d).is("div:not(.k-animation-container,.k-list-container)")){if(p.hasClass($))t.preventDefault();else{if(t.handled||!this._triggerSelect(l,f)||u||t.preventDefault(),t.handled=!0,s=p.children(J),y){var C=p.data(W);C&&(s=y.find(e_(C)))}if(a=s.is(":visible"),r=o.openOnClick&&a&&this._isRootItem(p),o.closeOnClick&&(!b||w)&&(!s.length||r)){p.removeClass(q).css("height"),this._oldHoverItem=this._findRootParent(p);var T=this._parentsUntil(c,this.element,Z);return this._forceClose=!!y,this.close(T),this.clicked=!1,void(-1!="MSPointerUp".indexOf(t.type)&&t.preventDefault())}b&&t.enterKey&&c[0].click(),(this._isRootItem(p)&&!1!==o.openOnClick||o.openOnClick.subMenuItems||i.support.touch||ex(t)&&this._isRootItem(p.closest(Z)))&&(b||u||g&&g!==_||t.preventDefault(),this.clicked=!0,n=s.is(":visible")?x:v,(o.closeOnClick||n!=x)&&this[n](p))}}}},_parentsUntil:function(t,i,n){var s=this._overflowWrapper();if(s){var a=function(t,i){var n=[],s=function(e){for(;e.parentNode&&!i.is(e.parentNode);)n.push(e.parentNode),e=e.parentNode},a=t[0]||t;s(a);for(var r=n[n.length-1];e(r).is(X)&&(a=ek(e(r).children("ul"),i)[0]);)n.push(a),s(a),r=n[n.length-1];return n}(t,s),r=[];return e(a).each(function(){var t=e(this);if(t.is(i))return!1;t.is(n)&&r.push(this)}),e(r)}return t.parentsUntil(i,n)},_triggerSelect:function(e,t){var i,n=(e=e.is(".k-link")?e:e.closest(".k-link")).data("selectHandler");n&&(i=this._getEventData(e),n.call(this,i));var s=i&&i.isDefaultPrevented(),a=this._triggerEvent({item:t,type:I});return s||a},_getEventData:function(e){return{sender:this,target:e,_defaultPrevented:!1,preventDefault:function(){this._defaultPrevented=!0},isDefaultPrevented:function(){return this._defaultPrevented}}},_documentClick:function(i){var n=e(i.target).hasClass("k-menu-expand-arrow-icon")?this._lastClickedElement:i.target;eh((this._overflowWrapper()||this.element)[0],n)?this._lastClickedElement=t:this.clicked=!1},_focus:function(t){var i=t.target,n=this._hoverItem(),a=s();if(i!=this.wrapper[0]&&!e(i).is(":kendoFocusable"))return t.stopPropagation(),e(i).closest(".k-content").closest(".k-menu-group").closest(".k-item").addClass(K),void this.wrapper.trigger("focus");a===t.currentTarget&&(n.length?this._moveHover([],n):this._oldHoverItem||this._moveHover([],this.wrapper.children().first()))},_keydown:function(e){var t,n,s,a=e.keyCode,r=this._oldHoverItem,o=i.support.isRtl(this.wrapper);if(e.target==e.currentTarget||a==p.ESC){if(r||(r=this._oldHoverItem=this._hoverItem()),n=this._itemBelongsToVertival(r),s=this._itemHasChildren(r),this._keyTriggered=!0,a==p.RIGHT)t=this[o?"_itemLeft":"_itemRight"](r,n,s);else if(a==p.LEFT)t=this[o?"_itemRight":"_itemLeft"](r,n,s);else if(a==p.DOWN)t=this._itemDown(r,n,s);else if(a==p.UP)t=this._itemUp(r,n,s);else if(a==p.HOME)this._moveHover(r,r.parent().children().first()),e.preventDefault();else if(a==p.END)this._moveHover(r,r.parent().children().last()),e.preventDefault();else if(a==p.ESC)t=this._itemEsc(r,n);else if(a==p.ENTER||a==p.SPACEBAR)(t=r.children(".k-link")).length>0&&(this._click({target:t[0],preventDefault:function(){},enterKey:!0}),s&&!r.hasClass($)?(this.open(r),this._moveHover(r,this._childPopupElement(r).children().first())):r.is("li")&&"menuitemcheckbox"===r.attr("role")?r.find(".k-checkbox").attr("checked",!0):this._moveHoverToRoot(r,this._findRootParent(r)));else if(a==p.TAB)return t=this._findRootParent(r),this._moveHover(r,t),void this._checkActiveElement();t&&t[0]&&(e.preventDefault(),e.stopPropagation())}},_hoverItem:function(){return this.wrapper.find(".k-item.k-hover,.k-item.k-focus").filter(":visible")},_itemBelongsToVertival:function(e){var t=this.wrapper.hasClass("k-menu-vertical");return e.length&&e.parent().hasClass("k-menu-group")||t},_itemHasChildren:function(e){return!!(e&&e.length&&e[0].nodeType)&&(e.children(".k-menu-group, div.k-animation-container").length>0||!!e.data(W)&&!!this._overflowWrapper().children(e_(e.data(W))))},_moveHover:function(t,i){var n=this._ariaId;t.length&&i.length&&t.removeClass(K),i.length&&(i[0].id&&(n=i[0].id),i.addClass(K),this._oldHoverItem=i,n&&(this.element.removeAttr("aria-activedescendant"),e("#"+n).removeAttr("id"),i.attr("id",n),this.element.attr("aria-activedescendant",n)),this._scrollToItem(i))},_moveHoverToRoot:function(e,t){this._moveHover(e,t)},_findRootParent:function(e){return this._isRootItem(e)?e:this._parentsUntil(e,Y,"li.k-item").last()},_isRootItem:function(e){return e.parent().hasClass(_)},_itemRight:function(e,t,i){var n,s,a;if(t){if(i&&!e.hasClass($))this.open(e),n=this._childPopupElement(e).children().first();else if("horizontal"==this.options.orientation){if(s=this._findRootParent(e),a=this._overflowWrapper()){var r=ew(s,a);this._closeChildPopups(r)}this.close(s),n=s.nextAll(ee+ei).eq(0)}}else(n=e.nextAll(ee+ei).eq(0)).length||(n=e.prevAll(ee+ei).last()),this.close(e);return n&&!n.length?n=this.wrapper.children(".k-item").first():n||(n=[]),this._moveHover(e,n),n},_itemLeft:function(e,t){var i,n;return t?(i=e.parent().closest(".k-item"),n=this._overflowWrapper(),!i.length&&n&&(i=ek(e.parent(),n)),this.close(i),this._isRootItem(i)&&"horizontal"==this.options.orientation&&(i=i.prevAll(ee+ei).eq(0))):((i=e.prevAll(ee+ei).eq(0)).length||(i=e.nextAll(ee+ei).last()),this.close(e)),i.length||(i=this.wrapper.children(".k-item").last()),this._moveHover(e,i),i},_itemDown:function(e,t,i){var n;if(t)n=e.nextAll(ee+ei).eq(0);else{if(!i||e.hasClass($))return;this.open(e),n=this._childPopupElement(e).children().first()}return!n.length&&e.length?n=e.parent().children().first():e.length||(n=this.wrapper.children(".k-item").first()),this._moveHover(e,n),n},_itemUp:function(e,t){var i;if(t)return!(i=e.prevAll(ee+ei).eq(0)).length&&e.length?i=e.parent().children().last():e.length||(i=this.wrapper.children(".k-item").last()),this._moveHover(e,i),i},_scrollToItem:function(e){var t=this;if(t.options.scrollable&&e&&e.length){var n,s=e.parent(),a=!!s.hasClass(_)&&"horizontal"==t.options.orientation,r=a?"scrollLeft":"scrollTop",o=a?i._outerWidth:i._outerHeight,l=s[r](),d=o(e),h=e[0][a?"offsetLeft":"offsetTop"],u=o(s),c=s.siblings(en),p=c.length?o(c.first()):0;if(l+u<h+d+p?n=h+d-u+p:l>h-p&&(n=h-p),!isNaN(n)){var f={};f[r]=n,s.finish().animate(f,"fast","linear",function(){t._toggleScrollButtons(s,c.first(),c.last(),a)})}}},_itemEsc:function(e,t){var i,n;return t?(0===(i=e.parent().closest(".k-item")).length&&(n=e.closest(".k-group").data("group"),i=this.wrapper.find(".k-item[data-groupparent='"+n+"']")),this.close(i),this._moveHover(e,i),i):e},_childPopupElement:function(e){var t=e.find(".k-menu-group"),i=this._overflowWrapper();return!t.length&&i&&(t=ew(e,i)),t},_triggerEvent:function(e){return this.trigger(e.type,{type:e.type,item:e.item})},_focusHandler:function(t){var n=this,s=e(i.eventTarget(t)).closest(Z);s.hasClass($)||setTimeout(function(){n._moveHover([],s),s.children(".k-content")[0]&&s.parent().closest(".k-item").removeClass(K)},200)},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={open:{effects:{}},close:{hide:!0,effects:{}}})},_dataSource:function(e){var t=e?e.dataSource:this.options.dataSource;t&&(t=r(t)?{data:t}:t,this._unbindDataSource(),t.fields||(t.fields=[{field:"uid"},{field:"text"},{field:"url"},{field:"cssClass"},{field:"spriteCssClass"},{field:"imageUrl"},{field:"imageAttr"},{field:"attr"},{field:"contentAttr"},{field:"content"},{field:"encoded"},{field:"items"},{field:"select"}]),this.dataSource=o.create(t),this._bindDataSource(),this.dataSource.fetch())},_bindDataSource:function(){this._refreshHandler=this.refresh.bind(this),this._errorHandler=this._error.bind(this),this.dataSource.bind(N,this._refreshHandler),this.dataSource.bind(R,this._errorHandler)},_unbindDataSource:function(){var e=this.dataSource;e&&(e.unbind(N,this._refreshHandler),e.unbind(R,this._errorHandler))},_error:function(){},findByUid:function(e){return(this._overflowWrapper()||this.element).find("["+i.attr("uid")+"="+e+"]")},refresh:function(e){var t=e.node,i=e.action,n=t?this.findByUid(t.uid):this.element,s=e.items,a=e.index,r=this._updateItem.bind(this),o=this._removeItem.bind(this);"add"==i?this._appendItems(s,a,n):"remove"==i?s.forEach(o):"itemchange"==i?s.forEach(r):"itemloaded"===i?this.append(e.items,n):this._initData(),this.trigger(ea,{item:n,dataItem:t})},_appendItems:function(e,t,i){var n=i.find(ee).eq(t);n.length?this.insertBefore(e,n):this.append(e,i)},_removeItem:function(e){var t=this.findByUid(e.uid);this.remove(t)},_updateItem:function(e){var t=this.findByUid(e.uid),i=t.next(),n=e.parentNode();this.remove(t),i.length?this.insertBefore(e,i):this.append(e,n&&this.findByUid(n.uid))},_accessors:function(){var e,t,n,s=this.options,a=this.element;for(e in el)t=s[el[e]],n=a.attr(i.attr(e+"-field")),!t&&n&&(t=n),t||(t=e),r(t)||(t=[t]),s[el[e]]=t},_fieldAccessor:function(t){var n=this.options[el[t]]||[],s=n.length,a="(function(item) {";return 0===s?a+="return item['"+t+"'];":a+="var levels = ["+e.map(n,function(e){return"function(d){ return "+i.expr(e)+"}"}).join(",")+"];if(item.level){return levels[Math.min(item.level(), "+s+"-1)](item);}else{return levels["+s+"-1](item)}",a+="})"},_templates:function(){var e=this.options,t=this._fieldAccessor.bind(this);e.template&&"string"==typeof e.template?e.template=c(e.template):e.template||(e.template=c("<span class='k-menu-link-text'># var text = "+t("text")+"(data.item); ## if (typeof data.item.encoded != 'undefined' && data.item.encoded === false) {##= text ## } else { ##: text ## } #</span>")),this.templates={content:c("#var contentHtml = "+t("content")+"(item);#<div #= contentCssAttributes(item.toJSON ? item.toJSON() : item) # tabindex='-1'>#= contentHtml || '' #</div>"),group:c("<ul class='#= groupCssClass(group) #'#= groupAttributes(group) # role='menu' aria-hidden='true'>#= renderItems(data) #</ul>"),itemWrapper:c("# var url = "+t("url")+"(item); ## var imageUrl = "+t("imageUrl")+"(item); ## var imgAttributes = "+t("imageAttr")+"(item);## var tag = url ? 'a' : 'span' #<#= tag # class='#= textClass(item) #' #if(url){#href='#= url #'#}#># if (imageUrl) { #<img #= imageCssAttributes(imgAttributes) #  alt='' src='#= imageUrl #' /># } ##= sprite(item) ##= data.menu.options.template(data) ##= arrow(data) #</#= tag #>"),item:c("#var contentHtml = "+t("content")+"(item);#<li class='#= wrapperCssClass(group, item) #' #= itemCssAttributes(item.toJSON ? item.toJSON() : item) # role='menuitem'  #=item.items ? \"aria-haspopup='true'\": \"\"##=item.enabled === false ? \"aria-disabled='true'\" : ''#"+i.attr("uid")+"='#= item.uid #' # if(item.items && item.items.length > 0) { # # if(item.expanded) { #  aria-expanded='true'# } else { # aria-expanded='false'# } ## } #>#= itemWrapper(data) ##if (item.hasChildren || item.items) { ##= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl || contentHtml) { ##= renderContent(data) ## } #</li>"),scrollButton:c("<span class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-menu-scroll-button k-scroll-#= direction #' unselectable='on'><span class='k-button-icon k-icon k-i-arrow-60-#= direction #'></span></span>"),arrow:c("<span aria-hidden='true' class='k-menu-expand-arrow'><span class='#= arrowClass(item, group) #'></span></span>"),sprite:c("# var spriteCssClass = "+t("spriteCssClass")+"(data); if(spriteCssClass) {#<span class='k-sprite #= spriteCssClass #'></span>#}#"),empty:c("")}},renderItem:function(e){e=h({menu:this,group:{}},e);var t=this.templates.empty,i=e.item;return this.templates.item(h(e,{sprite:this.templates.sprite,itemWrapper:this.templates.itemWrapper,renderContent:this.renderContent,arrow:i.items||i.content||i[this.options.dataContentField[0]]?this.templates.arrow:t,subGroup:this.renderGroup},ed))},renderGroup:function(e){return(this.templates||e.menu.templates).group(h({renderItems:function(e){for(var t="",i=0,n=e.items,s=n?n.length:0,a=h({length:s},e.group);i<s;i++)t+=e.menu.renderItem(h(e,{group:a,item:h({index:i},n[i])}));return t}},e,ed))},renderContent:function(e){return e.menu.templates.content(h(e,ed))}}),eS=eT.extend({init:function(t,n){eT.fn.init.call(this,t,n),this.element.attr(eo,"menu"),this._marker=i.guid().substring(0,8),this.target=e(this.options.target),this._popup(),this._wire()},_initOverflow:function(t){t.scrollable&&!this._overflowWrapper()&&(this._openedPopups={},this._popupsWrapper=(this.element.parent().is(X)?this.element.parent():this.element).wrap("<div class='k-popups-wrapper "+t.orientation+"'></div>").parent(),"horizontal"==this.options.orientation&&eC(this.element),t.appendTo&&(t.appendTo=e(t.appendTo),t.appendTo.append(this._popupsWrapper)),this._initialHeight=this.element[0].style.height,this._initialWidth=this.element[0].style.width)},options:{name:"ContextMenu",filter:null,showOn:"contextmenu",orientation:"vertical",alignToAnchor:!1,copyAnchorStyles:!0,target:"body"},events:[v,x,F,E,I],setOptions:function(t){eT.fn.setOptions.call(this,t),this.target.off(this.showOn+g+this._marker,this._showProxy),this.userEvents&&this.userEvents.destroy(),this.target=e(this.options.target),t.orientation&&this.popup.wrapper[0]&&this.popup.element.unwrap(),this._wire(),eT.fn.setOptions.call(this,t)},destroy:function(){this.target.off(this.options.showOn+g+this._marker),j.off(i.support.mousedown+g+this._marker,this._closeProxy),this.userEvents&&this.userEvents.destroy(),eT.fn.destroy.call(this)},open:function(n,s){if(n=e(n)[0],eh(this.element[0],e(n)[0])||this._itemHasChildren(e(n)))eT.fn.open.call(this,n);else if(!1===this._triggerEvent({item:this.element,type:v})){if(this.popup.visible()&&this.options.filter&&(this.popup.close(!0),this.popup.element.kendoStop(!0)),s!==t){var a=this._overflowWrapper();if(a){var r=a.offset();n-=r.left,s-=r.top}this.popup.wrapper.hide(),this._configurePopupScrolling(n,s),this.popup.open(n,s)}else this.popup.options.anchor=n||this.popup.anchor||this.target,this.popup.element.kendoStop(!0),this._configurePopupScrolling(),this.popup.open();j.off(this.popup.downEvent,this.popup._mousedownProxy),j.on(i.support.mousedown+g+this._marker,this._closeProxy),this.element.trigger("focus")}return this},_configurePopupScrolling:function(e,i){var n=this.popup,s="horizontal"==this.options.orientation;this.options.scrollable&&(this._wrapPopupElement(n),n.element.parent().css({position:"",height:""}),n.element.css({visibility:"hidden",display:"",position:""}),s?this._setPopupWidth(n,isNaN(e)?t:{isFixed:!0,x:e,y:i}):this._setPopupHeight(n,isNaN(e)?t:{isFixed:!0,x:e,y:i}),n.element.css({visibility:"",display:"none",position:"absolute"}),this._initPopupScrollButtons(n,s,!0),n.element.siblings(en).hide())},_setPopupWidth:function(t,n){var s=t.element,a=s.add(s.parent(X));a.width(this._initialWidth||"");var r=t._location(n),o=e(window).width(),l=r.width,d=Math.max(r.left,0),h=n?0:ey(this._overflowWrapper()[0],"scrollLeft"),u=i.getShadows(s),c=o-u.left-u.right;c+h>l+d||a.css({overflow:"hidden",width:c-d+h+"px"})},close:function(){eh(this.element[0],e(arguments[0])[0])||this._itemHasChildren(arguments[0])?eT.fn.close.call(this,arguments[0]):this.popup.visible()&&!1===this._triggerEvent({item:this.element,type:x})&&(this._removeHoverItem(),this.element.find("#"+this._ariaId).removeAttr("id"),this.popup.close(),j.off(i.support.mousedown+g+this._marker,this._closeProxy),this.unbind(I,this._closeTimeoutProxy),this.popup.options.anchor.focus())},_showHandler:function(t){var n,s=t,a=this.options,r=i.support.mobileOS?e(s.target):e(s.currentTarget);t.event&&((s=t.event).pageX=t.x.location,s.pageY=t.y.location),eh(this.element[0],t.relatedTarget||t.target)||(this._eventOrigin=s,s.preventDefault(),s.stopImmediatePropagation(),this.element.find(".k-focus").removeClass(K),(a.filter&&r.is(a.filter)||!a.filter)&&(a.alignToAnchor?(this.popup.options.anchor=s.currentTarget,this.open(s.currentTarget)):(this.popup.options.anchor=s.currentTarget,this._targetChild?(n=this.target.offset(),this.open(s.pageX-n.left,s.pageY-n.top)):this.open(s.pageX,s.pageY))))},_closeHandler:function(t){var i=e(t.relatedTarget||t.target),n=i.closest(this.target.selector)[0]==this.target[0],s=i.closest(ee),a=this._itemHasChildren(s),r=this._overflowWrapper(),o=eh(this.element[0],i[0])||r&&eh(r[0],i[0]);this._eventOrigin=t;var l=3!==t.which;this.popup.visible()&&(l&&n||!n)&&(this.options.closeOnClick&&!a&&o||!o)&&(o?(this.unbind(I,this._closeTimeoutProxy),this.bind(I,this._closeTimeoutProxy)):this.close())},_wire:function(){var e=this,t=e.options,n=e.target;e._preventProxy=null,e._showProxy=e._showHandler.bind(e),e._closeProxy=e._closeHandler.bind(e),e._closeTimeoutProxy=e.close.bind(e),n[0]&&(i.support.mobileOS&&"contextmenu"==t.showOn&&(e.userEvents=new i.UserEvents(n,{filter:t.filter,allowSelection:!1}),e._preventProxy=function(){return!1},e.userEvents.bind("hold",e._showProxy)),t.filter?n.on(t.showOn+g+e._marker,t.filter,e._preventProxy||e._showProxy):n.on(t.showOn+g+e._marker,e._preventProxy||e._showProxy),n.on("keydown",function(t){t.keyCode===i.keys.F10&&t.shiftKey&&(t.preventDefault(),e.open(t.target))}))},_triggerEvent:function(i){var n=e(this.popup.options.anchor)[0],s=this._eventOrigin;return this._eventOrigin=t,this.trigger(i.type,h({type:i.type,item:i.item||this.element[0],target:n},s?{event:s}:{}))},_popup:function(){var t=this._overflowWrapper();this._triggerProxy=this._triggerEvent.bind(this),this.popup=this.element.addClass("k-context-menu").kendoPopup({autosize:"horizontal"===this.options.orientation,anchor:this.target||"body",copyAnchorStyles:this.options.copyAnchorStyles,collision:this.options.popupCollision||"fit",animation:this.options.animation,activate:this._triggerProxy,deactivate:this._triggerProxy,appendTo:t||this.options.appendTo,close:t?function(i){e(eb(i.sender.element,t)).each(function(e,t){var i=t.data(G);i&&i.close(!0)})}:e.noop}).data(G),this._targetChild=eh(this.target[0],this.popup.element[0])},_moveHoverToRoot:function(e,t){this._moveHover(e,t),this.close()},_focus:function(e){var t=this._oldHoverItem=this._hoverItem()||[];eT.fn._focus.call(this,e),s()===e.currentTarget&&this._moveHover(t,this.wrapper.children().first())}});n.plugin(eT),n.plugin(eS)}(window.kendo.jQuery),d3=window.kendo.jQuery,d5=(d6=(d9=window.kendo).html.HTMLBase).extend({init:function(e,t){d6.fn.init.call(this,e,t),this._wrapper()},options:{name:"HTMLChip",size:"medium",rounded:"medium",fillMode:"solid",themeColor:"base",attr:{},icon:"",iconAttr:{},removable:!1,removableAttr:{},removeIcon:"x-circle",content:"",text:"",stylingOptions:["size","rounded","fillMode","themeColor"]},_wrapper:function(){var e=this.options;this.wrapper=this.element.wrap("<span class='k-chip'></span>").parent().attr(e.attr),this._addClasses(),e.icon&&this.wrapper.prepend(d3("<span class='k-chip-icon k-icon k-i-"+e.icon+"'></span>").attr(e.iconAttr)),this.element.addClass("k-chip-content"),e.text&&this.element.html('<span class="k-chip-label">'+e.text+"</span>"),e.removable&&this.wrapper.append(d3("<span class='k-chip-action k-chip-remove-action'><span class='k-icon k-i-"+e.removeIcon+"'></span></span>").attr(e.removableAttr))}}),d3.extend(d9.html,{renderChip:function(e,t){return e&&!d3.isPlainObject(e)||(t=e,e=d3("<span></span>")),new d5(e,t).html()},HTMLChip:d5}),d9.cssProperties.registerPrefix("HTMLChip","k-chip-"),d8=window.kendo.jQuery,ht=(he=(d7=window.kendo).html.HTMLBase).extend({init:function(e,t){he.fn.init.call(this,e,t),this.wrapper=this.element.addClass("k-chip-list"),this._addClasses()},options:{name:"HTMLChipList",size:"medium",stylingOptions:["size"]}}),d8.extend(d7.html,{renderChipList:function(e,t){return(arguments[0]===d4||d8.isPlainObject(arguments[0]))&&(t=e,e=d8("<div></div>")),new ht(e,t).html()},HTMLChipList:ht}),d7.cssProperties.registerPrefix("HTMLChipList","k-chip-list-"),hi=window.kendo.jQuery,hr=(ha=(hs=window.kendo).ui).List,ho=hs.html,hl=hi.extend({A:65},hs.keys),hd=hs._activeElement,hh=hs.data.ObservableArray,hu=".k-chip",hc="accept",hp="filter",hf="rebind",hm="open",hg="close",hv="change",h_="select",hb="deselect",hk="aria-disabled",hw="aria-readonly",hy="aria-expanded",hx="aria-hidden",hC="aria-activedescendant",hT="aria-busy",hS="k-focus",hI="k-selected",hD="k-hidden",hF="k-hover",hE="k-disabled",hA="k-no-click",hz="disabled",hP="readonly",hN="click"+(hH=".kendoMultiSelect"),hR="mouseenter"+hH,hO="mouseleave"+hH,hM=/"/g,hB=Array.isArray,hL=["font-family","font-size","font-stretch","font-style","font-weight","letter-spacing","text-transform","line-height"],hV=hr.extend({init:function(e,t){var i;this.ns=hH,hr.fn.init.call(this,e,t),this._optionsMap={},this._customOptions={},this._wrapper(),this._tagList(),this._input(),this._textContainer(),this._loader(),this._clearButton(),this._arrowButton(),this._tabindex(this.input),e=this.element.attr("multiple","multiple").hide(),(t=this.options).placeholder||(t.placeholder=e.data("placeholder")),(i=e.attr("id"))||(i=hs.guid()),i&&(this._tagID=i+"_tag_active",i+="_taglist",this.tagList.attr("id",i)),this._initialOpen=!0,t.label&&this._label(),this._aria(),this._dataSource(),this._ignoreCase(),this._popup(),this._tagTemplate(),this.requireValueMapper(this.options),this._initList(),this._reset(),this._enable(),this._placeholder(),t.autoBind?this.dataSource.fetch():t.value&&this._preselect(t.value),hi(this.element).parents("fieldset").is(":disabled")&&this.enable(!1),this._toggleCloseVisibility(),this._applyCssClasses(),hs.notify(this)},options:{name:"MultiSelect",tagMode:"multiple",enabled:!0,autoBind:!0,autoClose:!0,highlightFirst:!0,dataTextField:"",dataValueField:"",filter:"startswith",ignoreCase:!0,minLength:1,messages:{singleTag:"item(s) selected",clear:"clear",deleteTag:"delete",noData:"No data found.",downArrow:"select"},enforceMinLength:!1,delay:100,value:null,maxSelectedItems:null,placeholder:"",height:200,animation:{},virtual:!1,itemTemplate:"",tagTemplate:"",groupTemplate:"#:data#",fixedGroupTemplate:"#:data#",clearButton:!0,autoWidth:!1,popup:null,size:"medium",fillMode:"solid",rounded:"medium",label:null},events:[hm,hg,hv,h_,hb,"filtering","dataBinding","dataBound"],setDataSource:function(e){this.options.dataSource=e,this._state="",this._dataSource(),this.persistTagList=!1,this.listView.setDataSource(this.dataSource),this.options.autoBind&&this.dataSource.fetch()},setOptions:function(e){var t=this._listOptions(e);hr.fn.setOptions.call(this,e),this.listView.setOptions(t),this._accessors(),this._aria(),this._tagTemplate(),this._placeholder(),this._clearButton(),this._arrowButton()},currentTag:function(e){if(void 0===e)return this._currentTag;this._currentTag&&(this._currentTag.removeClass(hS).removeAttr("id"),this._currentTag.find(".k-chip-action").attr(hx,!0),this.input.removeAttr(hC)),e&&(e.addClass(hS).attr("id",this._tagID),e.find(".k-chip-action").removeAttr(hx),this.input.attr(hC,this._tagID)),this._currentTag=e},dataItems:function(){return this.listView.selectedDataItems()},destroy:function(){var e=this.ns;clearTimeout(this._busy),clearTimeout(this._typingTimeout),this.wrapper.off(e),this.tagList.off(e),this.input.off(e),this._clear.off(e),hr.fn.destroy.call(this)},_aria:function(){var e=this.ul[0].id,t="none"===this.options.filter?"none":"list",i=this.tagList.attr("id");this.input.attr({role:"combobox","aria-expanded":!1,"aria-controls":e,"aria-autocomplete":t,"aria-describedby":i}),this._ariaLabel(this._focused)},_activateItem:function(){this.popup.visible()&&hr.fn._activateItem.call(this),this.currentTag(null)},_listOptions:function(e){var t=hr.fn._listOptions.call(this,hi.extend(e,{selectedItemChange:this._selectedItemChange.bind(this),selectable:"multiple"})),i=this.options.itemTemplate||this.options.template,n=t.itemTemplate||i||t.template;return n||(n="#:"+hs.expr(t.dataTextField,"data")+"#"),t.template=n,t},_setListValue:function(){hr.fn._setListValue.call(this,this._initialValues.slice(0))},_listChange:function(e){var t=this.dataSource.flatView(),i=this._optionsMap,n=this._value;this._state===hf&&(this._state="");for(var s=0;s<e.added.length;s++)if(i[n(e.added[s].dataItem)]===hn){this._render(t);break}this._selectValue(e.added,e.removed)},_selectedItemChange:function(e){var t,i,n=e.items;for(i=0;i<n.length;i++)t=n[i],this.tagList.children(hu).eq(t.index).children("span").first().html(this.tagTextTemplate(t.item))},_wrapperMousedown:function(e){var t="input"!==e.target.nodeName.toLowerCase(),i=hi(e.target),n=i.closest(".k-multiselect-toggle-button, .k-chip").children(".k-i-arrow-s")[0],s=i.closest(".k-i-x, .k-i-x-circle")[0];!t||s&&hs.support.mobileOS||!e.cancelable||e.preventDefault(),s||(n&&this.popup.visible()?this.toggle(!1):(this.input[0]!==hd()&&t&&this.input.trigger("focus"),1!==this.options.minLength||this.popup.visible()||this.open()))},_inputFocus:function(){this._placeholder(!1,!0),this.wrapper.addClass(hS)},_inputFocusout:function(){clearTimeout(this._typingTimeout),this.wrapper.removeClass(hS),this._placeholder(!this.listView.selectedDataItems()[0],!0),this.close(),this._state===hp&&(this._state=hc,this.listView.skipUpdate(!0)),this.listView.bound()&&this.listView.isFiltered()&&(this.persistTagList=!0,this._clearFilter()),this.element.trigger("blur")},_removeTag:function(e,t){var i,n=this,s=n._state,a=e.index(),r=n.listView,o=r.value()[a],l=n.listView.selectedDataItems()[a],d=n._customOptions[o],h=r.element[0].children;if(n.trigger(hb,{dataItem:l,item:e}))n._close();else{d!==hn||s!==hc&&s!==hp||(d=n._optionsMap[o]);var u=function(){n.currentTag(null),t&&n._change(),n._close()};d===hn&&r.select().length?(n.persistTagList=!1,r.select(r.select()[a]).done(u)):((i=n.element[0].children[d])&&(i.selected=!1),r.removeAt(a),r._removedAddedIndexes&&r._removedAddedIndexes.splice(a,1),h[d]&&h[d].classList.remove("k-selected"),"single"!==n.options.tagMode?e.remove():n._updateTagListHTML(),u())}},_tagListClick:function(e){e.preventDefault(),e.stopPropagation();var t=hi(e.currentTarget);t.is(".k-i-x-circle")&&this._removeTag(t.closest(hu),!0)},_clearValue:function(){var e=this;"single"===e.options.tagMode?e._clearSingleTagValue():e.tagList.children(hu).each(function(t,i){e._removeTag(hi(i),!1)}),e.input.val(""),e._search(),e._change(),e.focus(),e._hideClear(),e._state===hp&&(e._state=hc)},_clearSingleTagValue:function(){for(var e=this.dataItems(),t=this.tagList.children(hu),i=this.persistTagList,n=0;n<e.length;n+=1)if(this.trigger(hb,{dataItem:e[n],item:t.first()}))return void this._close();i&&(this.persistTagList=!1),this.listView.value([]),this.persistTagList=i},_focusHandler:function(){var e=this.input,t=hd();e[0]===t||this.input.trigger("focus")},_editable:function(e){var t=e.disable,i=e.readonly,n=this.wrapper.off(hH),s=this.tagList.off(hH),a=this.input.off(hH);i||t?(n.toggleClass(hE,t).toggleClass(hA,i),a.attr(hz,t).attr(hP,i).attr(hk,t).attr(hw,i),this.element.prop(hz,t)):(n.removeClass(hE).removeClass(hA).on("mouseenter.kendoMultiSelect mouseleave.kendoMultiSelect",this._toggleHover).on("mousedown"+hH+" touchend"+hH,this._wrapperMousedown.bind(this)).on(hN,this._focusHandler.bind(this)),this.input.on("keydown.kendoMultiSelect",this._keydown.bind(this)).on("paste"+hH,this._search.bind(this)).on("input"+hH,this._search.bind(this)).on("focus"+hH,this._inputFocus.bind(this)).on("focusout"+hH,this._inputFocusout.bind(this)),this._clear.on(hN+" touchend"+hH,this._clearValue.bind(this)),a.prop(hz,!1).prop(hP,!1).attr(hk,!1).attr(hw,!1),this.element.prop(hz,!1),s.on(hR,hu,function(){hi(this).addClass(hF)}).on(hO,hu,function(){hi(this).removeClass(hF)}).on(hN+" touchend"+hH,".k-chip .k-icon",this._tagListClick.bind(this)))},_close:function(){this.options.autoClose?this.close():this.popup.position()},_filterSource:function(e,t){t||(t=this._retrieveData),this._retrieveData=!1,hr.fn._filterSource.call(this,e,t)},close:function(){this._activeItem=null,this.input.removeAttr(hC),this.popup.close()},open:function(){var e,t=this.input.val().toLowerCase(),i=this.listView.dataSource.filter();i&&i.filters.length>0&&(e=(i.filters[0].value||"").toString().toLowerCase()),this._request&&(this._retrieveData=!1),this._retrieveData||!this.listView.bound()||this._state===hc&&t!==e?(this._open=!0,this._state=hf,this.listView.skipUpdate(!0),this.persistTagList=!(this._initialOpen&&!this.listView.bound()),this._filterSource(),this._focusItem()):this._allowOpening()&&(!this._initialOpen||this.options.autoBind||this.options.virtual||!this.options.value||hi.isPlainObject(this.options.value[0])||this.value(this.value()||this._initialValues),this.popup._hovered=!0,this._initialOpen=!1,this.popup.open(),this._focusItem())},toggle:function(e){this[(e=e!==hn?e:!this.popup.visible())?hm:hg]()},refresh:function(){this.listView.refresh()},_floatCheck:function(){return!this.listView||!(this.value()&&this.value().length)&&!this.popup.visible()},_listBound:function(){var e=this.dataSource.flatView();this._render(e),this._renderFooter(),this._renderNoData(),this._toggleNoData(!e.length),this._resizePopup(),this._open&&(this._open=!1,this.toggle(this._allowOpening())),this.popup.position(),this._updateItemFocus(),this._touchScroller&&this._touchScroller.reset(),this._hideBusy(),this.trigger("dataBound")},_updateItemFocus:function(){var e=this.dataSource.flatView(),t=this.listView.skip();e.length&&(t===hn||0===t)&&(this.options.highlightFirst?this.listView.focusFirst():this.listView.focus(-1))},_inputValue:function(){var e=this.input.val();return this.options.placeholder===e&&(e=""),e},value:function(e){var t=this.listView,i=t.value().slice(),n=this.options.maxSelectedItems,s=t.bound()&&t.isFiltered();if(e===hn)return i;this.persistTagList=!1,this.requireValueMapper(this.options,e),e=this._normalizeValues(e),null!==n&&e.length>n&&(e=e.slice(0,n)),s&&this._clearFilter(),t.value(e),this._old=this._valueBeforeCascade=e.slice(),s||this._fetchData(),this._toggleCloseVisibility()},_preselect:function(e,t){hB(e)||e instanceof hs.data.ObservableArray||(e=[e]),(hi.isPlainObject(e[0])||e[0]instanceof hs.data.ObservableObject||!this.options.dataValueField)&&(this.dataSource.data(e),this.value(t||this._initialValues),this._retrieveData=!0)},_setOption:function(e,t){var i=this.element[0].children[this._optionsMap[e]];i&&(i.selected=t)},_fetchData:function(){var e=this,t=!!e.dataSource.view().length;0===e.listView.value().length||e._request||!e._retrieveData&&(e._fetch||t)||(e._fetch=!0,e._retrieveData=!1,e.dataSource.read().done(function(){e._fetch=!1}))},_isBound:function(){return this.listView.bound()&&!this._retrieveData},_dataSource:function(){var e=this.element,t=this.options,i=t.dataSource||{};(i=hB(i)?{data:i}:i).select=e,i.fields=[{field:t.dataTextField},{field:t.dataValueField}],this.dataSource&&this._refreshHandler?this._unbindDataSource():(this._progressHandler=this._showBusy.bind(this),this._errorHandler=this._hideBusy.bind(this)),this.dataSource=hs.data.DataSource.create(i).bind("progress",this._progressHandler).bind("error",this._errorHandler)},_reset:function(){var e=this,t=e.element,i=t.attr("form"),n=i?hi("#"+i):t.closest("form");n[0]&&(e._resetHandler=function(){setTimeout(function(){e.value(e._initialValues),e._placeholder()})},e._form=n.on("reset",e._resetHandler))},_initValue:function(){var e=this.options.value||this.element.val();this._old=this._initialValues=this._normalizeValues(e)},_normalizeValues:function(e){var t=this;return null===e?e=[]:e&&hi.isPlainObject(e)?e=[t._value(e)]:e&&hi.isPlainObject(e[0])?e=hi.map(e,function(e){return t._value(e)}):hB(e)||e instanceof hh?hB(e)&&(e=e.slice()):e=[e],e},_change:function(){var e=this.value();(function(e,t){var i;if(null===e&&null!==t||null!==e&&null===t||(i=e.length)!==t.length)return!1;for(;i--;)if(e[i]!==t[i])return!1;return!0})(e,this._old)||(this._old=e.slice(),this.trigger(hv),this.element.trigger(hv)),this.popup.position(),this._toggleCloseVisibility()},_click:function(e){var t=this,i=e.item;e.preventDefault(),t._select(i).done(function(){t._activeItem=i,t._change(),t._close()})},_getActiveItem:function(){return this._activeItem||hi(this.listView.items()[this._getSelectedIndices().length-1])||this.listView.focus()},_getSelectedIndices:function(){return this.listView._selectedIndices||this.listView._selectedIndexes},_keydown:function(e){var t,i=this,n=e.keyCode,s=i._currentTag,a=i.listView,r=i.input.val(),o=hs.support.isRtl(i.wrapper),l=i.popup.visible(),d=0;if(n!==hl.ENTER&&(this._multipleSelection=!1),n===hl.DOWN){if(e.preventDefault(),!l)return i.open(),void(a.focus()||a.focusFirst());a.focus()?(!i._activeItem&&e.shiftKey&&(i._activeItem=a.focus(),d=-1),t=a.getElementIndex(i._getActiveItem().first()),a.focusNext(),a.focus()?e.shiftKey&&!i.options.virtual&&(this._multipleSelection=!0,i._selectRange(t,a.getElementIndex(a.focus().first())+d)):a.focusLast()):a.focusFirst()}else if(n===hl.UP)l&&(!i._activeItem&&e.shiftKey&&(i._activeItem=a.focus(),d=1),t=a.getElementIndex(i._getActiveItem().first()),a.focusPrev(),a.focus()?e.shiftKey&&!i.options.virtual&&(this._multipleSelection=!0,i._selectRange(t,a.getElementIndex(a.focus().first())+d)):i.close()),e.preventDefault();else if(n===hl.LEFT&&!o||n===hl.RIGHT&&o)r||(s=s?s.prev(hu):i.tagList.children(hu).last())[0]&&i.currentTag(s);else if(n===hl.RIGHT&&!o||n===hl.LEFT&&o)!r&&s&&(s=s.next(hu),i.currentTag(s[0]?s:null));else if(e.ctrlKey&&!e.altKey&&n===hl.A&&l&&!i.options.virtual)this._multipleSelection=!0,this._getSelectedIndices().length===a.items().length&&(i._activeItem=null),a.items().length&&i._selectRange(0,a.items().length-1);else if(n===hl.ENTER&&l){if(!a.focus())return;if(e.preventDefault(),this._multipleSelection&&(this._multipleSelection=!1,a.focus().hasClass(hI)))return void i._close();i._select(a.focus()).done(function(){i._change(),i._close()})}else if(n===hl.SPACEBAR&&e.ctrlKey&&l)i._activeItem&&a.focus()&&a.focus()[0]===i._activeItem[0]&&(i._activeItem=null),hi(a.focus()).hasClass(hI)||(i._activeItem=a.focus()),i._select(a.focus()).done(function(){i._change()}),e.preventDefault();else if(n===hl.SPACEBAR&&e.shiftKey&&l&&!i.options.virtual){var h=a.getElementIndex(i._getActiveItem()),u=a.getElementIndex(a.focus());h!==hn&&u!==hn&&i._selectRange(h,u),e.preventDefault()}else if(n===hl.ESC)l?e.preventDefault():(i.tagList.children(hu).each(function(e,t){i._removeTag(hi(t),!1)}),i._change()),i.close();else if(n===hl.HOME)l?a.focus()?(e.ctrlKey&&e.shiftKey&&!i.options.virtual&&i._selectRange(a.getElementIndex(a.focus()[0]),0),a.focusFirst()):i.close():r||(s=i.tagList.children(hu).first()[0])&&i.currentTag(hi(s));else if(n===hl.END)l?a.focus()?(e.ctrlKey&&e.shiftKey&&!i.options.virtual&&i._selectRange(a.getElementIndex(a.focus()[0]),a.element.children().length-1),a.focusLast()):i.close():r||(s=i.tagList.children(hu).last()[0])&&i.currentTag(hi(s));else if(n!==hl.DELETE&&n!==hl.BACKSPACE||r){if(i.popup.visible()&&(n===hl.PAGEDOWN||n===hl.PAGEUP)){e.preventDefault();var c=n===hl.PAGEDOWN?1:-1;a.scrollWith(c*a.screenHeight())}else clearTimeout(i._typingTimeout),i._search()}else{if(i._state=hc,"single"===i.options.tagMode)return i._clearSingleTagValue(),i._change(),void i._close();n!==hl.BACKSPACE||s||(s=i.tagList.children(hu).last()),s&&s[0]&&i._removeTag(s,!0)}},_hideBusy:function(){clearTimeout(this._busy),this.input.attr(hT,!1),this._loading.addClass(hD),this._request=!1,this._busy=null,this._toggleCloseVisibility()},_showBusyHandler:function(){this.input.attr(hT,!0),this._loading.removeClass(hD),this._hideClear()},_showBusy:function(){this._request=!0,this._busy||(this._busy=setTimeout(this._showBusyHandler.bind(this),100))},_placeholder:function(e,t){var i=this.input,n=hd(),s=this.options.placeholder,a=i.val(),r=i[0]===n,o=a.length;r&&!this.options.autoClose&&a!==s||(o=0,a=""),e===hn&&(e=!1,i[0]!==n&&(e=!this.listView.selectedDataItems()[0])),this._prev=a,i.toggleClass("k-readonly",e).val(e?s:a),r&&!t&&hs.caret(i[0],o,o)},_option:function(e,t,i){var n="<option";return e!==hn&&(-1!==(e+="").indexOf('"')&&(e=e.replace(hM,"&quot;")),n+=' value="'+e+'"'),i&&(n+=" selected"),n+=">",t!==hn&&(n+=hs.htmlEncode(t)),n+"</option>"},_render:function(e){var t,i,n,s,a=this.listView.selectedDataItems(),r=this.listView.value(),o=e.length,l="";r.length!==a.length&&(a=this._buildSelectedItems(r));var d={},h={};for(s=0;s<o;s++)i=e[s],n=this._value(i),-1!==(t=this._selectedItemIndex(n,a))&&a.splice(t,1),h[n]=s,l+=this._option(n,this._text(i),-1!==t);if(a.length)for(s=0;s<a.length;s++)i=a[s],d[n=this._value(i)]=o,h[n]=o,o+=1,l+=this._option(n,this._text(i),!0);this._customOptions=d,this._optionsMap=h,this.element.html(l)},_buildSelectedItems:function(e){for(var t,i=this.options.dataValueField,n=this.options.dataTextField,s=[],a=0;a<e.length;a++)(t={})[i]=e[a],t[n]=e[a],s.push(t);return s},_selectedItemIndex:function(e,t){for(var i=this._value,n=0;n<t.length;n++)if(e===i(t[n]))return n;return -1},_search:function(){var e=this;clearTimeout(e._typingTimeout),e._typingTimeout=setTimeout(function(){var t=e._inputValue();e._prev!==t&&(e._prev=t,e.search(t),e._toggleCloseVisibility())},e.options.delay)},_toggleCloseVisibility:function(){this.value().length||this.input.val()&&this.input.val()!==this.options.placeholder?this._showClear():this._hideClear()},_allowOpening:function(){return this._allowSelection()&&hr.fn._allowOpening.call(this)},_allowSelection:function(){var e=this.options.maxSelectedItems;return null===e||e>this.listView.value().length},_angularTagItems:function(e){var t=this;t.angular(e,function(){return{elements:t.tagList[0].children,data:hi.map(t.dataItems(),function(e){return{dataItem:e}})}})},updatePersistTagList:function(e,t){this.persistTagList.added&&this.persistTagList.added.length===t.length&&this.persistTagList.removed&&this.persistTagList.removed.length===e.length?this.persistTagList=!1:(this.listView._removedAddedIndexes=this._old.slice(),this.persistTagList={added:e,removed:t})},_selectValue:function(e,t){var i,n,s,a=this.dataSource.total(),r=this.tagList,o=this._value;if(this.persistTagList)this.updatePersistTagList(e,t);else{if(this._angularTagItems("cleanup"),"multiple"===this.options.tagMode){for(s=t.length-1;s>-1;s--)i=t[s],r.children(hu).length&&(r[0].removeChild(r[0].children[i.position]),this._setOption(o(i.dataItem),!1));for(s=0;s<e.length;s++)n=e[s],this.input.before(this.tagTemplate(n.dataItem)),this._setOption(o(n.dataItem),!0)}else{for((!this._maxTotal||this._maxTotal<a)&&(this._maxTotal=a),this._updateTagListHTML(),s=t.length-1;s>-1;s--)this._setOption(o(t[s].dataItem),!1);for(s=0;s<e.length;s++)this._setOption(o(e[s].dataItem),!0)}this._refreshFloatingLabel(),this._angularTagItems("compile"),this._placeholder()}},_updateTagListHTML:function(){var e=this.value(),t=this.dataSource.total();this.tagList.children(hu).each(function(e,t){hi(t).remove()}),e.length&&this.input.before(this.tagTemplate({values:e,dataItems:this.dataItems(),maxTotal:this._maxTotal,currentTotal:t}))},_select:function(e){var t=hi.Deferred().resolve();if(!e)return t;var i=this,n=i.listView,s=n.dataItemByIndex(n.getElementIndex(e)),a=e.hasClass("k-selected");return i._state===hf&&(i._state=""),i._allowSelection()||a?i.trigger(a?hb:h_,{dataItem:s,item:e})?(i._close(),t):(i.persistTagList=!1,n.select(e).done(function(){i._placeholder(),i._state===hp&&(i._state=hc,n.skipUpdate(!0))})):t},_selectRange:function(e,t){var i,n=this,s=this.listView,a=this.options.maxSelectedItems,r=this._getSelectedIndices().slice(),o=[],l=function(e){s.select(e).done(function(){e.forEach(function(e){var t=s.dataItemByIndex(e),i=s.element.children()[e],a=hi(i).hasClass("k-selected");n.trigger(a?h_:hb,{dataItem:t,item:hi(i)})}),n._change()})};if(r.length-1==t-e)return l(r);if(e<t)for(i=e;i<=t;i++)o.push(i);else for(i=e;i>=t;i--)o.push(i);for(null!==a&&o.length>a&&(o=o.slice(0,a)),i=0;i<o.length;i++){var d=o[i];-1==this._getSelectedIndices().indexOf(d)?r.push(d):r.splice(r.indexOf(d),1)}return r.length?(n.persistTagList=!1,l(r)):void 0},_input:function(){var e=this.element,t=e[0].accessKey,i=this.tagList.children("input.k-input-inner");i[0]||(i=hi('<input class="k-input-inner" />').appendTo(this.tagList)),e.removeAttr("accesskey"),this._focused=this.input=i.attr({autocomplete:"off",title:e[0].title}),t&&this._focused.attr("accesskey",t)},_tagList:function(){var e=this.options,t=this.wrapper.children(".k-input-values");t[0]||(t=hi(ho.renderChipList('<div unselectable="on" class="k-input-values k-selection-multiple" />',hi.extend({},e))).appendTo(this.wrapper)),this.tagList=t},_tagTemplate:function(){var e,t=this,i=t.options,n=i.tagTemplate,s=i.dataSource,a="multiple"===i.tagMode,r=i.messages.singleTag;t.element[0].length&&!s&&(i.dataTextField=i.dataTextField||"text",i.dataValueField=i.dataValueField||"value"),e=a?hs.template("#:"+hs.expr(i.dataTextField,"data")+"#",{useWithBlock:!1}):hs.template("#:values.length# "+r),t.tagTextTemplate=n=n?hs.template(n):e,t.tagTemplate=function(e){return ho.renderChip('<span unselectable="on"></span>',hi.extend({},i,{fillMode:"solid",rounded:"medium",themeColor:"base",text:n(e),attr:{unselectable:"on"},removable:a,removableAttr:{unselectable:"on","aria-hidden":!0,"aria-label":t.options.messages.deleteTag,title:t.options.messages.deleteTag},icon:a?"":"arrow-s",iconAttr:{unselectable:"on","aria-hidden":!0,"aria-label":"open"}}))}},_loader:function(){this._loading=hi('<span class="k-icon k-i-loading k-input-loading-icon k-hidden"></span>').insertAfter(this.tagList)},_clearButton:function(){hr.fn._clearButton.call(this),this.options.clearButton&&(this._clear.insertAfter(this.tagList),this.wrapper.addClass("k-multiselect-clearable"))},_arrowButton:function(){var e=this.options.messages.downArrow,t=hi(ho.renderButton('<button type="button" aria-label="'+e+'" class="k-input-button k-multiselect-toggle-button"></button>',hi.extend({},this.options,{icon:"arrow-s"})));this._arrow&&(this._arrow.remove(),this._arrow=null),this.options.downArrow&&(this._arrow=t.attr({tabIndex:-1}),this._arrow.appendTo(this.wrapper))},_textContainer:function(){var e=hs.getComputedStyles(this.input[0],hL);e.position="absolute",e.visibility="hidden",e.top=-3333,e.left=-3333,this._span=hi("<span/>").css(e).appendTo(this.wrapper)},_wrapper:function(){var e=this.element,t=e.parent("span.k-multiselect");t[0]||((t=e.wrap('<span class="k-multiselect k-input" unselectable="on" />').parent())[0].style.cssText=e[0].style.cssText),this.wrapper=t.addClass(e[0].className).removeClass("input-validation-error").css("display","")},_closeHandler:function(e){this.trigger(hg)?e.preventDefault():(this.input.attr(hy,!1),this.ul.attr(hx,!0))},_openHandler:function(e){this._adjustListWidth(),this.trigger(hm)?e.preventDefault():(this.input.attr(hy,!0),this.ul.attr(hx,!1))}}),ha.plugin(hV),hs.cssProperties.registerPrefix("MultiSelect","k-input-"),hs.cssProperties.registerValues("MultiSelect",[{prop:"rounded",values:hs.cssProperties.roundedValues.concat([["full","full"]])}]),function(e,t){var i,n=window.kendo,s=n.ui,a=n.keys,r=e.extend,o=e.each,l=Array.isArray,d=n.template,h=s.Widget,u=n.data.HierarchicalDataSource,c=/^(ul|a|div)$/i,p=".kendoPanelBar",f="href",m="k-last",g="k-link",v="."+g,_="error",b=".k-item",k=".k-group:visible",w="k-image",y="k-first",x="change",C="expand",T="select",S="click",I="k-content",D="activate",F="collapse",E="dataBound",A="mouseenter",z="contentLoad",P="k-active",H="> .k-panel",N="> .k-content",R="k-focus",O="k-disabled",M="k-selected",B=".k-selected",L="k-highlight",V=b+":not(.k-disabled)",U="> .k-item:not(.k-disabled) > .k-link, .k-panel > .k-item:not(.k-disabled) > .k-link",W="> li > .k-selected, .k-panel > li > .k-selected",j="aria-disabled",G="aria-expanded",q="aria-hidden",K="aria-selected",$=":visible",Y="single",Q={text:"dataTextField",url:"dataUrlField",spriteCssClass:"dataSpriteCssClassField",imageUrl:"dataImageUrlField"},X={aria:function(e){var t="";return(e.items||e.content||e.contentUrl||e.expanded)&&(t+="aria-expanded='"+(e.expanded?"true":"false")+"' "),!1===e.enabled&&(t+="aria-disabled='true'"),t},wrapperCssClass:function(e,t){var i="k-item",n=t.index;return i+=e.firstLevel?" k-panelbar-header":" k-panelbar-item",!1===t.enabled?i+=" k-disabled":!0===t.expanded&&(i+=" k-active"),0===n&&(i+=" k-first"),n==e.length-1&&(i+=" k-last"),t.cssClass&&(i+=" "+t.cssClass),t.level&&(i+=" k-level-"+t.level()),i},textClass:function(e){var t=g;return e.selected&&(t+=" k-selected"),t},textAttributes:function(e){return e?" href='"+e+"'":""},arrowClass:function(e){return"k-icon"+(e.expanded?" k-panelbar-toggle k-panelbar-collapse k-i-arrow-chevron-up":" k-panelbar-toggle k-panelbar-expand k-i-arrow-chevron-down")},text:function(e){return!1===e.encoded?e.text:n.htmlEncode(e.text)},groupAttributes:function(e){return!0!==e.expanded?" style='display:none'":""},ariaHidden:function(e){return!0!==e.expanded},groupCssClass:function(){return"k-panelbar-group k-group k-panel"},contentAttributes:function(e){return!0!==e.item.expanded?" style='display:none'":""},content:function(e){return e.content?e.content:e.contentUrl?"":"&nbsp;"},contentUrl:function(e){return e.contentUrl?'href="'+e.contentUrl+'"':""}};function J(t){(t=e(t)).filter(".k-first:not(:first-child)").removeClass(y),t.filter(".k-last:not(:last-child)").removeClass(m),t.filter(":first-child").addClass(y),t.filter(":last-child").addClass(m)}function Z(t){(t=e(t)).addClass("k-level-"+t.parentsUntil(".k-panelbar","ul").length)}i=function(e){return e.children("span").children(".k-icon")};var ee=n.ui.DataBoundWidget.extend({init:function(e,t){var i,s,a=this;l(t)&&(t={dataSource:t}),s=t&&!!t.dataSource,h.fn.init.call(a,e,t),e=a.wrapper=a.element.addClass("k-panelbar"),t=a.options,e[0].id&&(a._itemId=e[0].id+"_pb_active"),a._tabindex(),a._accessors(),a._dataSource(),a._templates(),a._initData(s),a._updateClasses(),a._animations(t),e.on(S+p,U,a._click.bind(a)).on(A+p+" mouseleave"+p,U,a._toggleHover).on(S+p,".k-item.k-disabled > .k-link",!1).on(S+p,".k-request-retry",a._retryRequest.bind(a)).on("keydown"+p,a._keydown.bind(a)).on("focus"+p,function(){var e=a.select();a._current(e[0]?e:a._first())}).on("blur"+p,function(){a._current(null)}).attr("role","tree"),(i=e.find("li.k-active > ."+I))[0]&&a.expand(i.parent(),!1),t.dataSource||a._angularCompile(),n.notify(a)},events:[C,F,T,D,x,_,E,z],options:{name:"PanelBar",dataSource:{},animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:200}},messages:{loading:"Loading...",requestFailed:"Request failed.",retry:"Retry"},autoBind:!0,loadOnDemand:!0,expandMode:"multiple",template:"",dataTextField:null},_angularCompile:function(){var e=this;e.angular("compile",function(){return{elements:e.element.children("li"),data:[{dataItem:e.options.$angular}]}})},_angularCompileElements:function(t,i){this.angular("compile",function(){return{elements:t,data:e.map(i,function(e){return[{dataItem:e}]})}})},_angularCleanup:function(){var e=this;e.angular("cleanup",function(){return{elements:e.element.children("li")}})},destroy:function(){h.fn.destroy.call(this),this.element.off(p),this._angularCleanup(),n.destroy(this.element)},_initData:function(e){e&&(this.element.empty(),this.options.autoBind&&(this._progress(!0),this.dataSource.fetch()))},_templates:function(){var e=this.options,t=this._fieldAccessor.bind(this);e.template&&"string"==typeof e.template?e.template=d(e.template):e.template||(e.template=d("# var text = "+t("text")+"(data.item); ## if (typeof data.item.encoded != 'undefined' && data.item.encoded === false) {#<span class='k-panelbar-item-text'>#= text #</span># } else { #<span class='k-panelbar-item-text'>#: text #</span># } #")),this.templates={content:d("<div class='k-panelbar-content k-content'#= contentAttributes(data) #>#= content(item) #</div>"),group:d("<ul role='group' aria-hidden='#= ariaHidden(group) #' class='#= groupCssClass(group) #'#= groupAttributes(group) #>#= renderItems(data) #</ul>"),itemWrapper:d("# var url = "+t("url")+"(item); ## var imageUrl = "+t("imageUrl")+"(item); ## var spriteCssClass = "+t("spriteCssClass")+"(item); ## var contentUrl = contentUrl(item); ## var tag = url||contentUrl ? 'a' : 'span'; #<#= tag # class='#= textClass(item) #' #= contentUrl ##= textAttributes(url) #># if (imageUrl) { #<img class='k-panelbar-item-icon k-image' alt='' src='#= imageUrl #' /># } ## if (spriteCssClass) { #<span class='k-sprite #= spriteCssClass #'></span># } ##= data.panelBar.options.template(data) ##= arrow(data) #</#= tag #>"),item:d("<li aria-selected='false' role='treeitem' #=aria(item)#class='#= wrapperCssClass(group, item) #'"+n.attr("uid")+"='#= item.uid #'>#= itemWrapper(data) ## if (item.items && item.items.length > 0) { ##= subGroup({ items: item.items, panelBar: panelBar, group: { expanded: item.expanded } }) ## } else if (item.content || item.contentUrl) { ##= renderContent(data) ## } #</li>"),loading:d("<li class='k-item'><span class='k-icon k-i-loading'></span> #: data.messages.loading #</li>"),retry:d("<li class='k-item'>#: data.messages.requestFailed # <button class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-request-retry'><span class='k-button-text'>#: data.messages.retry #</span></button></li>"),arrow:d("<span class='#= arrowClass(item) #'></span>"),empty:d("")}},setOptions:function(e){var t=this.options.animation;this._animations(e),e.animation=r(!0,t,e.animation),"dataSource"in e&&this.setDataSource(e.dataSource),h.fn.setOptions.call(this,e)},expand:function(t,i){var n=this,s={};if(t=this.element.find(t),!n._animating||!t.find("ul").is(":visible"))return n._animating=!0,i=!1!==i,t.each(function(a,r){r=e(r);var o=t.children(".k-group,.k-content");o.length||(o=n._addGroupElement(t));var l=o.add(r.find(N));if(!r.hasClass(O)&&l.length>0){if(n.options.expandMode==Y&&n._collapseAllExpanded(r))return n;t.find(".k-highlight").removeClass(L),r.addClass(L),i||(s=n.options.animation,n.options.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}}),n._triggerEvent(C,r)||n._toggleItem(r,!1,!1),i||(n.options.animation=s)}}),n;n.one("complete",function(){setTimeout(function(){n.expand(t)})})},collapse:function(t,i){var n=this,s={};return n._animating=!0,i=!1!==i,(t=n.element.find(t)).each(function(t,a){var r=(a=e(a)).find(H).add(a.find(N));!a.hasClass(O)&&r.is($)&&(a.removeClass(L),i||(s=n.options.animation,n.options.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}}),n._triggerEvent(F,a)||n._toggleItem(a,!0),i||(n.options.animation=s))}),n},updateArrow:function(t){var i=this;(t=e(t)).children(v).children(".k-panelbar-collapse, .k-panelbar-expand").remove(),t.filter(function(){var t=i.dataItem(this);return t?t.hasChildren||t.content||t.contentUrl:e(this).find(".k-panel").length>0||e(this).find(".k-content").length>0}).children(".k-link:not(:has([class*=k-i-arrow]))").each(function(){var t=e(this),i=t.parent();t.append("<span class='k-icon "+(i.hasClass(P)?" k-panelbar-toggle k-panelbar-collapse k-i-arrow-chevron-up":" k-panelbar-toggle k-panelbar-expand k-i-arrow-chevron-down")+"'/>")})},_accessors:function(){var e,t,i,s=this.options,a=this.element;for(e in Q)t=s[Q[e]],i=a.attr(n.attr(e+"-field")),!t&&i&&(t=i),t||(t=e),l(t)||(t=[t]),s[Q[e]]=t},_progress:function(e,t){var n=this.element,s=this.templates.loading({messages:this.options.messages});1==arguments.length?(t=e)?n.html(s):n.empty():i(e).toggleClass("k-i-loading",t).removeClass("k-i-refresh")},_refreshRoot:function(t){var i=this,n={firstLevel:!0,expanded:!0,length:i.element.children().length};this.element.empty();var a=e.map(t,function(t,s){return"string"==typeof t?e(t):(t.items=[],e(i.renderItem({group:n,item:r(t,{index:s})})))});this.element.append(a);for(var o=this.element.children(".k-item"),l=0;l<t.length;l++)this.trigger("itemChange",{item:o.eq(l).find(".k-link").first(),data:t[l],ns:s});this._angularCompileElements(a,t)},_refreshChildren:function(t,i){i.children(".k-group").empty();var n,a,r,o,l,d=t.children.data();if(d.length)for(this.append(t.children,i),this.options.loadOnDemand&&this._toggleGroup(i.children(".k-group"),!1),o=i.children(".k-group").children("li"),r=0;r<o.length;r++)l=o.eq(r),this.trigger("itemChange",{item:l.find(".k-link").first(),data:this.dataItem(l),ns:s});else n=i.children("ul"),a=i.children(".k-link").children(".k-icon"),i.hasClass("k-panelbar")||(!a.length&&n.length?a=e("<span class='k-icon' />").appendTo(i):n.length&&n.children().length||(a.remove(),n.remove())),o=i.children(".k-group").children("li"),this._angularCompileElements(o,d)},findByUid:function(t){for(var i,s=this.element.find(".k-item"),a=n.attr("uid"),r=0;r<s.length;r++)if(s[r].getAttribute(a)==t){i=s[r];break}return e(i)},refresh:function(e){var i=this.options,n=e.node,s=e.action,a=e.items,r=this.wrapper,o=i.loadOnDemand;if(e.field){if(!a[0]||!a[0].level)return;return this._updateItems(a,e.field)}if(n&&(r=this.findByUid(n.uid),this._progress(r,!1)),"add"==s?this._appendItems(e.index,a,r):"remove"==s?this.remove(this.findByUid(a[0].uid)):"itemchange"==s?this._updateItems(a):"itemloaded"==s?this._refreshChildren(n,r):this._refreshRoot(a),"remove"!=s){for(var l=0;l<a.length;l++)if(!o||a[l].expanded){var d=a[l];this._hasChildItems(d)&&d.load()}}this.trigger(E,{node:n?r:t})},_error:function(e){var t=e.node&&this.findByUid(e.node.uid),n=this.templates.retry({messages:this.options.messages});t?(this._progress(t,!1),this._expanded(t,!1),i(t).addClass("k-i-refresh"),e.node.loaded(!1)):(this._progress(!1),this.element.html(n))},_retryRequest:function(e){e.preventDefault(),this.dataSource.fetch()},items:function(){return this.element.find(".k-item > span:first-child")},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&(this._progress(!0),this.dataSource.fetch())},_bindDataSource:function(){this._refreshHandler=this.refresh.bind(this),this._errorHandler=this._error.bind(this),this.dataSource.bind(x,this._refreshHandler),this.dataSource.bind(_,this._errorHandler)},_unbindDataSource:function(){var e=this.dataSource;e&&(e.unbind(x,this._refreshHandler),e.unbind(_,this._errorHandler))},_fieldAccessor:function(t){var i=this.options[Q[t]]||[],s=i.length,a="(function(item) {";return 0===s?a+="return item['"+t+"'];":a+="var levels = ["+e.map(i,function(e){return"function(d){ return "+n.expr(e)+"}"}).join(",")+"];if(item.level){return levels[Math.min(item.level(), "+s+"-1)](item);}else{return levels["+s+"-1](item)}",a+="})"},_dataSource:function(){var e=this.options.dataSource;e&&(e=l(e)?{data:e}:e,this._unbindDataSource(),e.fields||(e.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]),this.dataSource=u.create(e),this._bindDataSource())},_appendItems:function(t,i,n){var s,a,o=this;n.hasClass("k-panelbar")?(s=n.children("li"),a=n):((a=n.children(".k-group")).length||(a=o._addGroupElement(n)),s=a.children("li"));var l={firstLevel:n.hasClass("k-panelbar"),expanded:!0,length:s.length},d=e.map(i,function(t,i){return e("string"==typeof t?t:o.renderItem({group:l,item:r(t,{index:i})}))});void 0===t&&(t=s.length);for(var h=0;h<d.length;h++)0===s.length||0===t?a.append(d[h]):d[h].insertAfter(s[t-1]);o._angularCompileElements(d,i),o.dataItem(n)&&(o.dataItem(n).hasChildren=!0,o.updateArrow(n))},_updateItems:function(t,i){var n,a,o,l,d=this,h={panelBar:d.options,item:l,group:{}},u="expanded"!=i;if("selected"==i){if(t[0][i]){var c=d.findByUid(t[0].uid);c.hasClass(O)||d.select(c,!0)}else d.clearSelection()}else{var p=e.map(t,function(e){return d.findByUid(e.uid)});for(u&&d.angular("cleanup",function(){return{elements:p}}),n=0;n<t.length;n++)h.item=l=t[n],h.panelBar=d,a=(o=p[n]).parent(),u&&(h.group={firstLevel:a.hasClass("k-panelbar"),expanded:o.parent().hasClass(P),length:o.children().length},o.children(".k-link").remove(),o.prepend(d.templates.itemWrapper(r(h,{arrow:l.hasChildren||l.content||l.contentUrl?d.templates.arrow:d.templates.empty},X)))),"expanded"==i?d._toggleItem(o,!l[i],!l[i]||"true"):"enabled"==i&&(d.enable(o,l[i]),l[i]||l.selected&&l.set("selected",!1)),o.length&&this.trigger("itemChange",{item:o.find(".k-link").first(),data:l,ns:s});u&&d.angular("compile",function(){return{elements:p,data:e.map(t,function(e){return[{dataItem:e}]})}})}},_toggleDisabled:function(e,t){(e=this.element.find(e)).toggleClass(O,!t).attr(j,!t)},dataItem:function(t){var i=e(t).closest(b).attr(n.attr("uid")),s=this.dataSource;return s&&s.getByUid(i)},select:function(i,n){var s=this;return i===t?s.element.find(W).parent():((i=s.element.find(i)).length?i.each(function(){var t=e(this),i=t.children(v);if(t.hasClass(O))return s;s._updateSelected(i,n)}):this._updateSelected(i),s)},clearSelection:function(){this.select(e())},enable:function(e,t){return this._toggleDisabled(e,!1!==t),this},disable:function(e){return this._toggleDisabled(e,!1),this},append:function(e,t){t=this.element.find(t);var i=this._insert(e,t,t.length?t.find(H):null);return o(i.items,function(){i.group.append(this),J(this),Z(this)}),this.updateArrow(t),J(i.group.find(".k-first, .k-last")),i.group.height("auto"),this},insertBefore:function(e,t){t=this.element.find(t);var i=this._insert(e,t,t.parent());return o(i.items,function(){t.before(this),J(this),Z(this)}),J(t),i.group.height("auto"),this},insertAfter:function(e,t){t=this.element.find(t);var i=this._insert(e,t,t.parent());return o(i.items,function(){t.after(this),J(this),Z(this)}),J(t),i.group.height("auto"),this},remove:function(e){var t=(e=this.element.find(e)).parentsUntil(this.element,b),i=e.parent("ul");return e.remove(),!i||i.hasClass("k-panelbar")||i.children(b).length||i.remove(),t.length&&(t=t.eq(0),this.updateArrow(t),J(t)),this},reload:function(t){var i=this;(t=i.element.find(t)).each(function(){var t=e(this);i._ajaxRequest(t,t.children("."+I),!t.is($))})},_first:function(){return this.element.children(V).first()},_last:function(){var e=this.element.children(V).last(),t=e.children(k);return t[0]?t.children(V).last():e},_current:function(i){var n=this._focused,s=this._itemId;if(i===t)return n;this.element.removeAttr("aria-activedescendant"),n&&n.length&&(n[0].id===s&&n.removeAttr("id"),n.children(v).removeClass(R)),e(i).length&&(s=i[0].id||s,i.attr("id",s).children(v).addClass(R),this.element.attr("aria-activedescendant",s)),this._focused=i},_keydown:function(e){var t=e.keyCode,i=this._current();e.target==e.currentTarget&&(t==a.DOWN||t==a.RIGHT?(this._current(this._nextItem(i)),e.preventDefault()):t==a.UP||t==a.LEFT?(this._current(this._prevItem(i)),e.preventDefault()):t==a.ENTER||t==a.SPACEBAR?(this._click(e),e.preventDefault()):t==a.HOME?(this._current(this._first()),e.preventDefault()):t==a.END&&(this._current(this._last()),e.preventDefault()))},_nextItem:function(e){if(!e)return this._first();var t=e.children(k),i=e.nextAll(":visible").first();return t[0]&&(i=t.children("."+y)),i[0]||(i=e.parent(k).parent(b).next()),i[0]||(i=this._first()),i},_prevItem:function(e){if(!e)return this._last();var t,i=e.prevAll(":visible").first();if(i[0])for(t=i;t[0];)(t=t.children(k).children("."+m))[0]&&(i=t);else(i=e.parent(k).parent(b))[0]||(i=this._last());return i},_insert:function(t,i,n){var s,a,o=this,l=e.isPlainObject(t),d=i&&i[0];if(d||(n=o.element),a={firstLevel:n.hasClass("k-panelbar"),expanded:e(i).hasClass(P),length:n.children().length},d&&!n.length&&(n=e(o.renderGroup({group:a,options:o.options})).appendTo(i)),l||Array.isArray(t)||t instanceof u){if(t instanceof u&&(t=t.data()),s=e.map(l?[t]:t,function(t,i){return e("string"==typeof t?t:o.renderItem({group:a,item:r(t,{index:i})}))}),d){var h=o.dataItem(i);h?(h.hasChildren=!0,i.attr(G,h.expanded).not(".k-active").children("ul").attr(q,!h.expanded)):i.attr(G,!1)}}else s="string"==typeof t&&"<"!=t.charAt(0)?o.element.find(t):e(t),o._updateItemsClasses(s);return t.length||(t=[t]),o._angularCompileElements(s,t),{items:s,group:n}},_toggleHover:function(t){var i=e(t.currentTarget);i.parents("li.k-disabled").length||i.toggleClass("k-hover",t.type==A)},_updateClasses:function(){var t,i,n,s,a;s=(t=this.element.find("li > ul").not(function(){return e(this).parentsUntil(".k-panelbar","div").length}).addClass("k-panelbar-group k-group k-panel").attr("role","group")).parent(),n=(a=this.dataItem(s))&&a.expanded||!1,t.parent().not("[aria-expanded]").attr(G,n).not(".k-active").children("ul").attr(q,!n).hide(),i=this.element.add(t).children(),this._updateItemsClasses(i),this.updateArrow(i),J(i)},_updateItemsClasses:function(e){for(var t=e.length,i=0;i<t;i++)this._updateItemClasses(e[i],i)},_updateItemClasses:function(t,i){var s,a,r=this._selected,o=this.options.contentUrls,l=o&&o[i],d=this.element[0];t=e(t).addClass("k-item").attr({role:"treeitem","aria-selected":!1}),n.support.browser.msie&&t.css("list-style-position","inside").css("list-style-position",""),t.children("img").addClass(w),(a=t.children("a").addClass(g))[0]&&(a.attr("href",l),a.children("img").addClass(w)),t.filter("li[disabled]").addClass("k-disabled").attr(j,!0).prop("disabled",!1),t.children("div").addClass(I+" k-panelbar-content").attr(q,!0).hide().parent().attr(G,!1),(a=t.children(B))[0]&&(r&&r.attr(K,!1).children(B).removeClass(M),a.addClass(M),this._selected=t.attr(K,!0)),t.children(v)[0]||(s="<span class='k-link'><span class='k-panelbar-item-text'></span></span>",o&&o[i]&&t[0].parentNode==d&&(s='<a class="k-link" href="'+o[i]+'"></a>'),t.contents().filter(function(){return!(this.nodeName.match(c)||3==this.nodeType&&!n.trim(this.nodeValue.trim))}).wrapAll(s)),t.parent(".k-panelbar")[0]?t.addClass("k-panelbar-header"):t.addClass("k-panelbar-item"),/k\-level\-\d+/i.test(t.attr("class"))||t.addClass("k-level-"+t.parentsUntil(this.element,"ul").length)},_click:function(t){var i,n,s,a=t.type==S?e(t.target):this._current().children(v),r=this.element;if(!a.parents("li.k-disabled").length&&a.closest(".k-panelbar")[0]==r[0]&&(!a.is(":kendoFocusable")||a.hasClass(g))){var o=a.closest(v),l=o.closest(b);this._updateSelected(o);var d=l.children(".k-group,.k-content"),h=this.dataItem(l);if(!d.length&&(this.options.loadOnDemand&&h&&h.hasChildren||this._hasChildItems(l)||l.content||l.contentUrl)&&(d=this._addGroupElement(l)),n=l.find(H).add(l.find(N)),i=!(!((s=o.attr(f))&&("#"==s.charAt(s.length-1)||-1!=s.indexOf("#"+this.element[0].id+"-")))&&!n.length),n.data("animating")&&i)t.preventDefault();else if(this._triggerEvent(T,l)&&(i=!0),!1!==i){if(this.options.expandMode==Y&&this._collapseAllExpanded(l)&&i)t.preventDefault();else{if(n.length){var u=n.is($);this._triggerEvent(u?F:C,l)||(i=this._toggleItem(l,u))}i&&t.preventDefault()}}}},_hasChildItems:function(e){return e.items&&e.items.length>0||e.hasChildren},_toggleItem:function(e,i,n){var s,a,r=e.find(H),o=e.find(v).attr(f),l=this.dataItem(e),d=!i,h=l&&l.loaded();return l&&!n&&l.expanded!==d?(l.set("expanded",d),s=l.hasChildren||!!l.content||!!l.contentUrl):(!l||n&&"true"!==n||h||l.content||l.contentUrl?r.length?(this._toggleGroup(r,i),s=!0):(a=e.children("."+I)).length&&(s=!0,a.is(":empty")&&o!==t?this._ajaxRequest(e,a,i):this._toggleGroup(a,i)):(this.options.loadOnDemand&&this._progress(e,!0),e.children(".k-group,.k-content").remove(),s=l.hasChildren,l.load()),s)},_toggleGroup:function(e,t){var i=this,n=i.options.animation,s=n.expand,a=n.collapse&&"effects"in n.collapse,o=r({},n.expand,n.collapse);a||(o=r(o,{reverse:!0})),e.is($)==t?(e.attr(q,!!t),e.parent().attr(G,!t).toggleClass(P,!t).find("> .k-link > .k-panelbar-collapse,> .k-link > .k-panelbar-expand").toggleClass("k-i-arrow-chevron-up",!t).toggleClass("k-panelbar-collapse",!t).toggleClass("k-i-arrow-chevron-down",t).toggleClass("k-panelbar-expand",t),t?(s=r(o,{hide:!0})).complete=function(){i._animationCallback()}:s=r({complete:function(e){i._triggerEvent(D,e.closest(b)),i._animationCallback()}},s),e.toggle(0).kendoStop(!0,!0).kendoAnimate(s)):i._animating=!1},_animationCallback:function(){this.trigger("complete"),this._animating=!1},_addGroupElement:function(t){var i=e('<ul role="group" aria-hidden="true" class="k-panelbar-group k-group k-panel" style="display:none"></ul>');return t.append(i),i},_collapseAllExpanded:function(t){var i,n=this,s=!1,a=t.find(H).add(t.find(N));return a.is($)&&(s=!0),a.is($)||0===a.length||((i=t.siblings()).find(H).add(i.find(N)).filter(function(){return e(this).is($)}).each(function(t,i){i=e(i),(s=n._triggerEvent(F,i.closest(b)))||n._toggleGroup(i,!0)}),n.one("complete",function(){setTimeout(function(){i.each(function(e,t){var i=n.dataItem(t);i&&i.set("expanded",!1)})})})),s},_ajaxRequest:function(t,i,n){var s=this,a=t.find(".k-panelbar-collapse, .k-panelbar-expand"),r=t.find(v),o=setTimeout(function(){a.addClass("k-i-loading")},100),l=r.attr(f);e.ajax({type:"GET",cache:!1,url:l,dataType:"html",data:{},error:function(e,t){a.removeClass("k-i-loading"),s.trigger(_,{xhr:e,status:t})&&this.complete()},complete:function(){clearTimeout(o),a.removeClass("k-i-loading")},success:function(e){function a(){return{elements:i.get()}}try{s.angular("cleanup",a),i.html(e),s.angular("compile",a)}catch(e){var r=window.console;r&&r.error&&r.error(e.name+": "+e.message+" in "+l),this.error(this.xhr,"error")}s._toggleGroup(i,n),s.trigger(z,{item:t[0],contentElement:i[0]})}})},_triggerEvent:function(e,t){return this.trigger(e,{item:t[0]})},_updateSelected:function(e,t){var i=this.element,n=e.parent(b),s=this._selected,a=this.dataItem(n);s&&s.attr(K,!1),this._selected=n.attr(K,!0),i.find(W).removeClass(M),i.find("> .k-highlight, .k-panel > .k-highlight").removeClass(L),e.addClass(M),e.parentsUntil(i,b).filter(":has(.k-link)").addClass(L),this._current(n[0]?n:null),a&&a.set("selected",!0),t||this.trigger(x)},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}})},renderItem:function(e){e=r({panelBar:this,group:{}},e);var t=this.templates.empty,i=e.item;return this.templates.item(r(e,{itemWrapper:this.templates.itemWrapper,renderContent:this.renderContent,arrow:this._hasChildItems(i)||i.content||i.contentUrl?this.templates.arrow:t,subGroup:!e.loadOnDemand||i.expanded?this.renderGroup:t},X))},renderGroup:function(e){return(this.templates||e.panelBar.templates).group(r({renderItems:function(e){for(var t="",i=0,n=e.items,s=n?n.length:0,a=r({length:s},e.group);i<s;i++)t+=e.panelBar.renderItem(r(e,{group:a,item:r({index:i},n[i])}));return t}},e,X))},renderContent:function(e){return e.panelBar.templates.content(r(e,X))}});n.ui.plugin(ee)}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.ui,s=i.keys,a=e.extend,o=n.Widget,l=/^\d+(\.\d+)?px$/i,d=/^\d+(\.\d+)?%$/i,h=".kendoSplitter",u="expand",c="collapse",p="contentLoad",f="error",m="layoutChange",g="horizontal",v="vertical",_="click",b="pane",k="k-focus",w=".k-pane";function y(e){return l.test(e)||/^\d+$/.test(e)}function x(e){return!d.test(e)&&!y(e)}function C(e,t){var i=parseInt(e,10);return d.test(e)&&(i=Math.floor(i*t/100)),i}function T(e,t){return function(i,n){var s=this.element.find(i).data(b);if(1==arguments.length)return s[e];s[e]=n,t&&this.element.data("kendo"+this.options.name).resize(!0)}}var S=o.extend({init:function(e,t){var n;o.fn.init.call(this,e,t),this.wrapper=this.element,this.options.orientation&&(n=this.options.orientation.toLowerCase()!=v),this.orientation=n?g:v,this._dimension=n?"width":"height",this._keys={decrease:n?s.LEFT:s.UP,increase:n?s.RIGHT:s.DOWN},this._resizeStep=10,this._marker=i.guid().substring(0,8),this._initPanes(),this.resizing=new F(this),this.element.triggerHandler("init"+h)},events:[u,c,p,f,"resize",m],_addOverlays:function(){this._panes().append("<div class='k-splitter-overlay k-overlay' />")},_removeOverlays:function(){this._panes().children(".k-splitter-overlay").remove()},_attachEvents:function(){var t=this,i=t.options.orientation;t.element.children(".k-splitbar-draggable-"+i).on("keydown"+h,t._keydown.bind(t)).on("mousedown"+h,function(e){e.currentTarget.focus()}).on("focus"+h,function(t){e(t.currentTarget).addClass(k)}).on("blur"+h,function(i){e(i.currentTarget).removeClass(k),t.resizing&&t.resizing.end()}).on("mouseenter"+h,function(){e(this).addClass("k-splitbar-"+t.orientation+"-hover")}).on("mouseleave"+h,function(){e(this).removeClass("k-splitbar-"+t.orientation+"-hover")}).on("mousedown"+h,t._addOverlays.bind(t)).end().children(".k-splitbar").on("dblclick"+h,t._togglePane.bind(t)).children(".k-collapse-next, .k-collapse-prev").on(_+h,t._arrowClick(c)).end().children(".k-expand-next, .k-expand-prev").on(_+h,t._arrowClick(u)).end().end(),e(window).on("resize"+h+t._marker,t.resize.bind(t,!1)),e(document).on("mouseup"+h+t._marker,t._removeOverlays.bind(t))},_detachEvents:function(){this.element.children(".k-splitbar-draggable-"+this.orientation).off(h).end().children(".k-splitbar").off("dblclick"+h).children(".k-collapse-next, .k-collapse-prev, .k-expand-next, .k-expand-prev").off(h),e(window).off(h+this._marker),e(document).off(h+this._marker)},options:{name:"Splitter",orientation:g,panes:[]},destroy:function(){o.fn.destroy.call(this),this._detachEvents(),this.resizing&&this.resizing.destroy(),i.destroy(this.element),this.wrapper=this.element=null},_keydown:function(t){var i,n=t.keyCode,a=this.resizing,r=e(t.currentTarget),o=this._keys,l=n===o.increase,d=n===o.decrease;l||d?(t.ctrlKey?(i=r[d?"next":"prev"](),a&&a.isResizing()&&a.end(),i[this._dimension]()?this._triggerAction(c,r[d?"prev":"next"]()):this._triggerAction(u,i)):a&&a.move((d?-1:1)*this._resizeStep,r),t.preventDefault()):n===s.HOME?(i=r.prev(),this.collapse(i),t.preventDefault()):n===s.END?(i=r.prev(),this.expand(i),t.preventDefault()):n===s.ENTER&&a&&(a.end(),t.preventDefault())},_initPanes:function(){var e=this.options.panes||[],t=this;this.element.addClass("k-widget").addClass("k-splitter").children().each(function(i,n){"script"!=n.nodeName.toLowerCase()&&t._initPane(n,e[i])}),this.resize()},_initPane:function(t,i){(t=e(t).attr("role","group").addClass("k-pane")).data(b,i||{}).toggleClass("k-scrollable",!i||!1!==i.scrollable),this.ajaxRequest(t)},ajaxRequest:function(e,t,n){var s,a=this;s=(e=a.element.find(e)).data(b),(t=t||s.contentUrl)&&(e.append("<span class='k-icon k-i-loading k-pane-loading' />"),i.isLocalUrl(t)?r.ajax({url:t,data:n||{},type:"GET",dataType:"html",success:function(t){a.angular("cleanup",function(){return{elements:e.get()}}),e.html(t),a.angular("compile",function(){return{elements:e.get()}}),a.trigger(p,{pane:e[0]})},error:function(t,i){a.trigger(f,{pane:e[0],status:i,xhr:t})}}):e.removeClass("k-scrollable").html("<iframe src='"+t+"' frameborder='0' class='k-content-frame'>This page requires frames in order to show content</iframe>"))},_triggerAction:function(e,t){var i=t.data(b),n=i.collapsed&&e==u||!i.collapsed&&e==c;i.collapsible&&n&&!this.trigger(e,{pane:t[0]})&&this[e](t[0])},_togglePane:function(t){var i,n=e(t.target);n.closest(".k-splitter")[0]==this.element[0]&&1===(i=n.children(".k-icon:not(.k-resize-handle)")).length&&(i.is(".k-collapse-prev")?this._triggerAction(c,n.prev()):i.is(".k-collapse-next")?this._triggerAction(c,n.next()):i.is(".k-expand-prev")?this._triggerAction(u,n.prev()):i.is(".k-expand-next")&&this._triggerAction(u,n.next()))},_arrowClick:function(t){var i=this;return function(n){var s,a=e(n.target);a.closest(".k-splitter")[0]==i.element[0]&&(s=a.is(".k-"+t+"-prev")?a.parent().prev():a.parent().next(),i._triggerAction(t,s))}},_updateSplitBar:function(e,t,n,s){var a=function(e,t){return t?"<div class='k-icon "+e+"'></div>":""},r=this.orientation,o=!1!==t.resizable&&!1!==n.resizable,l=t.collapsible,d=t.collapsed,h=n.collapsible,u=n.collapsed,c=s.attr("id");c||(c=i.guid(),s.attr("id",c)),e.addClass("k-splitbar k-splitbar-"+r).attr("role","separator").attr("aria-valuemin","0").attr("aria-valuemax","100").attr("aria-controls",c).removeClass("k-splitbar-"+r+"-hover").toggleClass("k-splitbar-draggable-"+r,o&&!d&&!u).toggleClass("k-splitbar-static-"+r,!o&&!l&&!h).html(a("k-collapse-prev k-i-arrow-60-up",l&&!d&&!u&&r==v)+a("k-collapse-prev k-i-arrow-60-left",l&&!d&&!u&&r==g)+a("k-expand-prev k-i-arrow-60-down",l&&d&&!u&&r==v)+a("k-expand-prev k-i-arrow-60-right",l&&d&&!u&&r==g)+a("k-resize-handle k-i-hbar",o&&r==v)+a("k-resize-handle k-i-vbar",o&&r==g)+a("k-collapse-next k-i-arrow-60-down",h&&!u&&!d&&r==v)+a("k-collapse-next k-i-arrow-60-right",h&&!u&&!d&&r==g)+a("k-expand-next k-i-arrow-60-up",h&&u&&!d&&r==v)+a("k-expand-next k-i-arrow-60-left",h&&u&&!d&&r==g)),t.labelId?e.attr("aria-labelledby",t.labelId):t.label&&e.attr("aria-label",t.label),r==g&&e.attr("aria-orientation",v),o||l||h||e.removeAttr("tabindex")},_updateSplitBars:function(){var t=this;this.element.children(".k-splitbar").each(function(){var i=e(this),n=i.prevAll(w).first(),s=n.data(b),a=i.nextAll(w).first().data(b);a&&t._updateSplitBar(i,s,a,n)})},_removeSplitBars:function(){this.element.children(".k-splitbar").remove()},_panes:function(){return this.element?this.element.children(w):e()},_resetAriaValueNow:function(e,t){var i,n,s;for(i=0;i<e.length;i++)s=t[i]+t[i+1]||1,n=Math.round(t[i]/s*100),e[i].setAttribute("aria-valuenow",n)},_resize:function(){var t=this.element,n=t.children(w),s=this.orientation==g,a=t.children(".k-splitbar"),r=a.length,o=s?"width":"height",l=t[o](),d=[];this.wrapper.addClass("k-splitter-resizing"),0===r?(r=n.length-1,n.slice(0,r).after("<div tabindex='0' class='k-splitbar' data-marker='"+this._marker+"' />"),this._updateSplitBars(),a=t.children(".k-splitbar")):this._updateSplitBars(),a.each(function(){l-=this[s?"offsetWidth":"offsetHeight"]});var h=0,u=e();n.css({position:"absolute",top:0})[o](function(){var t,i=e(this),n=i.data(b)||{};if(i.removeClass("k-collapsed"),n.collapsed)t=n.collapsedSize?C(n.collapsedSize,l):0,i.css("overflow","hidden").addClass("k-collapsed");else{if(x(n.size))return u=u.add(this),void d.push(!1);t=C(n.size,l)}return h+=t,d.push(t),t}),l-=h;var c=u.length,p=Math.floor(l/c);u.slice(0,c-1).css(o,p).end().eq(c-1).css(o,l-(c-1)*p),d.forEach(function(e,t){!1===e&&(d[t]=p)}),this._resetAriaValueNow(a,d);var f=0,v=s?"height":"width",_=s?"left":"top",k=s?"offsetWidth":"offsetHeight";if(0===c){var y=n.filter(function(){return!(e(this).data(b)||{}).collapsed}).last();y[o](l+y[0][k])}t.children().css(v,t[v]()).each(function(e,t){"script"!=t.tagName.toLowerCase()&&(t.style[_]=Math.floor(f)+"px",f+=t[k])}),this._detachEvents(),this._attachEvents(),this.wrapper.removeClass("k-splitter-resizing"),i.resize(n),this.trigger(m)},toggle:function(e,i){var n;n=(e=this.element.find(e)).data(b),(i||n.collapsible)&&(1==arguments.length&&(i=n.collapsed!==t&&n.collapsed),n.collapsed=!i,n.collapsed?e.css("overflow","hidden"):e.css("overflow",""),this.resize(!0))},collapse:function(e){this.toggle(e,!1)},expand:function(e){this.toggle(e,!0)},_addPane:function(e,t,i){return i.length&&(this.options.panes.splice(t,0,e),this._initPane(i,e),this._removeSplitBars(),this.resize(!0)),i},append:function(t){t=t||{};var i=e("<div />").appendTo(this.element);return this._addPane(t,this.options.panes.length,i)},insertBefore:function(t,i){i=e(i),t=t||{};var n=this.wrapper.children(".k-pane").index(i),s=e("<div />").insertBefore(e(i));return this._addPane(t,n,s)},insertAfter:function(t,i){i=e(i),t=t||{};var n=this.wrapper.children(".k-pane").index(i),s=e("<div />").insertAfter(e(i));return this._addPane(t,n+1,s)},remove:function(t){var n=this;return(t=n.wrapper.find(t)).length&&(i.destroy(t),t.each(function(t,i){n.options.panes.splice(n.wrapper.children(".k-pane").index(i),1),e(i).remove()}),n._removeSplitBars(),n.options.panes.length&&n.resize(!0)),n},size:T("size",!0),min:T("min"),max:T("max")});n.plugin(S);var I={sizingProperty:"height",sizingDomProperty:"offsetHeight",alternateSizingProperty:"width",positioningProperty:"top",mousePositioningProperty:"pageY"},D={sizingProperty:"width",sizingDomProperty:"offsetWidth",alternateSizingProperty:"height",positioningProperty:"left",mousePositioningProperty:"pageX"};function F(e){var t=e.orientation;this.owner=e,this._element=e.element,this.orientation=t,a(this,t===g?D:I),this._resizable=new i.ui.Resizable(e.element,{orientation:t,handle:".k-splitbar-draggable-"+t+"[data-marker="+e._marker+"]",hint:this._createHint.bind(this),start:this._start.bind(this),max:this._max.bind(this),min:this._min.bind(this),invalidClass:"k-restricted-size-"+t,resizeend:this._stop.bind(this)})}F.prototype={press:function(e){this._resizable.press(e)},move:function(e,t){this.pressed||(this.press(t),this.pressed=!0),this._resizable.target||this._resizable.press(t),this._resizable.move(e)},end:function(){this._resizable.end(),this.pressed=!1},destroy:function(){this._resizable.destroy(),this._resizable=this._element=this.owner=null},isResizing:function(){return this._resizable.resizing},_createHint:function(t){return e("<div class='k-ghost-splitbar k-ghost-splitbar-"+this.orientation+"' />").css(this.alternateSizingProperty,t[this.alternateSizingProperty]())},_start:function(t){var i=e(t.currentTarget),n=i.prev(),s=i.next(),a=n.data(b),r=s.data(b),o=parseInt(n[0].style[this.positioningProperty],10),l=parseInt(s[0].style[this.positioningProperty],10)+s[0][this.sizingDomProperty]-i[0][this.sizingDomProperty],d=parseInt(this._element.css(this.sizingProperty),10),h=function(e){var t=parseInt(e,10);return(y(e)?t:d*t/100)||0},u=h(a.min),c=h(a.max)||l-o,p=h(r.min),f=h(r.max)||l-o;this.previousPane=n,this.nextPane=s,this._maxPosition=Math.min(l-p,o+c),this._minPosition=Math.max(o+u,l-f)},_max:function(){return this._maxPosition},_min:function(){return this._minPosition},_stop:function(t){var n=e(t.currentTarget),s=this.owner;if(s._panes().children(".k-splitter-overlay").remove(),t.keyCode!==i.keys.ESC){var a=t.position,r=n.prev(),o=n.next(),l=r.data(b),d=o.data(b),h=a-parseInt(r[0].style[this.positioningProperty],10),u=parseInt(o[0].style[this.positioningProperty],10)+o[0][this.sizingDomProperty]-a-n[0][this.sizingDomProperty],c=this._element.children(w).filter(function(){return x(e(this).data(b).size)}).length;(!x(l.size)||c>1)&&(x(l.size)&&c--,l.size=h+"px"),(!x(d.size)||c>1)&&(d.size=u+"px"),s.resize(!0)}return!1}}}(window.kendo.jQuery),function(e,t){var i=window.kendo,n=i.ui.Widget,s=i.ui.Popup,a=i.isFunction,o=e.isPlainObject,l=e.extend,d=e(document),h=i.isLocalUrl,u="_tb_active",c="aria-describedby",p="show",f="hide",m="error",g="contentLoad",v="requestStart",_="k-content-frame",b=i.template("<iframe frameborder='0' class='k-content-frame' src='#= content.url #'>This page requires frames in order to show content</iframe>"),k=".kendoTooltip",w={bottom:{origin:"bottom center",position:"top center"},top:{origin:"top center",position:"bottom center"},left:{origin:"center left",position:"center right",collision:"fit flip"},right:{origin:"center right",position:"center left",collision:"fit flip"},center:{position:"center center",origin:"center center"}},y={top:"bottom",bottom:"top",left:"right",right:"left",center:"center"},x={bottom:"n",top:"s",left:"e",right:"w",center:"n"},C={horizontal:{offset:"top",size:"outerHeight"},vertical:{offset:"left",size:"outerWidth"}};function T(e){for(;e.length&&!function(e){var t=e.data(i.ns+"title");if(t)return e.attr("title",t),e.removeData(i.ns+"title"),!0}(e);)e=e.parent()}function S(e){for(;e.length&&!e.is("body")&&!function(e){var t=e.attr("title");if(t)return e.data(i.ns+"title",t),e.attr("title",""),!0}(e);)e=e.parent()}var I=n.extend({init:function(e,t){var s;n.fn.init.call(this,e,t),s=this.options.position.match(/left|right/)?"horizontal":"vertical",this.dimensions=C[s],i.support.touch&&this._isShownOnMouseEnter()&&this.element.on(i.support.mousedown+k,this.options.filter,this._showOn.bind(this)),this.element.on(this.options.showOn+k,this.options.filter,this._showOn.bind(this)),"click"===this.options.showOn&&this.element.on("keydown"+k,this.options.filter,this._keydown.bind(this))},options:{name:"TooltipBase",filter:"",offset:0,showAfter:100,hideAfter:100,callout:!0,position:"bottom",showOn:"mouseenter",animation:{open:{effects:"fade:in",duration:0},close:{duration:40,hide:!0}}},destroy:function(){var e=this.popup;e&&(e.element.off(k),e.destroy()),clearTimeout(this.timeout),n.fn.destroy.call(this)},hide:function(){this.popup&&this.popup.close()},show:function(e){e=e||this.element,this._saveTitle(e),this._show(e)},target:function(){return this.popup?this.popup.options.anchor:null},_keydown:function(t){var n=e(t.currentTarget);t.keyCode==i.keys.ENTER&&this._show(n)},_showOn:function(t){var i=this,n=e(t.currentTarget);i._isShownOnClick()&&!i._isShownOnMouseEnter()?i._show(n):i._isShownOnFocus()?(i._saveTitle(n),i._show(n)):(clearTimeout(i.timeout),i.timeout=setTimeout(function(){i._show(n)},i.options.showAfter))},_isShownOnFocus:function(){return this.options.showOn&&this.options.showOn.match(/focus/)},_isShownOnMouseEnter:function(){return this.options.showOn&&this.options.showOn.match(/mouseenter/)},_isShownOnClick:function(){return this.options.showOn&&this.options.showOn.match(/click/)},_positionCallout:function(){var t=this.options.position,i=this.dimensions,n=i.offset,s=this.popup,a=s.options.anchor,r=e(a).offset(),o=e(s.element).offset(),l=x[s.flipped?y[t]:t],d=r[n]-o[n]+e(a)[i.size]()/2;this._offset(t,this.options.offset),this.arrow.removeClass("k-callout-n k-callout-s k-callout-w k-callout-e").addClass("k-callout-"+l).css(n,d)},_offset:function(e,t,n){var s="top"==e||"left"==e,a=this.popup.flipped,r=s?"margin-"+e:"margin-"+y[e],o=(n||i._outerWidth(this.arrow))/2+t;this.popup.wrapper.css(r,o*(s&&a||!s&&!a?1:-1)+"px")},_addDescribedBy:function(){var e=this.popup.options.anchor,t=e[0].id||this.element[0].id||i.guid(),n=[];e.attr(c)&&n.push(e.attr(c)),t&&(n.push(t+u),e.attr(c,n.join(" ")),this.popup.element.attr("id",t+u))},_removeDescribedBy:function(e){var t,i,n,s=this.popup.element.attr("id"),a=e.attr(c);a&&((t=a.split(" "))&&t.length>0&&(i=t.filter(function(e){return e!==s})),i&&i.length>0?(n=i.join(" "),e.attr(c,n)):e.removeAttr(c))},_openPopup:function(){this.popup&&(this.popup._hovered=!0,this.popup.open())}});i.ui.plugin(I);var D=I.extend({init:function(e,t){var n;I.fn.init.call(this,e,t),n=this.options.position.match(/left|right/)?"horizontal":"vertical",this.dimensions=C[n],this._documentKeyDownHandler=this._documentKeyDown.bind(this),(this._isShownOnMouseEnter()||this._isShownOnClick())&&this.element.on("mouseenter"+k,this.options.filter,this._mouseenter.bind(this)),this.options.autoHide&&this._isShownOnMouseEnter()&&this.element.on("mouseleave"+k,this.options.filter,this._mouseleave.bind(this)),this.options.autoHide&&this._isShownOnFocus()&&this.element.on("blur"+k,this.options.filter,this._blur.bind(this)),i.support.touch&&this.element.on(i.support.mousedown+k,this.options.filter,this._mouseenter.bind(this))},options:{name:"Tooltip",filter:"",content:function(e){return e.target.data(i.ns+"title")},showAfter:100,callout:!0,offset:0,position:"bottom",showOn:"mouseenter",autoHide:!0,width:null,height:null,animation:{open:{effects:"fade:in",duration:0},close:{duration:40,hide:!0}}},events:[p,f,g,m,v],_mouseenter:function(t){S(e(t.currentTarget))},_saveTitle:function(e){S(e)},_appendContent:function(e){var t,n=this,s=n.options.content,r=n.content,l=n.options.iframe;o(s)&&s.url?("iframe"in n.options||(l=!h(s.url)),n.trigger(v,{options:s,target:e}),l?(r.hide(),(t=r.find("."+_)[0])?t.src=s.url||t.src:r.html(b({content:s})),r.find("."+_).off("load"+k).on("load"+k,function(){n.trigger(g),r.show()})):(r.empty(),i.ui.progress(r,!0),n._ajaxRequest(s))):s&&a(s)?(s=s({sender:this,target:e}),r.html(s||"")):r.html(s),n.angular("compile",function(){return{elements:r}})},_ajaxRequest:function(e){var t=this;r.ajax(l({type:"GET",dataType:"html",cache:!1,error:function(e,n){i.ui.progress(t.content,!1),t.trigger(m,{status:n,xhr:e})},success:(function(e){i.ui.progress(t.content,!1),t.content.html(e),i._outerHeight(t.popup.element)>i._outerHeight(t.popup.wrapper)&&(t.popup.wrapper.css("height",i._outerHeight(t.popup.element)+"px"),t.popup.position(),t._positionCallout()),t.trigger(g)}).bind(t)},e))},_documentKeyDown:function(e){e.keyCode===i.keys.ESC&&this.hide()},refresh:function(){var e=this.popup;e&&e.options.anchor&&this._appendContent(e.options.anchor)},_show:function(e){var t=this,i=t.target();t.popup||t._initPopup(),i&&i[0]!=e[0]&&(t.popup.close(),t.popup.element.kendoStop(!0,!0)),i&&i[0]==e[0]||(t._appendContent(e),t.popup.options.anchor=e),t.popup.one("deactivate",function(){T(e),t._removeDescribedBy(e),this.element.removeAttr("id").attr("aria-hidden",!0),d.off("keydown"+k,t._documentKeyDownHandler)}),t._openPopup()},_initPopup:function(){var t=this,n=t.options,a=e(i.template('<div role="tooltip" class="k-widget k-tooltip#if (!autoHide) {# k-tooltip-closable#}#"><div class="k-tooltip-content"></div>#if (!autoHide) {# <div class="k-tooltip-button"><a href="\\#" class="k-icon k-i-close" title="Close"></a></div> #}##if (callout){ #<div class="k-callout k-callout-#=dir#"></div>#}#</div>')({callout:n.callout&&"center"!==n.position,dir:x[n.position],autoHide:n.autoHide}));t.popup=new s(a,l({autosize:!0,activate:function(){t._addDescribedBy(),n.callout?t._positionCallout():t._offset(t.options.position,t.options.offset),this.element.removeAttr("aria-hidden"),d.on("keydown"+k,t._documentKeyDownHandler),t.trigger(p),t.popup._hovered=void 0},close:function(){t.trigger(f)},copyAnchorStyles:!1,animation:n.animation},w[n.position])),a.css({width:n.width,height:n.height}),t.content=a.find(".k-tooltip-content"),t.arrow=a.find(".k-callout"),n.autoHide&&this._isShownOnMouseEnter()?a.on("mouseleave"+k,t._mouseleave.bind(t)):a.on("click"+k,".k-tooltip-button",t._closeButtonClick.bind(t))},_closeButtonClick:function(e){e.preventDefault(),this.hide()},_mouseleave:function(e){var t=this;clearTimeout(t.timeout),t.timeout=setTimeout(function(){t._closePopup(e.currentTarget)},t.options.hideAfter)},_blur:function(e){this._closePopup(e.currentTarget)},_closePopup:function(t){this.popup&&!this.popup._hovered?this.popup.close():T(e(t))},destroy:function(){this.element.off(k),d.off("keydown"+k,this._documentKeyDownHandler),I.fn.destroy.call(this)}});i.ui.plugin(D)}(window.kendo.jQuery),hU=window.kendo.jQuery,hj=(hW=window.kendo).ui,hG=hU.extend,hq="visibility",hK="k-hover",hj.HierarchicalDragAndDrop=hW.Class.extend({init:function(e,t){this.element=e,this.hovered=e,this.options=hG({dragstart:hU.noop,drag:hU.noop,drop:hU.noop,dragend:hU.noop},t),this._draggable=new hj.Draggable(e,{ignore:"input,a:not(.k-in),textarea,.k-multiselect-wrap,select,button,a.k-button>.k-icon,button.k-button>.k-icon,span.k-icon.k-i-arrow-60-right,span.k-icon.k-i-arrow-45-down-right",filter:t.filter,autoScroll:t.autoScroll,cursorOffset:{left:10,top:hW.support.mobileOS?-40/hW.support.zoomLevel():10},hint:this._hint.bind(this),dragstart:this.dragstart.bind(this),dragcancel:this.dragcancel.bind(this),drag:this.drag.bind(this),dragend:this.dragend.bind(this),$angular:t.$angular,holdToDrag:t.holdToDrag})},_hint:function(e){return"<div class='k-drag-clue'><span class='k-icon k-drag-status'></span>"+this.options.hintText(e)+"</div>"},_removeTouchHover:function(){hW.support.touch&&this.hovered&&(this.hovered.find(".k-hover").removeClass(hK),this.hovered=!1)},_hintStatus:function(e){var t=this._draggable.hint.find(".k-drag-status")[0];if(!e)return hW.trim(t.className.replace(/(p|k)-(icon|drag-status)/g,""));t.className="k-icon k-drag-status "+e},dragstart:function(e){this.source=e.currentTarget.closest(this.options.itemSelector),this.options.dragstart(this.source)&&e.preventDefault(),this.options.reorderable?this.dropHint=hU("<div class='k-drop-hint k-drop-hint-h'><div class='k-drop-hint-start'></div><div class='k-drop-hint-line'></div></div>").css(hq,"hidden").appendTo(this.element):this.dropHint=hU()},drag:function(e){var t,i,n,s,a,r,o,l,d,h,u,c=this.options,p=this.source,f=this.dropTarget=hU(hW.eventTarget(e)),m=f.closest(c.allowedContainers);m.length?p[0]==f[0]||c.contains(p[0],f[0])?u="k-i-cancel":(u="k-i-insert-middle",(t=(d=c.itemFromTarget(f)).item).length?(this._removeTouchHover(),i=hW._outerHeight(t),s=d.content,c.reorderable?(a=i/(s.length>0?4:2),n=hW.getOffset(t).top,r=e.y.location<n+a,o=n+i-a<e.y.location,l=s.length&&!r&&!o):(l=!0,r=!1,o=!1),this.hovered=!!l&&m,this.dropHint.css(hq,l?"hidden":"visible"),this._lastHover&&this._lastHover[0]!=s[0]&&this._lastHover.removeClass(hK),this._lastHover=s.toggleClass(hK,l),l?u="k-i-plus":((h=t.position()).top+=r?0:i,this.dropHint.css(h)[r?"prependTo":"appendTo"](c.dropHintContainer(t)),r&&d.first&&(u="k-i-insert-up"),o&&d.last&&(u="k-i-insert-down"))):f[0]!=this.dropHint[0]&&(this._lastHover&&this._lastHover.removeClass(hK),u=hU.contains(this.element[0],m[0])?"k-i-cancel":"k-i-plus")):(u="k-i-cancel",this._removeTouchHover()),this.options.drag({originalEvent:e.originalEvent,source:p,target:f,pageY:e.y.location,pageX:e.x.location,status:u.substring(2),setStatus:function(e){u=e}}),0!==u.indexOf("k-i-insert")&&this.dropHint.css(hq,"hidden"),this._hintStatus(u)},dragcancel:function(){this.dropHint.remove()},dragend:function(e){var t,i,n,s="over",a=this.source,r=this.dropHint,o=this.dropTarget;"visible"==r.css(hq)?(s=this.options.dropPositionFrom(r),t=r.closest(this.options.itemSelector)):o&&((t=o.closest(this.options.itemSelector)).length||(t=o.closest(this.options.allowedContainers))),i={originalEvent:e.originalEvent,source:a[0],destination:t[0],valid:"k-i-cancel"!=this._hintStatus(),setValid:function(e){this.valid=e},dropTarget:o[0],position:s},n=this.options.drop(i),r.remove(),this._removeTouchHover(),this._lastHover&&this._lastHover.removeClass(hK),i.valid&&!n?(this._draggable.dropped=!0,this.options.dragend({originalEvent:e.originalEvent,source:a,destination:t,position:s})):this._draggable.dropped=i.valid},destroy:function(){this._lastHover=this.hovered=null,this._draggable.destroy()}}),function(e,t){var i,n,s,a,o,l=window.kendo,d=l.ui,h=l.data,u=e.extend,c=l.template,p=Array.isArray,f=d.Widget,m=h.HierarchicalDataSource,g=l.keys,v=".kendoTreeView",_=".kendoTreeViewTemp",b="select",k="check",w="navigate",y="change",x="error",C="checked",T="indeterminate",S="dragstart",I="drag",D="drop",F="dragend",E="dataBound",A="itemsLoaded",z="loadCompleted",P="requestEnd",H="click",N="undefined",R="k-hover",O="k-treeview",M=".k-item",B="string",L="aria-checked",V="aria-selected",U="aria-disabled",W="aria-expanded",j="aria-activedescendant",G="aria-busy",q="k-disabled",K={text:"dataTextField",url:"dataUrlField",spriteCssClass:"dataSpriteCssClassField",imageUrl:"dataImageUrlField"},$=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&typeof e.nodeName===B};function Y(e){return function(t){var i=t.children(".k-animation-container");return i.length||(i=t),i.children(e)}}function Q(e){return l.template(e,{useWithBlock:!1})}function X(e){return e.find(".k-checkbox-wrapper:first input[type=checkbox]")}function J(e){return function(t,i){var n,s=(i=i.closest(M)).parent();return s.parent().is("li")&&(n=s.parent()),this._dataSourceMove(t,s,n,function(t,n){var s=this.dataItem(i),a=s&&i.parent().children().length!==s.parent().length?s.parent().indexOf(s):i.index();return this._insert(t.data(),n,a+e)})}}function Z(t){var i=t.children("div"),n=t.children("ul"),s=i.find(".k-treeview-toggle > .k-icon"),a=t.children("input[type=checkbox]"),r=i.children(".k-in");t.hasClass("k-treeview")||(i.length||(i=e("<div />").prependTo(t)),!s.length&&n.length?s=e("<span class='k-treeview-toggle'><span class='k-icon' /></span>").prependTo(i):n.length&&n.children().length||(s.parent().remove(),n.remove(),t.removeAttr(W)),a.length&&e("<span class='k-checkbox-wrapper' />").appendTo(i).append(a),r.length||((r=t.children("a").eq(0).addClass("k-in k-link")).length||(r=e("<span class='k-treeview-leaf k-in' />")),r.appendTo(i),i.length&&function(e,t){for(var i;e&&"ul"!=e.nodeName.toLowerCase();)i=e,e=e.nextSibling,3==i.nodeType&&(i.nodeValue=l.trim(i.nodeValue)),o.test(i.className)?t.insertBefore(i,t.firstChild):t.appendChild(i)}(i[0].nextSibling,r[0])))}n=Y(".k-group"),s=Y(".k-group,.k-content"),a=function(e){return e.children("div").find(".k-treeview-toggle > .k-icon")},o=/k-sprite/,i=l.ui.DataBoundWidget.extend({init:function(e,t){var i,n,s=t&&!!t.dataSource;p(t)&&(t={dataSource:t}),t&&typeof t.loadOnDemand==N&&p(t.dataSource)&&(t.loadOnDemand=!1),f.prototype.init.call(this,e,t),e=this.element,t=this.options,this._dataSourceUids={},n=e.is("ul")&&e||e.hasClass(O)&&e.children("ul"),(i=!s&&n.length)&&(t.dataSource.list=n),this._animation(),this._accessors(),this._templates(),e.hasClass(O)?(this.wrapper=e,this.root=e.children("ul").eq(0)):(this._wrapper(),n&&(this.root=e,this._group(this.wrapper))),this._applyCssClasses(),this._tabindex(),this.wrapper.attr("role","tree"),this.wrapper.find(">ul").attr("role","none"),this._dataSource(i),this._attachEvents(),this._dragging(),i?this._syncHtmlAndDataSource():t.autoBind&&(this._progress(!0),this.dataSource.fetch(this._attemptLoadCompleted.bind(this))),t.checkboxes&&t.checkboxes.checkChildren&&this.updateIndeterminate(),this.element[0].id?this._ariaId=l.format("{0}_tv_active",this.element[0].id):this._ariaId=l.guid()+"_tv_active",l.notify(this)},_attachEvents:function(){var t=this,i=".k-in:not(.k-selected,.k-disabled)",n="mouseenter";t._clickHandler=t._click.bind(t),t.wrapper.on(n+v,".k-in.k-selected",function(e){e.preventDefault()}).on(n+v,i,function(){e(this).addClass(R)}).on("mouseleave"+v,i,function(){e(this).removeClass(R)}).on(H+v,i,t._clickHandler).on("dblclick"+v,".k-in:not(.k-disabled)",t._toggleButtonClick.bind(t)).on(H+v,".k-i-expand,.k-i-collapse",t._toggleButtonClick.bind(t)).on("keydown"+v,t,t._keydown.bind(t)).on("keypress"+v,t._keypress.bind(t)).on("focus"+v,t._focus.bind(t)).on("blur"+v,t._blur.bind(t)).on("mousedown"+v,".k-in,.k-checkbox-wrapper :checkbox,.k-i-expand,.k-i-collapse",t._mousedown.bind(t)).on("change"+v,".k-checkbox-wrapper :checkbox",t._checkboxChange.bind(t)).on("click"+v,".k-request-retry",t._retryRequest.bind(t)).on("click"+v,".k-link.k-disabled",function(e){e.preventDefault()}).on("click"+v,function(i){var n=e(i.target);n.is(":kendoFocusable")||n.find("input,select,textarea,button,object").is(":kendoFocusable")||t.focus()})},_syncHtmlAndDataSource:function(e,t){e=e||this.root;var i,n,s,a,r,o=(t=t||this.dataSource).view(),d=l.attr("uid"),h=l.attr("expanded"),u=this.options.checkboxes,c=e.children("li");for(i=0;i<c.length;i++)a=(s=o[i]).uid,(n=c.eq(i)).attr("role","treeitem").attr(d,a).attr(V,n.hasClass("k-selected")),s.expanded="true"===n.attr(h),s.hasChildren&&n.attr(W,s.expanded),u&&(r=X(n),s.checked=r.prop(C),r.attr("id","_"+a),r.next(".k-checkbox-label").attr("for","_"+a),n.attr(L,n.checked)),this._syncHtmlAndDataSource(n.children("ul"),s.children)},_animation:function(){var e=this.options,t=e.animation,i=t.collapse&&"effects"in t.collapse,n=u({},t.expand,t.collapse);i||(n=u(n,{reverse:!0})),!1===t&&(t={expand:{effects:{}},collapse:{hide:!0,effects:{}}}),t.collapse=u(n,{hide:!0}),e.animation=t},_dragging:function(){var t=this.options.dragAndDrop,i=this.dragging;if(t&&!i){var n=this;this.dragging=new d.HierarchicalDragAndDrop(this.element,{reorderable:!0,$angular:this.options.$angular,autoScroll:this.options.autoScroll,filter:"div:not(.k-disabled) .k-in",allowedContainers:".k-treeview",itemSelector:".k-treeview .k-item",hintText:this._hintText.bind(this),contains:function(t,i){return e.contains(t,i)},dropHintContainer:function(e){return e},itemFromTarget:function(e){var t=e.closest(".k-treeview-top,.k-treeview-mid,.k-treeview-bot");return{item:t,content:e.closest(".k-in"),first:t.hasClass("k-treeview-top"),last:t.hasClass("k-treeview-bot")}},dropPositionFrom:function(e){return e.prevAll(".k-in").length>0?"after":"before"},dragstart:function(e){return n.wrapper.attr(l.attr("scrollable"),!1),n.trigger(S,{sourceNode:e[0]})},drag:function(e){n.trigger(I,{originalEvent:e.originalEvent,sourceNode:e.source[0],dropTarget:e.target[0],pageY:e.pageY,pageX:e.pageX,statusClass:e.status,setStatusClass:e.setStatus})},drop:function(t){var i=e(t.dropTarget).closest("a");return i&&i.attr("href")&&n._tempPreventNavigation(i),n.trigger(D,{originalEvent:t.originalEvent,sourceNode:t.source,destinationNode:t.destination,valid:t.valid,setValid:function(e){this.valid=e,t.setValid(e)},dropTarget:t.dropTarget,dropPosition:t.position})},dragend:function(e){var t=e.source,i=e.destination,s=e.position;function a(t){n.options.checkboxes&&n.options.checkboxes.checkChildren&&n.updateIndeterminate(),n.current(t),n.element.focus(),n.trigger(F,{originalEvent:e.originalEvent,sourceNode:t&&t[0],destinationNode:i[0],dropPosition:s})}n.wrapper.removeAttr(l.attr("scrollable")),"over"==s?n.append(t,i,a):("before"==s?t=n.insertBefore(t,i):"after"==s&&(t=n.insertAfter(t,i)),a(t))}})}else!t&&i&&(i.destroy(),this.dragging=null)},_tempPreventNavigation:function(e){e.on(H+v+_,function(t){t.preventDefault(),e.off(H+v+_)})},_hintText:function(e){return this.templates.dragClue({item:this.dataItem(e),treeview:this.options})},_templates:function(){var e=this.options,t=this._fieldAccessor.bind(this);e.template&&typeof e.template==B?e.template=c(e.template):e.template||(e.template=Q("# var text = "+t("text")+"(data.item); ## if (typeof data.item.encoded != 'undefined' && data.item.encoded === false) {#<span class='k-treeview-leaf-text'>#= text #</span># } else { #<span class='k-treeview-leaf-text'>#: text #</span># } #")),this._checkboxes(),this.templates={setAttributes:function(e){var t="",i=e.attr||{};for(var n in i)i.hasOwnProperty(n)&&"class"!==n&&(t+=n+'="'+i[n]+'" ');return t},wrapperCssClass:function(e,t){var i="k-item k-treeview-item",n=t.index;return e.firstLevel&&0===n&&(i+=" k-first"),n==e.length-1&&(i+=" k-last"),i},cssClass:function(e,t){var i="",n=t.index,s=e.length-1;return e.firstLevel&&0===n&&(i+="k-treeview-top "),i+=0===n&&n!=s?"k-treeview-top":n==s?"k-treeview-bot":"k-treeview-mid"},textClass:function(e,t){var i="k-treeview-leaf k-in";return t&&(i+=" k-link"),!1===e.enabled&&(i+=" k-disabled"),!0===e.selected&&(i+=" k-selected"),i},toggleButtonClass:function(e){var t="k-icon";return!0!==e.expanded?t+=" k-i-expand":t+=" k-i-collapse",t},groupAttributes:function(e){var t="";return e.firstLevel||(t="role='group'"),t+(!0!==e.expanded?" style='display:none'":"")},groupCssClass:function(e){var t="k-group k-treeview-group";return e.firstLevel&&(t+=" k-treeview-lines"),t},dragClue:Q("#= data.treeview.template(data) #"),group:Q("<ul class='#= data.r.groupCssClass(data.group) #'#= data.r.groupAttributes(data.group) #>#= data.renderItems(data) #</ul>"),itemContent:Q("# var imageUrl = "+t("imageUrl")+"(data.item); ## var spriteCssClass = "+t("spriteCssClass")+"(data.item); ## if (imageUrl) { #<img class='k-image' alt='' src='#= imageUrl #'># } ## if (spriteCssClass) { #<span class='k-sprite #= spriteCssClass #'></span># } ##= data.treeview.template(data) #"),itemElement:Q("# var item = data.item, r = data.r; ## var url = "+t("url")+"(item); #<div class='#= r.cssClass(data.group, item) #'># if (item.hasChildren) { #<span class='k-treeview-toggle'><span class='#= r.toggleButtonClass(item) #'></span></span># } ## if (data.treeview.checkboxes) { #<span class='k-checkbox-wrapper' role='presentation'>#= data.treeview.checkboxes.template(data) #</span># } ## var tag = url ? 'a' : 'span'; ## var textAttr = url ? ' href=\\'' + url + '\\'' : ''; #<#=tag# class='#= r.textClass(item, !!url) #'#= textAttr #>#= r.itemContent(data) #</#=tag#></div>"),item:Q("# var item = data.item, r = data.r; #<li role='treeitem' class='#= r.wrapperCssClass(data.group, item) #'"+l.attr("uid")+'=\'#= item.uid #\' #= r.setAttributes(item.toJSON ? item.toJSON() : item) # # if (data.treeview.checkboxes) { #aria-checked=\'#= item.checked ? "true" : "false" #\' # } #aria-selected=\'#= item.selected ? "true" : "false" #\' #=item.enabled === false ? "aria-disabled=\'true\'" : \'\'## if (item.hasChildren) { #aria-expanded=\'#= item.expanded ? "true" : "false" #\' # } #data-expanded=\'#= item.expanded ? "true" : "false" #\' >#= r.itemElement(data) #</li>'),loading:Q("<div class='k-icon k-i-loading'></div> #: data.messages.loading #"),retry:Q("#: data.messages.requestFailed # <button class='k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-request-retry'><span class='k-button-text'>#: data.messages.retry #</span></button>")}},items:function(){return this.element.find(".k-item > div:first-child")},setDataSource:function(e){var t=this.options;t.dataSource=e,this._dataSourceUids={},this._dataSource(),t.checkboxes&&t.checkboxes.checkChildren&&this.dataSource.one("change",this.updateIndeterminate.bind(this,null)),this.options.autoBind&&this.dataSource.fetch(this._attemptLoadCompleted.bind(this))},_bindDataSource:function(){this._refreshHandler=this.refresh.bind(this),this._errorHandler=this._error.bind(this),this._loadCompletedHandler=this._loadCompleted.bind(this),this._requestEndHandler=this._dsRequestEnd.bind(this),this._loadedNodes=[],this.dataSource.bind(y,this._refreshHandler),this.dataSource.bind(x,this._errorHandler),this.dataSource.bind(A,this._loadCompletedHandler),this.dataSource.bind(P,this._requestEndHandler)},_dsRequestEnd:function(e){var t=this;setTimeout(function(){"read"!==e.type||t._loadCompletedFired||t._attemptLoadCompleted()})},_loadCompleted:function(e){this._loadedNodes=this._loadedNodes.concat(e.nodes),this.dataSource.loading()||!1!==this.options.loadOnDemand||(this.trigger(z,{nodes:this._loadedNodes}),this._loadedNodes=[])},_attemptLoadCompleted:function(){var e,t,i=this.dataSource.view();if(!1===this.options.loadOnDemand){for(t=0;t<i.length;t++)if((e=i[t]).hasChildren&&(!e.children||!e.children.data()||0===e.children.data().length))return;this._loadCompletedFired=!0,this.trigger(z,{nodes:[]})}},_unbindDataSource:function(){var e=this.dataSource;e&&(e.unbind(y,this._refreshHandler),e.unbind(x,this._errorHandler),e.unbind(A,this._loadCompletedHandler),e.unbind(P,this._requestEndHandler))},_dataSource:function(e){var t=this.options.dataSource;t=p(t)?{data:t}:t,this._unbindDataSource(),t.fields||(t.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]),this.dataSource=t=m.create(t),e&&(t.fetch(),function e(t){for(var i=0;i<t.length;i++)t[i]._initChildren(),t[i].children.fetch(),e(t[i].children.view())}(t.view())),this._bindDataSource()},events:[S,I,D,F,E,z,"expand","collapse",b,y,w,k,"kendoKeydown"],options:{name:"TreeView",dataSource:{},animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:100}},messages:{loading:"Loading...",requestFailed:"Request failed.",retry:"Retry"},dragAndDrop:!1,checkboxes:!1,autoBind:!0,autoScroll:!1,loadOnDemand:!0,template:"",dataTextField:null,size:"medium"},_accessors:function(){var e,t,i,n=this.options,s=this.element;for(e in K)t=n[K[e]],i=s.attr(l.attr(e+"-field")),!t&&i&&(t=i),t||(t=e),p(t)||(t=[t]),n[K[e]]=t},_fieldAccessor:function(t){var i=this.options[K[t]],n=i.length,s="(function(item) {";return 0===n?s+="return item['"+t+"'];":s+="var levels = ["+e.map(i,function(e){return"function(d){ return "+l.expr(e)+"}"}).join(",")+"];return levels[Math.min(item.level(), "+n+"-1)](item)",s+="})"},setOptions:function(e){f.fn.setOptions.call(this,e),this._animation(),this._dragging(),this._templates()},_trigger:function(e,t){return this.trigger(e,{node:t.closest(M)[0]})},_setChecked:function(e,t){if(e&&l.isFunction(e.view))for(var i=0,n=e.view();i<n.length;i++)!1!==n[i].enabled&&this._setCheckedValue(n[i],t),n[i].children&&this._setChecked(n[i].children,t)},_setCheckedValue:function(e,t){e.checked=t},_setIndeterminate:function(e){var t,i,s,a=n(e),r=!0;if(a.length&&(i=(t=X(a.children())).length)){if(i>1){for(s=1;s<i;s++)if(t[s].checked!=t[s-1].checked||t[s].indeterminate||t[s-1].indeterminate){r=!1;break}}else r=!t[0].indeterminate;return e.attr(L,r?t[0].checked:"mixed"),X(e).data(T,!r).prop(T,!r).prop(C,r&&t[0].checked)}},updateIndeterminate:function(e){var t,i,s,a=n(e=e||this.wrapper).children();if(a.length){for(t=0;t<a.length;t++)this.updateIndeterminate(a.eq(t));if(e.is(".k-treeview"))return;i=this._setIndeterminate(e),s=this.dataItem(e),i&&i.prop(C)?s.checked=!0:s&&delete s.checked}},_bubbleIndeterminate:function(e,t){if(e.length){t||this.updateIndeterminate(e);var i,n=this.parent(e);n.length&&(this._setIndeterminate(n),i=n.children("div").find(".k-checkbox-wrapper input[type=checkbox]"),this._skip=!0,!1===i.prop(T)?this.dataItem(n).set(C,i.prop(C)):this.dataItem(n).set(C,!1),this._skip=!1,this._bubbleIndeterminate(n,!0))}},_checkboxChange:function(t){var i=e(t.target),n=i.prop(C),s=i.closest(M),a=this.dataItem(s);this._preventChange||(a.checked!=n&&(a.set(C,n),s.attr(L,n),this._trigger(k,s)),i.is(":focus")&&(this._trigger(w,s),this.focus()))},_toggleButtonClick:function(t){var i=e(t.currentTarget).closest(M);i.is("[aria-disabled='true']")||this.toggle(i)},_mousedown:function(t){var i=e(t.currentTarget),n=e(t.currentTarget).closest(M),s=l.support.browser;n.is("[aria-disabled='true']")||((s.msie||s.edge)&&i.is(":checkbox")&&(i.prop(T)?(this._preventChange=!1,i.prop(C,!i.prop(C)),i.trigger(y),i.on(H+v,function(e){e.preventDefault()}),this._preventChange=!0):(i.off(H+v),this._preventChange=!1)),this._clickTarget=n,this.current(n))},_focusable:function(e){return e&&e.length&&e.is(":visible")&&!e.find(".k-in").first().hasClass(q)},_focus:function(){var t=this.select(),i=this._clickTarget;l.support.touch||(i&&i.length&&(t=i),this._focusable(t)||(t=this.current()),this._focusable(t)||(t=this._nextVisible(e())),this.current(t))},focus:function(){var e,t=this.wrapper,i=t[0],n=[],s=[],a=document.documentElement;do(i=i.parentNode).scrollHeight>i.clientHeight&&(n.push(i),s.push(i.scrollTop));while(i!=a);for(l.focusElement(t),e=0;e<n.length;e++)n[e].scrollTop=s[e]},_blur:function(){this.current().find(".k-in").first().removeClass("k-focus")},_enabled:function(e){return!e.children("div").children(".k-in").hasClass(q)},parent:function(t){var i,n,s=/\bk-treeview\b(?!-)/,a=/\bk-item\b/;typeof t==B&&(t=this.element.find(t)),$(t)||(t=t[0]),n=a.test(t.className);do a.test((t=t.parentNode).className)&&(n?i=t:n=!0);while(!s.test(t.className)&&!i);return e(i)},_nextVisible:function(e){var t,i=this,s=i._expanded(e);return e.length&&e.is(":visible")?s&&(t=n(e).children().first()).length||(t=function(e){for(;e.length&&!e.next().length;)e=i.parent(e);return e.next().length?e.next():e}(e)):t=i.root.children().eq(0),t},_previousVisible:function(e){var t,i;if(!e.length||e.prev().length)for(i=e.length?e.prev():this.root.children().last();this._expanded(i)&&(t=n(i).children().last()).length;)i=t;else i=this.parent(e)||e;return i},_keydown:function(i){var n,s=i.keyCode,a=this.current(),r=this._expanded(a),o=a.find(".k-checkbox-wrapper").first().find(":checkbox"),d=l.support.isRtl(this.element);i.target==i.currentTarget&&(!d&&s==g.RIGHT||d&&s==g.LEFT?r?n=this._nextVisible(a):a.find(".k-in").first().hasClass(q)||this.expand(a):!d&&s==g.LEFT||d&&s==g.RIGHT?r&&!a.find(".k-in").first().hasClass(q)?this.collapse(a):(n=this.parent(a),this._enabled(n)||(n=t)):s==g.DOWN?n=this._nextVisible(a):s==g.UP?n=this._previousVisible(a):s==g.HOME?n=this._nextVisible(e()):s==g.END?n=this._previousVisible(e()):s!=g.ENTER||a.find(".k-in").first().hasClass(q)?s==g.SPACEBAR&&o.length&&(a.find(".k-in").first().hasClass(q)||(o.prop(C,!o.prop(C)).data(T,!1).prop(T,!1),this._checkboxChange({target:o})),n=a):a.find(".k-in").first().hasClass("k-selected")||this._trigger(b,a)||this.select(a),n&&(i.preventDefault(),a[0]!=n[0]&&(this._trigger(w,n),this.current(n))))},_keypress:function(e){var t,i=this,n=i.current().get(0),s=e.key;1===s.length&&(i._match||(i._match=""),i._match+=s,clearTimeout(i._matchTimer),i._matchTimer=setTimeout(function(){i._match=""},300),(t=n&&i._matchNextByText(Array.prototype.indexOf.call(i.element.find(".k-item"),n),i._match)).length||(t=i._matchNextByText(-1,i._match)),t.get(0)&&t.get(0)!==n&&(i._trigger(w,t),i.current(t)))},_matchNextByText:function(t,i){return this.element.find(".k-in").filter(function(n,s){return n>t&&e(s).is(":visible")&&0===e(s).text().toLowerCase().indexOf(i)}).eq(0).closest(M)},_click:function(t){var i=e(t.currentTarget),n=s(i.closest(M)),a=i.attr("href");(a?"#"==a||a.indexOf("#"+this.element.id+"-")>=0:n.length&&!n.children().length)&&t.preventDefault(),i.hasClass(".k-selected")||this._trigger(b,i)||this.select(i)},_wrapper:function(){var e,t,i=this.element;i.is("ul")?(e=i.wrap("<div />").parent(),t=i):t=(e=i).children("ul").eq(0),this.wrapper=e.addClass("k-treeview"),this.root=t},_getSelectedNode:function(){return this.element.find(".k-selected").closest(M)},_group:function(e){var t=e.hasClass(O),i={firstLevel:t,expanded:t||this._expanded(e)},n=e.children("ul");n.addClass(this.templates.groupCssClass(i)).css("display",i.expanded?"":"none"),t||n.attr("role","group"),this._nodes(n,i)},_nodes:function(t,i){var n,s=this,a=t.children("li");i=u({length:a.length},i),a.each(function(t,a){a=e(a),n={index:t,expanded:s._expanded(a)},Z(a),s._updateNodeClasses(a,i,n),s._group(a)})},_checkboxes:function(){var t,i=this.options,n=i.checkboxes;n&&(t="<input id='_#= item.uid #' aria-hidden='true' type='checkbox' tabindex='-1'",n.name&&(t+=" name='"+n.name+"'"),t+=" />",typeof(n=u({template:l.html.renderCheckBox(e(t),e.extend({},i,{rounded:"medium"})).replace(/(<input[^/>]*)/,"$1 #= (item.enabled === false) ? 'disabled' : '' # #= item.checked ? 'checked' : '' #")},i.checkboxes)).template==B&&(n.template=c(n.template)),i.checkboxes=n)},_updateNodeClasses:function(e,t,i){var n=e.children("div"),s=e.children("ul"),a=this.templates;if(!e.hasClass("k-treeview")){(i=i||{}).expanded=typeof i.expanded!=N?i.expanded:this._expanded(e),i.index=typeof i.index!=N?i.index:e.index(),i.enabled=typeof i.enabled!=N?i.enabled:!n.children(".k-in").hasClass("k-disabled"),(t=t||{}).firstLevel=typeof t.firstLevel!=N?t.firstLevel:e.parent().parent().hasClass(O),t.length=typeof t.length!=N?t.length:e.parent().children().length,e.removeClass("k-first k-last").addClass(a.wrapperCssClass(t,i)),n.removeClass("k-treeview-top k-treeview-mid k-treeview-bot").addClass(a.cssClass(t,i));var r=n.children(".k-in"),o=r[0]&&"a"==r[0].nodeName.toLowerCase();r.removeClass("k-in k-link k-disabled").addClass(a.textClass(i,o)),(s.length||"true"==e.attr("data-hasChildren"))&&(n.find(".k-treeview-toggle > .k-icon").removeClass("k-i-expand k-i-collapse").addClass(a.toggleButtonClass(i)),s.addClass("k-group k-treeview-group"))}},_processNodes:function(t,i){for(var n=this.element.find(t),s=0;s<n.length;s++)i.call(this,s,e(n[s]).closest(M))},dataItem:function(t){var i=e(t).closest(M).attr(l.attr("uid")),n=this.dataSource;return n&&n.getByUid(i)},_dataItem:function(t){var i=e(t).closest(M).attr(l.attr("uid"));return this.dataSource&&this._dataSourceUids[i]},_insertNode:function(t,i,s,a,r){var o,d,h,u,c,p,f=n(s),m=f.children().length+1,g={firstLevel:s.hasClass(O),expanded:!r,length:m},v="",_=function(e,t){e.appendTo(t)};for(h=0;h<t.length;h++)(u=t[h]).index=i+h,v+=this._renderItem({group:g,item:u});if((d=e(v)).length){for(this.angular("compile",function(){return{elements:d.get(),data:t.map(function(e){return{dataItem:e}})}}),f.length||(f=e(this._renderGroup({group:g})).appendTo(s),s.attr(W,!0)),a(d,f),s.hasClass("k-item")&&(Z(s),this._updateNodeClasses(s,g,{expanded:!r})),c=d.prev().first(),p=d.next().last(),this._updateNodeClasses(c,{},{expanded:"true"==c.attr(l.attr("expanded"))}),this._updateNodeClasses(p,{},{expanded:"true"==p.attr(l.attr("expanded"))}),h=0;h<t.length;h++)(u=t[h]).hasChildren&&(o=u.children.data()).length&&this._insertNode(o,u.index,d.eq(h),_,!u.expanded);return d}},_updateNodes:function(t,i){var n,a,r,o,h,u,c=this,p={treeview:c.options,item:o},f="expanded"!=i&&"checked"!=i;function m(e,t){e.is(".k-group")&&e.find(".k-item:not([aria-disabled])").attr(L,t),e.find(".k-checkbox-wrapper input[type=checkbox]:not([disabled])").prop(C,t).data(T,!1).prop(T,!1)}if("selected"==i)o=t[0],(a=c.findByUid(o.uid)).find(".k-in").first().removeClass("k-hover").toggleClass("k-selected",o[i]).end(),o[i]&&c.current(a),a.attr(V,!!o[i]);else{var g=e.map(t,function(e){return c.findByUid(e.uid).children("div")});for(f&&c.angular("cleanup",function(){return{elements:g}}),n=0;n<t.length;n++)p.item=o=t[n],a=(r=g[n]).parent(),f&&(l.unbind&&l.unbind(r),r.children(".k-in").html(c.templates.itemContent(p))),i==C?(m(r,h=o[i]),a.attr(L,h),c.options.checkboxes.checkChildren&&(m(a.children(".k-group"),h),c._setChecked(o.children,h),c._bubbleIndeterminate(a))):"expanded"==i?c._toggle(a,o,o[i]):"enabled"==i&&(a.find(".k-checkbox-wrapper input[type=checkbox]").prop("disabled",!o[i]),u=!s(a).is(":visible"),a.removeAttr(U),o[i]||(o.selected&&o.set("selected",!1),o.expanded&&o.set("expanded",!1),u=!0,a.attr(V,!1).attr(U,!0)),c._updateNodeClasses(a,{},{enabled:o[i],expanded:!u})),r.length&&this.trigger("itemChange",{item:r,data:o,ns:d});f&&c.angular("compile",function(){return{elements:g,data:e.map(t,function(e){return[{dataItem:e}]})}})}},_appendItems:function(e,t,i){var s=n(i).children(),a=!this._expanded(i);if(this.element===i){var r=this.dataSource.data(),o=this.dataSource.view();e=(o.length<r.length?o:r).indexOf(t[0])}else t.length&&(e=t[0].parent().indexOf(t[0]));typeof e==N&&(e=s.length),this._insertNode(t,e,i,function(t,i){e>=s.length?t.appendTo(i):t.insertBefore(s.eq(e))},a),a||(this._updateNodeClasses(i,{},{expanded:!a}),n(i).css("display","block"))},_refreshChildren:function(e,t,i){var s,a,r,o=this.options,l=o.loadOnDemand,h=o.checkboxes&&o.checkboxes.checkChildren;if(n(e).empty(),t.length)for(this._appendItems(i,t,e),a=n(e).children(),l&&h&&this._bubbleIndeterminate(a.last()),s=0;s<a.length;s++)r=a.eq(s),this.trigger("itemChange",{item:r.children("div"),data:t[s],ns:d});else Z(e)},_refreshRoot:function(t){var i=this._renderGroup({items:t,group:{firstLevel:!0,expanded:!0}});if(this.root.length&&this.root[0].parentElement){this._angularItems("cleanup");var n=e(i);this.root.attr("class",n.attr("class")).html(n.html())}else this.root=this.wrapper.html(i).children("ul");for(var s=this.root.children(".k-item"),a=0;a<t.length;a++)this.trigger("itemChange",{item:s.eq(a),data:t[a],ns:d});this._angularItems("compile")},refresh:function(e){var i,n=e.node,s=e.action,a=e.items,r=this.wrapper,o=this.options,l=o.loadOnDemand,d=o.checkboxes&&o.checkboxes.checkChildren;if(!this._skip){for(i=0;i<a.length;i++)this._dataSourceUids[a[i].uid]=a[i];if(e.field){if(!a[0]||!a[0].level)return;return this._updateNodes(a,e.field)}if(n&&(r=this.findByUid(n.uid),this._progress(r,!1)),d&&"remove"!=s){var h=!1;for(i=0;i<a.length;i++)if("checked"in a[i]){h=!0;break}if(!h&&n&&n.checked)for(i=0;i<a.length;i++)a[i].checked=!0}if("add"==s?this._appendItems(e.index,a,r):"remove"==s?this._remove(this.findByUid(a[0].uid),!1):"itemchange"==s?this._updateNodes(a):"itemloaded"==s?this._refreshChildren(r,a,e.index):(this._refreshRoot(a),this.element.attr(G,!1)),"remove"!=s)for(i=0;i<a.length;i++)(!l||a[i].expanded||a[i]._loaded)&&a[i].load();this.wrapper.find(">ul").attr("role","none"),this.trigger(E,{node:n?r:t}),this.dataSource.filter()&&this.options.checkboxes.checkChildren&&this.updateIndeterminate(r)}},_error:function(e){var t=e.node&&this.findByUid(e.node.uid),i=this.templates.retry({messages:this.options.messages});t?(this._progress(t,!1),this._expanded(t,!1),a(t).addClass("k-i-reload"),e.node.loaded(!1)):(this._progress(!1),this.dataSource.data([]),this.element.html(i))},_retryRequest:function(e){e.preventDefault(),this.dataSource.fetch(this._attemptLoadCompleted.bind(this))},expand:function(e){this._processNodes(e,function(e,t){this.toggle(t,!0)})},collapse:function(e){this._processNodes(e,function(e,t){this.toggle(t,!1)})},enable:function(e,t){"boolean"==typeof e?(t=e,e=this.items()):t=2!=arguments.length||!!t,this._processNodes(e,function(e,i){this.dataItem(i).set("enabled",t)})},current:function(t){var i=this._current,n=this.element;return arguments.length>0&&t&&t.length?(i&&i.find(".k-in").first().removeClass("k-focus"),(i=this._current=e(t,n).closest(M)).find(".k-in").first().addClass("k-focus"),void this._updateActiveDescendant()):(i||(i=this._nextVisible(e())),i)},_updateActiveDescendant:function(){var e=this._current,t=e[0].id||this._ariaId,i=this.element.find("#"+this._ariaId);i.length>0&&i.removeAttr("id"),this.wrapper.removeAttr(j),e.attr("id",t),this.wrapper.attr(j,t)},select:function(t){var i=this,n=i.element;if(!arguments.length)return n.find(".k-selected").closest(M);t=e(t,n).closest(M),n.find(".k-selected").each(function(){var t=i.dataItem(this);t?(t.set("selected",!1),delete t.selected):e(this).removeClass("k-selected")}),t.length&&(i.dataItem(t).set("selected",!0),i._clickTarget=t),i.trigger(y)},_toggle:function(e,t,i){var n,a=this.options,r=s(e),o=i?"expand":"collapse";r.data("animating")||(n=t&&t.loaded(),i&&!n?(a.loadOnDemand&&this._progress(e,!0),r.remove(),t.load()):(this._updateNodeClasses(e,{},{expanded:i}),i||r.css("height",r.height()).css("height"),r.kendoStop(!0,!0).kendoAnimate(u({reset:!0},a.animation[o],{complete:function(){i&&r.css("height","")}}))))},toggle:function(t,i){a(t=e(t)).is(".k-i-expand, .k-i-collapse")&&(1==arguments.length&&(i=!this._expanded(t)),this._expanded(t,i))},destroy:function(){f.fn.destroy.call(this),this.wrapper.off(v),this.wrapper.find(".k-checkbox-wrapper :checkbox").off(v),this._clickHandler=null,this._unbindDataSource(),this.dragging&&this.dragging.destroy(),this._dataSourceUids={},l.destroy(this.element),this.root=this.wrapper=this.element=null},_expanded:function(e,t,i){var n,a=l.attr("expanded"),r=t,o=r?"expand":"collapse";if(1==arguments.length)return n=this._dataItem(e),"true"===e.attr(a)||n&&n.expanded;n=this.dataItem(e),s(e).data("animating")||!i&&this._trigger(o,e)||(r?(e.attr(a,"true"),e.attr(W,"true")):(e.removeAttr(a),e.attr(W,"false")),n&&(n.set("expanded",r),r=n.expanded))},_progress:function(e,t){var i=this.element,n=this.templates.loading({messages:this.options.messages});1==arguments.length?((t=e)?i.html(n):i.empty(),i.attr(G,t)):(a(e).toggleClass("k-i-loading",t).removeClass("k-i-reload"),e.attr(G,t))},text:function(e,t){var i=this.dataItem(e),n=this.options[K.text],s=i.level(),a=n.length,r=n[Math.min(s,a-1)];if(!t)return i[r];i.set(r,t)},_objectOrSelf:function(t){return e(t).closest("[data-role=treeview]").data("kendoTreeView")||this},_dataSourceMove:function(t,i,n,s){var a,r=this._objectOrSelf(n||i),o=r.dataSource,l=e.Deferred().resolve().promise();return n&&n[0]!=r.element[0]&&((a=r.dataItem(n)).loaded()||(r._progress(n,!0),l=a.load()),n!=this.root&&((o=a.children)&&o instanceof m||(a._initChildren(),a.loaded(!0),o=a.children))),t=this._toObservableData(t),s.call(r,o,t,l)},_toObservableData:function(t){var i,n,s=t;return(t instanceof l.jQuery||window.jQuery&&t instanceof window.jQuery||$(t))&&(i=this._objectOrSelf(t).dataSource,n=e(t).attr(l.attr("uid")),(s=i.getByUid(n))&&(s=i.remove(s))),s},_insert:function(e,t,i){t instanceof l.data.ObservableArray?t=t.toJSON():p(t)||(t=[t]);var n=e.parent();return n&&n._initChildren&&(n.hasChildren=!0,n._initChildren()),e.splice.apply(e,[i,0].concat(t)),this.findByUid(e[i].uid)},insertAfter:J(1),insertBefore:J(0),append:function(t,i,s){var a=this.root;if(!(i&&t instanceof r&&i[0]===t[0]))return(i=i&&i.length?i:null)&&(a=n(i)),this._dataSourceMove(t,a,i,function(t,n,a){var r,o=this;return a.done(function(){var a,l;i&&o._expanded(i,!0,!0),l=Math.max((a=t.data()).length,0),r=o._insert(a,n,l),(s=s||e.noop)(r)}),r||null})},_remove:function(t,i){var n,s,a;return(t=e(t,this.element)).attr("id")===this.element.attr(j)&&this.element.removeAttr(j),this.angular("cleanup",function(){return{elements:t.get()}}),n=t.parent().parent(),s=t.prev(),a=t.next(),t[i?"detach":"remove"](),n.hasClass("k-item")&&(Z(n),this._updateNodeClasses(n)),this._updateNodeClasses(s),this._updateNodeClasses(a),t},remove:function(e){var t=this.dataItem(e);t&&this.dataSource.remove(t)},detach:function(e){return this._remove(e,!0)},findByText:function(t){return e(this.element).find(".k-in").filter(function(i,n){return e(n).text()==t}).closest(M)},findByUid:function(t){for(var i,n=this.element.find(".k-item"),s=l.attr("uid"),a=0;a<n.length;a++)if(n[a].getAttribute(s)==t){i=n[a];break}return e(i)},expandPath:function(t,i){var n=this,s=t.slice(0),a=i||e.noop;function r(t){var i,s=e.Deferred(),a=n.dataSource.get(t),r=l.attr("expanded");return a?(i=n.findByUid(a.uid),a.loaded()?(a.set("expanded",!0),i.attr(r,!0),i.attr(W,!0),s.resolve()):(n._progress(i,!0),a.load().then(function(){a.set("expanded",!0),i.attr(r,!0),i.attr(W,!0),s.resolve()}))):s.resolve(),s.promise()}r(s[0]).then(function e(){s.shift(),s.length?r(s[0]).then(e):a.call(n)})},_parentIds:function(e){for(var t=e&&e.parentNode(),i=[];t&&t.parentNode;)i.unshift(t.id),t=t.parentNode();return i},expandTo:function(e){e instanceof l.data.Node||(e=this.dataSource.get(e));var t=this._parentIds(e);this.expandPath(t)},_renderItem:function(e){return e.group||(e.group={}),e.treeview=this.options,e.r=this.templates,this.templates.item(e)},_renderGroup:function(e){var t=this;return e.renderItems=function(e){var i="",n=0,s=e.items,a=s?s.length:0,r=e.group;for(r.length=a;n<a;n++)e.group=r,e.item=s[n],e.item.index=n,i+=t._renderItem(e);return i},e.r=t.templates,t.templates.group(e)}}),l.cssProperties.registerPrefix("TreeView","k-treeview-"),d.plugin(i)}(window.kendo.jQuery),window.kendo.jQuery,hY=(h$=window.kendo).ui.Widget,hQ=Math.abs,hX=hY.extend({init:function(e,t){var i=this;function n(e){return function(t){i._triggerTouch(e,t)}}function s(e){return function(t){i.trigger(e,{touches:t.touches,distance:t.distance,center:t.center,event:t.event})}}hY.fn.init.call(i,e,t),t=i.options,e=i.element,i.wrapper=e,i.events=new h$.UserEvents(e,{filter:t.filter,surface:t.surface,minHold:t.minHold,multiTouch:t.multiTouch,allowSelection:!0,fastTap:t.fastTap,press:n("touchstart"),hold:n("hold"),tap:i._tap.bind(i),gesturestart:s("gesturestart"),gesturechange:s("gesturechange"),gestureend:s("gestureend")}),t.enableSwipe?(i.events.bind("start",i._swipestart.bind(i)),i.events.bind("move",i._swipemove.bind(i))):(i.events.bind("start",i._dragstart.bind(i)),i.events.bind("move",n("drag")),i.events.bind("end",n("dragend"))),h$.notify(i)},events:["touchstart","dragstart","drag","dragend","tap","doubletap","hold","swipe","gesturestart","gesturechange","gestureend"],options:{name:"Touch",surface:null,global:!1,fastTap:!1,filter:null,multiTouch:!1,enableSwipe:!1,minXDelta:30,maxYDelta:20,maxDuration:1e3,minHold:800,doubleTapTimeout:800},cancel:function(){this.events.cancel()},destroy:function(){hY.fn.destroy.call(this),this.events.destroy()},_triggerTouch:function(e,t){this.trigger(e,{touch:t.touch,event:t.event})&&t.preventDefault()},_tap:function(e){var t=this.lastTap,i=e.touch;t&&i.endTime-t.endTime<this.options.doubleTapTimeout&&h$.touchDelta(i,t).distance<20?(this._triggerTouch("doubletap",e),this.lastTap=null):(this._triggerTouch("tap",e),this.lastTap=i)},_dragstart:function(e){this._triggerTouch("dragstart",e)},_swipestart:function(e){2*hQ(e.x.velocity)>=hQ(e.y.velocity)&&e.sender.capture()},_swipemove:function(e){var t=this.options,i=e.touch,n=e.event.timeStamp-i.startTime,s=i.x.initialDelta>0?"right":"left";hQ(i.x.initialDelta)>=t.minXDelta&&hQ(i.y.initialDelta)<t.maxYDelta&&n<t.maxDuration&&(this.trigger("swipe",{direction:s,touch:e.touch}),i.cancel())}}),h$.ui.plugin(hX),function(e,t){var i=window.kendo,n=i.ui.Widget,s=".kendoButtonMenu",a=i.ui,r=i.keys,o=e.extend,l="next",d="aria-disabled",h="tabindex",u="click",c="menuClick",p="menuOpen",f="menuClose",m="keydown",g="focus",v="k-menu-item",_="k-link k-menu-link",b={text:null,icon:null,url:null,attributes:null,enabled:!0,hidden:!1,id:null,imageUrl:null,spriteCssClass:null},k='#if(imageUrl){#<img alt="icon" class="k-image" src="#:imageUrl#" />#}#',w='#if(spriteCssClass){#<span class="k-sprite #:spriteCssClass#"></span>#}#',y='#if(icon){#<span class="k-icon k-i-#:icon#"></span>#}#',x='#if(text){#<span class="k-menu-link-text">#:text#</span>#}#',C='<span class="'+_+'">'+k+w+y+x+"</span>",T='<a href="#:url#" class="'+_+'">'+k+w+y+x+"</a>";function S(t,i){var n=i===l?e.fn.next:e.fn.prev,s=i===l?e.fn.first:e.fn.last,a=n.call(t),r=":kendoFocusable";return a.length||(a=s.call(t.parent().find("."+v))),a.is(r)||!a.length?a:a.find(r).length?s.call(a.find(r)):S(a,i)}var I=n.extend({init:function(e,t){n.fn.init.call(this,e,t),this.mainButton=t.mainButton,this._clickHandlers={},this._renderList(),this._initPopup(),this._attachEvents(),this._applyCssClasses(this.list)},options:{name:"ButtonMenu",element:null,items:[],size:"medium"},events:[c,p,f],_renderList:function(){var t=this.options.items,n=this.element.addClass("k-menu-popup"),s=this.mainButton.attr("id")||i.guid(),a=e('<ul role="menu"></ul>').addClass("k-group k-menu-group k-reset");this.list=a.appendTo(n),this.list.attr("id",s+"_buttonmenu"),t.forEach(this._renderListItem.bind(this))},_renderListItem:function(t){var n,s;s=e('<li id="'+(n=(t=o({},b,t,{enabled:t.enable&&t.enabled})).id||i.guid())+'" role="menuitem" class="k-item k-menu-item">'+this._renderItemButton(t)+"</li>"),t.click&&(this._clickHandlers[n]=t.click),t.attributes&&s.attr(t.attributes),t.data&&i.isFunction(t.data)&&s.data(t.data(t)),this.list.append(s),this.enable(t.enabled,s),this._hide(t.hidden,s)},_renderItemButton:function(e){var t=this.options;return t.itemTemplate?i.template(t.itemTemplate)(e):e.url?i.template(T)(e):i.template(C)(e)},_initPopup:function(){var e=this.options;this._popup=new a.Popup(this.element,o({},e.popup,{anchor:this.mainButton,isRtl:this._isRtl,toggleTarget:e.toggleTarget,copyAnchorStyles:!1,animation:e.animation,open:this._popupOpenHandler.bind(this),close:this._popupCloseHandler.bind(this),activate:this._popupExpandHandler.bind(this)}))},_popupOpenHandler:function(e){this.trigger(p)?e.preventDefault():this.list.find("."+v).attr(h,0)},_popupCloseHandler:function(e){this.trigger(f)&&e.preventDefault(),this.list.find("."+v).attr(h,-1)},_popupExpandHandler:function(){this.list.find(":kendoFocusable").first().trigger(g)},adjustPopupWidth:function(e){this.element.addClass("k-split-wrapper"),this.element.css({"min-width":e})},_attachEvents:function(){this.list.on(u+s,"."+v,this._click.bind(this)).on(m+s,"."+v,this.listItemKeydown.bind(this)),this.mainButton.on(m+s,this._keydown.bind(this))},_keydown:function(t){if(!e(t.target).is(".k-disabled")&&!e(t.target).parents(".k-disabled").length)return t.altKey&&t.keyCode===r.DOWN?(this._popup.open(),void t.preventDefault()):void 0},listItemKeydown:function(t){var i=e(t.target);t.preventDefault(),t.keyCode===r.ESC||t.keyCode===r.TAB||t.altKey&&t.keyCode===r.UP?(this._popup.close(),this.mainButton.trigger(g)):t.keyCode===r.DOWN?S(i,l).trigger(g):t.keyCode===r.UP?S(i,"prev").trigger(g):i.is(".k-disabled")||t.keyCode!==r.SPACEBAR&&t.keyCode!==r.ENTER?t.keyCode===r.HOME?this.list.find(":kendoFocusable").filter("."+v).first().trigger(g):t.keyCode===r.END&&this.list.find(":kendoFocusable").filter("."+v).last().trigger(g):i.trigger(u)},_click:function(t){var i=e(t.target).closest("."+v),n=i.attr("id");this._clickHandlers[n]&&this._clickHandlers[n](t),this.trigger(c,{id:n,target:i,type:"menu-click",originalEvent:t})},toggle:function(){this._popup.toggle()},enable:function(e,t){(t=t&&t.length?this.list.find(t):this.items()).toggleClass("k-disabled",!e),e?t.removeAttr(d):t.attr(d,!e)},_hide:function(e,t){(t=t&&t.length?this.list.find(t):this.items()).toggleClass("k-hidden",e)},hide:function(e){this._hide(!0,e)},show:function(e){this._hide(!1,e)},close:function(){this._popup.close()},items:function(){return this.list.children("."+v)},destroyPopup:function(){this._popup&&(this._popup.destroy(),this._popup=null,this.list.off(s),this.list.remove(),this.list=null)},destroy:function(){delete this._clickHandlers,this.destroyPopup(),this.mainButton.off(s),n.fn.destroy.call(this)}});i.cssProperties.registerPrefix("ButtonMenu","k-menu-group-"),a.plugin(I)}(window.kendo.jQuery),hJ=window.kendo.jQuery,h0=(hZ=window.kendo).ui.Widget,h1=".kendoSplitButton",h2=hZ.ui,h3=hJ.extend,h9=hZ.html,h6=hZ._outerWidth,h5=hZ.keys,h8="aria-disabled",h4="aria-label",h7="aria-expanded",ue="disabled",ut="k-focus",ui="click",un="open",us="close",ua="focus",ur=h0.extend({init:function(e,t){t.enabled=!1!==t.enabled&&!hJ(e).prop(ue),h0.fn.init.call(this,e,t),this._wrapper(),this._renderButtons(),this._renderMenu(),this._enable(this.options.enabled),this._aria(),this._attachEvents(),hZ.notify(this),this._applyCssClasses()},options:{name:"SplitButton",enabled:!0,items:[],rounded:"medium",size:"medium",fillMode:"solid",themeColor:"base",icon:null,popup:null,arrowIcon:"arrow-s",messages:{labelSuffix:"splitbutton"}},events:[ui,un,us],_wrapper:function(){var e=(this.element.attr("id")||hZ.guid())+"_wrapper";this.wrapper=this.element.wrap('<div id="'+e+'" class="k-split-button k-button-group"></div>').parent(".k-split-button"),this.arrowButton=hJ('<button tabindex="-1" aria-label="arrow-button" class="k-split-button-arrow"></button>').appendTo(this.wrapper)},_applyCssClasses:function(){this.wrapper.addClass(this._getAppearanceClasses())},_clearCssClasses:function(){this.wrapper.removeClass(this._getAppearanceClasses())},_getAppearanceClasses:function(){var e=this.__proto__.options.name;return hZ.cssProperties.getValidClass({widget:e,propName:"rounded",value:this.options.rounded})},_renderButtons:function(){this._mainButton(),this._arrowButton()},_mainButton:function(){var e=h3({},this.options,{type:this.element.attr("type")||"button"});delete e.click,h9.renderButton(this.element,e)},_arrowButton:function(){var e=h3({},this.options,{type:"button",icon:this.options.arrowIcon});delete e.text,delete e.imageUrl,delete e.click,h9.renderButton(this.arrowButton,e)},_aria:function(){var e=this.element,t=this.menu;e.attr("aria-haspopup",t?"menu":null),e.attr(h7,!t&&null),e.attr("aria-controls",t?t.list.attr("id"):null),e.attr(h4)||e.attr(h4,e.text()+" "+this.options.messages.labelSuffix)},_renderMenu:function(){var e=h3({},this.options),t=hJ("<div></div>");delete e.click,delete e.name,e.items.length&&(this.menu=t.appendTo(this.wrapper).kendoButtonMenu(h3({mainButton:this.element,toggleTarget:this.arrowButton,menuOpen:this.menuOpenHandler.bind(this),menuClose:this.menuCloseHandler.bind(this),menuClick:this._click.bind(this)},e)).data("kendoButtonMenu"))},menuOpenHandler:function(e){var t=h6(this.wrapper);this.trigger(un,{target:this.element})?e.preventDefault():(e.sender.adjustPopupWidth(t),this.element.attr(h7,!0))},menuCloseHandler:function(e){this.trigger(us,{target:this.element})?e.preventDefault():(this.element.attr(h7,!1),this.element.trigger(ua))},_attachEvents:function(){this.element.on(ui+h1,this._click.bind(this)),this.element.on("keydown"+h1,this._keydown.bind(this)),this.element.on(ua+h1,this._focus.bind(this)),this.element.on("blur"+h1,this._blur.bind(this))},_focus:function(){this.wrapper.addClass(ut)},_blur:function(){this.wrapper.removeClass(ut)},_click:function(e){var t=hJ(e.target).closest(".k-button"),i=t.attr("id"),n=e;"menu-click"===e.type&&(i=e.id,t=e.target,n=e.originalEvent),this.menu.close(),this.trigger(ui,{id:i,target:t,originalEvent:n})},_keydown:function(e){this.element.is(".k-disabled")&&(e.keyCode===h5.ENTER||e.keyCode===h5.SPACEBAR)&&e.preventDefault()},focus:function(){this.element.trigger(ua)},_enable:function(e,t){this.element.add(this.arrowButton).toggleClass("k-disabled",!e),e?this.element.removeAttr(h8):this.element.attr(h8,!e),t||this.element.attr(ue,!e),this.arrowButton.attr(ue,!e)},enable:function(e,t,i){void 0===e&&(e=!0),t&&t.length?this.menu.enable(e,t):(this.options.enabled=e,this._enable(e,i),this.menu.enable(e))},hide:function(e){e&&e.length&&this.menu.hide(e)},show:function(e){e&&e.length&&this.menu.show(e)},open:function(){this.menu._popup.open()},close:function(){this.menu._popup.close()},items:function(){return this.menu.items()},setOptions:function(e){h0.fn.setOptions.call(this,e),(e.popup||e.items||e.size)&&(this.menu.destroy(),this._renderMenu()),this._renderButtons(),this._aria()},destroy:function(){this.menu.destroy(),this.element.off(h1),h0.fn.destroy.call(this)}}),hZ.cssProperties.registerPrefix("SplitButton","k-splitbutton-"),hZ.cssProperties.registerValues("SplitButton",[{prop:"rounded",values:hZ.cssProperties.roundedValues.concat([["full","full"]])}]),h2.plugin(ur),uo=window.kendo.jQuery,ud=(ul=window.kendo).ui.Widget,uh=".kendoDropDownButton",uu=ul.ui,uc=ul.keys,up=uo.extend,uf=ul.html,um=ul._outerWidth,ug="aria-disabled",uv="aria-label",u_="aria-expanded",ub="disabled",uk="click",uw="open",uy="close",ux="focus",uC=ud.extend({init:function(e,t){t.enabled=!1!==t.enabled&&!uo(e).prop(ub),ud.fn.init.call(this,e,t),this.wrapper=this.element,this._mainButton(),this._renderMenu(),this._enable(this.options.enabled),this._aria(),this._attachEvents(),ul.notify(this),this._applyCssClasses()},options:{name:"DropDownButton",enabled:!0,items:[],rounded:"medium",size:"medium",fillMode:"solid",themeColor:"base",icon:null,popup:null,messages:{labelSuffix:"dropdownbutton"}},events:[uk,uw,uy],_mainButton:function(){var e=up({},this.options,{type:this.element.attr("type")||"button"});delete e.click,this.element.addClass("k-menu-button"),uf.renderButton(this.element,e)},_aria:function(){var e=this.element,t=this.menu;e.attr("aria-haspopup",t?"menu":null),e.attr(u_,!t&&null),e.attr("aria-controls",t?t.list.attr("id"):null),e.attr(uv)||e.attr(uv,e.text()+" "+this.options.messages.labelSuffix)},_renderMenu:function(){var e=up({},this.options),t=uo("<div></div>");delete e.click,delete e.name,e.items.length&&(this.menu=t.appendTo(document.body).kendoButtonMenu(up({mainButton:this.element,toggleTarget:this.element,menuOpen:this.menuOpenHandler.bind(this),menuClose:this.menuCloseHandler.bind(this),menuClick:this._click.bind(this)},e)).data("kendoButtonMenu"))},menuOpenHandler:function(e){var t=um(this.element);this.trigger(uw,{target:this.element})?e.preventDefault():(e.sender.adjustPopupWidth(t),this.element.attr(u_,!0))},menuCloseHandler:function(e){this.trigger(uy,{target:this.element})?e.preventDefault():(this.element.attr(u_,!1),this.element.trigger(ux))},_attachEvents:function(){this.element.on("keydown"+uh,this._keydown.bind(this))},_click:function(e){var t=e.id,i=e.target,n=e.originalEvent;this.menu.close(),this.trigger(uk,{id:t,target:i,originalEvent:n})},_keydown:function(e){this.element.is(".k-disabled")&&(e.keyCode===uc.ENTER||e.keyCode===uc.SPACEBAR)&&e.preventDefault()},focus:function(){this.element.trigger(ux)},_enable:function(e,t){this.element.toggleClass("k-disabled",!e),e?this.element.removeAttr(ug):this.element.attr(ug,!e),t||this.element.attr(ub,!e)},enable:function(e,t,i){void 0===e&&(e=!0),t&&t.length?this.menu.enable(e,t):(this.options.enabled=e,this._enable(e,i),this.menu.enable(e))},hide:function(e){e&&e.length&&this.menu.hide(e)},show:function(e){e&&e.length&&this.menu.show(e)},open:function(){this.menu._popup.open()},close:function(){this.menu._popup.close()},items:function(){return this.menu.items()},setOptions:function(e){ud.fn.setOptions.call(this,e),(e.popup||e.items||e.size)&&(this.menu.destroy(),this._renderMenu()),this._mainButton(),this._aria()},destroy:function(){this.menu.destroy(),this.element.off(uh),ud.fn.destroy.call(this)}}),uu.plugin(uC),function(e,t){var i=window.kendo,n=i.Class,s=i.ui,a=s.Widget,o=i.isFunction,l=i.keys,d=i._outerWidth,h=".kendoToolBar",u="k-button",c="k-overflow-button",p="k-button-group",f="k-split-button",m="k-menu-button",g="k-separator",v="k-selected",_="k-disabled",b="k-hidden",k="k-force-hidden",w="k-overflow-hidden",y="k-overflow-anchor",x="k-overflow-container",C="k-toolbar-last-visible",T="k-split-button-arrow",S="k-toolbar-item",I="k-dropdownlist",D="k-colorpicker",F="k-focus",E="aria-disabled",A="aria-label",z="click",P="toggle",H="open",N="close",R="focus",O="keydown",M="spacer",B="both",L="primary",V="role",U="button",W="splitButton",j="dropDownButton",G="separator",q="overflow",K="next",$="tabindex",Y="template",Q="input",X="hidden",J="group",Z=":kendoFocusable",ee="overflowOpen",et="overflowClose",ei="never",en="auto",es="_optionlist",ea=i.attr("uid"),er="textItem";i.toolbar={};var eo={overflowAnchor:'<div tabindex="0" class="k-overflow-anchor k-button k-button-md k-rounded-md k-button-flat k-button-flat-base" title="More tools" role="button"></div>',overflowContainer:'<ul class="k-overflow-container k-list-container"></ul>'};i.toolbar.registerComponent=function(e,t,i){eo[e]={toolbar:t,overflow:i}};var el=i.Class.extend({addOverflowAttr:function(){this.element.attr(i.attr(q),this.options.overflow||en)},addUidAttr:function(){this.element.attr(ea,this.options.uid)},addIdAttr:function(){this.options.id&&this.element.attr("id",this.options.id)},addOverflowIdAttr:function(){this.options.id&&this.element.attr("id",this.options.id+"_overflow")},attributes:function(){var e,t=this.options.attributes;t&&(t.class&&(e=t.class,this.element.addClass(e),delete t.class),this.element.attr(t),t.class=e)},show:function(){this.element.removeClass(b),this.element.removeClass(k),this.options.hidden=!1},hide:function(){this.element.addClass(b),this.element.addClass(k),this.overflow&&this.overflowHidden&&this.overflowHidden(),this.options.hidden=!0},remove:function(){this.element.remove()},enable:function(e){void 0===e&&(e=!0),this.element.toggleClass(_,!e),this.element.attr(E,!e),this.options.enable=e},twin:function(){var t=this.element.attr(ea);return this.overflow&&this.options.splitContainerId?e("#"+this.options.splitContainerId).find("["+ea+"='"+t+"']").data(this.options.type):this.overflow?this.toolbar.element.find("["+ea+"='"+t+"']").data(this.options.type):this.toolbar.options.resizable?this.toolbar.popup.element.find("["+ea+"='"+t+"']").data(this.options.type):void 0}});i.toolbar.Item=el;var ed=el.extend({init:function(t,i){this.options=e.extend({},this.options,t),this.toolbar=i}});i.toolbar.BareItem=ed;var eh=el.extend({init:function(t,n){var s=t.useButtonTag?e("<button></button>"):e('<a role="button" href></a>');this.element=s,this.options=e.extend({},this.options,t),this.toolbar=n,this.attributes(),t.primary&&(this.options.themeColor=L),t.togglable&&(s.addClass("k-toggle-button"),this.toggle(t.selected)),void 0===t.url||t.useButtonTag||(s.attr("href",t.url),t.mobile&&s.attr(i.attr(V),U)),t.group&&(s.attr(i.attr(J),t.group),this.group=this.toolbar.addToGroup(this,t.group)),!t.togglable&&t.click&&o(t.click)&&(this.clickHandler=t.click),t.togglable&&t.toggle&&o(t.toggle)&&(this.toggleHandler=t.toggle)},options:{showIcon:B,showText:B},toggle:function(e,t){e=!!e,this.group&&e?this.group.select(this):this.group||this.select(e),t&&this.twin()&&this.twin().toggle(e)},getParentGroup:function(){if(this.options.isChild)return this.element.closest("."+p).data("buttonGroup")}});i.toolbar.Button=eh;var eu=eh.extend({init:function(e,t){eh.fn.init.call(this,e,t);var n=this.element;e=this.options,n.addClass(u),this.addIdAttr(),e.align&&n.addClass("k-align-"+e.align),e.text&&("toolbar"==e.showText||e.showText==B)?e.mobile?n.html('<span class="km-text">'+e.text+"</span>"):n.html(e.text):e.text&&n.attr(A,e.text),(e.icon||e.spriteCssClass||e.imageUrl)&&"toolbar"!==e.showIcon&&e.showIcon!==B&&(e.icon=null,e.spriteCssClass=null,e.imageUrl=null),i.html.renderButton(n,e),this.addUidAttr(),this.addOverflowAttr(),this.enable(e.enable),e.hidden&&this.hide(),this.element.data({type:U,button:this})},select:function(e){void 0===e&&(e=!1),this.options.togglable&&this.element.attr("aria-pressed",e),this.element.toggleClass(v,e),this.options.selected=e}});i.toolbar.ToolBarButton=eu;var ec=eh.extend({init:function(t,n){this.overflow=!0,eh.fn.init.call(this,e.extend({},t),n);var s=this.element;(t=this.options).text&&(t.showText==q||t.showText==B)?t.mobile?s.html('<span class="km-text">'+t.text+"</span>"):s.html(t.text):t.text&&s.attr(A,t.text),(t.icon||t.spriteCssClass||t.imageUrl)&&t.showIcon!==q&&t.showIcon!==B&&(t.icon=null,t.spriteCssClass=null,t.imageUrl=null),i.html.renderButton(s,t),t.isChild||this._wrap(),this.addOverflowIdAttr(),this.attributes(),this.addUidAttr(),this.addOverflowAttr(),this.enable(t.enable),s.addClass("k-overflow-button "+u),t.hidden&&this.hide(),t.togglable&&this.toggle(t.selected),this.element.data({type:U,button:this})},_wrap:function(){this.element=this.element.wrap('<li class="k-menu-item k-item">').parent()},overflowHidden:function(){this.element.addClass(w)},select:function(e){e===t&&(e=!1),this.options.isChild?this.element.toggleClass(v,e):this.element.find("."+u).toggleClass(v,e),this.options.selected=e}});i.toolbar.OverflowButton=ec,i.toolbar.registerComponent(U,eu,ec);var ep=el.extend({createButtons:function(t){for(var n=this.options,s=n.buttons||[],a=0;a<s.length;a++)s[a].uid||(s[a].uid=i.guid()),new t(e.extend({mobile:n.mobile,isChild:!0,type:U},s[a]),this.toolbar).element.appendTo(this.element)},refresh:function(){this.element.children().filter(":not('.k-hidden')").first().addClass("k-group-start"),this.element.children().filter(":not('.k-hidden')").last().addClass("k-group-end")}});i.toolbar.ButtonGroup=ep;var ef=ep.extend({init:function(t,i){var n=this.element=e("<div></div>");this.options=t,this.toolbar=i,this.addIdAttr(),t.align&&n.addClass("k-align-"+t.align),this.createButtons(eu),this.attributes(),this.addUidAttr(),this.addOverflowAttr(),this.refresh(),n.addClass(p),t.hidden&&this.hide(),this.element.data({type:"buttonGroup",buttonGroup:this})}});i.toolbar.ToolBarButtonGroup=ef;var em=ep.extend({init:function(t,i){var n=this.element=e("<li></li>");this.options=t,this.toolbar=i,this.overflow=!0,this.addOverflowIdAttr(),this.createButtons(ec),this.attributes(),this.addUidAttr(),this.addOverflowAttr(),this.refresh(),n.addClass((t.mobile?"":p)+" k-overflow-group"),this.element.data({type:"buttonGroup",buttonGroup:this})},overflowHidden:function(){this.element.addClass(w)}});i.toolbar.OverflowButtonGroup=em,i.toolbar.registerComponent("buttonGroup",ef,em);var eg=eu.extend({init:function(n,s){var a;a=(n=this.options=e.extend({},this.options,n)).url!==t?e(i.template('<a href="#:href#" class="k-link k-menu-link"><span class="k-menu-link-text">#:text#</span></a>')({href:n.url,text:n.text})):e(i.template('<span tabindex="0" class="k-link k-menu-link"><span class="k-menu-link-text">#:text#</span></span>')({text:n.text})),this.element=a,this.toolbar=s,n.click&&o(n.click)&&(this.clickHandler=n.click),n.togglable&&n.toggle&&o(n.toggle)&&(this.toggleHandler=n.toggle),n.imageUrl?e('<img alt="icon" class="k-image" />').prependTo(a).attr("src",n.imageUrl):n.icon?e("<span></span>").prependTo(a).attr("class","k-icon k-i-"+n.icon):n.spriteCssClass&&e('<span class="k-sprite"></span>').prependTo(a).addClass(n.spriteCssClass),this.addIdAttr(),this.addUidAttr(),this.addOverflowAttr(),this.attributes(),this.enable(n.enable),n.group&&(a.attr(i.attr(J),n.group),this.group=this.toolbar.addToGroup(this,n.group)),n.hidden&&this.hide(),this.element.data({type:U,button:this})}});i.toolbar.ToolBarMenuButton=eg;var ev=el.extend({init:function(t,i){this.options=e.extend({id:t.id||t.uid,enable:!0},t,{togglable:!1}),t.primary&&(this.options.themeColor=L),t.showIcon===q&&(this.options.icon=null),t.showText===q&&(this.options.text=""),this.toolbar=i,this.splitButton=new s.SplitButton(e("<button id='"+this.options.id+"'>"+this.options.text+"</button>"),e.extend({},this.options,{items:this._extend(t.menuButtons)}),i.options),this.element=this.splitButton.wrapper,this.splitButton.bind(z,i._buttonClick.bind(i)),this.splitButton.bind(N,this._close.bind(this)),this.splitButton.bind(H,this._open.bind(this)),this.splitButton.element.data({type:W,button:this,splitButton:this}),this.splitButton.wrapper.data({type:W,button:this,splitButton:this}),this.addOverflowAttr(),this.addUidAttr(),this.attributes(),this.addMenuAttributes(),!1===this.options.enable&&this.enable(this.options.enable),this.options.hidden&&this.hide()},_open:function(e){this.toolbar.trigger(H,{target:this.element})&&e.preventDefault()},_close:function(e){this.toolbar.trigger(N,{target:this.element})&&e.preventDefault(),this.splitButton.element.trigger(R)},_extend:function(t){var i=this;return t.map(function(t){var n=new ed(t,i.toolbar);return e.extend({},t,{togglable:!1,data:function(){return{type:U,button:n,splitButton:i}}})})},addMenuAttributes:function(){var t;this.splitButton.items().each(function(i,n){(t=(n=e(n)).data(U)).element=n,t.options=e.extend({type:U,enable:!0},t.options),t.addOverflowAttr(),t.addUidAttr()})},remove:function(){var e=this.splitButton.wrapper;this.splitButton.destroy(),e.remove()},enable:function(e,t){this.splitButton.enable(e,t,!0),this.twin()&&this.twin().enable(e)},attributes:function(){var e,t=this.splitButton.element,i=this.options.attributes;i&&(i.class&&(e=i.class,t.addClass(e),delete i.class),t.attr(i),i.class=e)}});i.toolbar.ToolBarSplitButton=ev;var e_=el.extend({init:function(t,i){var n,s=this.element=e('<li class="k-split-button"></li>'),a=t.menuButtons;this.options=e.extend({},t,{togglable:!1}),this.toolbar=i,this.overflow=!0,n=(t.id||t.uid)+es,this.mainButton=new ec(e.extend({isChild:!0},t,{togglable:!1})),this.mainButton.element.appendTo(s);for(var r=0;r<a.length;r++)new ec(e.extend({mobile:t.mobile,type:U,splitContainerId:n,isChild:!0},a[r],{click:t.click}),this.toolbar).element.appendTo(s);this.addUidAttr(),this.addOverflowAttr(),this.mainButton.main=!0,!1===this.options.enable&&this.enable(this.options.enable),s.data({type:W,splitButton:this})},enable:function(e){var i=this.element.add(this.element.find("."+c));e===t&&(e=!0),i.toggleClass(_,!e),i.attr(E,!e),this.options.enable=e},overflowHidden:function(){this.element.addClass(w)}});i.toolbar.OverflowSplitButton=e_,i.toolbar.registerComponent(W,ev,e_);var eb=el.extend({init:function(t,i){this.options=e.extend({id:t.id||t.uid,enable:!0},t,{togglable:!1}),t.primary&&(this.options.themeColor=L),t.showIcon===q&&(this.options.icon=null),t.showText===q&&(this.options.text=""),this.toolbar=i,this.dropDownButton=new s.DropDownButton(e("<button id='"+this.options.id+"'>"+this.options.text+"</button>"),e.extend({},this.options,{items:this._extend(t.menuButtons)}),i.options),this.element=this.dropDownButton.element,this.dropDownButton.bind(z,i._buttonClick.bind(i)),this.dropDownButton.bind(N,this._close.bind(this)),this.dropDownButton.bind(H,this._open.bind(this)),this.dropDownButton.element.data({type:j,button:this,dropDownButton:this}),this.addOverflowAttr(),this.addUidAttr(),this.attributes(),this.addMenuAttributes(),!1===this.options.enable&&this.enable(this.options.enable),this.options.hidden&&this.hide()},_open:function(e){this.toolbar.trigger(H,{target:this.element})&&e.preventDefault()},_close:function(e){this.toolbar.trigger(N,{target:this.element})&&e.preventDefault(),this.dropDownButton.element.trigger(R)},_extend:function(t){var i=this;return t.map(function(t){var n=new ed(t,i.toolbar);return e.extend({},t,{data:function(){return{type:U,button:n,dropDownButton:i}}})})},addMenuAttributes:function(){var t;this.dropDownButton.items().each(function(i,n){(t=(n=e(n)).data(U)).element=n,t.options=e.extend({type:U,enable:!0},t.options),t.addOverflowAttr(),t.addUidAttr()})},remove:function(){var e=this.dropDownButton.element;this.dropDownButton.destroy(),e.remove()},enable:function(e,t){this.dropDownButton.enable(e,t,!0),this.twin()&&this.twin().enable(e)},attributes:function(){var e,t=this.element,i=this.options.attributes;i&&(i.class&&(e=i.class,t.addClass(e),delete i.class),t.attr(i),i.class=e)}});i.toolbar.ToolBarSplitButton=ev;var ek=el.extend({init:function(t,i){var n=this.element=e("<span></span>");this.element=n,this.options=t,this.toolbar=i,this.overflow=!0,this.attributes(),this.addUidAttr(),this.addOverflowIdAttr(),!t.icon||t.showIcon&&"toolbar"===t.showIcon||n.append('<span class="k-icon k-i-'+t.icon+'"></span>'),"toolbar"!==t.showText&&n.append("<span>"+this.options.text+"</span>"),n.data({type:er,textItem:this})},overflowHidden:function(){this.element.addClass(w)}}),ew=el.extend({init:function(t,i){var n,s=this.element=e('<li class="k-split-button k-menu-button"></li>'),a=t.menuButtons;this.options=e.extend({},t,{togglable:!1}),this.toolbar=i,this.overflow=!0,n=(t.id||t.uid)+es,this.mainButton=new ek(e.extend({isChild:!0},t,{togglable:!1})),this.mainButton.element.appendTo(s);for(var r=0;r<a.length;r++)new ec(e.extend({mobile:t.mobile,type:U,splitContainerId:n,isChild:!0},a[r],{click:t.click}),this.toolbar).element.appendTo(s);this.addUidAttr(),this.addOverflowAttr(),this.mainButton.main=!0,!1===this.options.enable&&this.enable(this.options.enable),s.data({type:j,dropDownButton:this})},enable:function(e){var i=this.element.add(this.element.find("."+c));e===t&&(e=!0),i.toggleClass(_,!e),i.attr(E,!e),this.options.enable=e},overflowHidden:function(){this.element.addClass(w)}});i.toolbar.OverflowSplitButton=ew,i.toolbar.registerComponent(j,eb,ew);var ey=el.extend({init:function(t,i){var n=this.element=e("<div>&nbsp;</div>");this.element=n,this.options=t,this.toolbar=i,this.attributes(),this.addIdAttr(),this.addUidAttr(),this.addOverflowAttr(),n.addClass(g),n.attr(V,G),n.data({type:G,separator:this})}}),ex=el.extend({init:function(t,i){var n=this.element=e("<li>&nbsp;</li>");this.element=n,this.options=t,this.toolbar=i,this.overflow=!0,this.attributes(),this.addUidAttr(),this.addOverflowIdAttr(),n.addClass(g),n.attr(V,G),n.data({type:G,separator:this})},overflowHidden:function(){this.element.addClass(w)}});i.toolbar.registerComponent("separator",ey,ex);var eC=el.extend({init:function(t,i){var n=this.element=e("<div>&nbsp;</div>");this.element=n,this.options=t,this.toolbar=i,n.addClass("k-spacer"),n.data({type:M}),this.addOverflowAttr()}});i.toolbar.registerComponent(M,eC);var eT=el.extend({init:function(t,i,n){var s=o(t)?t(i):t;s=s instanceof r?s.wrap("<div class='k-toolbar-item' aria-keyshortcuts='Enter'></div>").parent():e("<div class='k-toolbar-item' aria-keyshortcuts='Enter'></div>").html(s),this.element=s,this.options=i,this.options.type=i.type||Y,this.toolbar=n,this.attributes(),this.addUidAttr(),this.addIdAttr(),this.addOverflowAttr(),i.hidden&&this.hide(),s.data({type:Y,template:this})}});i.toolbar.TemplateItem=eT;var eS=el.extend({init:function(t,i,n){var s=o(t)?e(t(i)):e(t);s=s instanceof r?s.wrap("<li></li>").parent():e("<li></li>").html(s),this.element=s,this.options=i,this.options.type=Y,this.toolbar=n,this.overflow=!0,this.attributes(),this.addUidAttr(),this.addOverflowIdAttr(),this.addOverflowAttr(),s.data({type:Y,template:this})},overflowHidden:function(){this.element.addClass(w)}});function eI(e){e.target.is(".k-toggle-button")||e.target.toggleClass(v,"press"==e.type)}function eD(t){e(t.target).closest("a.k-button").length&&t.preventDefault()}function eF(t,i){var n=i===K?e.fn.next:e.fn.prev,s=i===K?e.fn.first:e.fn.last,a=n.call(t);return!a.length&&t.is("."+y)?t:a.is(Z)||!a.length?a:a.find(Z).length?s.call(a.find(Z)):eF(a,i)}i.toolbar.OverflowTemplateItem=eS;var eE=n.extend({init:function(e){this.name=e,this.buttons=[]},add:function(e){this.buttons[this.buttons.length]=e},remove:function(t){var i=e.inArray(t,this.buttons);this.buttons.splice(i,1)},select:function(e){for(var t=0;t<this.buttons.length;t++)this.buttons[t].select(!1);e.select(!0),e.twin()&&e.twin().select(!0)}}),eA=a.extend({init:function(t,n){var s=this;if(a.fn.init.call(s,t,n),n=s.options,(t=s.wrapper=s.element).addClass("k-toolbar k-widget"),t.attr(V,"toolbar"),this.uid=i.guid(),this._isRtl=i.support.isRtl(t),this._groups={},t.attr(ea,this.uid),s.isMobile="boolean"==typeof n.mobile?n.mobile:s.element.closest(".km-root")[0],s.animation=s.isMobile?{open:{effects:"fade"}}:{},s.isMobile&&(t.addClass("km-widget"),u="km-button",p="km-buttongroup",v="km-state-active",_="km-state-disabled"),n.resizable?(s._renderOverflow(),t.addClass("k-toolbar-resizable"),s.overflowUserEvents=new i.UserEvents(s.element,{threshold:5,allowSelection:!0,filter:"."+y,tap:s._toggleOverflow.bind(s)}),s._resizeHandler=i.onResize(function(){s.resize()})):s.popup={element:e([])},n.items&&n.items.length){for(var r=0;r<n.items.length;r++)s.add(n.items[r]);n.resizable&&s._shrink(s.element.innerWidth())}s.userEvents=new i.UserEvents(document.documentElement,{threshold:5,allowSelection:!0,filter:"["+ea+"="+s.uid+"] a."+u+", ["+ea+"="+s.uid+"] ."+y+", ["+ea+"="+s.uid+"] ."+T+", ["+ea+"="+s.uid+"] ."+S+", ["+ea+"="+s.uid+"] ."+m,tap:s._buttonClick.bind(s),press:eI,release:eI}),s.element.on(z+h,"a.k-button",eD).on(O+h,s._keydown.bind(s)).on("focusin"+h,s._focusIn.bind(s)).on("focusout"+h,s._focusOut.bind(s)),s.options.resizable&&s.popup.element.on(z+h,NaN,eD),n.resizable&&(s.overflowAnchor.appendTo(s.wrapper),this._toggleOverflowAnchor()),s._tabIndex(),i.notify(s)},events:[z,P,H,N,ee,et],options:{name:"ToolBar",items:[],resizable:!0,mobile:null,navigateOnTab:!1},addToGroup:function(e,t){var i;return(i=this._groups[t]?this._groups[t]:this._groups[t]=new eE).add(e),i},destroy:function(){this.destroySplitButtons(),this.destroyDropDownButtons(),this.element.off(h,"a.k-button"),this.userEvents.destroy(),this.options.resizable&&(i.unbindResize(this._resizeHandler),this.overflowUserEvents.destroy(),this.popup.element.off(h,"a.k-button"),this.popup.destroy()),a.fn.destroy.call(this)},destroySplitButtons:function(){var t,i=this;i.element.find("."+f).each(function(n,s){(t=i._getItem(s))&&t.type===W&&(t=t.toolbar),t&&t.splitButton&&t.splitButton.destroy&&(t.splitButton.destroy(),e(s).remove())})},destroyDropDownButtons:function(){var t,i=this;i.element.find("."+m).each(function(n,s){(t=i._getItem(s))&&t.type===j&&(t=t.toolbar),t&&t.dropDownButton&&t.dropDownButton.destroy&&(t.dropDownButton.destroy(),e(s).remove())})},add:function(t){var n,s,a,r=eo[t.type],o=t.template,l=this.isMobile?"":"k-item",d=t.overflowTemplate;if(e.extend(t,{uid:i.guid(),animation:this.animation,mobile:this.isMobile,rootUid:this.uid}),t.menuButtons)for(var h=0;h<t.menuButtons.length;h++)e.extend(t.menuButtons[h],{uid:i.guid()});o&&!d||t.type===M?t.overflow=ei:t.overflow||(t.overflow=en),t.overflow!==ei&&this.options.resizable&&(d?s=new eS(d,t,this):r&&(s=new r.overflow(t,this)).element.addClass(l),s&&(t.overflow===en&&s.overflowHidden(),s.element.appendTo(this.popup.container),this.angular("compile",function(){return{elements:s.element.get()}}))),"always"!==t.overflow&&(o?(a=(n=new eT(o,t,this)).element.find("input,select"),!this.options.navigateOnTab&&a.length>0&&(n.element.attr($,0),a.attr($,-1))):r&&(n=new r.toolbar(t,this)),n&&(n.element.appendTo(this.element),this.angular("compile",function(){return{elements:n.element.get()}})))},_getItem:function(t){var i,n,s,a,r=this.options.resizable;return(i=this.element.find(t)).length||(i=e('[data-role="buttonmenu"]').find(t)),a=i.length?i.data("type"):"",(n=i.data(a))&&r?s=n.twin():r&&(a=(i=this.popup.element.find(t)).length?i.data("type"):"",s=i.data(a),a===er&&(a="dropDownButton",s=(i=i.parent("."+m)).data(a)),s&&s.main&&a!==er&&(a="splitButton",s=(i=i.parent("."+f)).data(a))),{type:a,toolbar:n,overflow:s}},remove:function(e){var t=this._getItem(e);t.toolbar&&t.toolbar.remove(),t.overflow&&t.overflow.remove(),this.resize(!0)},hide:function(e){var t,i=this._getItem(e);i.toolbar&&(i.toolbar.options.type===U&&i.toolbar.options.isChild?(t=i.toolbar.getParentGroup(),i.toolbar.hide(),t&&t.refresh()):i.toolbar.options.hidden||i.toolbar.hide()),i.overflow&&(i.overflow.options.type===U&&i.overflow.options.isChild?(t=i.overflow.getParentGroup(),i.overflow.hide(),t&&t.refresh()):i.overflow.options.hidden||i.overflow.hide()),this.resize(!0)},show:function(e){var t,i=this._getItem(e);i.toolbar&&(i.toolbar.options.type===U&&i.toolbar.options.isChild?(t=i.toolbar.getParentGroup(),i.toolbar.show(),t&&t.refresh()):i.toolbar.options.hidden&&i.toolbar.show()),i.overflow&&(i.overflow.options.type===U&&i.overflow.options.isChild?(t=i.overflow.getParentGroup(),i.toolbar.show(),t&&t.refresh()):i.overflow.options.hidden&&i.overflow.show()),this.resize(!0)},enable:function(e,t){var i=this._getItem(e);void 0===t&&(t=!0),i.toolbar&&i.toolbar.enable(t,i.element),i.overflow&&i.overflow.enable(t)},getSelectedFromGroup:function(e){return this.element.find(".k-toggle-button[data-group='"+e+"']").filter("."+v)},toggle:function(i,n){var s=e(i).data(U);s.options.togglable&&(n===t&&(n=!0),s.toggle(n,!0))},_renderOverflow:function(){var t,n=this,s=eo.overflowContainer,a=n._isRtl,r=a?"left":"right";n.overflowAnchor=e(eo.overflowAnchor).addClass(u),n.element.append(n.overflowAnchor),n.isMobile?(n.overflowAnchor.append('<span class="km-icon km-more"></span>'),s=(t=e(t=s)).hasClass("km-actionsheet")?t.closest(".km-popup-wrapper"):t.addClass("km-widget km-actionsheet").wrap('<div class="km-actionsheet-wrapper km-actionsheet-tablet km-widget km-popup"></div>').parent().wrap('<div class="km-popup-wrapper k-popup"></div>').parent()):n.overflowAnchor.append('<span class="k-icon k-i-more-vertical"></span>'),n.popup=new i.ui.Popup(s,{origin:"bottom "+r,position:"top "+r,anchor:n.overflowAnchor,isRtl:a,animation:n.animation,appendTo:n.isMobile?e(n.isMobile).children(".km-pane"):null,copyAnchorStyles:!1,open:function(t){var s=i.wrap(n.popup.element).addClass("k-overflow-wrapper");n.isMobile?n.popup.container.css("max-height",parseFloat(e(".km-content:visible").innerHeight())-15+"px"):s.css("margin-left",(a?-1:1)*((d(s)-s.width())/2+1)),n.trigger(ee)&&t.preventDefault()},activate:function(){this.element.find(Z).first().trigger(R)},close:function(e){n.trigger(et)&&e.preventDefault(),this.element.trigger(R)}}),n.popup.element.on(O+h,"."+u,function(t){var i=e(t.target),s=i.parent(),a=s.is("."+p)||s.is("."+f);t.preventDefault(),t.keyCode===l.ESC||t.keyCode===l.TAB||t.altKey&&t.keyCode===l.UP?(n._toggleOverflow(),n.overflowAnchor.trigger(R)):t.keyCode===l.DOWN?eF(!a||a&&i.is(":last-child")||a&&!i.next().is(Z)?s:i,K).trigger(R):t.keyCode===l.UP?eF(!a||a&&i.is(":first-child")||a&&!i.prev().is(Z)?s:i,"prev").trigger(R):t.keyCode!==l.SPACEBAR&&t.keyCode!==l.ENTER||e(t.target).is("."+_)?t.keyCode===l.HOME?s.parent().find(Z).first().trigger(R):t.keyCode===l.END&&s.parent().find(Z).last().trigger(R):(n.userEvents.trigger("tap",{target:e(t.target)}),n.overflowAnchor.trigger(R))}),n.isMobile?n.popup.container=n.popup.element.find("."+x):n.popup.container=n.popup.element,n.popup.container.attr(ea,this.uid)},_toggleOverflowAnchor:function(){var e=this._isRtl?"padding-left":"padding-right";(this.options.mobile?this.popup.element.find("."+x).children(":not(.k-overflow-hidden, .k-popup)").length>0:this.popup.element.children(":not(.k-overflow-hidden, .k-popup)").length>0)?(this.overflowAnchor.css({visibility:"visible",width:""}),this.wrapper.css(e,this.overflowAnchor.outerWidth(!0))):(this.overflowAnchor.css({visibility:X,width:"1px"}),this.wrapper.css(e,""))},_buttonClick:function(t){var i,n,s,a,r,l=e(t.target);0===l.closest(".k-toolbar-item").length&&t.preventDefault(),l.hasClass(m)||l.hasClass(y)?this._resetTabIndex(l):l.hasClass(T)?this._resetTabIndex(l.prev()):l.hasClass(S)?(r=l.find("input,select,."+I)).length>0&&this._resetTabIndex(r.first()):(l.data(W)||(l=e(t.target).closest("."+u+",.k-menu-link",this.element)),(i=l.data(U))&&!l.hasClass("k-menu-item")&&this._resetTabIndex(l),!i&&this.popup&&(i=(l=e(t.target).closest("."+c,this.popup.container)).parent("li").data(U)),i&&i.options.enable&&(i.options.togglable?(n=o(i.toggleHandler)?i.toggleHandler:null,i.toggle(!i.options.selected,!0),s={target:l,group:i.options.group,checked:i.options.selected,id:i.options.id,item:i},n&&n.call(this,s),this.trigger(P,s)):(n=o(i.clickHandler)?i.clickHandler:null,s={sender:this,target:l,id:i.options.id,item:i},n&&n.call(this,s),this.trigger(z,s)),i.options.url&&(i.options.attributes&&i.options.attributes.target&&(a=i.options.attributes.target),window.open(i.options.url,a||"_self")),l.hasClass(c)&&this.popup.close()))},_focusOut:function(e){this.wrapper.find("."+u+"."+F).removeClass(F)},_focusIn:function(t){var i=e(t.target);i.closest("."+u).length>0&&i.closest("."+u).addClass(F)},_keydown:function(t){var n,s,a,r,o,d=e(t.target),h=t.keyCode,u=this._getItems(),c=this._isRtl?-1:1,p=d.closest(".k-toolbar-item");if(t.altKey&&h===l.DOWN)e(document.activeElement).is("."+y)&&this._toggleOverflow();else if(this.options.navigateOnTab||h!==l.ENTER||!d.hasClass(S)){if(!this.options.navigateOnTab&&h===l.ESC&&p.length>0){if(r=p.find("[data-role]"),a=p.find(":kendoFocusable:not('.k-input-button'),."+I),r.length>0&&(o=i.widgetInstance(r))){if(o.popup&&o.popup.visible())return;p.attr($,0),p.trigger(R),p.find(Z).attr($,-1)}a.length>0&&(p.attr($,0),p.trigger(R),a.attr($,-1))}else if(h!==l.SPACEBAR&&h!==l.ENTER||d.is("input,checkbox,button")){if(h===l.HOME){if(d.is("."+I)||d.is(Q))return;this._resetTabIndex(u.first()),u.first().trigger(R),t.preventDefault()}else if(h===l.END){if(d.is("."+I)||d.is(Q))return;0===(n=u.last()).width()&&(n=u.eq(u.length-2)),this._resetTabIndex(n),n.trigger(R),t.preventDefault()}else this.options.navigateOnTab||h!==l.RIGHT||d.is("input:not([type=file]),select,.k-dropdownlist,."+D)||!this._getNextElement(t.target,1*c)?this.options.navigateOnTab||h!==l.LEFT||d.is("input:not([type=file]),select, .k-dropdownlist,."+D)||!this._getNextElement(t.target,-1*c)||(s=e(this._getNextElement(t.target,-1*c)),this._resetTabIndex(s),s.trigger(R),t.preventDefault()):(s=e(this._getNextElement(t.target,1*c)),this._resetTabIndex(s),s.trigger(R),t.preventDefault())}else h===l.SPACEBAR&&(t.preventDefault(),this.userEvents.trigger("tap",{target:d}))}else(a=d.find(":kendoFocusable:not('.k-input-button'),."+I)).length>0&&(d.attr($,-1),a.attr($,0),a.first().trigger(R))},_getNextElement:function(e,t){var i=this._getItems(),n=-1===i.index(e)?i.index(e.parentElement):i.index(e),s=i[n+t];return s||(s=-1===t?i.last():i.first()),s},_getItems:function(){return this.wrapper.find(":kendoFocusable,.k-toolbar-item,.k-overflow-anchor,.k-switch").filter(function(){var t=e(this);return!t.hasClass("k-hidden")&&(!t.hasClass(y)||t.css("visibility")!==X)&&(!t.hasClass(S)||0!==t.find("input:visible,.k-picker,.k-input").length)&&!(!t.hasClass(S)&&t.closest(".k-toolbar-item").length>0)&&!t.hasClass("k-input-button")&&!t.hasClass(T)})},_toggle:function(t){var i=e(t.target).closest("."+f).data("splitButton");t.preventDefault(),i.options.enable&&i.toggle()},_toggleOverflow:function(){this.popup.toggle()},_resize:function(e){var t=e.width;this.options.resizable&&(this.popup.close(),this._shrink(t),this._stretch(t),this._markVisibles(),this._toggleOverflowAnchor())},_childrenWidth:function(){var t=0,i=parseInt(this.element.css("gap"),10)||0;return this.element.children(":visible:not(.k-spacer)").each(function(){t+=d(e(this),!0)+i}),Math.ceil(t)},_shrink:function(e){var t,i,n;if(e<this._childrenWidth())for(var s=(i=this.element.children(":visible:not([data-overflow='never'], .k-overflow-anchor)")).length-1;s>=0&&(t=i.eq(s),!(e>this._childrenWidth()));s--)(n=t.find("[tabindex=0]")).length>0&&(n.attr($,-1),this.element.children("."+y).attr($,0)),this._hideItem(t)},_stretch:function(e){var t,i;if(e>this._childrenWidth()){i=this.element.children(".k-hidden:not(.k-force-hidden)");for(var n=0;n<i.length&&(t=i.eq(n),!(e<this._childrenWidth())&&this._showItem(t,e));n++);}},_hideItem:function(e){e.addClass(b),this.popup&&this.popup.container.find(">li[data-uid='"+e.data("uid")+"']").removeClass(w)},_showItem:function(e,t){var i=parseInt(this.element.css("gap"),10)||0;e.removeClass(b);var n=d(e,!0)+i;return e.addClass(b),!!(e.length&&t>this._childrenWidth()+n)&&(e.removeClass(b),!0!==this.options.navigateOnTab&&e.find(Z).attr($,-1),this.popup&&this.popup.container.find(">li[data-uid='"+e.data("uid")+"']").addClass(w),!0)},_markVisibles:function(){var e=this.popup.container.children(),t=this.element.children(":not(.k-overflow-anchor)"),i=e.filter(":not(.k-overflow-hidden)"),n=t.filter(":visible");e.add(t).removeClass("k-toolbar-first-visible "+C),i.first().add(n.first()).addClass("k-toolbar-first-visible"),i.last().add(n.last()).addClass(C)},_resetTabIndex:function(e){!0!==this.options.navigateOnTab&&(this.wrapper.find(Z).attr($,-1),e.attr($,0))},_tabIndex:function(){var e=this.wrapper.find(":kendoFocusable:not('[tabindex=-1]')"),t=e.first();!0!==this.options.navigateOnTab&&(e.attr($,-1),t.attr($,0))}});i.ui.plugin(eA)}(window.kendo.jQuery),uT=window.kendo.jQuery,uD=(uI=window.kendo).ui,uF=".kendoSwitch",uE=uD.Widget,uA=uI.support,uz="change",uP={widget:"k-switch",track:"k-switch-track",thumbWrapper:"k-switch-thumb-wrap",thumb:"k-switch-thumb",checked:"k-switch-on",checkedLabel:"k-switch-label-on",unchecked:"k-switch-off",uncheckedLabel:"k-switch-label-off",disabled:"k-disabled",readonly:"k-readonly",active:"k-active"},uH="disabled",uN="aria-disabled",uR="readonly",uO="aria-readonly",uM="aria-hidden",uB="checked",uL=uA.click+uF,uV=uA.pointers?"pointerup":"touchend",uU=uI.template('<span class="#=styles.widget#" role="switch"></span>'),uW=uI.template("<span class='#=styles.track#'><span class='#=styles.checkedLabel#'>#=checked#</span><span class='#=styles.uncheckedLabel#'>#=unchecked#</span></span>"),uj=uI.template("<span class='#=styles.thumbWrapper#'><span class='#=styles.thumb#'></span></span>"),uG=uE.extend({init:function(e,t){uE.fn.init.call(this,e,t),this._wrapper(),this._initSettings(),this._aria(),this._attachEvents(),uI.notify(this,uI.ui)},_wrapper:function(){var e=this.options,t=this.element[0],i=uT(uU({styles:uP}));t.type="checkbox",this.wrapper=this.element.wrap(i).parent(),this.wrapper[0].style.cssText=this.element[0].style.cssText,this.element.hide(),this.wrapper.append(uT(uW({styles:uP,checked:e.messages.checked,unchecked:e.messages.unchecked}))).append(uT(uj({styles:uP}))).addClass(t.className).removeClass("input-validation-error"),this.options.rounded=this.options.trackRounded,this._applyCssClasses(),this._applyRoundedClasses()},_applyRoundedClasses:function(e){var t=this.options,i=uI.cssProperties.getValidClass({widget:t.name,propName:"rounded",value:t.trackRounded}),n=uI.cssProperties.getValidClass({widget:t.name,propName:"rounded",value:t.thumbRounded});e=e||"addClass",this.wrapper.find("."+uP.track)[e](i),this.wrapper.find("."+uP.thumb)[e](n)},_attachEvents:function(){this.wrapper.on(uL,this._click.bind(this)).on(uV,this._touchEnd.bind(this)).on("keydown.kendoSwitch",this._keydown.bind(this))},setOptions:function(e){var t=e.messages;this._clearCssClasses(e),this._applyRoundedClasses("removeClass"),this.options=uT.extend(this.options,e),t&&void 0!==t.checked&&this.wrapper.find("."+uP.checkedLabel).text(t.checked),t&&t.unchecked!==uS&&this.wrapper.find("."+uP.uncheckedLabel).text(t.unchecked),e.width&&this.wrapper.css({width:e.width}),e.enabled!==uS&&this.enable(e.enabled),e.readonly!==uS&&this.readonly(e.readonly),this.check(e.checked),this.options.rounded=this.options.trackRounded,this._applyCssClasses(),this._applyRoundedClasses()},_initSettings:function(){var e=this.element[0],t=this.options;t.enabled&&this._tabindex(),t.width&&this.wrapper.css({width:t.width}),null===t.checked&&(t.checked=e.checked),this.check(t.checked),t.enabled=t.enabled&&!this.element.attr(uH),this.enable(t.enabled),t.readonly=t.readonly||!!this.element.attr(uR),this.readonly(t.readonly)},_aria:function(){var e=this.element,t=this.wrapper,i=e.attr("id"),n=uT('label[for="'+i+'"]'),s=e.attr("aria-label"),a=e.attr("aria-labelledby");if(s)t.attr("aria-label",s);else if(a)t.attr("aria-labelledby",a);else if(n.length){var r=n.attr("id");r||(r=(i||uI.guid())+"_label",n.attr("id",r)),t.attr("aria-labelledby",r)}},events:[uz],options:{name:"Switch",messages:{checked:"On",unchecked:"Off"},width:null,checked:null,enabled:!0,readonly:!1,size:"medium",rounded:"full",trackRounded:"full",thumbRounded:"full"},check:function(e){var t=this.element[0];if(e===uS)return t.checked;t.checked!==e&&(this.options.checked=t.checked=e),this.wrapper.attr("aria-checked",e).toggleClass(uP.checked,e).toggleClass(uP.unchecked,!e).find("[aria-hidden='true']").removeAttr(uM),e?(this.element.attr(uB,uB),this.wrapper.find("."+uP.uncheckedLabel).attr(uM,!0)):(this.element.prop(uB,!1),this.wrapper.find("."+uP.checkedLabel).attr(uM,!0))},value:function(e){return"string"==typeof e?e="true"===e:null===e&&(e=!1),this.check.apply(this,[e])},destroy:function(){uE.fn.destroy.call(this),this.wrapper.off(uF)},toggle:function(){this.check(!this.element[0].checked)},enable:function(e){var t=this.element,i=this.wrapper;void 0===e&&(e=!0),this.options.enabled=e,e?(t.prop(uH,!1),i.removeAttr(uN)):(t.attr(uH,uH),i.attr(uN,!0)),i.toggleClass(uP.disabled,!e)},readonly:function(e){var t=this.element,i=this.wrapper;void 0===e&&(e=!0),this.options.readonly=e,e?(t.attr(uR,!0),i.attr(uO,!0)):(t.prop(uR,!1),i.removeAttr(uO)),i.toggleClass(uP.readonly,e)},_check:function(){var e=this.element[0].checked=!this.element[0].checked;this.wrapper.trigger("focus"),!this.options.enabled||this.options.readonly||this.trigger(uz,{checked:e})?this.element[0].checked=!e:this.check(e)},_keydown:function(e){e.keyCode===uI.keys.SPACEBAR&&(this._check(),e.preventDefault())},_isTouch:function(e){return/touch/.test(e.type)||e.originalEvent&&/touch/.test(e.originalEvent.pointerType)},_click:function(e){this._isTouch(e)||1!==e.which||this._check()},_touchEnd:function(e){this._isTouch(e)&&(this._check(),e.preventDefault())}}),uI.cssProperties.registerPrefix("Switch","k-switch-"),uI.cssProperties.registerValues("Switch",[{prop:"rounded",values:uI.cssProperties.roundedValues.concat([["full","full"]])}]),uD.plugin(uG),function(e,t){var i=window.kendo,n=i.ui,s=n.Widget,a=i.keys,r=i.template,o=".kendoButtonGroup",l="k-icon-button",d="k-selected",h="k-disabled",u="select",c=i.support.browser.msie,p={item:r('<span #= item.enabled === false ? "disabled" : "" # >#= icon(iconClass) ##= image(item) ## if(!!text) { #<span class="k-button-text"> #= text # </span># } #</span>'),image:r('<img alt="icon" src="#=data.imageUrl#" class="k-button-icon"/>'),icon:r('<span class="k-button-icon #=data#"></span>'),empty:r("")};function f(t,i){var s;null!=t&&(t.constructor!==Object&&(t={text:t}),void 0!==t.position&&""!==t.position||(t.position="edge",void 0!==t.align&&""!==t.align||(t.align="top end")),t._classNames=["k-button-badge"],i.addClass("k-badge-container"),s=e("<span />").appendTo(i),i.badge=new n.Badge(s,t))}var m=s.extend({init:function(t,i){var n=this;s.fn.init.call(n,t,i),n.wrapper=n.element,n.options.items&&n._renderItems(n.options.items),n.selectedIndices=[],n.element.addClass("k-widget k-button-group").attr("role","group").attr("tabindex",n.element.attr("tabindex")||"0").children().each(function(){var t=e(this);n._updateClasses.bind(n)(t)}),n._enable=!0,n.options.enable&&n.options.enabled||(n._enable=!1,n.element.attr("aria-disabled",!0).addClass(h),n.element.children().addClass(h)),n.select(n.options.index),n._attachEvents()},events:[u],options:{name:"ButtonGroup",selection:"single",index:-1,enable:!0,enabled:!0},current:function(){return this.element.find("."+d)},_attachEvents:function(){this.element.on("click"+o,".k-button",this._click.bind(this)).on("focus"+o,this._focus.bind(this)).on("focusout"+o,this._focusout.bind(this)).on("keydown"+o,this._keyDown.bind(this)).on("mousedown"+o,this._mouseDown.bind(this))},_renderItems:function(t){var n=this;t.forEach(function(t){var s=e(p.item({image:t.imageUrl?p.image:p.empty,icon:!t.imageUrl&&(t.iconClass||t.icon)?p.icon:p.empty,iconClass:t.iconClass||"k-icon k-i-"+t.icon,item:t,text:t.text?!1===t.encoded?t.text:i.htmlEncode(t.text):""}));t.attributes&&s.attr(t.attributes),t.selected&&s.addClass(d),(t.iconClass||t.icon||t.imageUrl)&&!t.text&&s.addClass(l),t.badge&&f(t.badge,s),s.appendTo(n.element)})},_mouseDown:function(e){var t=e.clientX,i=e.clientY;document.elementFromPoint(t,i)!==this.element[0]&&(this.preventFocus=!0,this.preventFocusOut=!0),c&&this._focus()},_focus:function(){var t=e(this.element);t.removeAttr("tabindex"),t.find("[role='button']").attr("tabindex","0"),this.preventFocus?this.preventFocus=!1:t.find("."+d).length?t.find("."+d).first().trigger("focus"):t.children().first().trigger("focus")},_focusout:function(){var e=this.wrapper;this.preventFocusOut?this.preventFocusOut=!1:setTimeout(function(){e[0].contains(document.activeElement)||(e.attr("tabindex","0"),e.find("[role='button']").removeAttr("tabindex"))})},_keyDown:function(t){var n=e(this.element),s=n.find(".k-button"),r=n.find(":focus"),o=s.index(r),l=i.support.isRtl(this.element);t.keyCode===a.LEFT&&!l||t.keyCode===a.RIGHT&&l?((0===o?s.eq(s.length-1):e(s[o-1])).trigger("focus"),t.preventDefault()):t.keyCode===a.LEFT&&l||t.keyCode===a.RIGHT&&!l?((o+1===s.length?s.eq(0):e(s[o+1])).trigger("focus"),t.preventDefault()):t.keyCode!==a.ENTER&&t.keyCode!==a.SPACEBAR||(this._select(r),t.preventDefault())},select:function(i){var n,s=-1;i!==t&&-1!==i&&("number"==typeof i?(s=i,i=this.element.children().eq(i)):i.nodeType&&(s=(i=e(i)).index()),"multiple"===this.options.selection?(n="true"===i.attr("aria-pressed"),i.attr("aria-pressed",!n).toggleClass(d),-1===this.selectedIndices.indexOf(s)?this.selectedIndices.push(s):this.selectedIndices.splice(this.selectedIndices.indexOf(s),1)):(this.selectedIndices=[],this.current().attr("aria-pressed",!1).removeClass(d),i.attr("aria-pressed",!0).addClass(d),this.selectedIndices.push(s)))},badge:function(e,t){var n,s=this.element,a=isNaN(e)?s.find(e):s.children().eq(e),r=t||0===t;if(a.length){if(!(n=a.children(".k-badge").eq(0).data("kendoBadge"))&&r)return f({text:i.htmlEncode(t)},a),i.htmlEncode(t);if(r)n.text(i.htmlEncode(t));else if(!1===t)return n.element.empty().remove(),void n.destroy();return n?n.text():null}},enable:function(e){void 0===e&&(e=!0),this.element.attr("aria-disabled",!e).toggleClass(h,!e),this.element.children().toggleClass(h,!e),this._enable=this.options.enable=e},destroy:function(){this.element.off(o),this.element.find(".k-badge").each(function(){e(this).data("kendoBadge").destroy()}),s.fn.destroy.call(this)},_updateClasses:function(t){var n=i.attrValue(t,"icon"),s=i.attrValue(t,"badge"),a=t.find("img").addClass("k-image"),r=!0;t.attr("aria-pressed",!1).attr("role","button").addClass("k-button").addClass("k-button-md k-rounded-md k-button-solid k-button-solid-base"),(t.is("[disabled]")||t.hasClass(h))&&t.addClass(h).attr("aria-disabled",!0).removeAttr("disabled"),t.is("."+d)&&(t.removeClass(d),(t.hasClass(h)||"single"!==this.options.selection)&&"multiple"!==this.options.selection||this.select(t[0])),!a[0]&&n&&t.prepend(e(p.icon("k-icon k-i-"+n))),t.contents().filter(function(){return!e(this).hasClass("k-icon")&&!e(this).hasClass("k-image")}).each(function(){(1==this.nodeType||3==this.nodeType&&i.trim(this.nodeValue).length>0)&&(r=!1)}),(a[0]||n)&&r&&t.addClass(l),(s||0===s)&&f(s,t)},_click:function(t){var i=e(t.target).closest(".k-button");t.isDefaultPrevented()||(t.target.focus(),this._select(i))},_select:function(e){this._enable&&!e.is("."+h)&&(this.select(e[0]),this.trigger(u,{indices:this.selectedIndices}))}});n.plugin(m)}(window.kendo.jQuery)},s=[i(9755)],void 0!==(a=n.apply(t,s))&&(e.exports=a),e.exports=kendo}}]);